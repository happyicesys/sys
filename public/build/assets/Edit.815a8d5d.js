import{g as c,T as y,K as h,h as $,f as _,a as r,u as i,w as l,F as O,o as m,Z as B,b as t,d as u,t as f,l as v,e as N,c as g}from"./app.22024b75.js";import{_ as U}from"./Authenticated.e180151e.js";import{_ as V}from"./Button.3595528b.js";import{_ as C}from"./DatePicker.68b46e51.js";import{_ as x}from"./FormInput.fb6bf156.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.78dcfd75.js";import{r as M}from"./ArrowUturnLeftIcon.c6d6a1c5.js";import{r as F}from"./ArrowUturnDownIcon.a9ce7c07.js";import{r as S}from"./CheckCircleIcon.77d2fe80.js";import"./open-closed.75f003c6.js";import"./use-resolve-button-type.515d6989.js";import"./RectangleStackIcon.c72171b9.js";import"./main.824c4177.js";const j={class:"font-semibold text-xl text-gray-800 leading-tight"},E={key:0},T={key:1},H=t("br",null,null,-1),I={key:2},K=t("br",null,null,-1),q={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},A={class:"mt-6 flex flex-col"},P={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},R={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},Z={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},z={class:"sm:col-span-6"},G={class:"sm:col-span-6"},J={class:"sm:col-span-3"},L={class:"sm:col-span-3"},Q={class:"sm:col-span-6"},W={class:"sm:col-span-6"},X={class:"flex space-x-1 mt-5 justify-end"},Y=t("span",null," Back ",-1),ee=t("span",null," Unbind ",-1),te=t("span",null," Save ",-1),fe={__name:"Edit",props:{adminCustomerOptions:Object,operatorOptions:Object,vend:Object,type:String},setup(a){const d=a,w=c([]);c([]);const e=c(y(k()));c(!1);const D=c([]),b=c("");h().props.auth.operatorCountry,h().props.auth.operatorRole;const p=h().props.auth.permissions;c(moment().format("HH:mm:ss")),$(()=>{d.type=="create"?b.value="Create New":b.value="Edit",w.value=d.adminCustomerOptions.map(n=>({id:n.id,full_name:n.cust_id+" - "+n.company})),D.value=[{id:"all",full_name:"All"},...d.operatorOptions.data.map(n=>({id:n.id,full_name:n.full_name}))],e.value=d.vend?y(d.vend):y(k()),e.value.name=d.vend.customer_code?d.vend.customer_code+"    "+d.vend.customer_name:d.vend.name});function k(){return{name:"",begin_date:"",serial_num:"",termination_date:"",private_key:""}}return(n,s)=>(m(),_(O,null,[r(i(B),{title:"VM Management"}),r(U,null,{header:l(()=>[t("h2",j,[u(f(b.value)+" Vending Machine ",1),a.type=="update"?(m(),_("span",E,f(a.vend.code),1)):v("",!0),a.vend.customer_name?(m(),_("span",T,[H,u(" "+f(a.vend.customer_code)+" - "+f(a.vend.customer_name),1)])):!a.vend.customer_name&&a.vend.name?(m(),_("span",I,[K,u(" "+f(a.vend.name),1)])):v("",!0)])]),default:l(()=>[t("div",q,[t("div",A,[t("div",P,[t("div",R,[t("form",{onSubmit:s[8]||(s[8]=N((...o)=>n.submit&&n.submit(...o),["prevent"])),id:"submit"},[t("div",Z,[t("div",z,[r(x,{modelValue:e.value.code,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.code=o),error:e.value.errors.code,required:"true",disabled:a.vend.code},{default:l(()=>[u(" Code ")]),_:1},8,["modelValue","error","disabled"])]),t("div",G,[r(x,{modelValue:e.value.name,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.name=o),error:e.value.errors.name,disabled:a.vend.customer_code&&a.vend.customer_name},{default:l(()=>[u(" Name ")]),_:1},8,["modelValue","error","disabled"])]),t("div",J,[i(p).includes("update vends")?(m(),g(C,{key:0,modelValue:e.value.begin_date,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.begin_date=o),error:e.value.errors.begin_date,onInput:s[3]||(s[3]=o=>n.onDateFromChanged())},{default:l(()=>[u(" Begin Date (Default is the Creation/ First Invoice Date) ")]),_:1},8,["modelValue","error"])):v("",!0)]),t("div",L,[i(p).includes("update vends")?(m(),g(C,{key:0,modelValue:e.value.termination_date,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.termination_date=o),error:e.value.errors.termination_date,minDate:e.value.begin_date},{default:l(()=>[u(" Termination Date (Default is the Unbinding Date from CMS, status change) ")]),_:1},8,["modelValue","error","minDate"])):v("",!0)]),t("div",Q,[r(x,{modelValue:e.value.private_key,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.private_key=o),error:e.value.errors.private_key,disabled:!i(p).includes("update vends")},{default:l(()=>[u(" Private Key ")]),_:1},8,["modelValue","error","disabled"])])]),t("div",W,[t("div",X,[r(V,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:s[6]||(s[6]=o=>n.$emit("modalClose")),form:"submit"},{default:l(()=>[r(i(M),{class:"w-4 h-4"}),Y]),_:1}),a.vend.latestVendBinding&&a.vend.latestVendBinding.customer&&i(p).includes("update vends")?(m(),g(V,{key:0,type:"button",class:"bg-yellow-500 hover:bg-yellow-600 text-white flex space-x-1",onClick:s[7]||(s[7]=o=>n.unbindCustomer(e.value.id))},{default:l(()=>[r(i(F),{class:"w-4 h-4"}),ee]),_:1})):v("",!0),i(p).includes("update vends")?(m(),g(V,{key:1,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:l(()=>[r(i(S),{class:"w-4 h-4"}),te]),_:1})):v("",!0)])])],32)])])])])]),_:1})],64))}};export{fe as default};
