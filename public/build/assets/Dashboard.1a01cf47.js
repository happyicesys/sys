import{g as i,Q as z,a6 as ge,f as l,a as y,u as c,w as D,F as f,o as r,Z as ve,b as e,c as O,l as b,M as le,d as S,e as xe,t as m,k as x,O as H,n as G,U as be}from"./app.23f69410.js";import{_ as we}from"./Authenticated.c333a0a9.js";import{_ as F}from"./Button.e02061ca.js";import{_ as J}from"./Graph.244f83d6.js";import{_ as Q}from"./MultiSelect.0de761bc.js";import{_ as ne}from"./SearchInput.7dad337f.js";import{r as De,a as ke}from"./ChevronDoubleUpIcon.6e8ba4f3.js";import{r as Se}from"./MagnifyingGlassIcon.c46b9c8c.js";import{r as Oe}from"./BackspaceIcon.1bcb07c1.js";import"./keyboard.0c05cab2.js";import"./use-resolve-button-type.8f594bcf.js";import"./RectangleStackIcon.86791b6c.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.b143ea91.js";const Ge=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),Ce={class:"p-3"},Ne={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},Ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},je={class:"p-4"},Me=e("span",null," Show Filters ",-1),Be={key:0,class:"p-4 mx-2"},Te={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Fe=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Je={key:0},Ae=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),$e={key:1},Le=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),Re=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Ke={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},Ue={class:"mt-3"},Pe={class:"flex space-x-1"},Ze=e("span",null," Search ",-1),Ee=e("span",null," Reset ",-1),ze=e("span",null," Hide Filters ",-1),He={class:"p-1 py-4 bg-white border-b border-gray-200 flex flex-col space-y-6"},Qe={class:"text-center p-2"},Ye={class:"flex flex-col md:flex-row pt-5"},qe={class:"md:basis-1/3 m-1"},We={class:"md:basis-2/3 my-1 mx-4 px-4"},Xe={class:"text-sm flex justify-between"},Ie=e("div",null," Past 30 Days - Top 10 Best Performance ",-1),et={class:"mt-2 flow-root"},tt={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},st={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},at={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},ot={class:"min-w-full divide-y divide-gray-300"},rt={class:"bg-gray-50"},lt=e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # ",-1),nt=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine ",-1),it={scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"},ct=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ",-1),dt={class:"divide-y divide-gray-200 bg-white"},ut={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},pt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},mt={key:0},yt=e("br",null,null,-1),ht={key:1},_t=e("br",null,null,-1),ft={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},gt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},vt={key:0},xt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),bt=[xt],wt={class:"pt-5"},Dt={class:"pt-5"},kt={key:0,class:"pt-5 my-1 mx-4 px-4"},St=e("p",{class:"text-sm flex justify-between"},[e("div",null," Monthly Analytics By Criteria ")],-1),Ot={class:"pb-3 mb-2"},Gt={class:"sm:hidden"},Ct=e("label",{for:"tabs",class:"sr-only"},"Select a tab",-1),Nt=["value","selected"],Vt={class:"hidden sm:block"},jt={class:"border-b border-gray-200"},Mt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Bt=["onClick"],Tt={class:"mt-2 flow-root"},Ft={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Jt={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},At={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},$t={class:"min-w-full divide-y divide-gray-300"},Lt={class:"bg-gray-50"},Rt=e("th",{scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"}," Name ",-1),Kt=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"},null,-1),Ut={scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"},Pt={class:"divide-y divide-gray-200 bg-white"},Zt={rowspan:"3",class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 row-span-3"},Et=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Daily Sales/ VM ",-1),zt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Ht=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Machine Count ",-1),Qt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Yt=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Total Sales ",-1),qt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Wt={key:0},Xt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),It=[Xt],ms={__name:"Dashboard",props:{activeMachineGraphData:Object,categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,months:Object,monthsByModel:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object,vendCount:Number},setup(k){const h=k,d=i({categories:[],categoryGroups:[],codes:"",customer:"",day_date_from:"",day_date_to:"",locationType:"",operator:"",monthlyTypeName:"location-type"}),Y=i([]),ie=i([]),q=i(0),W=i(0),X=i(0),I=i(0),ce=()=>{q.value+=1},de=()=>{W.value+=1},ue=()=>{X.value+=1},pe=()=>{I.value+=1},A=i([]),ee=z().props.auth.operator,u=z().props.auth.operatorCountry,$=i([]),C=z().props.auth.permissions,N=i(!1),L=i([{name:"Location Type",slug:"location-type",current:!0,href:"#"},{name:"Category",slug:"category",current:!1,href:"#"},{name:"Operator",slug:"operator",current:!1,href:"#"}]),te=i([]),V=i([]),R=i([]),me=i({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales("+u.currency_symbol+")"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),se=i([]),j=i([]),K=i([]),ye=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales("+u.currency_symbol+")"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),M=i([]),U=i([]),P=i([]),he=i({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),B=i([]),ae=i([]),Z=i([]),E=i([]),_e=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Count(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Number of Active Vending Machine in Market, by Month"}}});ge(()=>{Y.value=h.categories.data.map(s=>({id:s.id,name:s.name})),ie.value=h.categoryGroups.data.map(s=>({id:s.id,name:s.name})),A.value=[{id:"all",name:"All"},...h.locationTypeOptions.data.map(s=>({id:s.id,name:s.name}))],$.value=[{id:"all",name:"All"},...h.operatorOptions.data.map(s=>({id:s.id,name:s.name}))],d.value.locationType=A.value[0],d.value.operator=$.value.find(s=>s.id==ee.id),re()});function p(s,n){var t=parseInt(s.slice(1,3),16),g=parseInt(s.slice(3,5),16),v=parseInt(s.slice(5,7),16);return"rgba("+t+", "+g+", "+v+", "+n+")"}function T(){H.visit(route("dashboard",{...d.value,categories:d.value.categories.map(s=>s.id),categoryGroups:d.value.categoryGroups.map(s=>s.id),location_type_id:d.value.locationType.id,operator_id:d.value.operator.id}),{only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{H.reload({only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0}),re()}})}function oe(s){L.value.forEach(n=>{n.current=!1}),s.current=!0,d.value.monthlyTypeName=s.slug,T()}function fe(){H.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function re(){ae.value=[],Z.value=[],E.value=[],te.value=[],V.value=[],R.value=[],se.value=[],j.value=[],K.value=[],M.value=[],U.value=[],P.value=[];let s=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],n=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];te.value=JSON.parse(JSON.stringify(h.dayGraphData));let t=[];t=_.groupBy(JSON.parse(JSON.stringify(h.dayGraphData)).data,"month_name"),Object.keys(t).forEach((o,a)=>{V.value.push({label:o+" (#)",data:t[o].map(w=>w.count),backgroundColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),borderColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),yAxisID:"y1",type:"line",order:1}),V.value.push({label:o+" ("+u.currency_symbol+")",data:t[o].map(w=>w.amount),backgroundColor:a%2==0?p(s[a],.2):p(s[a],1),borderColor:a%2==0?p(s[a],.2):p(s[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=31;o++)R.value.push(o);se.value=JSON.parse(JSON.stringify(h.monthGraphData));let g=[];g=JSON.parse(JSON.stringify(h.monthGraphData)),Object.keys(g).forEach((o,a)=>{j.value.push({label:o+" (#)",data:Object.values(g[o]).map(w=>w.count),backgroundColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),borderColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),yAxisID:"y1",type:"line",order:1}),j.value.push({label:o+" ("+u.currency_symbol+")",data:Object.values(g[o]).map(w=>w.amount),backgroundColor:a%2==0?p(s[a],.2):p(s[a],1),borderColor:a%2==0?p(s[a],.2):p(s[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=12;o++)K.value.push(o);M.value=JSON.parse(JSON.stringify(h.productGraphData)),U.value.push({label:"Sales",data:M.value.data.map(o=>o.count),backgroundColor:n}),P.value=M.value.data.map(o=>o.product?o.product.code+" - "+o.product.name:null),B.value=JSON.parse(JSON.stringify(h.performerGraphData)),ae.value=JSON.parse(JSON.stringify(h.activeMachineGraphData));let v=[];v=JSON.parse(JSON.stringify(h.activeMachineGraphData)),Object.keys(v).forEach((o,a)=>{Z.value.push({label:o+" (#)",data:Object.values(v[o]).map(w=>w.count),backgroundColor:a%2==0?p(s[a],.2):p(s[a],.9),borderColor:a%2==0?p(s[a],.2):p(s[a],.9),type:"line"})});for(let o=1;o<=12;o++)E.value.push(o);ce(),de(),ue(),pe()}return(s,n)=>(r(),l(f,null,[y(c(ve),{title:"Dashboard"}),y(we,null,{header:D(()=>[Ge]),default:D(()=>[e("div",Ce,[e("div",Ne,[e("div",Ve,[e("div",je,[!N.value&&c(C).includes("admin-access vends")?(r(),O(F,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[0]||(n[0]=t=>N.value=!0)},{default:D(()=>[y(c(De),{class:"h-4 w-4","aria-hidden":"true"}),Me]),_:1})):b("",!0)]),N.value?(r(),l("div",Be,[e("div",Te,[y(ne,{placeholderStr:"Vend ID",modelValue:d.value.codes,"onUpdate:modelValue":n[1]||(n[1]=t=>d.value.codes=t),onKeyup:n[2]||(n[2]=le(t=>T(),["enter"]))},{default:D(()=>[S(" Vend ID "),Fe]),_:1},8,["modelValue"]),y(ne,{placeholderStr:"Customer",modelValue:d.value.customer,"onUpdate:modelValue":n[3]||(n[3]=t=>d.value.customer=t),onKeyup:n[4]||(n[4]=le(t=>T(),["enter"]))},{default:D(()=>[S(" Customer ")]),_:1},8,["modelValue"]),c(C).includes("admin-access vends")?(r(),l("div",Je,[Ae,y(Q,{modelValue:d.value.categories,"onUpdate:modelValue":n[5]||(n[5]=t=>d.value.categories=t),options:Y.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),c(C).includes("admin-access vends")?(r(),l("div",$e,[Le,y(Q,{modelValue:d.value.operator,"onUpdate:modelValue":n[6]||(n[6]=t=>d.value.operator=t),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),e("div",null,[Re,y(Q,{modelValue:d.value.locationType,"onUpdate:modelValue":n[7]||(n[7]=t=>d.value.locationType=t),options:A.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Ke,[e("div",Ue,[e("div",Pe,[y(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[8]||(n[8]=xe(t=>T(),["prevent"]))},{default:D(()=>[y(c(Se),{class:"h-4 w-4","aria-hidden":"true"}),Ze]),_:1}),y(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[9]||(n[9]=t=>fe())},{default:D(()=>[y(c(Oe),{class:"h-4 w-4","aria-hidden":"true"}),Ee]),_:1}),y(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[10]||(n[10]=t=>N.value=!1)},{default:D(()=>[y(c(ke),{class:"h-4 w-4","aria-hidden":"true"}),ze]),_:1})])])])])):b("",!0),e("div",He,[e("p",Qe,m(d.value&&d.value.operator?d.value.operator.name:c(ee).name),1),(r(),O(J,{key:q.value,type:"scatter",labels:R.value,datasets:V.value,options:me.value},null,8,["labels","datasets","options"])),e("div",Ye,[e("div",qe,[(r(),O(J,{key:W.value,type:"pie",labels:P.value,datasets:U.value,options:he.value},null,8,["labels","datasets","options"]))]),e("div",We,[e("p",Xe,[Ie,e("div",null," Based on "+m(k.vendCount)+" active machine(s) ",1)]),e("div",et,[e("div",tt,[e("div",st,[e("div",at,[e("table",ot,[e("thead",rt,[e("tr",null,[lt,nt,e("th",it," Amount("+m(c(u).currency_symbol)+") ",1),ct])]),e("tbody",dt,[(r(!0),l(f,null,x(B.value.data,(t,g)=>(r(),l("tr",{key:t.id},[e("td",ut,m(g+1),1),e("td",pt,[t.customer?(r(),l("span",mt,[S(m(t.customer.virtual_customer_prefix)+"-"+m(t.customer.virtual_customer_code)+" ",1),yt,S(" "+m(t.customer.name),1)])):(r(),l("span",ht,[S(m(t.code)+" ",1),_t,S(" "+m(t.name),1)]))]),e("td",ft,m(t.amount.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),1),e("td",gt,m(t.count),1)]))),128)),B.value.data.length?b("",!0):(r(),l("tr",vt,bt))])])])])])])])]),e("div",wt,[(r(),O(J,{key:X.value,type:"scatter",labels:K.value,datasets:j.value,options:ye.value},null,8,["labels","datasets","options"]))]),e("div",Dt,[(r(),O(J,{key:I.value,type:"scatter",labels:E.value,datasets:Z.value,options:_e.value},null,8,["labels","datasets","options"]))]),c(C).includes("admin-access analytics")?(r(),l("div",kt,[St,e("div",Ot,[e("div",Gt,[Ct,e("select",{id:"tabs",name:"tabs",class:"block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",onChange:n[11]||(n[11]=t=>oe(t))},[(r(!0),l(f,null,x(L.value,t=>(r(),l("option",{key:t,value:t.href,selected:t.current},m(t.name),9,Nt))),128))],32)]),e("div",Vt,[e("div",jt,[e("nav",Mt,[(r(!0),l(f,null,x(L.value,t=>(r(),l("span",{key:t.name,class:G(["hover:cursor-pointer",[t.current?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-200 hover:text-gray-700","flex whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]]),onClick:g=>oe(t)},m(t.name),11,Bt))),128))])])])]),e("div",Tt,[e("div",Ft,[e("div",Jt,[e("div",At,[e("table",$t,[e("thead",Lt,[e("tr",null,[Rt,Kt,(r(!0),l(f,null,x(k.months.data,t=>(r(),l("th",Ut,[e("span",{class:G([t.number==c(be)().format("M")?"bg-yellow-300 rounded p-2":""])},m(t.short_name),3)]))),256))])]),(r(!0),l(f,null,x(k.monthsByModel,(t,g)=>(r(),l("tbody",Pt,[e("tr",null,[e("td",Zt,m(g),1),Et,(r(!0),l(f,null,x(k.months.data,v=>(r(),l("td",zt,[(r(!0),l(f,null,x(t,(o,a)=>(r(),l("span",null,[v.number==a?(r(),l("span",{key:0,class:G([o.current?"font-bold":"font-medium",t[a-1]&&t[a-1].average<o.average?"text-green-600":t[a-1]?"text-red-600":""])},m(o.average.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),3)):b("",!0)]))),256))]))),256))]),e("tr",null,[Ht,(r(!0),l(f,null,x(k.months.data,v=>(r(),l("td",Qt,[(r(!0),l(f,null,x(t,(o,a)=>(r(),l("span",null,[v.number==a?(r(),l("span",{key:0,class:G([o.current?"font-bold":"font-medium"])},m(o.vend_count.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),3)):b("",!0)]))),256))]))),256))]),e("tr",null,[Yt,(r(!0),l(f,null,x(k.months.data,v=>(r(),l("td",qt,[(r(!0),l(f,null,x(t,(o,a)=>(r(),l("span",null,[v.number==a?(r(),l("span",{key:0,class:G([o.current?"font-bold":"font-medium"])},m(o.amount.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),3)):b("",!0)]))),256))]))),256))]),B.value.data.length?b("",!0):(r(),l("tr",Wt,It))]))),256))])])])])])])):b("",!0)])])])])]),_:1})],64))}};export{ms as default};
