import{o as s,g as n,d as t,i as p,u as g,j as B,c as h,a as l,w as c,p as i,T as O,t as _,b as v,e as w,n as j,f as y}from"./app.26e845ee.js";import{_ as x}from"./Button.0bc46507.js";import N from"./Uom.d2676251.js";import{_ as C}from"./FormInput.e10b1849.js";import{_ as z}from"./FormTextarea.263f37ee.js";import"./MultiSelect.d1bdc66b.js";import{_ as D}from"./Modal.e9f074f2.js";import{r as U}from"./RectangleStackIcon.f2a40e5f.js";import{r as E}from"./ArrowUturnLeftIcon.614a97e9.js";import{r as F}from"./CheckCircleIcon.184f5942.js";import"./open-closed.0ef6d176.js";function T(r,m){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 00.177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0116.25 17H3.75A1.75 1.75 0 012 15.25V4.75zm10.25 7a.75.75 0 000-1.5h-4.5a.75.75 0 000 1.5h4.5z","clip-rule":"evenodd"})])}function q(r,m){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M3.75 3A1.75 1.75 0 002 4.75v10.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0018 15.25v-8.5A1.75 1.75 0 0016.25 5h-4.836a.25.25 0 01-.177-.073L9.823 3.513A1.75 1.75 0 008.586 3H3.75zM10 8a.75.75 0 01.75.75v1.5h1.5a.75.75 0 010 1.5h-1.5v1.5a.75.75 0 01-1.5 0v-1.5h-1.5a.75.75 0 010-1.5h1.5v-1.5A.75.75 0 0110 8z","clip-rule":"evenodd"})])}const G={class:"flex flex-col md:flex-row space-x-2"},H={key:0,class:"text-gray-600"},I={key:1},L={key:2,class:"text-gray-600"},P=["onSubmit"],J={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},K={class:"sm:col-span-6 pb-3"},Q={class:"mt-1 flex flex-col md:flex-row space-y-2 md:space-y-0 items-center"},R={class:"h-28 w-28 overflow-hidden rounded-full bg-gray-100"},W=["src"],X=["value"],Y={key:0,class:"text-sm text-red-600"},Z={class:"sm:col-span-2"},ee=y(" Code "),te={class:"sm:col-span-4"},oe=y(" Name "),se={class:"sm:col-span-6"},ae=y(" Desc "),re={class:"sm:col-span-6"},le={class:"flex space-x-1 mt-5 pt-5 justify-end"},ne=t("span",null," Back ",-1),de={key:0,class:"flex space-x-1 items-center"},ue=t("span",null," Deactivate ",-1),ce={key:1,class:"flex space-x-1 items-center"},ie=t("span",null," Activate ",-1),me=t("span",null," Save ",-1),ke={__name:"Form",props:{categories:Object,categoryGroups:Object,product:Object,uoms:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(r,{emit:m}){const u=r,k=p([]),V=p([]),f=p(!1),M=p([]),e=p(g(b()));B(()=>{e.value=u.product?g(u.product):g(b()),k.value=u.categories.data.map(o=>({id:o.id,name:o.name})),V.value=u.categoryGroups.data.map(o=>({id:o.id,name:o.name})),M.value=u.uoms.data.map(o=>({id:o.id,name:o.name}))});function b(){return{code:"",desc:"",name:"",thumbnail:"",is_inventory:1,is_commission:"",is_supermarket_fee:"",category_id:"",category_group_id:""}}function $(){e.value.clearErrors(),u.type==="create"&&e.value.transform(o=>({...o})).post("/products/create",{onSuccess:()=>{m("modalClose")},preserveState:!0,replace:!0}),u.type==="update"&&e.value.transform(o=>({...o})).post("/products/"+e.value.id+"/update",{onSuccess:()=>{m("modalClose")},preserveState:!0,replace:!0})}function S(){e.value.post("/products/"+e.value.id+"/toggle-activate-deactivate",{onSuccess:()=>{m("modalClose")},preserveState:!0,replace:!0})}function A(){f.value=!1}return(o,a)=>(s(),h(O,{to:"body"},[l(D,{open:r.showModal,onModalClose:a[5]||(a[5]=d=>o.$emit("modalClose"))},{header:c(()=>[t("div",G,[r.product?(s(),n("span",H," Editing ")):i("",!0),u.product?(s(),n("span",I,_(r.product.name),1)):(s(),n("span",L," Create New Product "))])]),default:c(()=>[t("form",{onSubmit:w($,["prevent"]),id:"submit"},[t("div",J,[t("div",K,[t("div",Q,[t("span",R,[r.product&&r.product.thumbnail?(s(),n("img",{key:0,class:"h-28 w-28 rounded-full border",src:r.product.thumbnail.full_url,alt:""},null,8,W)):i("",!0),l(v(U),{class:"h-28 w-28 text-gray-300"})]),t("input",{type:"file",onInput:a[0]||(a[0]=d=>e.value.thumbnail=d.target.files[0]),class:"ml-5 rounded-md border border-gray-300 bg-white py-2 px-3 text-sm font-medium leading-4 text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},null,32),e.value.progress?(s(),n("progress",{key:0,value:e.value.progress.percentage,max:"100"},_(e.value.progress.percentage)+"% ",9,X)):i("",!0)]),e.value.errors.thumbnail?(s(),n("div",Y,_(e.value.errors.thumbnail),1)):i("",!0)]),t("div",Z,[l(C,{modelValue:e.value.code,"onUpdate:modelValue":a[1]||(a[1]=d=>e.value.code=d),error:e.value.errors.code,required:"true"},{default:c(()=>[ee]),_:1},8,["modelValue","error"])]),t("div",te,[l(C,{modelValue:e.value.name,"onUpdate:modelValue":a[2]||(a[2]=d=>e.value.name=d),error:e.value.errors.name,required:"true"},{default:c(()=>[oe]),_:1},8,["modelValue","error"])]),t("div",se,[l(z,{modelValue:e.value.desc,"onUpdate:modelValue":a[3]||(a[3]=d=>e.value.desc=d),error:e.value.errors.desc},{default:c(()=>[ae]),_:1},8,["modelValue","error"])])]),t("div",re,[t("div",le,[l(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:a[4]||(a[4]=w(d=>o.$emit("modalClose"),["prevent"])),form:"submit"},{default:c(()=>[l(v(E),{class:"w-4 h-4"}),ne]),_:1}),e.value.id?(s(),h(x,{key:0,type:"button",onClick:S,class:j(["text-white",[e.value.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"]])},{default:c(()=>[t("div",null,[e.value.is_active?(s(),n("span",de,[l(v(T),{class:"w-4 h-4"}),ue])):(s(),n("span",ce,[l(v(q),{class:"w-4 h-4"}),ie]))])]),_:1},8,["class"])):i("",!0),l(x,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:c(()=>[l(v(F),{class:"w-4 h-4"}),me]),_:1})])])],40,P)]),_:1},8,["open"]),f.value?(s(),h(N,{key:0,product:r.product,uoms:r.uoms,showModal:f.value,onModalClose:A},null,8,["product","uoms","showModal"])):i("",!0)]))}};export{ke as default};
