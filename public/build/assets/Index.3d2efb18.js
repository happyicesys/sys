import{g as v,U as A,Q as M,h as K,f as c,a as t,u as g,w as a,F as B,o as i,Z as Q,b as l,d as r,t as u,k as Z,l as p,c as x,O as h,n as q,e as Y}from"./app.23f69410.js";import{_ as G}from"./Authenticated.c333a0a9.js";import{_ as w}from"./Button.e02061ca.js";import H from"./ChannelOverview.c542692d.js";import{_ as F}from"./DatePicker.c363f5ff.js";import{_ as J}from"./Paginator.f5d337d8.js";import{_ as N}from"./SearchInput.7dad337f.js";import{_ as C}from"./MultiSelect.0de761bc.js";import{_,a as f}from"./TableData.1bd7e047.js";import{r as W}from"./MagnifyingGlassIcon.c46b9c8c.js";import{r as X}from"./BackspaceIcon.1bcb07c1.js";import{r as ee}from"./MagnifyingGlassCircleIcon.e80ecbef.js";import{r as te,a as le}from"./PlayCircleIcon.2413900b.js";import{r as ae}from"./XCircleIcon.311d6b8e.js";import"./keyboard.0c05cab2.js";import"./use-resolve-button-type.8f594bcf.js";import"./RectangleStackIcon.86791b6c.js";import"./FormInput.f5a3658d.js";import"./Modal.6a577bba.js";import"./disposables.ac22ed1c.js";import"./CheckCircleIcon.b60b0ec7.js";import"./PencilSquareIcon.aec57082.js";import"./main.1b1d7bb9.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.b143ea91.js";const ne=l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Delivery Platform Vend ",-1),oe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},se={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},re={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ie=l("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),de=l("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Del Product Mapping ",-1),ue=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Active? ",-1),me={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ce={class:"mt-3"},pe={class:"flex space-x-1"},_e=l("span",null," Search ",-1),fe=l("span",null," Reset ",-1),ve={class:"flex flex-col space-y-2"},ge={class:"text-sm text-gray-700 leading-5 flex space-x-1"},xe=l("span",null,"Showing",-1),he={class:"font-medium"},ye=l("span",null,"to",-1),be={class:"font-medium"},ke=l("span",null,"of",-1),we={class:"font-medium"},Ce=l("span",null,"results",-1),Ve={class:"mt-6 flex flex-col"},Oe={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},Pe={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Le={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ie={class:"bg-gray-100"},Se={class:"divide-x divide-gray-200"},$e={class:"bg-white"},De={key:0,class:"inline-flex items-center rounded-md bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-800/10"},Ue={key:0},Ae={key:0},Me={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},Be={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},Ye={class:"flex flex-col space-y-1"},Fe={key:2,class:"text-xs"},Ne={key:3,class:"text-xs"},je=l("span",{class:"text-xs"},"Unbind VM",-1),Re={key:0},Te=l("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),ze=[Te],_t={__name:"Index",props:{deliveryProductMappingVends:Object,deliveryPlatformOperatorOptions:Object,deliveryProductMappingOptions:Object},setup(s){const y=s,n=v({vend_code:"",date_from:A().startOf("week").format("YYYY-MM-DD"),date_to:A().format("YYYY-MM-DD"),delivery_platform_operator_id:"",delivery_product_mapping_id:"",platform_ref_id:"",sortKey:"",sortBy:!1,status:"",numberPerPage:100}),V=v([]),b=v([]);v();const O=v([]),I=v(),S=M().props.auth.operatorCountry,P=v([]),k=v(!1);M().props.auth.permissions,v(),K(()=>{V.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],P.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],n.value.numberPerPage=P.value[0],b.value=[{id:"all",name:"All"},...y.deliveryPlatformOperatorOptions.data.map(d=>({id:d.id,name:d.deliveryPlatform.name+" ("+d.type+")"}))],n.value.delivery_platform_operator_id=b.value[0],O.value=[{id:"all",name:"All"},...y.deliveryProductMappingOptions.data.map(d=>({id:d.id,name:d.name}))],n.value.is_active=V.value[1],n.value.delivery_platform_operator_id=b.value[2],n.value.delivery_product_mapping_id=O.value[0]});function j(d){I.value=d,k.value=!0}function R(){k.value=!1}function $(){h.get("/delivery-product-mapping-vends",{...n.value,delivery_platform_operator_id:n.value.delivery_platform_operator_id.id,delivery_product_mapping_id:n.value.delivery_product_mapping_id.id,is_active:n.value.is_active.id,numberPerPage:n.value.numberPerPage.id},{preserveState:!0,replace:!0})}function T(){h.get("/delivery-product-mapping-vends")}function z(d){let o=d.is_active?"Are you sure to pause this vending machine?":"Are you sure to resume this vending machine?";!confirm(o)||h.post("/delivery-product-mappings/vends/"+d.id+"/toggle-pause-vend",{},{preserveState:!1,preserveScroll:!0,replace:!0})}function E(d){!confirm("Are you sure to delete this entry?")||h.delete("/delivery-product-mappings/unbind/"+d,{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{h.reload({only:["unbindedVendOptions"]}),unbindedVendOptions.value=y.unbindedVendOptions?y.unbindedVendOptions.data:[]}})}return(d,o)=>(i(),c(B,null,[t(g(Q),{title:"Delivery Platform Vend"}),t(G,null,{header:a(()=>[ne]),default:a(()=>{var L,D;return[l("div",oe,[l("div",se,[l("div",re,[l("div",null,[ie,t(C,{modelValue:n.value.delivery_platform_operator_id,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value.delivery_platform_operator_id=e),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[de,t(C,{modelValue:n.value.delivery_product_mapping_id,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value.delivery_product_mapping_id=e),options:O.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t(N,{placeholderStr:"Vend ID",modelValue:n.value.vend_code,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value.vend_code=e)},{default:a(()=>[r(" Vend ID ")]),_:1},8,["modelValue"]),t(N,{placeholderStr:"Platform ID",modelValue:n.value.platform_ref_id,"onUpdate:modelValue":o[3]||(o[3]=e=>n.value.platform_ref_id=e)},{default:a(()=>[r(" Platform ID ")]),_:1},8,["modelValue"]),l("div",null,[ue,t(C,{modelValue:n.value.is_active,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value.is_active=e),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[t(F,{modelValue:n.value.date_from,"onUpdate:modelValue":o[5]||(o[5]=e=>n.value.date_from=e)},{default:a(()=>[r(" From ")]),_:1},8,["modelValue"])]),l("div",null,[t(F,{modelValue:n.value.date_to,"onUpdate:modelValue":o[6]||(o[6]=e=>n.value.date_to=e),minDate:n.value.date_from},{default:a(()=>[r(" To ")]),_:1},8,["modelValue","minDate"])])]),l("div",me,[l("div",ce,[l("div",pe,[t(w,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[7]||(o[7]=e=>$())},{default:a(()=>[t(g(W),{class:"h-4 w-4","aria-hidden":"true"}),_e]),_:1}),t(w,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[8]||(o[8]=e=>T())},{default:a(()=>[t(g(X),{class:"h-4 w-4","aria-hidden":"true"}),fe]),_:1})])]),l("div",ve,[l("p",ge,[xe,l("span",he,u((L=s.deliveryProductMappingVends.meta.from)!=null?L:0),1),ye,l("span",be,u((D=s.deliveryProductMappingVends.meta.to)!=null?D:0),1),ke,l("span",we,u(s.deliveryProductMappingVends.meta.total),1),Ce]),t(C,{modelValue:n.value.numberPerPage,"onUpdate:modelValue":o[9]||(o[9]=e=>n.value.numberPerPage=e),options:P.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:$},null,8,["modelValue","options"])])])]),l("div",Ve,[l("div",Oe,[l("div",Pe,[l("table",Le,[l("thead",Ie,[l("tr",Se,[t(_,null,{default:a(()=>[r(" # ")]),_:1}),t(_,null,{default:a(()=>[r(" Vend ID ")]),_:1}),t(_,null,{default:a(()=>[r(" Platform ID ")]),_:1}),t(_,null,{default:a(()=>[r(" Cust Prefix ")]),_:1}),t(_,null,{default:a(()=>[r(" Cust Name ")]),_:1}),t(_,null,{default:a(()=>[r(" Channel ")]),_:1}),t(_,null,{default:a(()=>[r(" VM Status ")]),_:1}),t(_,null,{default:a(()=>[r(" Amount ")]),_:1}),t(_,null,{default:a(()=>[r(" Count ")]),_:1}),t(_)])]),l("tbody",$e,[(i(!0),c(B,null,Z(s.deliveryProductMappingVends.data,(e,m)=>(i(),c("tr",{key:e.id,class:"divide-x divide-gray-200"},[t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:a(()=>[r(u(s.deliveryProductMappingVends.meta.from+m),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:a(()=>[r(u(e.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-left"},{default:a(()=>[r(u(e.platform_ref_id)+" ",1),e.binded_times>1?(i(),c("span",De,u(e.binded_times),1)):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:a(()=>[e.vend&&e.vend.customer?(i(),c("span",Ue,u(e.vend.customer.virtual_customer_code)+" ("+u(e.vend.customer.virtual_customer_prefix)+") ",1)):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-left"},{default:a(()=>[e.vend&&e.vend&&e.vend.customer?(i(),c("span",Ae,u(e.vend.customer.name),1)):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:a(()=>[e.deliveryProductMappingVendChannels?(i(),x(g(ee),{key:0,class:"h-5 w-5 text-green-500 hover:cursor-pointer","aria-hidden":"true",onClick:U=>j(e)},null,8,["onClick"])):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:a(()=>[e.is_active==1?(i(),c("span",Me," Operating ")):p("",!0),e.is_active==0?(i(),c("span",Be," Paused ")):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-right"},{default:a(()=>[r(u(e.delivery_platform_orders_sum_subtotal_amount.toLocaleString(void 0,{minimumFractionDigits:g(S).is_currency_exponent_hidden?0:g(S).currency_exponent})),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-right"},{default:a(()=>[r(u(e.delivery_platform_orders_count),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:m,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:a(()=>[l("div",Ye,[t(w,{class:q(["flex space-x-1 w-fit",[e.is_active?"bg-yellow-300 hover:bg-yellow-400 text-black":"bg-green-500 hover:bg-green-600 text-white"]]),onClick:Y(U=>z(e),["prevent"])},{default:a(()=>[e.is_active?(i(),x(g(te),{key:0,class:"w-3 h-3"})):(i(),x(g(le),{key:1,class:"w-3 h-3"})),e.is_active?(i(),c("span",Fe," Pause VM ")):(i(),c("span",Ne," Resume VM "))]),_:2},1032,["class","onClick"]),e.is_active?p("",!0):(i(),x(w,{key:0,class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white w-fit",onClick:Y(U=>E(e.id),["prevent"])},{default:a(()=>[t(g(ae),{class:"w-3 h-3"}),je]),_:2},1032,["onClick"]))])]),_:2},1032,["currentIndex","totalLength"])]))),128)),s.deliveryProductMappingVends.data.length?p("",!0):(i(),c("tr",Re,ze))])]),s.deliveryProductMappingVends.data.length?(i(),x(J,{key:0,links:s.deliveryProductMappingVends.links,meta:s.deliveryProductMappingVends.meta},null,8,["links","meta"])):p("",!0)])])])]),k.value?(i(),x(H,{key:0,deliveryProductMappingVendModel:I.value,showModal:k.value,onModalClose:R},null,8,["deliveryProductMappingVendModel","showModal"])):p("",!0)]}),_:1})],64))}};export{_t as default};
