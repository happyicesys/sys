import{g as h,T as g,Q as F,h as U,f as r,a as d,u as n,w as p,F as V,o,Z as B,b as e,d as b,t as u,l,e as f,n as w,i as I,c as M,k as N,m as C,a4 as O}from"./app.34c76a73.js";import{_ as z}from"./Authenticated.fbcce26d.js";import{_ as v}from"./Button.8daa624a.js";import{_ as E}from"./FormInput.b092c950.js";import{_ as L}from"./FormTextarea.b189b0fd.js";import{_ as Q}from"./MultiSelect.b7a1dc2d.js";import{r as R}from"./ArrowUturnLeftIcon.dc64b672.js";import{r as D}from"./CheckCircleIcon.635f6341.js";import{r as A}from"./XCircleIcon.8eab97fa.js";import{r as Z}from"./PlusCircleIcon.ed681ef2.js";import"./keyboard.94490800.js";import"./use-resolve-button-type.3f3d42c7.js";import"./RectangleStackIcon.eebbac05.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.96789c34.js";const G={class:"font-semibold text-xl text-gray-800 leading-tight"},H={key:0},J={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},K={class:"mt-6 flex flex-col"},W={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},X={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},Y={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},ee={class:"sm:col-span-6"},te={class:"py-3"},se={class:"flex flex-col"},oe={class:"font-semibold"},re={class:"sm:col-span-3"},ae=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Order ID ",-1),le={class:"mt-1"},de=["href"],ie=["value"],ne={class:"sm:col-span-3"},ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Short Order ID ",-1),ue={class:"mt-1"},pe=["value"],me={class:"sm:col-span-6"},_e=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ve={class:"mt-1"},ye=["value"],fe={class:"sm:col-span-6"},xe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Order Datetime ",-1),he={class:"mt-1"},ge=["value"],be={class:"sm:col-span-6"},we=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),ke={key:0,class:"mt-1"},Pe=["href"],Ve=["value"],Me={class:"sm:col-span-6"},Ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Product Mapping ",-1),Oe={key:0,class:"mt-1"},De=["href"],Se=["value"],je={class:"sm:col-span-6"},qe={class:"sm:col-span-6"},$e={class:"flex space-x-1 mt-5 justify-end"},Te=e("span",null," Back ",-1),Fe=e("span",null," Save ",-1),Ue=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Order Item(s) ")])])],-1),Be={key:0,class:"sm:col-span-6"},Ie={class:"flex space-x-1 mt-3 justify-start"},Ne=e("span",null," Request to Cancel Order ",-1),ze=e("span",null," Save Order ",-1),Ee={key:1,class:"sm:col-span-3"},Le=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Qe={key:0,class:"text-sm text-red-600"},Re={key:2,class:"sm:col-span-2"},Ae={key:3,class:"sm:col-span-1"},Ze=e("span",null," Add ",-1),Ge={key:4,class:"sm:col-span-6 flex flex-col mt-3"},He={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Je={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Ke={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},We={class:"table-fixed min-w-full divide-y divide-gray-300"},Xe=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel(s) "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Qty "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price ")])],-1),Ye={class:"bg-white"},et={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},tt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},st={class:"flex justify-center"},ot=["src"],rt={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},at={key:0},lt={key:1,class:"break-words"},dt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},it={key:0},nt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},ct={key:0},ut=["onUpdate:modelValue"],pt={key:1},mt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-right"},_t={key:0},vt=["onUpdate:modelValue"],yt={key:1},ft={key:0},xt=e("td",{colspan:"5",class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-gray-900 sm:pl-6 text-center col-span-4"}," Promo ",-1),ht={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-gray-900 sm:pl-6 text-right col-span-1"},gt={key:1},bt=e("td",{colspan:"5",class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-gray-900 sm:pl-6 text-center col-span-4"}," Subtotal ",-1),wt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-bold text-gray-900 sm:pl-6 text-right col-span-1"},kt={key:2},Pt=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Vt=[Pt],zt={__name:"Edit",props:{deliveryPlatformOrder:Object},setup(S){const c=S,t=h(g(k())),y=h([]),m=h(!1),_=F().props.auth.operatorCountry;U(()=>{t.value=c.deliveryPlatformOrder?g(c.deliveryPlatformOrder.data):g(k()),y.value=c.deliveryPlatformOrder.data});function k(){return{id:"",order_id:"",short_order_id:"",deliveryPlatform:{name:""},operator_id:"",order_created_at:""}}function j(){!confirm("Are you sure to request to cancel this order?")||t.value.post("/delivery-platform-orders/"+t.value.id+"/request-cancel-order",{preserveState:!0,replace:!0})}function q(){!confirm("Are you sure to edit this order?")||(t.value.transform(s=>({...s,delivery_platform_order_items:y.value.deliveryPlatformOrderItems})).post("/delivery-platform-orders/"+t.value.id+"/update-order-items",{preserveState:!0,replace:!0}),m.value=!1)}function $(i){let a="";switch(i){case 1:case 2:a="bg-blue-400 text-gray-800";break;case 3:case 4:case 5:a="bg-yellow-400 text-gray-800";break;case 6:a="bg-green-400 text-white-800";break;case 98:case 99:a="bg-red-400 text-white-800";break}return a}function T(){t.value.clearErrors(),c.type==="update"&&t.value.transform(i=>({...i,timezone:i.timezone?i.timezone.name:null,country_id:i.country_id?i.country_id.id:null})).post("/operators/"+t.value.id+"/update",{preserveState:!0,replace:!0})}return(i,a)=>(o(),r(V,null,[d(n(B),{title:"Delivery Platform Order"}),d(z,null,{header:p(()=>[e("h2",G,[b(" Edit Delivery Platform Order "),i.type=="update"?(o(),r("span",H,u(t.value.order_id)+" "+u(t.value.short_order_id),1)):l("",!0)])]),default:p(()=>[e("div",J,[e("div",K,[e("div",W,[e("div",X,[e("form",{onSubmit:f(T,["prevent"]),id:"submit"},[e("div",Y,[e("div",ee,[e("div",te,[e("div",{class:w(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border",$(y.value.status)])},[e("div",se,[e("span",oe,u(y.value.status_name),1)])],2)])]),e("div",re,[ae,e("div",le,[e("a",{href:"/delivery-platform-orders?order_id="+t.value.order_id,target:"_blank"},[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-pointer text-blue-600 font-medium",value:t.value.order_id,readonly:""},null,8,ie)],8,de)])]),e("div",ne,[ce,e("div",ue,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.short_order_id,disabled:""},null,8,pe)])]),e("div",me,[_e,e("div",ve,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.deliveryPlatform.name,disabled:""},null,8,ye)])]),e("div",fe,[xe,e("div",he,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.order_created_at,disabled:""},null,8,ge)])]),e("div",be,[we,t.value.deliveryProductMappingVend&&t.value.deliveryProductMappingVend.vend?(o(),r("div",ke,[e("a",{href:"/vends?codes="+t.value.deliveryProductMappingVend.vend.code,target:"_blank"},[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-pointer text-blue-600 font-medium",value:t.value.deliveryProductMappingVend.vend.full_name,readonly:""},null,8,Ve)],8,Pe)])):l("",!0)]),e("div",Me,[Ce,t.value.deliveryProductMappingVend&&t.value.deliveryProductMappingVend.deliveryProductMapping?(o(),r("div",Oe,[e("a",{href:"/delivery-product-mappings/"+t.value.deliveryProductMappingVend.deliveryProductMapping.id+"/edit",target:"_blank"},[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-pointer text-blue-600 font-medium",value:t.value.deliveryProductMappingVend.deliveryProductMapping.name,readonly:""},null,8,Se)],8,De)])):l("",!0)]),e("div",je,[d(L,{modelValue:t.value.remarks,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.remarks=s),error:t.value.errors.remarks},{default:p(()=>[b(" Remarks ")]),_:1},8,["modelValue","error"])]),e("div",qe,[e("div",$e,[d(n(I),{href:"/delivery-platform-orders"},{default:p(()=>[d(v,{type:"button",class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:p(()=>[d(n(R),{class:"w-4 h-4"}),Te]),_:1})]),_:1}),d(v,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:p(()=>[d(n(D),{class:"w-4 h-4"}),Fe]),_:1})])]),Ue,t.value.id?(o(),r("div",Be,[e("div",Ie,[!t.value.is_cancelled&&t.value.status<6?(o(),M(v,{key:0,class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white",onClick:a[1]||(a[1]=f(s=>j(t.value.id),["prevent"]))},{default:p(()=>[d(n(A),{class:"w-4 h-4"}),Ne]),_:1})):l("",!0),m.value?(o(),M(v,{key:1,class:"flex space-x-1 bg-green-500 hover:bg-green-600 text-white",onClick:a[2]||(a[2]=f(s=>q(t.value.id),["prevent"]))},{default:p(()=>[d(n(D),{class:"w-4 h-4"}),ze]),_:1})):l("",!0)])])):l("",!0),t.value.id&&m.value?(o(),r("div",Ee,[Le,d(Q,{modelValue:t.value.delivery_platform_product_mapping_item_id,"onUpdate:modelValue":a[3]||(a[3]=s=>t.value.delivery_platform_product_mapping_item_id=s),options:i.deliveryPlatformProductMappingItemOptions,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(o(),r("div",Qe,u(t.value.errors.product_id),1)):l("",!0)])):l("",!0),t.value.id&&m.value?(o(),r("div",Re,[d(E,{modelValue:t.value.qty,"onUpdate:modelValue":a[4]||(a[4]=s=>t.value.qty=s),error:t.value.errors.qty,placeholderStr:"Qty"},{default:p(()=>[b(" Qty ")]),_:1},8,["modelValue","error"])])):l("",!0),t.value.id&&m.value?(o(),r("div",Ae,[d(v,{type:"button",onClick:a[5]||(a[5]=f(s=>i.addDeliveryProductMappingItem(),["prevent"])),class:w(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.delivery_platform_product_mapping_item_id||!t.value.qty?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.delivery_platform_product_mapping_item_id||!t.value.qty},{default:p(()=>[d(n(Z),{class:"w-4 h-4"}),Ze]),_:1},8,["class","disabled"])])):l("",!0),t.value.id?(o(),r("div",Ge,[e("div",He,[e("div",Je,[e("div",Ke,[e("table",We,[Xe,e("tbody",Ye,[(o(!0),r(V,null,N(c.deliveryPlatformOrder.data.deliveryPlatformOrderItems,(s,P)=>(o(),r("tr",{key:s.id,class:w(P%2===0?void 0:"bg-gray-50")},[e("td",et,u(P+1),1),e("td",tt,[e("div",st,[s.deliveryProductMappingItem.product&&s.deliveryProductMappingItem.product.thumbnail?(o(),r("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:s.deliveryProductMappingItem.product.thumbnail.full_url,alt:""},null,8,ot)):l("",!0)])]),e("td",rt,[s.deliveryProductMappingItem.product.code?(o(),r("span",at,u(s.deliveryProductMappingItem.product.code),1)):l("",!0),s.deliveryProductMappingItem.product.name?(o(),r("span",lt,u(s.deliveryProductMappingItem.product.name),1)):l("",!0)]),e("td",dt,[s.orderItemVendChannels[0]?(o(),r("span",it," #"+u(s.orderItemVendChannels[0].vend_channel_code),1)):l("",!0)]),e("td",nt,[m.value?(o(),r("span",ct,[C(e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md","onUpdate:modelValue":x=>s.qty=x},null,8,ut),[[O,s.qty]])])):(o(),r("span",pt,u(s.qty),1))]),e("td",mt,[m.value?(o(),r("span",_t,[C(e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md","onUpdate:modelValue":x=>s.amount=x},null,8,vt),[[O,s.amount]])])):(o(),r("span",yt,u(s.amount.toLocaleString(void 0,{minimumFractionDigits:n(_).is_currency_exponent_hidden?0:n(_).currency_exponent})),1))])],2))),128)),c.deliveryPlatformOrder.data.deliveryPlatformOrderItems&&c.deliveryPlatformOrder.data.campaign_json?(o(),r("tr",ft,[xt,e("td",ht," -"+u(c.deliveryPlatformOrder.data.promo_amount.toLocaleString(void 0,{minimumFractionDigits:n(_).is_currency_exponent_hidden?0:n(_).currency_exponent})),1)])):l("",!0),c.deliveryPlatformOrder.data.deliveryPlatformOrderItems?(o(),r("tr",gt,[bt,e("td",wt,u(c.deliveryPlatformOrder.data.subtotal_amount.toLocaleString(void 0,{minimumFractionDigits:n(_).is_currency_exponent_hidden?0:n(_).currency_exponent})),1)])):l("",!0),!c.deliveryPlatformOrder.data.deliveryPlatformOrderItems||!c.deliveryPlatformOrder.data.deliveryPlatformOrderItems.length?(o(),r("tr",kt,Vt)):l("",!0)])])])])])])):l("",!0)])],32)])])])])]),_:1})],64))}};export{zt as default};
