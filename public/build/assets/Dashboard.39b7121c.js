import{g as i,K as re,S as ge,f as l,a as p,u as v,w,F as y,o as a,Z as fe,b as e,c as O,l as x,N as P,d as k,e as ve,t as u,k as f,O as Z,n as _e}from"./app.96ea2a79.js";import{_ as xe}from"./Authenticated.297b56e9.js";import{_ as B}from"./Button.13adef95.js";import{_ as T}from"./Graph.0f4b4079.js";import{_ as z}from"./MultiSelect.e76fa965.js";import{_ as E,r as be}from"./SearchInput.789ae2c1.js";import{r as we,a as De}from"./ChevronDoubleUpIcon.3a5f46f4.js";import{r as ke}from"./BackspaceIcon.1ba6e5a9.js";import"./open-closed.f8903cc5.js";import"./use-resolve-button-type.3c6bfb15.js";import"./RectangleStackIcon.72efbb8e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.f108e210.js";const Se=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),Oe={class:"p-3"},Ge={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},Ce={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ne={class:"p-4"},Ve=e("span",null," Show Filters ",-1),$e={key:0,class:"p-4 mx-2"},je={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Be=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Te={key:0},Fe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),Me={key:1},Ae=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),Je=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Le={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},Ke={class:"mt-3"},Re={class:"flex space-x-1"},Ue=e("span",null," Search ",-1),Pe=e("span",null," Reset ",-1),Ze=e("span",null," Hide Filters ",-1),ze={class:"p-1 py-4 bg-white border-b border-gray-200 flex flex-col space-y-6"},Ee={class:"text-center p-2"},He={class:"flex flex-col md:flex-row pt-5"},Ye={class:"md:basis-1/3 m-1"},qe={class:"md:basis-2/3 my-1 mx-4 px-4"},Qe={class:"text-sm flex justify-between"},We=e("div",null," Past 30 Days - Top 10 Best Performance ",-1),Xe={class:"mt-2 flow-root"},Ie={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},et={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},tt={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},st={class:"min-w-full divide-y divide-gray-300"},at=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),ot={class:"divide-y divide-gray-200 bg-white"},rt={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},lt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},nt={key:0},it=e("br",null,null,-1),ct={key:1},dt=e("br",null,null,-1),ut={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},pt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},mt={key:0},yt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),ht=[yt],gt={class:"pt-5"},ft={class:"pt-5"},vt={key:0,class:"pt-5 my-1 mx-4 px-4"},_t=e("p",{class:"text-sm flex justify-between"},[e("div",null," Monthly Analytics By Criteria ")],-1),xt={class:"pb-3 mb-2"},bt={class:"sm:hidden"},wt=e("label",{for:"tabs",class:"sr-only"},"Select a tab",-1),Dt=["value","selected"],kt={class:"hidden sm:block"},St={class:"border-b border-gray-200"},Ot={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Gt=["onClick"],Ct={class:"mt-2 flow-root"},Nt={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Vt={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},$t={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},jt={class:"min-w-full divide-y divide-gray-300"},Bt={class:"bg-gray-50"},Tt=e("th",{scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"}," Name ",-1),Ft=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"},null,-1),Mt={scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"},At={class:"divide-y divide-gray-200 bg-white"},Jt={rowspan:"3",class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 row-span-3"},Lt=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Avg Daily Sales ",-1),Kt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Rt={key:0},Ut=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Machine Count ",-1),Pt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Zt={key:0},zt=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Total Sales ",-1),Et={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Ht={key:0},Yt={key:0},qt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Qt=[qt],cs={__name:"Dashboard",props:{activeMachineGraphData:Object,categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,months:Object,monthsByModel:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object,vendCount:Number},setup(D){const m=D,c=i({categories:[],categoryGroups:[],codes:"",customer_code:"",customer_name:"",day_date_from:"",day_date_to:"",locationType:"",operator:"",monthlyTypeName:"location-type"}),H=i([]),le=i([]),Y=i(0),q=i(0),Q=i(0),W=i(0),ne=()=>{Y.value+=1},ie=()=>{q.value+=1},ce=()=>{Q.value+=1},de=()=>{W.value+=1},F=i([]),X=re().props.auth.operator,M=i([]),G=re().props.auth.permissions,C=i(!1),I=i([{name:"Location Type",slug:"location-type",current:!0,href:"#"},{name:"Category",slug:"category",current:!1,href:"#"},{name:"Operator",slug:"operator",current:!1,href:"#"}]),ee=i([]),N=i([]),A=i([]),ue=i({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),te=i([]),V=i([]),J=i([]),pe=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),$=i([]),L=i([]),K=i([]),me=i({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),j=i([]),se=i([]),R=i([]),U=i([]),ye=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Count(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Number of Active Vending Machine in Market, by Month"}}});ge(()=>{console.log(m.monthsByModel),H.value=m.categories.data.map(s=>({id:s.id,name:s.name})),le.value=m.categoryGroups.data.map(s=>({id:s.id,name:s.name})),F.value=[{id:"all",name:"All"},...m.locationTypeOptions.data.map(s=>({id:s.id,name:s.name}))],M.value=[{id:"all",name:"All"},...m.operatorOptions.data.map(s=>({id:s.id,name:s.name}))],c.value.locationType=F.value[0],c.value.operator=M.value.find(s=>s.id==X.id),oe()});function d(s,n){var t=parseInt(s.slice(1,3),16),h=parseInt(s.slice(3,5),16),g=parseInt(s.slice(5,7),16);return"rgba("+t+", "+h+", "+g+", "+n+")"}function S(){Z.visit(route("dashboard",{...c.value,categories:c.value.categories.map(s=>s.id),categoryGroups:c.value.categoryGroups.map(s=>s.id),location_type_id:c.value.locationType.id,operator_id:c.value.operator.id}),{only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{Z.reload({only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0}),oe()}})}function ae(s){c.value.monthlyTypeName=s.slug,S()}function he(){Z.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function oe(){se.value=[],R.value=[],U.value=[],ee.value=[],N.value=[],A.value=[],te.value=[],V.value=[],J.value=[],$.value=[],L.value=[],K.value=[];let s=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],n=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];ee.value=JSON.parse(JSON.stringify(m.dayGraphData));let t=[];t=_.groupBy(JSON.parse(JSON.stringify(m.dayGraphData)).data,"month_name"),Object.keys(t).forEach((r,o)=>{N.value.push({label:r+" (#)",data:t[r].map(b=>b.count),backgroundColor:o%2==0?d(s[o+2],.2):d(s[o+2],.9),borderColor:o%2==0?d(s[o+2],.2):d(s[o+2],.9),yAxisID:"y1",type:"line",order:1}),N.value.push({label:r+" ($)",data:t[r].map(b=>b.amount),backgroundColor:o%2==0?d(s[o],.2):d(s[o],1),borderColor:o%2==0?d(s[o],.2):d(s[o],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let r=1;r<=31;r++)A.value.push(r);te.value=JSON.parse(JSON.stringify(m.monthGraphData));let h=[];h=JSON.parse(JSON.stringify(m.monthGraphData)),Object.keys(h).forEach((r,o)=>{V.value.push({label:r+" (#)",data:Object.values(h[r]).map(b=>b.count),backgroundColor:o%2==0?d(s[o+2],.2):d(s[o+2],.9),borderColor:o%2==0?d(s[o+2],.2):d(s[o+2],.9),yAxisID:"y1",type:"line",order:1}),V.value.push({label:r+" ($)",data:Object.values(h[r]).map(b=>b.amount),backgroundColor:o%2==0?d(s[o],.2):d(s[o],1),borderColor:o%2==0?d(s[o],.2):d(s[o],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let r=1;r<=12;r++)J.value.push(r);$.value=JSON.parse(JSON.stringify(m.productGraphData)),L.value.push({label:"Sales",data:$.value.data.map(r=>r.count),backgroundColor:n}),K.value=$.value.data.map(r=>r.product?r.product.code+" - "+r.product.name:null),j.value=JSON.parse(JSON.stringify(m.performerGraphData)),se.value=JSON.parse(JSON.stringify(m.activeMachineGraphData));let g=[];g=JSON.parse(JSON.stringify(m.activeMachineGraphData)),Object.keys(g).forEach((r,o)=>{R.value.push({label:r+" (#)",data:Object.values(g[r]).map(b=>b.count),backgroundColor:o%2==0?d(s[o],.2):d(s[o],.9),borderColor:o%2==0?d(s[o],.2):d(s[o],.9),type:"line"})});for(let r=1;r<=12;r++)U.value.push(r);ne(),ie(),ce(),de()}return(s,n)=>(a(),l(y,null,[p(v(fe),{title:"Dashboard"}),p(xe,null,{header:w(()=>[Se]),default:w(()=>[e("div",Oe,[e("div",Ge,[e("div",Ce,[e("div",Ne,[!C.value&&v(G).includes("admin-access vends")?(a(),O(B,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[0]||(n[0]=t=>C.value=!0)},{default:w(()=>[p(v(we),{class:"h-4 w-4","aria-hidden":"true"}),Ve]),_:1})):x("",!0)]),C.value?(a(),l("div",$e,[e("div",je,[p(E,{placeholderStr:"Vend ID",modelValue:c.value.codes,"onUpdate:modelValue":n[1]||(n[1]=t=>c.value.codes=t),onKeyup:n[2]||(n[2]=P(t=>S(),["enter"]))},{default:w(()=>[k(" Vend ID "),Be]),_:1},8,["modelValue"]),p(E,{placeholderStr:"Cust ID",modelValue:c.value.customer_code,"onUpdate:modelValue":n[3]||(n[3]=t=>c.value.customer_code=t),onKeyup:n[4]||(n[4]=P(t=>S(),["enter"]))},{default:w(()=>[k(" Cust ID ")]),_:1},8,["modelValue"]),p(E,{placeholderStr:"Cust Name",modelValue:c.value.customer_name,"onUpdate:modelValue":n[5]||(n[5]=t=>c.value.customer_name=t),onKeyup:n[6]||(n[6]=P(t=>S(),["enter"]))},{default:w(()=>[k(" Cust Name ")]),_:1},8,["modelValue"]),v(G).includes("admin-access vends")?(a(),l("div",Te,[Fe,p(z,{modelValue:c.value.categories,"onUpdate:modelValue":n[7]||(n[7]=t=>c.value.categories=t),options:H.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):x("",!0),v(G).includes("admin-access vends")?(a(),l("div",Me,[Ae,p(z,{modelValue:c.value.operator,"onUpdate:modelValue":n[8]||(n[8]=t=>c.value.operator=t),options:M.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):x("",!0),e("div",null,[Je,p(z,{modelValue:c.value.locationType,"onUpdate:modelValue":n[9]||(n[9]=t=>c.value.locationType=t),options:F.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Le,[e("div",Ke,[e("div",Re,[p(B,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[10]||(n[10]=ve(t=>S(),["prevent"]))},{default:w(()=>[p(v(be),{class:"h-4 w-4","aria-hidden":"true"}),Ue]),_:1}),p(B,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[11]||(n[11]=t=>he())},{default:w(()=>[p(v(ke),{class:"h-4 w-4","aria-hidden":"true"}),Pe]),_:1}),p(B,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:n[12]||(n[12]=t=>C.value=!1)},{default:w(()=>[p(v(De),{class:"h-4 w-4","aria-hidden":"true"}),Ze]),_:1})])])])])):x("",!0),e("div",ze,[e("p",Ee,u(c.value&&c.value.operator?c.value.operator.name:v(X).name),1),(a(),O(T,{key:Y.value,type:"scatter",labels:A.value,datasets:N.value,options:ue.value},null,8,["labels","datasets","options"])),e("div",He,[e("div",Ye,[(a(),O(T,{key:q.value,type:"pie",labels:K.value,datasets:L.value,options:me.value},null,8,["labels","datasets","options"]))]),e("div",qe,[e("p",Qe,[We,e("div",null," Based on "+u(D.vendCount)+" active machine(s) ",1)]),e("div",Xe,[e("div",Ie,[e("div",et,[e("div",tt,[e("table",st,[at,e("tbody",ot,[(a(!0),l(y,null,f(j.value.data,(t,h)=>(a(),l("tr",{key:t.id},[e("td",rt,u(h+1),1),e("td",lt,[t.customer?(a(),l("span",nt,[k(u(t.customer.code)+" ",1),it,k(" "+u(t.customer.name),1)])):(a(),l("span",ct,[k(u(t.code)+" ",1),dt,k(" "+u(t.name),1)]))]),e("td",ut,u(t.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),e("td",pt,u(t.count),1)]))),128)),j.value.data.length?x("",!0):(a(),l("tr",mt,ht))])])])])])])])]),e("div",gt,[(a(),O(T,{key:Q.value,type:"scatter",labels:J.value,datasets:V.value,options:pe.value},null,8,["labels","datasets","options"]))]),e("div",ft,[(a(),O(T,{key:W.value,type:"scatter",labels:U.value,datasets:R.value,options:ye.value},null,8,["labels","datasets","options"]))]),v(G).includes("admin-access vends")?(a(),l("div",vt,[_t,e("div",xt,[e("div",bt,[wt,e("select",{id:"tabs",name:"tabs",class:"block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",onChange:n[13]||(n[13]=t=>ae(t))},[(a(!0),l(y,null,f(I.value,t=>(a(),l("option",{key:t,value:t.href,selected:t.current},u(t.name),9,Dt))),128))],32)]),e("div",kt,[e("div",St,[e("nav",Ot,[(a(!0),l(y,null,f(I.value,t=>(a(),l("span",{key:t.name,class:_e(["hover:cursor-pointer",[t.current?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-200 hover:text-gray-700","flex whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]]),onClick:h=>ae(t)},u(t.name),11,Gt))),128))])])])]),e("div",Ct,[e("div",Nt,[e("div",Vt,[e("div",$t,[e("table",jt,[e("thead",Bt,[e("tr",null,[Tt,Ft,(a(!0),l(y,null,f(D.months.data,t=>(a(),l("th",Mt,u(t.short_name),1))),256))])]),(a(!0),l(y,null,f(D.monthsByModel,(t,h)=>(a(),l("tbody",At,[e("tr",null,[e("td",Jt,u(h),1),Lt,(a(!0),l(y,null,f(D.months.data,g=>(a(),l("td",Kt,[(a(!0),l(y,null,f(t,(r,o)=>(a(),l("span",null,[g.number==o?(a(),l("span",Rt,u(r.average.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)):x("",!0)]))),256))]))),256))]),e("tr",null,[Ut,(a(!0),l(y,null,f(D.months.data,g=>(a(),l("td",Pt,[(a(!0),l(y,null,f(t,(r,o)=>(a(),l("span",null,[g.number==o?(a(),l("span",Zt,u(r.vend_count.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})),1)):x("",!0)]))),256))]))),256))]),e("tr",null,[zt,(a(!0),l(y,null,f(D.months.data,g=>(a(),l("td",Et,[(a(!0),l(y,null,f(t,(r,o)=>(a(),l("span",null,[g.number==o?(a(),l("span",Ht,u(r.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)):x("",!0)]))),256))]))),256))]),j.value.data.length?x("",!0):(a(),l("tr",Yt,Qt))]))),256))])])])])])])):x("",!0)])])])])]),_:1})],64))}};export{cs as default};
