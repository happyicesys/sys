import{g as p,Q as D,h as z,f as d,a as l,u as g,w as n,F as A,o as r,Z as E,b as t,d as u,t as c,k as K,l as v,c as x,O as h,n as Q,e as U}from"./app.a9d91416.js";import{_ as Y}from"./Authenticated.b1486fb5.js";import{_ as w}from"./Button.d22f3e1b.js";import Z from"./ChannelOverview.be143fd2.js";import{_ as q}from"./Paginator.89835e62.js";import{_ as M,r as G}from"./SearchInput.eb6b9537.js";import{_ as V}from"./MultiSelect.61b8b916.js";import{_,a as f}from"./TableData.356f8430.js";import{r as H}from"./BackspaceIcon.98ee71eb.js";import{r as J}from"./MagnifyingGlassCircleIcon.d74a78cf.js";import{r as W}from"./PauseCircleIcon.9b3cca46.js";import{r as X}from"./PlayCircleIcon.e87b24a4.js";import{r as ee}from"./XCircleIcon.ff176fff.js";import"./keyboard.32190f08.js";import"./use-resolve-button-type.37e42bc0.js";import"./RectangleStackIcon.d6e5a699.js";import"./FormInput.c43e67a0.js";import"./Modal.997b1b20.js";import"./disposables.b24fafcf.js";import"./CheckCircleIcon.cb242744.js";import"./PencilSquareIcon.156a98cf.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.3656b17c.js";const te=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Delivery Platform Vend ",-1),le={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ne={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},se={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ae=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),oe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Del Product Mapping ",-1),re=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Active? ",-1),ie={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},de={class:"mt-3"},ue={class:"flex space-x-1"},ce=t("span",null," Search ",-1),me=t("span",null," Reset ",-1),pe={class:"flex flex-col space-y-2"},ve={class:"text-sm text-gray-700 leading-5 flex space-x-1"},_e=t("span",null,"Showing",-1),fe={class:"font-medium"},ge=t("span",null,"to",-1),xe={class:"font-medium"},he=t("span",null,"of",-1),ye={class:"font-medium"},be=t("span",null,"results",-1),ke={class:"mt-6 flex flex-col"},we={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},Ve={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ce={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Pe={class:"bg-gray-100"},Oe={class:"divide-x divide-gray-200"},Ie={class:"bg-white"},Se={key:0,class:"inline-flex items-center rounded-md bg-blue-100 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-800/10"},$e={key:0},Le={key:0},Be={key:1},De={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},Ae={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},Ue={class:"flex flex-col space-y-1"},Me={key:2,class:"text-xs"},Ne={key:3,class:"text-xs"},je=t("span",{class:"text-xs"},"Unbind VM",-1),Fe={key:0},Re=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Te=[Re],ut={__name:"Index",props:{deliveryProductMappingVends:Object,deliveryPlatformOperatorOptions:Object,deliveryProductMappingOptions:Object},setup(o){const y=o,s=p({vend_code:"",delivery_platform_operator_id:"",delivery_product_mapping_id:"",platform_ref_id:"",sortKey:"",sortBy:!1,status:"",numberPerPage:100}),C=p([]),b=p([]);p();const P=p([]),S=p();D().props.auth.operatorCountry;const O=p([]),k=p(!1);D().props.auth.permissions,p(),z(()=>{C.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],O.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=O.value[0],b.value=[{id:"all",name:"All"},...y.deliveryPlatformOperatorOptions.data.map(i=>({id:i.id,name:i.deliveryPlatform.name+" ("+i.type+")"}))],s.value.delivery_platform_operator_id=b.value[0],P.value=[{id:"all",name:"All"},...y.deliveryProductMappingOptions.data.map(i=>({id:i.id,name:i.name}))],s.value.is_active=C.value[1],s.value.delivery_platform_operator_id=b.value[2],s.value.delivery_product_mapping_id=P.value[0]});function N(i){S.value=i,k.value=!0}function j(){k.value=!1}function $(){h.get("/delivery-product-mapping-vends",{...s.value,delivery_platform_operator_id:s.value.delivery_platform_operator_id.id,delivery_product_mapping_id:s.value.delivery_product_mapping_id.id,is_active:s.value.is_active.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function F(){h.get("/delivery-product-mapping-vends")}function R(i){let a=i.is_active?"Are you sure to pause this vending machine?":"Are you sure to resume this vending machine?";!confirm(a)||h.post("/delivery-product-mappings/vends/"+i.id+"/toggle-pause-vend",{},{preserveState:!1,preserveScroll:!0,replace:!0})}function T(i){!confirm("Are you sure to delete this entry?")||h.delete("/delivery-product-mappings/unbind/"+i,{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{h.reload({only:["unbindedVendOptions"]}),unbindedVendOptions.value=y.unbindedVendOptions?y.unbindedVendOptions.data:[]}})}return(i,a)=>(r(),d(A,null,[l(g(E),{title:"Delivery Platform Vend"}),l(Y,null,{header:n(()=>[te]),default:n(()=>{var I,L;return[t("div",le,[t("div",ne,[t("div",se,[t("div",null,[ae,l(V,{modelValue:s.value.delivery_platform_operator_id,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.delivery_platform_operator_id=e),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[oe,l(V,{modelValue:s.value.delivery_product_mapping_id,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.delivery_product_mapping_id=e),options:P.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l(M,{placeholderStr:"Vend ID",modelValue:s.value.vend_code,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.vend_code=e)},{default:n(()=>[u(" Vend ID ")]),_:1},8,["modelValue"]),l(M,{placeholderStr:"Platform ID",modelValue:s.value.platform_ref_id,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.platform_ref_id=e)},{default:n(()=>[u(" Platform ID ")]),_:1},8,["modelValue"]),t("div",null,[re,l(V,{modelValue:s.value.is_active,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.is_active=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),t("div",ie,[t("div",de,[t("div",ue,[l(w,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[5]||(a[5]=e=>$())},{default:n(()=>[l(g(G),{class:"h-4 w-4","aria-hidden":"true"}),ce]),_:1}),l(w,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[6]||(a[6]=e=>F())},{default:n(()=>[l(g(H),{class:"h-4 w-4","aria-hidden":"true"}),me]),_:1})])]),t("div",pe,[t("p",ve,[_e,t("span",fe,c((I=o.deliveryProductMappingVends.meta.from)!=null?I:0),1),ge,t("span",xe,c((L=o.deliveryProductMappingVends.meta.to)!=null?L:0),1),he,t("span",ye,c(o.deliveryProductMappingVends.meta.total),1),be]),l(V,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value.numberPerPage=e),options:O.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:$},null,8,["modelValue","options"])])])]),t("div",ke,[t("div",we,[t("div",Ve,[t("table",Ce,[t("thead",Pe,[t("tr",Oe,[l(_,null,{default:n(()=>[u(" # ")]),_:1}),l(_,null,{default:n(()=>[u(" Vend ID ")]),_:1}),l(_,null,{default:n(()=>[u(" Platform ID ")]),_:1}),l(_,null,{default:n(()=>[u(" Customer ID ")]),_:1}),l(_,null,{default:n(()=>[u(" Customer Name ")]),_:1}),l(_,null,{default:n(()=>[u(" Channel ")]),_:1}),l(_,null,{default:n(()=>[u(" VM Status ")]),_:1}),l(_)])]),t("tbody",Ie,[(r(!0),d(A,null,K(o.deliveryProductMappingVends.data,(e,m)=>(r(),d("tr",{key:e.id,class:"divide-x divide-gray-200"},[l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-center"},{default:n(()=>[u(c(o.deliveryProductMappingVends.meta.from+m),1)]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-center"},{default:n(()=>[u(c(e.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-left"},{default:n(()=>[u(c(e.platform_ref_id)+" ",1),e.binded_times>1?(r(),d("span",Se,c(e.binded_times),1)):v("",!0)]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-center"},{default:n(()=>[e.vend&&e.vend.latestVendBinding&&e.vend.latestVendBinding.customer?(r(),d("span",$e,c(e.vend.latestVendBinding.customer.code),1)):v("",!0)]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-left"},{default:n(()=>[e.vend&&e.vend.latestVendBinding&&e.vend.latestVendBinding.customer?(r(),d("span",Le,c(e.vend.latestVendBinding.customer.name),1)):(r(),d("span",Be,c(e.vend.name),1))]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-center"},{default:n(()=>[e.deliveryProductMappingVendChannels?(r(),x(g(J),{key:0,class:"h-5 w-5 text-green-500 hover:cursor-pointer","aria-hidden":"true",onClick:B=>N(e)},null,8,["onClick"])):v("",!0)]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-center"},{default:n(()=>[e.is_active==1?(r(),d("span",De," Operating ")):v("",!0),e.is_active==0?(r(),d("span",Ae," Paused ")):v("",!0)]),_:2},1032,["currentIndex","totalLength"]),l(f,{currentIndex:m,totalLength:o.deliveryProductMappingVends.length,inputClass:"text-center"},{default:n(()=>[t("div",Ue,[l(w,{class:Q(["flex space-x-1 w-fit",[e.is_active?"bg-yellow-300 hover:bg-yellow-400 text-black":"bg-green-500 hover:bg-green-600 text-white"]]),onClick:U(B=>R(e),["prevent"])},{default:n(()=>[e.is_active?(r(),x(g(W),{key:0,class:"w-3 h-3"})):(r(),x(g(X),{key:1,class:"w-3 h-3"})),e.is_active?(r(),d("span",Me," Pause VM ")):(r(),d("span",Ne," Resume VM "))]),_:2},1032,["class","onClick"]),e.is_active?v("",!0):(r(),x(w,{key:0,class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white w-fit",onClick:U(B=>T(e.id),["prevent"])},{default:n(()=>[l(g(ee),{class:"w-3 h-3"}),je]),_:2},1032,["onClick"]))])]),_:2},1032,["currentIndex","totalLength"])]))),128)),o.deliveryProductMappingVends.data.length?v("",!0):(r(),d("tr",Fe,Te))])]),o.deliveryProductMappingVends.data.length?(r(),x(q,{key:0,links:o.deliveryProductMappingVends.links,meta:o.deliveryProductMappingVends.meta},null,8,["links","meta"])):v("",!0)])])])]),k.value?(r(),x(Z,{key:0,deliveryProductMappingVendModel:S.value,showModal:k.value,onModalClose:j},null,8,["deliveryProductMappingVendModel","showModal"])):v("",!0)]}),_:1})],64))}};export{ut as default};
