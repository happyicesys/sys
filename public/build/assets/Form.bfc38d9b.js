import{g as _,T as V,h as q,c as C,a as n,w as u,q as D,o,b as t,f as l,l as r,t as m,d as p,n as f,u as v,F as G,k as z,e as E}from"./app.96ea2a79.js";import{_ as g}from"./Button.13adef95.js";import{_ as w}from"./FormInput.07fd664d.js";import{_ as J}from"./FormTextarea.7d33595e.js";import{_ as K}from"./Modal.b9f9b65f.js";import{_ as b}from"./MultiSelect.e76fa965.js";import{r as O}from"./PlusCircleIcon.1757b41c.js";import{r as L}from"./ArrowUturnLeftIcon.75dbbf89.js";import{r as Q}from"./CheckCircleIcon.a6f99907.js";import{r as N}from"./BackspaceIcon.1ba6e5a9.js";import"./open-closed.f8903cc5.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.f108e210.js";const H={class:"flex flex-col md:flex-row space-x-2"},W={key:0,class:"text-gray-600"},X={key:1},Y={key:2,class:"text-gray-600"},Z=["onSubmit"],I={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},ee={class:"sm:col-span-2"},te={class:"sm:col-span-4"},ae={class:"sm:col-span-3"},se=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Country ",-1),oe={key:0,class:"text-sm text-red-600"},le={class:"sm:col-span-3"},ne=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Timezone ",-1),re={key:0,class:"text-sm text-red-600"},de={class:"sm:col-span-4"},ie=t("span",{class:"text-[9px]"}," (For Gross Margin Calculation) ",-1),me={class:"sm:col-span-6"},ue={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},ce=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," QR Payment Gateway(s) ")])],-1),pe=[ce],ye=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Payment Gateway ",-1),_e={key:0,class:"text-sm text-red-600"},ve={key:2,class:"sm:col-span-1"},ge=t("span",null," Add ",-1),xe={key:3,class:"sm:col-span-3"},fe={key:4,class:"sm:col-span-3"},we={key:5,class:"sm:col-span-3"},he={key:6,class:"sm:col-span-3"},be=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"},[p(" Type "),t("span",{class:"text-red-500"},"*")],-1),ke={key:0,class:"text-sm text-red-600"},Ve={key:7,class:"sm:col-span-6 flex justify-end"},Ce=t("span",null," Add ",-1),Oe={key:8,class:"sm:col-span-6 flex flex-col mt-3"},Be={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Se={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},$e={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},je={class:"min-w-full divide-y divide-gray-300"},Pe=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Name "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Type "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Private Key "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Ae={class:"bg-white"},Ge={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ne={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ue={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Te={class:"whitespace-nowrap py-4 text-sm text-center"},Me={key:0},Fe=t("td",{colspan:"5",class:"whitespace-nowrap py-4 text-sm font-medium text-center"}," No Result Found ",-1),Re=[Fe],qe={key:9,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},De=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Access Vending Machine(s) ")])],-1),Ee=[De],Je={key:10,class:"sm:col-span-5"},Ke=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine to Bind ",-1),Le={key:0,class:"text-sm text-red-600"},Qe={key:11,class:"sm:col-span-1"},He=t("span",null," Add ",-1),We={key:12,class:"sm:col-span-6 flex flex-col mt-3"},Xe={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Ye={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Ze={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Ie={class:"min-w-full divide-y divide-gray-300"},et=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend ID "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Name "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),tt={class:"bg-white"},at={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},st={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},ot={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},lt={key:0},nt=t("br",null,null,-1),rt={key:1},dt={class:"whitespace-nowrap py-4 text-sm text-center"},it={key:0},mt=t("td",{colspan:"4",class:"whitespace-nowrap py-4 text-sm font-medium text-red-600 text-center"}," No Binding = Access to All ",-1),ut=[mt],ct={class:"sm:col-span-6"},pt={class:"flex space-x-1 mt-5 justify-end"},yt=t("span",null," Back ",-1),_t=t("span",null," Save ",-1),St={__name:"Form",props:{countries:[Array,Object],operator:Object,timezones:[Array,Object],type:String,showModal:Boolean,countryPaymentGateways:[Array,Object],operatorPaymentGatewayTypes:[Array,Object],unbindedVends:[Array,Object],permissions:[Array,Object]},emits:["modalClose"],setup(c,{emit:B}){const d=c,S=_([]),e=_(V(P())),$=_([]),k=_([]),x=_([]),j=_([]),y=_([]);q(()=>{k.value=d.countryPaymentGateways.data,S.value=d.countries.data,$.value=d.timezones.map((i,s)=>({id:s,name:i})),k.value=d.countryPaymentGateways.data,j.value=d.operatorPaymentGatewayTypes,y.value=d.unbindedVends.data,x.value=d.operator?d.operator.operatorPaymentGateways:null,e.value=d.operator?V(d.operator):V(P())});function P(){return{id:"",code:"",name:"",gst_vat_rate:"",country_id:"",payment_gateway_id:"",payment_gateway_type:"",payment_gateway_key1:"",payment_gateway_key2:"",payment_gateway_key3:"",timezone:"",remarks:"",vend_id:""}}function U(){d.operator.vends.indexOf(e.value.vend_id)<0&&(d.operator.vends.push(e.value.vend_id),d.operator.vends.sort((i,s)=>i.code-s.code),y.value.splice(y.value.indexOf(e.value.vend_id),1),y.value.sort((i,s)=>i.code-s.code))}function T(i){d.operator.vends.splice(d.operator.vends.indexOf(i),1),y.value.push(i),y.value.sort((s,a)=>s.code-a.code)}function A(){x.value.indexOf(e.value.payment_gateway)<0&&x.value.push({id:e.value.payment_gateway_id,key1:e.value.payment_gateway_key1,key2:e.value.payment_gateway_key2,key3:e.value.payment_gateway_key3,type:e.value.payment_gateway_type.id,paymentGateway:JSON.parse(JSON.stringify(e.value.payment_gateway))})}function M(i){x.value.splice(x.value.indexOf(i),1)}function F(){e.value.clearErrors(),d.type==="create"&&e.value.transform(i=>({...i,timezone:i.timezone.name,country_id:i.country_id.id})).post("/operators/create",{onSuccess:()=>{B("modalClose")},preserveState:!0,replace:!0}),d.type==="update"&&e.value.transform(i=>({...i,timezone:i.timezone.name,country_id:i.country_id.id,operator:d.operator,paymentGateways:x.value})).post("/operators/"+e.value.id+"/update",{onSuccess:()=>{B("modalClose")},preserveState:!0,replace:!0})}return(i,s)=>(o(),C(D,{to:"body"},[n(K,{open:c.showModal,onModalClose:s[16]||(s[16]=a=>i.$emit("modalClose"))},{header:u(()=>[t("div",H,[d.operator?(o(),l("span",W," Editing ")):r("",!0),d.operator?(o(),l("span",X,m(d.operator.name),1)):(o(),l("span",Y," Create New Operator "))])]),default:u(()=>[t("form",{onSubmit:E(F,["prevent"]),id:"submit"},[t("div",I,[t("div",ee,[n(w,{modelValue:e.value.code,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.code=a),error:e.value.errors.code},{default:u(()=>[p(" Code ")]),_:1},8,["modelValue","error"])]),t("div",te,[n(w,{modelValue:e.value.name,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.name=a),error:e.value.errors.name,required:"true"},{default:u(()=>[p(" Name ")]),_:1},8,["modelValue","error"])]),t("div",ae,[se,n(b,{modelValue:e.value.country_id,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.country_id=a),options:S.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.country_id?(o(),l("div",oe,m(e.value.errors.country_id),1)):r("",!0)]),t("div",le,[ne,n(b,{modelValue:e.value.timezone,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.timezone=a),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.timezone?(o(),l("div",re,m(e.value.errors.timezone),1)):r("",!0)]),t("div",de,[n(w,{modelValue:e.value.gst_vat_rate,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value.gst_vat_rate=a),error:e.value.errors.gst_vat_rate},{default:u(()=>[p(" GST or VAT Rate (%) "),ie]),_:1},8,["modelValue","error"])]),t("div",me,[n(J,{modelValue:e.value.remarks,"onUpdate:modelValue":s[5]||(s[5]=a=>e.value.remarks=a),error:e.value.errors.remarks},{default:u(()=>[p(" Remarks ")]),_:1},8,["modelValue","error"])]),e.value.id?(o(),l("div",ue,pe)):r("",!0),e.value.id?(o(),l("div",{key:1,class:f([e.value.payment_gateway?"sm:col-span-6":"sm:col-span-5"])},[ye,n(b,{modelValue:e.value.payment_gateway,"onUpdate:modelValue":s[6]||(s[6]=a=>e.value.payment_gateway=a),options:k.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",ref:"multiselect"},null,8,["modelValue","options"]),e.value.errors.payment_gateway?(o(),l("div",_e,m(e.value.errors.payment_gateway),1)):r("",!0)],2)):r("",!0),e.value.id&&!e.value.payment_gateway?(o(),l("div",ve,[n(g,{type:"button",onClick:s[7]||(s[7]=a=>A()),class:f(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!e.value.payment_gateway||!e.value.payment_gateway_type?"opacity-50 cursor-not-allowed":""]]),disabled:!e.value.payment_gateway||!e.value.payment_gateway_type},{default:u(()=>[n(v(O),{class:"w-4 h-4"}),ge]),_:1},8,["class","disabled"])])):r("",!0),e.value.id&&e.value.payment_gateway&&e.value.payment_gateway.key1_name?(o(),l("div",xe,[n(w,{modelValue:e.value.payment_gateway_key1,"onUpdate:modelValue":s[8]||(s[8]=a=>e.value.payment_gateway_key1=a),error:e.value.errors.payment_gateway_key1,required:"true"},{default:u(()=>[p(m(e.value.payment_gateway.key1_name),1)]),_:1},8,["modelValue","error"])])):r("",!0),e.value.id&&e.value.payment_gateway&&e.value.payment_gateway.key2_name?(o(),l("div",fe,[n(w,{modelValue:e.value.payment_gateway_key2,"onUpdate:modelValue":s[9]||(s[9]=a=>e.value.payment_gateway_key2=a),error:e.value.errors.payment_gateway_key2},{default:u(()=>[p(m(e.value.payment_gateway.key2_name),1)]),_:1},8,["modelValue","error"])])):r("",!0),e.value.id&&e.value.payment_gateway&&e.value.payment_gateway.key3_name?(o(),l("div",we,[n(w,{modelValue:e.value.payment_gateway_key3,"onUpdate:modelValue":s[10]||(s[10]=a=>e.value.payment_gateway_key3=a),error:e.value.errors.payment_gateway_key3},{default:u(()=>[p(m(e.value.payment_gateway.key3_name),1)]),_:1},8,["modelValue","error"])])):r("",!0),e.value.id&&e.value.payment_gateway?(o(),l("div",he,[be,n(b,{modelValue:e.value.payment_gateway_type,"onUpdate:modelValue":s[11]||(s[11]=a=>e.value.payment_gateway_type=a),options:j.value,trackBy:"id",valueProp:"id",label:"id",placeholder:"Select","open-direction":"bottom",class:"mt-1",ref:"multiselect"},null,8,["modelValue","options"]),e.value.errors.payment_gateway_type?(o(),l("div",ke,m(e.value.errors.payment_gateway_type),1)):r("",!0)])):r("",!0),e.value.id&&e.value.payment_gateway?(o(),l("div",Ve,[n(g,{type:"button",onClick:s[12]||(s[12]=a=>A()),class:f(["bg-green-500 hover:bg-green-600 text-white",[!e.value.payment_gateway||!e.value.payment_gateway_type||!e.value.payment_gateway_key1?"opacity-50 cursor-not-allowed":""]]),disabled:!e.value.payment_gateway||!e.value.payment_gateway_type||!e.value.payment_gateway_key1||!c.permissions.includes("update operators")},{default:u(()=>[n(v(O),{class:"w-4 h-4"}),Ce]),_:1},8,["class","disabled"])])):r("",!0),e.value.id?(o(),l("div",Oe,[t("div",Be,[t("div",Se,[t("div",$e,[t("table",je,[Pe,t("tbody",Ae,[(o(!0),l(G,null,z(c.operator.operatorPaymentGateways,(a,h)=>(o(),l("tr",{key:a.id,class:f(h%2===0?void 0:"bg-gray-50")},[t("td",Ge,m(h+1),1),t("td",ze,m(a.paymentGateway.name),1),t("td",Ne,m(a.type),1),t("td",Ue,m(a.key1),1),t("td",Te,[n(g,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:R=>M(a)},{default:u(()=>[n(v(N),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),c.operator.operatorPaymentGateways.length?r("",!0):(o(),l("tr",Me,Re))])])])])])])):r("",!0),e.value.id?(o(),l("div",qe,Ee)):r("",!0),e.value.id?(o(),l("div",Je,[Ke,n(b,{modelValue:e.value.vend_id,"onUpdate:modelValue":s[13]||(s[13]=a=>e.value.vend_id=a),options:y.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",ref:"multiselect"},null,8,["modelValue","options"]),e.value.errors.vend_id?(o(),l("div",Le,m(e.value.errors.vend_id),1)):r("",!0)])):r("",!0),e.value.id?(o(),l("div",Qe,[n(g,{type:"button",onClick:s[14]||(s[14]=a=>U()),class:f(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[e.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!e.value.vend_id&&!c.permissions.includes("update operators")},{default:u(()=>[n(v(O),{class:"w-4 h-4"}),He]),_:1},8,["class","disabled"])])):r("",!0),e.value.id?(o(),l("div",We,[t("div",Xe,[t("div",Ye,[t("div",Ze,[t("table",Ie,[et,t("tbody",tt,[(o(!0),l(G,null,z(c.operator.vends,(a,h)=>(o(),l("tr",{key:a.id,class:f(h%2===0?void 0:"bg-gray-50")},[t("td",at,m(h+1),1),t("td",st,m(a.code),1),t("td",ot,[a.latestVendBinding&&a.latestVendBinding.customer?(o(),l("span",lt,[p(m(a.latestVendBinding.customer.code)+" ",1),nt,p(" "+m(a.latestVendBinding.customer.name),1)])):(o(),l("span",rt,m(a.name),1))]),t("td",dt,[c.permissions.includes("update operators")?(o(),C(g,{key:0,class:"bg-red-400 hover:bg-red-500 text-white",onClick:R=>T(a)},{default:u(()=>[n(v(N),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):r("",!0)])],2))),128)),c.operator.vends.length?r("",!0):(o(),l("tr",it,ut))])])])])])])):r("",!0)]),t("div",ct,[t("div",pt,[n(g,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:s[15]||(s[15]=a=>i.$emit("modalClose")),form:"submit"},{default:u(()=>[n(v(L),{class:"w-4 h-4"}),yt]),_:1}),c.permissions.includes("update operators")?(o(),C(g,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[n(v(Q),{class:"w-4 h-4"}),_t]),_:1})):r("",!0)])])],40,Z)]),_:1},8,["open"])]))}};export{St as default};
