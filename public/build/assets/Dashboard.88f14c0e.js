import{o as c,f as p,b as e,g as l,K as te,S as me,a as d,u as v,w as f,F as ae,Z as ve,c as x,l as w,N as z,d as h,e as fe,t as y,k as ye,O as R}from"./app.1ece038f.js";import{_ as ge}from"./Authenticated.f573d049.js";import{_ as N}from"./Button.5fc98e84.js";import{_ as V}from"./Graph.12d3ddc0.js";import{_ as U}from"./MultiSelect.9fec74a9.js";import{_ as P,r as he}from"./SearchInput.72ec02c1.js";import{r as be}from"./BackspaceIcon.1cffa977.js";import"./open-closed.64ac3fed.js";import"./use-resolve-button-type.e72f4658.js";import"./RectangleStackIcon.aee48c17.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.0576dfad.js";function _e(D,u){return c(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z","clip-rule":"evenodd"})])}function xe(D,u){return c(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z","clip-rule":"evenodd"})])}const we=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),De={class:"p-3"},Ge={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},Se={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Oe={class:"p-4"},ke=e("span",null," Show Filters ",-1),Ce={key:0,class:"p-4 mx-2"},Ne={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Ve=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),$e={key:0},je=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),Je={key:1},Be=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),Ae=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Me={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},Te={class:"mt-3"},Le={class:"flex space-x-1"},Fe=e("span",null," Search ",-1),Ke=e("span",null," Reset ",-1),ze=e("span",null," Hide Filters ",-1),Re={class:"p-1 bg-white border-b border-gray-200 flex flex-col space-y-6"},Ue={class:"text-center p-2"},Pe={class:"flex flex-col md:flex-row pt-5"},Ze={class:"md:basis-1/3 m-1"},Ee={class:"md:basis-2/3 my-1 mx-4 px-4"},He={class:"text-sm flex justify-between"},Ye=e("div",null," Past 30 Days - Top 10 Best Performance ",-1),qe={class:"mt-2 flow-root"},Qe={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},We={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},Xe={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},Ie={class:"min-w-full divide-y divide-gray-300"},et=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),tt={class:"divide-y divide-gray-200 bg-white"},at={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},st={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},ot={key:0},rt=e("br",null,null,-1),lt={key:1},it=e("br",null,null,-1),nt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},ct={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},dt={key:0},ut=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),pt=[ut],mt={class:"pt-5"},vt={class:"pt-5"},Ot={__name:"Dashboard",props:{activeMachineGraphData:Object,categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object,vendCount:Number},setup(D){const u=D,i=l({categories:[],categoryGroups:[],codes:"",customer_code:"",customer_name:"",day_date_from:"",day_date_to:"",locationType:"",operator:""}),Z=l([]),se=l([]),E=l(0),H=l(0),Y=l(0),q=l(0),oe=()=>{E.value+=1},re=()=>{H.value+=1},le=()=>{Y.value+=1},ie=()=>{q.value+=1},$=l([]),Q=te().props.auth.operator,j=l([]),J=te().props.auth.permissions,G=l(!1),W=l([]),S=l([]),B=l([]),ne=l({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),X=l([]),O=l([]),A=l([]),ce=l({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),k=l([]),M=l([]),T=l([]),de=l({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),L=l([]),I=l([]),F=l([]),K=l([]),ue=l({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Count(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Number of Active Vending Machine in Market, by Month"}}});me(()=>{Z.value=u.categories.data.map(t=>({id:t.id,name:t.name})),se.value=u.categoryGroups.data.map(t=>({id:t.id,name:t.name})),$.value=[{id:"all",name:"All"},...u.locationTypeOptions.data.map(t=>({id:t.id,name:t.name}))],j.value=[{id:"all",name:"All"},...u.operatorOptions.data.map(t=>({id:t.id,name:t.name}))],i.value.locationType=$.value[0],i.value.operator=j.value.find(t=>t.id==Q.id),ee()});function n(t,o){var a=parseInt(t.slice(1,3),16),g=parseInt(t.slice(3,5),16),b=parseInt(t.slice(5,7),16);return"rgba("+a+", "+g+", "+b+", "+o+")"}function C(){R.visit(route("dashboard",{...i.value,categories:i.value.categories.map(t=>t.id),categoryGroups:i.value.categoryGroups.map(t=>t.id),location_type_id:i.value.locationType.id,operator_id:i.value.operator.id}),{only:["activeMachineGraphData","dayGraphData","monthGraphData","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{R.reload({only:["activeMachineGraphData","dayGraphData","monthGraphData","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0}),ee()}})}function pe(){R.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function ee(){I.value=[],F.value=[],K.value=[],W.value=[],S.value=[],B.value=[],X.value=[],O.value=[],A.value=[],k.value=[],M.value=[],T.value=[];let t=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],o=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];W.value=JSON.parse(JSON.stringify(u.dayGraphData));let a=[];a=_.groupBy(JSON.parse(JSON.stringify(u.dayGraphData)).data,"month_name"),Object.keys(a).forEach((r,s)=>{S.value.push({label:r+" (#)",data:a[r].map(m=>m.count),backgroundColor:s%2==0?n(t[s+2],.2):n(t[s+2],.9),borderColor:s%2==0?n(t[s+2],.2):n(t[s+2],.9),yAxisID:"y1",type:"line",order:1}),S.value.push({label:r+" ($)",data:a[r].map(m=>m.amount),backgroundColor:s%2==0?n(t[s],.2):n(t[s],1),borderColor:s%2==0?n(t[s],.2):n(t[s],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let r=1;r<=31;r++)B.value.push(r);X.value=JSON.parse(JSON.stringify(u.monthGraphData));let g=[];g=JSON.parse(JSON.stringify(u.monthGraphData)),Object.keys(g).forEach((r,s)=>{O.value.push({label:r+" (#)",data:Object.values(g[r]).map(m=>m.count),backgroundColor:s%2==0?n(t[s+2],.2):n(t[s+2],.9),borderColor:s%2==0?n(t[s+2],.2):n(t[s+2],.9),yAxisID:"y1",type:"line",order:1}),O.value.push({label:r+" ($)",data:Object.values(g[r]).map(m=>m.amount),backgroundColor:s%2==0?n(t[s],.2):n(t[s],1),borderColor:s%2==0?n(t[s],.2):n(t[s],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let r=1;r<=12;r++)A.value.push(r);k.value=JSON.parse(JSON.stringify(u.productGraphData)),M.value.push({label:"Sales",data:k.value.data.map(r=>r.count),backgroundColor:o}),T.value=k.value.data.map(r=>r.product?r.product.code+" - "+r.product.name:null),L.value=JSON.parse(JSON.stringify(u.performerGraphData)),I.value=JSON.parse(JSON.stringify(u.activeMachineGraphData));let b=[];b=JSON.parse(JSON.stringify(u.activeMachineGraphData)),Object.keys(b).forEach((r,s)=>{F.value.push({label:r+" (#)",data:Object.values(b[r]).map(m=>m.count),backgroundColor:s%2==0?n(t[s],.2):n(t[s],.9),borderColor:s%2==0?n(t[s],.2):n(t[s],.9),type:"line"})});for(let r=1;r<=12;r++)K.value.push(r);oe(),re(),le(),ie()}return(t,o)=>(c(),p(ae,null,[d(v(ve),{title:"Dashboard"}),d(ge,null,{header:f(()=>[we]),default:f(()=>[e("div",De,[e("div",Ge,[e("div",Se,[e("div",Oe,[!G.value&&v(J).includes("admin-access vends")?(c(),x(N,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[0]||(o[0]=a=>G.value=!0)},{default:f(()=>[d(v(_e),{class:"h-4 w-4","aria-hidden":"true"}),ke]),_:1})):w("",!0)]),G.value?(c(),p("div",Ce,[e("div",Ne,[d(P,{placeholderStr:"Vend ID",modelValue:i.value.codes,"onUpdate:modelValue":o[1]||(o[1]=a=>i.value.codes=a),onKeyup:o[2]||(o[2]=z(a=>C(),["enter"]))},{default:f(()=>[h(" Vend ID "),Ve]),_:1},8,["modelValue"]),d(P,{placeholderStr:"Cust ID",modelValue:i.value.customer_code,"onUpdate:modelValue":o[3]||(o[3]=a=>i.value.customer_code=a),onKeyup:o[4]||(o[4]=z(a=>C(),["enter"]))},{default:f(()=>[h(" Cust ID ")]),_:1},8,["modelValue"]),d(P,{placeholderStr:"Cust Name",modelValue:i.value.customer_name,"onUpdate:modelValue":o[5]||(o[5]=a=>i.value.customer_name=a),onKeyup:o[6]||(o[6]=z(a=>C(),["enter"]))},{default:f(()=>[h(" Cust Name ")]),_:1},8,["modelValue"]),v(J).includes("admin-access vends")?(c(),p("div",$e,[je,d(U,{modelValue:i.value.categories,"onUpdate:modelValue":o[7]||(o[7]=a=>i.value.categories=a),options:Z.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):w("",!0),v(J).includes("admin-access vends")?(c(),p("div",Je,[Be,d(U,{modelValue:i.value.operator,"onUpdate:modelValue":o[8]||(o[8]=a=>i.value.operator=a),options:j.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):w("",!0),e("div",null,[Ae,d(U,{modelValue:i.value.locationType,"onUpdate:modelValue":o[9]||(o[9]=a=>i.value.locationType=a),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Me,[e("div",Te,[e("div",Le,[d(N,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[10]||(o[10]=fe(a=>C(),["prevent"]))},{default:f(()=>[d(v(he),{class:"h-4 w-4","aria-hidden":"true"}),Fe]),_:1}),d(N,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[11]||(o[11]=a=>pe())},{default:f(()=>[d(v(be),{class:"h-4 w-4","aria-hidden":"true"}),Ke]),_:1}),d(N,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[12]||(o[12]=a=>G.value=!1)},{default:f(()=>[d(v(xe),{class:"h-4 w-4","aria-hidden":"true"}),ze]),_:1})])])])])):w("",!0),e("div",Re,[e("p",Ue,y(i.value&&i.value.operator?i.value.operator.name:v(Q).name),1),(c(),x(V,{key:E.value,type:"scatter",labels:B.value,datasets:S.value,options:ne.value},null,8,["labels","datasets","options"])),e("div",Pe,[e("div",Ze,[(c(),x(V,{key:H.value,type:"pie",labels:T.value,datasets:M.value,options:de.value},null,8,["labels","datasets","options"]))]),e("div",Ee,[e("p",He,[Ye,e("div",null," Based on "+y(D.vendCount)+" active machine(s) ",1)]),e("div",qe,[e("div",Qe,[e("div",We,[e("div",Xe,[e("table",Ie,[et,e("tbody",tt,[(c(!0),p(ae,null,ye(L.value.data,(a,g)=>(c(),p("tr",{key:a.id},[e("td",at,y(g+1),1),e("td",st,[a.customer?(c(),p("span",ot,[h(y(a.customer.code)+" ",1),rt,h(" "+y(a.customer.name),1)])):(c(),p("span",lt,[h(y(a.code)+" ",1),it,h(" "+y(a.name),1)]))]),e("td",nt,y(a.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),e("td",ct,y(a.count),1)]))),128)),L.value.data.length?w("",!0):(c(),p("tr",dt,pt))])])])])])])])]),e("div",mt,[(c(),x(V,{key:Y.value,type:"scatter",labels:A.value,datasets:O.value,options:ce.value},null,8,["labels","datasets","options"]))]),e("div",vt,[(c(),x(V,{key:q.value,type:"scatter",labels:K.value,datasets:F.value,options:ue.value},null,8,["labels","datasets","options"]))])])])])])]),_:1})],64))}};export{Ot as default};
