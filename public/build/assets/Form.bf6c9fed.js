import{o as r,f,b as e,g as S,T as x,h as $,c as m,a as n,w as l,p as D,t as B,l as d,d as c,e as y,u as v,O as j}from"./app.99614ce8.js";import{_ as p}from"./Button.f9684ed8.js";import{_ as h}from"./DatePicker.aa6d66a4.js";import{_ as w}from"./FormInput.6e5413a7.js";import{_ as M}from"./Modal.87069179.js";import{r as U}from"./ArrowPathIcon.141910ea.js";import{r as F}from"./ArrowUturnLeftIcon.1ecdf0f3.js";import{r as N}from"./CheckCircleIcon.d32a4446.js";import"./main.e3129d54.js";import"./keyboard.9caa1f2d.js";import"./disposables.ccbd4e76.js";function O(a,b){return r(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.232 12.207a.75.75 0 0 1 1.06.025l3.958 4.146V6.375a5.375 5.375 0 0 1 10.75 0V9.25a.75.75 0 0 1-1.5 0V6.375a3.875 3.875 0 0 0-7.75 0v10.003l3.957-4.146a.75.75 0 0 1 1.085 1.036l-5.25 5.5a.75.75 0 0 1-1.085 0l-5.25-5.5a.75.75 0 0 1 .025-1.06Z","clip-rule":"evenodd"})])}const T={class:"flex flex-col md:flex-row space-x-2"},A=e("span",{class:"text-gray-600"}," Editing ",-1),E={key:0},I={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6 pb-2"},K={class:"sm:col-span-6"},P={class:"sm:col-span-6"},q={class:"sm:col-span-6"},L={class:"sm:col-span-6"},R={class:"sm:col-span-6 flex justify-between"},Z={class:"flex space-x-1 mt-5 justify-start"},z=e("span",null," Restart ",-1),G={class:"flex space-x-1 mt-5 justify-end"},H=e("span",null," Back ",-1),J=e("span",null," Unbind ",-1),Q=e("span",null," Save ",-1),W={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},X=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," APK Logs ")])],-1),Y=[X],ee={key:1,class:"sm:col-span-6 flex flex-col mt-3"},te=e("div",{class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},[e("div",{class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},[e("div",{class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},[e("table",{class:"min-w-full divide-y divide-gray-300"},[e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Created At "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," File ")])]),e("tbody",{class:"bg-white"})])])])],-1),se=[te],pe={__name:"Form",props:{vend:Object,countries:Object,permissions:[Array,Object],type:String,showModal:Boolean},emits:["modalClose"],setup(a,{emit:b}){const i=a,g=b,t=S(x(_()));$(()=>{t.value=i.vend?x(i.vend):x(_()),t.value.name=i.vend.customer_code?i.vend.customer_code+"    "+i.vend.customer_name:i.vend.name});function _(){return{name:"",begin_date:"",serial_num:"",termination_date:"",private_key:""}}function V(u){j.post("/vends/"+u+"/restart",{},{preserveScroll:!0,preserveState:!0,replace:!0,onSuccess:()=>{g("modalClose")}})}function k(){t.value.clearErrors(),t.value.post("/vends/"+t.value.id+"/update",{onSuccess:()=>{g("modalClose")},preserveState:!0,replace:!0})}function C(u){t.value.post("/vends/"+u+"/unbind",{onSuccess:()=>{g("modalClose")},preserveState:!0,replace:!0})}return(u,s)=>(r(),m(D,{to:"body"},[n(M,{open:a.showModal,onModalClose:s[7]||(s[7]=o=>u.$emit("modalClose"))},{header:l(()=>[e("div",T,[A,a.vend?(r(),f("span",E,B(a.vend.code),1)):d("",!0)])]),default:l(()=>[e("form",{onSubmit:y(k,["prevent"]),id:"submit"},[e("div",I,[e("div",K,[n(w,{modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.name=o),error:t.value.errors.name,required:"true",disabled:a.vend.customer_code&&a.vend.customer_name},{default:l(()=>[c(" Name ")]),_:1},8,["modelValue","error","disabled"])]),e("div",P,[n(w,{modelValue:t.value.private_key,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.private_key=o),error:t.value.errors.private_key,disabled:!a.permissions.includes("update vends")},{default:l(()=>[c(" Private Key ")]),_:1},8,["modelValue","error","disabled"])]),e("div",q,[a.permissions.includes("update vends")?(r(),m(h,{key:0,modelValue:t.value.begin_date,"onUpdate:modelValue":s[2]||(s[2]=o=>t.value.begin_date=o),error:t.value.errors.begin_date,onInput:s[3]||(s[3]=o=>u.onDateFromChanged())},{default:l(()=>[c(" Begin Date (Default is the Creation/ First Invoice Date) ")]),_:1},8,["modelValue","error"])):d("",!0)]),e("div",L,[a.permissions.includes("update vends")?(r(),m(h,{key:0,modelValue:t.value.termination_date,"onUpdate:modelValue":s[4]||(s[4]=o=>t.value.termination_date=o),error:t.value.errors.termination_date,minDate:t.value.begin_date},{default:l(()=>[c(" Termination Date (Default is the Unbinding Date from CMS, status change) ")]),_:1},8,["modelValue","error","minDate"])):d("",!0)])]),e("div",R,[e("div",Z,[n(p,{class:"bg-red-500 hover:bg-red-600 text-white flex space-x-1",onClick:s[5]||(s[5]=y(o=>V(a.vend.id),["prevent"]))},{default:l(()=>[n(v(U),{class:"w-4 h-4"}),z]),_:1})]),e("div",G,[n(p,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",form:"submit"},{default:l(()=>[n(v(F),{class:"w-4 h-4"}),H]),_:1}),a.vend&&a.vend.customer&&a.permissions.includes("update vends")?(r(),m(p,{key:0,type:"button",class:"bg-yellow-500 hover:bg-yellow-600 text-white flex space-x-1",onClick:s[6]||(s[6]=o=>C(t.value.id))},{default:l(()=>[n(v(O),{class:"w-4 h-4"}),J]),_:1})):d("",!0),a.permissions.includes("update vends")?(r(),m(p,{key:1,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:l(()=>[n(v(N),{class:"w-4 h-4"}),Q]),_:1})):d("",!0)])])],32),t.value.id?(r(),f("div",W,Y)):d("",!0),t.value.id?(r(),f("div",ee,se)):d("",!0)]),_:1},8,["open"])]))}};export{pe as default};
