import{o as p,f as u,b as e,h as i,K as W,U as le,a as d,u as m,w as f,F as X,Z as ie,c as O,m as h,P as F,d as b,e as ne,t as g,l as de,O as L}from"./app.a2e9fc2b.js";import{_ as pe}from"./Authenticated.012a0654.js";import{_ as k}from"./Button.e01dba56.js";import{_ as K}from"./Graph.4b7eee4f.js";import{_ as U}from"./MultiSelect.7ff1359d.js";import{_ as P,r as ce}from"./SearchInput.307c0985.js";import{r as ue}from"./BackspaceIcon.f832e491.js";import"./open-closed.05b12644.js";import"./use-resolve-button-type.fa43e137.js";import"./RectangleStackIcon.0efdadfc.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.e0a9e45b.js";function me(V,c){return p(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z","clip-rule":"evenodd"})])}function fe(V,c){return p(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z","clip-rule":"evenodd"})])}const ye=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),ve={class:"p-3"},ge={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},_e={class:"p-4"},be=e("span",null," Show Filters ",-1),xe={key:0,class:"p-4 mx-2"},we={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},De=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Se={key:0},Ge=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),Oe={key:1},ke=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),Ve=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Ce={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},$e={class:"mt-3"},Ne={class:"flex space-x-1"},Be=e("span",null," Search ",-1),je=e("span",null," Reset ",-1),Ae=e("span",null," Hide Filters ",-1),Je={class:"p-1 bg-white border-b border-gray-200 flex flex-col space-y-6"},Te={class:"text-center p-2"},Fe={class:"flex flex-col md:flex-row pt-5"},Le={class:"md:basis-1/3 m-1"},Ke={class:"md:basis-2/3 my-1 mx-4 px-4"},Ue=e("p",{class:"text-sm"}," Past 7 Days - Top 10 Best Performance ",-1),Pe={class:"mt-2 flow-root"},ze={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Me={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},Re={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},Ze={class:"min-w-full divide-y divide-gray-300"},Ee=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),He={class:"divide-y divide-gray-200 bg-white"},qe={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Qe={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},We={key:0},Xe=e("br",null,null,-1),Ye={key:1},Ie={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},et={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},tt={key:0},at=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),st=[at],ot={class:"pt-5"},vt={__name:"Dashboard",props:{categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object},setup(V){const c=V,l=i({categories:[],categoryGroups:[],codes:"",customer_code:"",customer_name:"",day_date_from:"",day_date_to:"",locationType:"",operator:""}),z=i([]),Y=i([]),M=i(0),R=i(0),Z=i(0),I=()=>{M.value+=1},ee=()=>{R.value+=1},te=()=>{Z.value+=1},C=i([]),E=W().props.auth.operator,$=i([]),N=W().props.auth.permissions,x=i(!1),H=i([]),w=i([]),B=i([]),ae=i({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),q=i([]),D=i([]),j=i([]),se=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),S=i([]),A=i([]),J=i([]),oe=i({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),T=i([]);le(()=>{z.value=c.categories.data.map(t=>({id:t.id,name:t.name})),Y.value=c.categoryGroups.data.map(t=>({id:t.id,name:t.name})),C.value=[{id:"all",name:"All"},...c.locationTypeOptions.data.map(t=>({id:t.id,name:t.name}))],$.value=[{id:"all",name:"All"},...c.operatorOptions.data.map(t=>({id:t.id,name:t.name}))],l.value.locationType=C.value[0],l.value.operator=$.value.find(t=>t.id==E.id),Q()});function n(t,s){var a=parseInt(t.slice(1,3),16),y=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return"rgba("+a+", "+y+", "+o+", "+s+")"}function G(){L.visit(route("dashboard",{...l.value,categories:l.value.categories.map(t=>t.id),categoryGroups:l.value.categoryGroups.map(t=>t.id),location_type_id:l.value.locationType.id,operator_id:l.value.operator.id}),{only:["dayGraphData","monthGraphData","productGraphData","performerGraphData"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{L.reload({only:["dayGraphData","monthGraphData","productGraphData","performerGraphData"],preserveState:!0,preserveScroll:!0}),Q()}})}function re(){L.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function Q(){H.value=[],w.value=[],B.value=[],q.value=[],D.value=[],j.value=[],S.value=[],A.value=[],J.value=[];let t=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],s=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];H.value=JSON.parse(JSON.stringify(c.dayGraphData));let a=[];a=_.groupBy(JSON.parse(JSON.stringify(c.dayGraphData)).data,"month_name"),Object.keys(a).forEach((o,r)=>{w.value.push({label:o+" (#)",data:a[o].map(v=>v.count),backgroundColor:r%2==0?n(t[r+2],.2):n(t[r+2],.9),borderColor:r%2==0?n(t[r+2],.2):n(t[r+2],.9),yAxisID:"y1",type:"line",order:1}),w.value.push({label:o+" ($)",data:a[o].map(v=>v.amount),backgroundColor:r%2==0?n(t[r],.2):n(t[r],1),borderColor:r%2==0?n(t[r],.2):n(t[r],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=31;o++)B.value.push(o);q.value=JSON.parse(JSON.stringify(c.monthGraphData));let y=[];y=JSON.parse(JSON.stringify(c.monthGraphData)),Object.keys(y).forEach((o,r)=>{D.value.push({label:o+" (#)",data:Object.values(y[o]).map(v=>v.count),backgroundColor:r%2==0?n(t[r+2],.2):n(t[r+2],.9),borderColor:r%2==0?n(t[r+2],.2):n(t[r+2],.9),yAxisID:"y1",type:"line",order:1}),D.value.push({label:o+" ($)",data:Object.values(y[o]).map(v=>v.amount),backgroundColor:r%2==0?n(t[r],.2):n(t[r],1),borderColor:r%2==0?n(t[r],.2):n(t[r],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=12;o++)j.value.push(o);S.value=JSON.parse(JSON.stringify(c.productGraphData)),A.value.push({label:"Sales",data:S.value.data.map(o=>o.count),backgroundColor:s}),J.value=S.value.data.map(o=>o.product?o.product.code+" - "+o.product.name:null),T.value=JSON.parse(JSON.stringify(c.performerGraphData)),I(),ee(),te()}return(t,s)=>(p(),u(X,null,[d(m(ie),{title:"Dashboard"}),d(pe,null,{header:f(()=>[ye]),default:f(()=>[e("div",ve,[e("div",ge,[e("div",he,[e("div",_e,[!x.value&&m(N).includes("admin-access vends")?(p(),O(k,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[0]||(s[0]=a=>x.value=!0)},{default:f(()=>[d(m(me),{class:"h-4 w-4","aria-hidden":"true"}),be]),_:1})):h("",!0)]),x.value?(p(),u("div",xe,[e("div",we,[d(P,{placeholderStr:"Vend ID",modelValue:l.value.codes,"onUpdate:modelValue":s[1]||(s[1]=a=>l.value.codes=a),onKeyup:s[2]||(s[2]=F(a=>G(),["enter"]))},{default:f(()=>[b(" Vend ID "),De]),_:1},8,["modelValue"]),d(P,{placeholderStr:"Cust ID",modelValue:l.value.customer_code,"onUpdate:modelValue":s[3]||(s[3]=a=>l.value.customer_code=a),onKeyup:s[4]||(s[4]=F(a=>G(),["enter"]))},{default:f(()=>[b(" Cust ID ")]),_:1},8,["modelValue"]),d(P,{placeholderStr:"Cust Name",modelValue:l.value.customer_name,"onUpdate:modelValue":s[5]||(s[5]=a=>l.value.customer_name=a),onKeyup:s[6]||(s[6]=F(a=>G(),["enter"]))},{default:f(()=>[b(" Cust Name ")]),_:1},8,["modelValue"]),m(N).includes("admin-access vends")?(p(),u("div",Se,[Ge,d(U,{modelValue:l.value.categories,"onUpdate:modelValue":s[7]||(s[7]=a=>l.value.categories=a),options:z.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),m(N).includes("admin-access vends")?(p(),u("div",Oe,[ke,d(U,{modelValue:l.value.operator,"onUpdate:modelValue":s[8]||(s[8]=a=>l.value.operator=a),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),e("div",null,[Ve,d(U,{modelValue:l.value.locationType,"onUpdate:modelValue":s[9]||(s[9]=a=>l.value.locationType=a),options:C.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Ce,[e("div",$e,[e("div",Ne,[d(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[10]||(s[10]=ne(a=>G(),["prevent"]))},{default:f(()=>[d(m(ce),{class:"h-4 w-4","aria-hidden":"true"}),Be]),_:1}),d(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[11]||(s[11]=a=>re())},{default:f(()=>[d(m(ue),{class:"h-4 w-4","aria-hidden":"true"}),je]),_:1}),d(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[12]||(s[12]=a=>x.value=!1)},{default:f(()=>[d(m(fe),{class:"h-4 w-4","aria-hidden":"true"}),Ae]),_:1})])])])])):h("",!0),e("div",Je,[e("p",Te,g(l.value&&l.value.operator?l.value.operator.name:m(E).name),1),(p(),O(K,{key:M.value,type:"scatter",labels:B.value,datasets:w.value,options:ae.value},null,8,["labels","datasets","options"])),e("div",Fe,[e("div",Le,[(p(),O(K,{key:R.value,type:"pie",labels:J.value,datasets:A.value,options:oe.value},null,8,["labels","datasets","options"]))]),e("div",Ke,[Ue,e("div",Pe,[e("div",ze,[e("div",Me,[e("div",Re,[e("table",Ze,[Ee,e("tbody",He,[(p(!0),u(X,null,de(T.value.data,(a,y)=>(p(),u("tr",{key:a.id},[e("td",qe,g(y+1),1),e("td",Qe,[a.customer?(p(),u("span",We,[b(g(a.customer.code)+" ",1),Xe,b(" "+g(a.customer.name),1)])):(p(),u("span",Ye,g(a.name),1))]),e("td",Ie,g(a.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),e("td",et,g(a.count),1)]))),128)),T.value.data.length?h("",!0):(p(),u("tr",tt,st))])])])])])])])]),e("div",ot,[(p(),O(K,{key:Z.value,type:"scatter",labels:j.value,datasets:D.value,options:se.value},null,8,["labels","datasets","options"]))])])])])])]),_:1})],64))}};export{vt as default};
