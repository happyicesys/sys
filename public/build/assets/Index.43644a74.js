import{_ as q}from"./Authenticated.8172abb8.js";import{_ as F}from"./Button.acbea73d.js";import R from"./ChannelOverview.f5a02743.js";import{_ as B,r as z,a as Q,T as x,b as y,c as Y,d as p}from"./TableHeadSort.2acbfce4.js";import{_ as b}from"./MultiSelect.bb25a52c.js";import{i as h,j as W,o as c,g as m,a as n,b as O,w as a,F as J,H as X,d as t,t as r,m as L,p as f,c as G,f as l,J as N,n as g}from"./app.06409b95.js";import"./open-closed.7d52adc5.js";import"./use-resolve-button-type.ce3ae56b.js";import"./RectangleStackIcon.97105a61.js";import"./Modal.ad1738e0.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.e9715d9f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Z=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (List) ",-1),ee={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},te={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},oe={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ne=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Vend ID ",-1),se=l(" Serial Num "),le=l(" Temp >> "),ae=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),re=l(" Cust ID "),ie=l(" Cust Name "),de=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ue=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ce=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Online? ",-1),me=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Customer Binded? ",-1),_e={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},pe={class:"mt-3"},ge={class:"flex space-x-1"},fe=t("span",null," Search ",-1),he=t("span",null," Reset ",-1),xe={class:"flex flex-col space-y-2"},be={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ve=t("span",null,"Showing",-1),ye={class:"font-medium"},Ce=t("span",null,"to",-1),ke={class:"font-medium"},Se=t("span",null,"of",-1),Ve={class:"font-medium"},Be=t("span",null,"results",-1),Je={class:"mt-6 flex flex-col"},we={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Te={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Pe={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Oe={class:"bg-gray-100"},Le={class:"divide-x divide-gray-200"},Ne=l(" # "),Ie=l(" ID "),Ke=l(" Name "),$e=l(" Temp1"),je=t("br",null,null,-1),De=l(" \u2103 "),Ue=l(" Inventory Status "),Ee=t("br",null,null,-1),Fe=l(" (#Channel, Sales, Balance/Capacity) "),Ge=l(" Errors "),Me=l(" Balance Stock "),Ae=l(" Out of Stock SKU "),He=l(" Sales $(Qty) "),qe=t("br",null,null,-1),Re=l(" (Today/ 7 Days) "),ze=l(" Status "),Qe=l(" Temp2 "),Ye=t("br",null,null,-1),We=l(" (Evap)"),Xe=t("br",null,null,-1),Ze=l(" \u2103 "),et=l(" Postcode "),tt=l(" Firmware Ver "),ot=l(" Serial Num "),nt={class:"bg-white"},st=t("br",null,null,-1),lt={class:"flex flex-col items-center"},at=["onClick"],rt={class:"mt-1"},it=["onClick"],dt={class:"text-blue-600"},ut={class:"flex flex-col"},ct={class:"font-bold"},mt=t("br",null,null,-1),_t=t("br",null,null,-1),pt=t("br",null,null,-1),gt={class:"flex flex-col space-y-1"},ft={class:"flex flex-col"},ht={class:"font-bold"},xt={key:0},bt={class:"flex flex-col"},vt=t("span",{class:"font-bold"}," Drop Sensor ",-1),yt={key:1,class:"inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full bg-green-200"},Ct={class:"flex flex-col"},kt=t("span",{class:"font-bold"}," Fan Speed ",-1),St={class:"flex flex-col"},Vt=t("span",{class:"font-bold"}," Door ",-1),Bt={class:"flex flex-col"},Jt=t("span",{class:"font-bold"}," Coin ",-1),wt={class:"flex flex-col items-center"},Tt=["onClick"],Pt={key:0},Ot=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Lt=[Ot],Ht={__name:"Index",props:{categories:Object,categoryGroups:Object,constTempError:Number,vends:Object,vendOptions:Object,vendChannelErrors:Object},setup(i){const k=i,o=h({codes:[],serialNum:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],is_binded_customer:"",tempHigherThan:"",vend_channel_error_id:"",is_online:"",sortKey:"",sortBy:!0,numberPerPage:""}),C=h([]),I=h([]),K=h([]),w=h([]),S=h(!1),$=h(),T=h([]),j=h([]);W(()=>{T.value=[{id:"",desc:"All"},{id:"errors_only",desc:"Errors Only"},...k.vendChannelErrors.data],w.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.vend_channel_error_id=T.value[0],o.value.numberPerPage=w.value[0],I.value=k.categories.data.map(d=>({id:d.id,name:d.name})),K.value=k.categoryGroups.data.map(d=>({id:d.id,name:d.name})),C.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],o.value.is_online=C.value[0],o.value.is_binded_customer=C.value[0],j.value=k.vendOptions.data.map(d=>({id:d.id,code:d.code}))});function M(d){$.value=d,S.value=!0}function A(){S.value=!1}function P(){N.Inertia.get("/vends",{...o.value,codes:o.value.codes.map(d=>d.id),vend_channel_error_id:o.value.vend_channel_error_id.id,categories:o.value.categories.map(d=>d.id),categoryGroups:o.value.categoryGroups.map(d=>d.id),is_binded_customer:o.value.is_binded_customer.id,is_online:o.value.is_online.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function D(d,s){N.Inertia.get("/vends/"+d+"/temp/"+s)}function H(){N.Inertia.get("/vends")}function v(d){o.value.sortKey=d,o.value.sortBy=!o.value.sortBy,P()}return(d,s)=>(c(),m(J,null,[n(O(X),{title:"Vending Machines"}),n(q,null,{header:a(()=>[Z]),default:a(()=>{var U,E;return[t("div",ee,[t("div",te,[t("div",oe,[t("div",null,[ne,n(b,{modelValue:o.value.codes,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.codes=e),options:j.value,valueProp:"id",label:"code",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),n(B,{placeholderStr:"Serial Num",modelValue:o.value.serialNum,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.serialNum=e)},{default:a(()=>[se]),_:1},8,["modelValue"]),n(B,{placeholderStr:"Number",modelValue:o.value.tempHigherThan,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value.tempHigherThan=e)},{default:a(()=>[le]),_:1},8,["modelValue"]),t("div",null,[ae,n(b,{modelValue:o.value.vend_channel_error_id,"onUpdate:modelValue":s[3]||(s[3]=e=>o.value.vend_channel_error_id=e),options:T.value,trackBy:"id",valueProp:"id",label:"desc",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),n(B,{placeholderStr:"Cust ID",modelValue:o.value.customer_code,"onUpdate:modelValue":s[4]||(s[4]=e=>o.value.customer_code=e)},{default:a(()=>[re]),_:1},8,["modelValue"]),n(B,{placeholderStr:"Cust Name",modelValue:o.value.customer_name,"onUpdate:modelValue":s[5]||(s[5]=e=>o.value.customer_name=e)},{default:a(()=>[ie]),_:1},8,["modelValue"]),t("div",null,[de,n(b,{modelValue:o.value.categories,"onUpdate:modelValue":s[6]||(s[6]=e=>o.value.categories=e),options:I.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[ue,n(b,{modelValue:o.value.categoryGroups,"onUpdate:modelValue":s[7]||(s[7]=e=>o.value.categoryGroups=e),options:K.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[ce,n(b,{modelValue:o.value.is_online,"onUpdate:modelValue":s[8]||(s[8]=e=>o.value.is_online=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[me,n(b,{modelValue:o.value.is_binded_customer,"onUpdate:modelValue":s[9]||(s[9]=e=>o.value.is_binded_customer=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),t("div",_e,[t("div",pe,[t("div",ge,[n(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[10]||(s[10]=e=>P())},{default:a(()=>[n(O(z),{class:"h-4 w-4","aria-hidden":"true"}),fe]),_:1}),n(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[11]||(s[11]=e=>H())},{default:a(()=>[n(O(Q),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1})])]),t("div",xe,[t("p",be,[ve,t("span",ye,r((U=i.vends.meta.from)!=null?U:0),1),Ce,t("span",ke,r((E=i.vends.meta.to)!=null?E:0),1),Se,t("span",Ve,r(i.vends.meta.total),1),Be]),n(b,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":s[12]||(s[12]=e=>o.value.numberPerPage=e),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:P},null,8,["modelValue","options"])])])]),t("div",Je,[t("div",we,[t("div",Te,[t("table",Pe,[t("thead",Oe,[t("tr",Le,[n(x,null,{default:a(()=>[Ne]),_:1}),n(y,{modelName:"vends.code",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[13]||(s[13]=e=>v("vends.code"))},{default:a(()=>[Ie]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:a(()=>[Ke]),_:1}),n(y,{modelName:"temp",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[14]||(s[14]=e=>v("temp"))},{default:a(()=>[$e,je,De]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:a(()=>[Ue,Ee,Fe]),_:1}),n(x,null,{default:a(()=>[Ge]),_:1}),n(y,{modelName:"vend_channel_totals_json->balancePercent",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[15]||(s[15]=e=>v("vend_channel_totals_json->balancePercent"))},{default:a(()=>[Me]),_:1},8,["sortKey","sortBy"]),n(y,{modelName:"vend_channel_totals_json->outOfStockSkuPercent",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[16]||(s[16]=e=>v("vend_channel_totals_json->outOfStockSkuPercent"))},{default:a(()=>[Ae]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:a(()=>[He,qe,Re]),_:1}),n(x,null,{default:a(()=>[ze]),_:1}),n(y,{modelName:"parameter_json->t2",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[17]||(s[17]=e=>v("parameter_json->t2"))},{default:a(()=>[Qe,Ye,We,Xe,Ze]),_:1},8,["sortKey","sortBy"]),n(y,{modelName:"postcode",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[18]||(s[18]=e=>v("postcode"))},{default:a(()=>[et]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:a(()=>[tt]),_:1}),n(x,null,{default:a(()=>[ot]),_:1})])]),t("tbody",nt,[(c(!0),m(J,null,L(i.vends.data,(e,_)=>(c(),m("tr",{key:_,class:"divide-x divide-gray-200"},[n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[l(r(i.vends.meta.from+_),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[l(r(e.code),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-left"},{default:a(()=>[l(r(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.code:null)+" ",1),st,l(" "+r(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[t("div",lt,[t("button",{type:"button",class:g(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.is_online?e.temp>-15?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600":"bg-gray-300 active:bg-gray-500 hover:bg-gray-600"]]),onClick:u=>D(e.id,1)},r(e.is_temp_error?"Error":e.temp),11,at),t("span",rt,r(e.temp_updated_at),1)])]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-left"},{default:a(()=>[e.vendChannelsJson?(c(),m("ul",{key:0,class:"sm:grid sm:grid-cols-[105px_minmax(110px,_1fr)_100px] hover:cursor-pointer",onClick:u=>M(e)},[(c(!0),m(J,null,L(e.vendChannelsJson,(u,V)=>(c(),m("li",{class:g(["quick-look",[V>0&&String(u.code)[0]!==String(e.vendChannelsJson[V-1].code)[0]?"col-start-1":""]])},[t("span",{class:g([V>0&&String(u.code)[0]!==String(e.vendChannelsJson[V-1].code)[0]?"border-t-4 pt-1":""])},[t("span",null," #"+r(u.code)+", ",1),t("span",dt,r(u.capacity-u.qty)+", ",1),t("span",{class:g([u.qty<=2?"text-red-700":"text-green-700"])},r(u.qty)+"/"+r(u.capacity),3)],2)],2))),256))],8,it)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[(c(!0),m(J,null,L(e.vendChannelErrorLogsJson,u=>(c(),m("span",{class:g(["inline-flex items-center rounded px-2.5 py-0.5 text-xs font-medium border",[u.is_error_cleared?"bg-green-100 text-green-800":"bg-red-100 text-red-800"]])},[t("div",ut,[t("div",null,[l(" #"+r(u.vendChannel?u.vendChannel.code:u.vend_channel.code)+", ",1),t("span",ct," ("+r(u.vendChannelError?u.vendChannelError.code:u.vend_channel_error.code)+") ",1)]),t("div",null,r(u.created_at),1)])],2))),256))]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[e.vendChannelTotalsJson?(c(),m("span",{key:0,class:g([e.vendChannelTotalsJson.balancePercent<=30?"text-red-700":e.vendChannelTotalsJson.balancePercent>60?"":"text-blue-700"])},[l(r(e.vendChannelTotalsJson.qty)+"/ "+r(e.vendChannelTotalsJson.capacity)+" ",1),mt,l(" ("+r(e.vendChannelTotalsJson.balancePercent)+"%) ",1)],2)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[e.vendChannelTotalsJson?(c(),m("span",{key:0,class:g([e.vendChannelTotalsJson.outOfStockSkuPercent>40?"text-red-700":""])},[l(r(e.vendChannelTotalsJson.outOfStockSku)+"/ "+r(e.vendChannelTotalsJson.count)+" ",1),_t,l(" ("+r(e.vendChannelTotalsJson.outOfStockSkuPercent)+"%) ",1)],2)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[t("span",{class:g([e.sevenDaysSales>200?"text-green-700":"text-red-700"])},[l(r(e.todaySales.toLocaleString(void 0,{minimumFractionDigits:2}))+"("+r(e.todayCount)+")/ ",1),pt,l(" "+r(e.sevenDaysSales.toLocaleString(void 0,{minimumFractionDigits:2}))+"("+r(e.sevenDaysCount)+") ",1)],2)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[t("div",gt,[t("div",{class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.is_online?"bg-green-200":"bg-red-200"]])},[t("div",ft,[t("span",ht,r(e.is_online?"Online":"Offline"),1),e.last_updated_at?(c(),m("span",xt,r(e.last_updated_at),1)):f("",!0)])],2),e.parameterJson&&e.parameterJson.Sensor?(c(),m("div",{key:0,class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.Sensor==0?"bg-red-200":"bg-green-200"]])},[t("div",bt,[vt,t("span",null,r(e.parameterJson.Sensor==0?"Disabled":"Enabled"),1)])],2)):f("",!0),e.parameterJson&&e.parameterJson.fan?(c(),m("div",yt,[t("div",Ct,[kt,t("span",null,r(e.parameterJson.fan),1)])])):f("",!0),e.parameterJson&&e.parameterJson.door?(c(),m("div",{key:2,class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.door=="close"?"bg-green-200":"bg-red-200"]])},[t("div",St,[Vt,t("span",null,r(e.parameterJson.door=="open"?"Open":"Close"),1)])],2)):f("",!0),e.parameterJson&&e.parameterJson.CoinCnt?(c(),m("div",{key:3,class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.CoinCnt>1600?"bg-green-200":"bg-red-200"]])},[t("div",Bt,[Jt,t("span",null,r((e.parameterJson.CoinCnt/100).toFixed(2)),1)])],2)):f("",!0)])]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[t("div",wt,[e.parameterJson&&e.parameterJson.t2?(c(),m("button",{key:0,type:"button",class:g(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.is_online?e.temp>-15||e.parameterJson.t2==i.constTempError?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600":"bg-gray-300 active:bg-gray-500 hover:bg-gray-600"]]),onClick:u=>D(e.id,2)},r(e.parameterJson.t2==i.constTempError?"Error":e.parameterJson.t2/10),11,Tt)):f("",!0)])]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[l(r(e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.deliveryAddress?e.latestVendBinding.customer.deliveryAddress.postcode:null),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[l(r(e.firmware_ver),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:_,totalLength:i.vends.length,inputClass:"text-center"},{default:a(()=>[l(r(e.serial_num),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),i.vends.data.length?f("",!0):(c(),m("tr",Pt,Lt))])])]),i.vends.data.length?(c(),G(Y,{key:0,links:i.vends.links,meta:i.vends.meta},null,8,["links","meta"])):f("",!0)])])]),S.value?(c(),G(R,{key:0,vend:$.value,showModal:S.value,onModalClose:A},null,8,["vend","showModal"])):f("",!0)]}),_:1})],64))}};export{Ht as default};
