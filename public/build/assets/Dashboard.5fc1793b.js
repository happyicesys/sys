import{g as i,K as le,S as ge,f as n,a as p,u as g,w,F as y,o as r,Z as ve,b as e,c as O,l as b,N as E,d as k,e as _e,t as u,k as v,O as z,n as G,U as be}from"./app.a24255be.js";import{_ as xe}from"./Authenticated.8cb5b1b7.js";import{_ as M}from"./Button.9441634f.js";import{_ as T}from"./Graph.39134e43.js";import{_ as H}from"./MultiSelect.19f9e891.js";import{_ as Y,r as we}from"./SearchInput.0e7e6e3b.js";import{r as De,a as ke}from"./ChevronDoubleUpIcon.091eb2de.js";import{r as Se}from"./BackspaceIcon.b51bab00.js";import"./open-closed.264c4d5e.js";import"./use-resolve-button-type.2feb5631.js";import"./RectangleStackIcon.d44dfe80.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.cab8dc09.js";const Oe=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),Ge={class:"p-3"},Ce={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},Ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ve={class:"p-4"},$e=e("span",null," Show Filters ",-1),je={key:0,class:"p-4 mx-2"},Be={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Me=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Te={key:0},Fe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),Je={key:1},Ae=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),Le=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Ke={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},Re={class:"mt-3"},Ue={class:"flex space-x-1"},Pe=e("span",null," Search ",-1),Ze=e("span",null," Reset ",-1),Ee=e("span",null," Hide Filters ",-1),ze={class:"p-1 py-4 bg-white border-b border-gray-200 flex flex-col space-y-6"},He={class:"text-center p-2"},Ye={class:"flex flex-col md:flex-row pt-5"},qe={class:"md:basis-1/3 m-1"},Qe={class:"md:basis-2/3 my-1 mx-4 px-4"},We={class:"text-sm flex justify-between"},Xe=e("div",null," Past 30 Days - Top 10 Best Performance ",-1),Ie={class:"mt-2 flow-root"},et={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},tt={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},st={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},at={class:"min-w-full divide-y divide-gray-300"},ot=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),rt={class:"divide-y divide-gray-200 bg-white"},lt={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},nt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},it={key:0},ct=e("br",null,null,-1),dt={key:1},ut=e("br",null,null,-1),pt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},mt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},yt={key:0},ft=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),ht=[ft],gt={class:"pt-5"},vt={class:"pt-5"},_t={key:0,class:"pt-5 my-1 mx-4 px-4"},bt=e("p",{class:"text-sm flex justify-between"},[e("div",null," Monthly Analytics By Criteria ")],-1),xt={class:"pb-3 mb-2"},wt={class:"sm:hidden"},Dt=e("label",{for:"tabs",class:"sr-only"},"Select a tab",-1),kt=["value","selected"],St={class:"hidden sm:block"},Ot={class:"border-b border-gray-200"},Gt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Ct=["onClick"],Nt={class:"mt-2 flow-root"},Vt={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},$t={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},jt={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},Bt={class:"min-w-full divide-y divide-gray-300"},Mt={class:"bg-gray-50"},Tt=e("th",{scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"}," Name ",-1),Ft=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"},null,-1),Jt={scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"},At={class:"divide-y divide-gray-200 bg-white"},Lt={rowspan:"3",class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 row-span-3"},Kt=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Daily Sales/ VM ",-1),Rt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Ut=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Machine Count ",-1),Pt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Zt=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Total Sales ",-1),Et={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},zt={key:0},Ht=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Yt=[Ht],ns={__name:"Dashboard",props:{activeMachineGraphData:Object,categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,months:Object,monthsByModel:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object,vendCount:Number},setup(D){const m=D,c=i({categories:[],categoryGroups:[],codes:"",customer_code:"",customer_name:"",day_date_from:"",day_date_to:"",locationType:"",operator:"",monthlyTypeName:"location-type"}),q=i([]),ne=i([]),Q=i(0),W=i(0),X=i(0),I=i(0),ie=()=>{Q.value+=1},ce=()=>{W.value+=1},de=()=>{X.value+=1},ue=()=>{I.value+=1},F=i([]),ee=le().props.auth.operator,J=i([]),C=le().props.auth.permissions,N=i(!1),A=i([{name:"Location Type",slug:"location-type",current:!0,href:"#"},{name:"Category",slug:"category",current:!1,href:"#"},{name:"Operator",slug:"operator",current:!1,href:"#"}]),te=i([]),V=i([]),L=i([]),pe=i({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),se=i([]),$=i([]),K=i([]),me=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),j=i([]),R=i([]),U=i([]),ye=i({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),B=i([]),ae=i([]),P=i([]),Z=i([]),fe=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Count(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Number of Active Vending Machine in Market, by Month"}}});ge(()=>{q.value=m.categories.data.map(s=>({id:s.id,name:s.name})),ne.value=m.categoryGroups.data.map(s=>({id:s.id,name:s.name})),F.value=[{id:"all",name:"All"},...m.locationTypeOptions.data.map(s=>({id:s.id,name:s.name}))],J.value=[{id:"all",name:"All"},...m.operatorOptions.data.map(s=>({id:s.id,name:s.name}))],c.value.locationType=F.value[0],c.value.operator=J.value.find(s=>s.id==ee.id),re()});function d(s,l){var t=parseInt(s.slice(1,3),16),f=parseInt(s.slice(3,5),16),h=parseInt(s.slice(5,7),16);return"rgba("+t+", "+f+", "+h+", "+l+")"}function S(){z.visit(route("dashboard",{...c.value,categories:c.value.categories.map(s=>s.id),categoryGroups:c.value.categoryGroups.map(s=>s.id),location_type_id:c.value.locationType.id,operator_id:c.value.operator.id}),{only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{z.reload({only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0}),re()}})}function oe(s){A.value.forEach(l=>{l.current=!1}),s.current=!0,c.value.monthlyTypeName=s.slug,S()}function he(){z.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function re(){ae.value=[],P.value=[],Z.value=[],te.value=[],V.value=[],L.value=[],se.value=[],$.value=[],K.value=[],j.value=[],R.value=[],U.value=[];let s=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],l=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];te.value=JSON.parse(JSON.stringify(m.dayGraphData));let t=[];t=_.groupBy(JSON.parse(JSON.stringify(m.dayGraphData)).data,"month_name"),Object.keys(t).forEach((o,a)=>{V.value.push({label:o+" (#)",data:t[o].map(x=>x.count),backgroundColor:a%2==0?d(s[a+2],.2):d(s[a+2],.9),borderColor:a%2==0?d(s[a+2],.2):d(s[a+2],.9),yAxisID:"y1",type:"line",order:1}),V.value.push({label:o+" ($)",data:t[o].map(x=>x.amount),backgroundColor:a%2==0?d(s[a],.2):d(s[a],1),borderColor:a%2==0?d(s[a],.2):d(s[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=31;o++)L.value.push(o);se.value=JSON.parse(JSON.stringify(m.monthGraphData));let f=[];f=JSON.parse(JSON.stringify(m.monthGraphData)),Object.keys(f).forEach((o,a)=>{$.value.push({label:o+" (#)",data:Object.values(f[o]).map(x=>x.count),backgroundColor:a%2==0?d(s[a+2],.2):d(s[a+2],.9),borderColor:a%2==0?d(s[a+2],.2):d(s[a+2],.9),yAxisID:"y1",type:"line",order:1}),$.value.push({label:o+" ($)",data:Object.values(f[o]).map(x=>x.amount),backgroundColor:a%2==0?d(s[a],.2):d(s[a],1),borderColor:a%2==0?d(s[a],.2):d(s[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=12;o++)K.value.push(o);j.value=JSON.parse(JSON.stringify(m.productGraphData)),R.value.push({label:"Sales",data:j.value.data.map(o=>o.count),backgroundColor:l}),U.value=j.value.data.map(o=>o.product?o.product.code+" - "+o.product.name:null),B.value=JSON.parse(JSON.stringify(m.performerGraphData)),ae.value=JSON.parse(JSON.stringify(m.activeMachineGraphData));let h=[];h=JSON.parse(JSON.stringify(m.activeMachineGraphData)),Object.keys(h).forEach((o,a)=>{P.value.push({label:o+" (#)",data:Object.values(h[o]).map(x=>x.count),backgroundColor:a%2==0?d(s[a],.2):d(s[a],.9),borderColor:a%2==0?d(s[a],.2):d(s[a],.9),type:"line"})});for(let o=1;o<=12;o++)Z.value.push(o);ie(),ce(),de(),ue()}return(s,l)=>(r(),n(y,null,[p(g(ve),{title:"Dashboard"}),p(xe,null,{header:w(()=>[Oe]),default:w(()=>[e("div",Ge,[e("div",Ce,[e("div",Ne,[e("div",Ve,[!N.value&&g(C).includes("admin-access vends")?(r(),O(M,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[0]||(l[0]=t=>N.value=!0)},{default:w(()=>[p(g(De),{class:"h-4 w-4","aria-hidden":"true"}),$e]),_:1})):b("",!0)]),N.value?(r(),n("div",je,[e("div",Be,[p(Y,{placeholderStr:"Vend ID",modelValue:c.value.codes,"onUpdate:modelValue":l[1]||(l[1]=t=>c.value.codes=t),onKeyup:l[2]||(l[2]=E(t=>S(),["enter"]))},{default:w(()=>[k(" Vend ID "),Me]),_:1},8,["modelValue"]),p(Y,{placeholderStr:"Cust ID",modelValue:c.value.customer_code,"onUpdate:modelValue":l[3]||(l[3]=t=>c.value.customer_code=t),onKeyup:l[4]||(l[4]=E(t=>S(),["enter"]))},{default:w(()=>[k(" Cust ID ")]),_:1},8,["modelValue"]),p(Y,{placeholderStr:"Cust Name",modelValue:c.value.customer_name,"onUpdate:modelValue":l[5]||(l[5]=t=>c.value.customer_name=t),onKeyup:l[6]||(l[6]=E(t=>S(),["enter"]))},{default:w(()=>[k(" Cust Name ")]),_:1},8,["modelValue"]),g(C).includes("admin-access vends")?(r(),n("div",Te,[Fe,p(H,{modelValue:c.value.categories,"onUpdate:modelValue":l[7]||(l[7]=t=>c.value.categories=t),options:q.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),g(C).includes("admin-access vends")?(r(),n("div",Je,[Ae,p(H,{modelValue:c.value.operator,"onUpdate:modelValue":l[8]||(l[8]=t=>c.value.operator=t),options:J.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),e("div",null,[Le,p(H,{modelValue:c.value.locationType,"onUpdate:modelValue":l[9]||(l[9]=t=>c.value.locationType=t),options:F.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Ke,[e("div",Re,[e("div",Ue,[p(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[10]||(l[10]=_e(t=>S(),["prevent"]))},{default:w(()=>[p(g(we),{class:"h-4 w-4","aria-hidden":"true"}),Pe]),_:1}),p(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[11]||(l[11]=t=>he())},{default:w(()=>[p(g(Se),{class:"h-4 w-4","aria-hidden":"true"}),Ze]),_:1}),p(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[12]||(l[12]=t=>N.value=!1)},{default:w(()=>[p(g(ke),{class:"h-4 w-4","aria-hidden":"true"}),Ee]),_:1})])])])])):b("",!0),e("div",ze,[e("p",He,u(c.value&&c.value.operator?c.value.operator.name:g(ee).name),1),(r(),O(T,{key:Q.value,type:"scatter",labels:L.value,datasets:V.value,options:pe.value},null,8,["labels","datasets","options"])),e("div",Ye,[e("div",qe,[(r(),O(T,{key:W.value,type:"pie",labels:U.value,datasets:R.value,options:ye.value},null,8,["labels","datasets","options"]))]),e("div",Qe,[e("p",We,[Xe,e("div",null," Based on "+u(D.vendCount)+" active machine(s) ",1)]),e("div",Ie,[e("div",et,[e("div",tt,[e("div",st,[e("table",at,[ot,e("tbody",rt,[(r(!0),n(y,null,v(B.value.data,(t,f)=>(r(),n("tr",{key:t.id},[e("td",lt,u(f+1),1),e("td",nt,[t.customer?(r(),n("span",it,[k(u(t.customer.code)+" ",1),ct,k(" "+u(t.customer.name),1)])):(r(),n("span",dt,[k(u(t.code)+" ",1),ut,k(" "+u(t.name),1)]))]),e("td",pt,u(t.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),e("td",mt,u(t.count),1)]))),128)),B.value.data.length?b("",!0):(r(),n("tr",yt,ht))])])])])])])])]),e("div",gt,[(r(),O(T,{key:X.value,type:"scatter",labels:K.value,datasets:$.value,options:me.value},null,8,["labels","datasets","options"]))]),e("div",vt,[(r(),O(T,{key:I.value,type:"scatter",labels:Z.value,datasets:P.value,options:fe.value},null,8,["labels","datasets","options"]))]),g(C).includes("admin-access analytics")?(r(),n("div",_t,[bt,e("div",xt,[e("div",wt,[Dt,e("select",{id:"tabs",name:"tabs",class:"block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",onChange:l[13]||(l[13]=t=>oe(t))},[(r(!0),n(y,null,v(A.value,t=>(r(),n("option",{key:t,value:t.href,selected:t.current},u(t.name),9,kt))),128))],32)]),e("div",St,[e("div",Ot,[e("nav",Gt,[(r(!0),n(y,null,v(A.value,t=>(r(),n("span",{key:t.name,class:G(["hover:cursor-pointer",[t.current?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-200 hover:text-gray-700","flex whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]]),onClick:f=>oe(t)},u(t.name),11,Ct))),128))])])])]),e("div",Nt,[e("div",Vt,[e("div",$t,[e("div",jt,[e("table",Bt,[e("thead",Mt,[e("tr",null,[Tt,Ft,(r(!0),n(y,null,v(D.months.data,t=>(r(),n("th",Jt,[e("span",{class:G([t.number==g(be)().format("M")?"bg-yellow-300 rounded p-2":""])},u(t.short_name),3)]))),256))])]),(r(!0),n(y,null,v(D.monthsByModel,(t,f)=>(r(),n("tbody",At,[e("tr",null,[e("td",Lt,u(f),1),Kt,(r(!0),n(y,null,v(D.months.data,h=>(r(),n("td",Rt,[(r(!0),n(y,null,v(t,(o,a)=>(r(),n("span",null,[h.number==a?(r(),n("span",{key:0,class:G([o.current?"font-bold":"font-medium",t[a-1]&&t[a-1].average<o.average?"text-green-600":t[a-1]?"text-red-600":""])},u(o.average.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),3)):b("",!0)]))),256))]))),256))]),e("tr",null,[Ut,(r(!0),n(y,null,v(D.months.data,h=>(r(),n("td",Pt,[(r(!0),n(y,null,v(t,(o,a)=>(r(),n("span",null,[h.number==a?(r(),n("span",{key:0,class:G([o.current?"font-bold":"font-medium"])},u(o.vend_count.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),3)):b("",!0)]))),256))]))),256))]),e("tr",null,[Zt,(r(!0),n(y,null,v(D.months.data,h=>(r(),n("td",Et,[(r(!0),n(y,null,v(t,(o,a)=>(r(),n("span",null,[h.number==a?(r(),n("span",{key:0,class:G([o.current?"font-bold":"font-medium"])},u(o.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),3)):b("",!0)]))),256))]))),256))]),B.value.data.length?b("",!0):(r(),n("tr",zt,Yt))]))),256))])])])])])])):b("",!0)])])])])]),_:1})],64))}};export{ns as default};
