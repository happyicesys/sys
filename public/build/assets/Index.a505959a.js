import{g as p,Q as k,h as R,f as d,a as s,u as m,w as l,F as T,o as i,Z as E,b as t,i as j,M as G,d as u,c as U,l as _,t as c,k as H,O as A,n as D}from"./app.a6aad98f.js";import{_ as z}from"./Authenticated.8f61fecb.js";import{_ as C}from"./Button.97b1564e.js";import{_ as Q}from"./Paginator.67e353c1.js";import{_ as K}from"./SearchInput.7a51082e.js";import{_ as x}from"./MultiSelect.9cef86ba.js";import{_ as v,a as g}from"./TableData.88678c09.js";import{_ as Y}from"./TableHeadSort.4a9f2984.js";import{r as Z}from"./PlusIcon.55032596.js";import{r as q}from"./MagnifyingGlassIcon.cb75d08e.js";import{r as J}from"./BackspaceIcon.bee45f27.js";import{r as W}from"./PencilSquareIcon.518a4297.js";import"./keyboard.5a52b4b6.js";import"./use-resolve-button-type.a2fb95dc.js";import"./RectangleStackIcon.eeb378f0.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.1a2eb786.js";const X=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Device Management ",-1),ee={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},te={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},se={class:"flex justify-end"},oe=t("span",null," Create ",-1),ae={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},le=t("span",{class:"text-[9px]"},' ("," for multiple) ',-1),ne={key:1},re=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ie={key:2},ue=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),de={key:3},ce=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Active? ",-1),me={key:4},pe=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),_e=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),fe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ge={class:"mt-3"},ve={class:"flex space-x-1"},xe=t("span",null," Search ",-1),he=t("span",null," Reset ",-1),ye={class:"flex flex-col space-y-2"},be={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ke=t("span",null,"Showing",-1),Ve={class:"font-medium"},we=t("span",null,"to",-1),Ce={class:"font-medium"},Pe=t("span",null,"of",-1),Oe={class:"font-medium"},Be=t("span",null,"results",-1),Le={class:"mt-6 flex flex-col"},Se={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},$e={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ie={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Te={class:"bg-gray-100"},je={class:"divide-x divide-gray-200"},Ge={class:"bg-white"},Ue=["href"],Ae={key:0},De={key:0},Ke={key:1},Ne=t("br",null,null,-1),Fe={key:1},Me={key:0},Re=t("br",null,null,-1),Ee={key:2},He={class:"flex flex-col space-y-1"},ze={class:"flex flex-col"},Qe={class:"font-bold"},Ye={class:"flex justify-center space-x-1"},Ze=t("span",null," Edit ",-1),qe={key:0},Je=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),We=[Je],ft={__name:"Index",props:{categories:Object,categoryGroups:Object,locationTypeOptions:Object,operatorOptions:Object,vends:Object},setup(n){const V=n,o=p({codes:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],locationType:"",operator:"",is_active:"",is_binded_customer:"",sortKey:"",sortBy:!0,numberPerPage:"",visited:!0}),h=p([]),L=p([]),S=p([]),N=k().props.initBinded;p(!1);const P=p([]),O=p([]),B=p([]);p(""),p(),k().props.auth.operatorCountry,k().props.auth.operatorRole;const y=k().props.auth.permissions,w=k().props.auth.roles;p(moment().format("HH:mm:ss")),R(()=>{O.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.numberPerPage=O.value[0],L.value=V.categories.data.map(r=>({id:r.id,name:r.name})),S.value=V.categoryGroups.data.map(r=>({id:r.id,name:r.name})),h.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],P.value=[{id:"all",value:"All"},...V.locationTypeOptions.data.map(r=>({id:r.id,value:r.name}))],B.value=[{id:"all",full_name:"All"},...V.operatorOptions.data.map(r=>({id:r.id,full_name:r.full_name}))],o.value.locationType=P.value[0],o.value.operator=B.value[0],o.value.is_active=h.value[1],o.value.is_binded_customer=N&&(w[0]=="superadmin"||w[0]=="admin"||w[0]=="supervisor"||w[0]=="driver")?h.value[1]:h.value[0]});function b(){A.get("/settings",{...o.value,categories:o.value.categories.map(r=>r.id),categoryGroups:o.value.categoryGroups.map(r=>r.id),location_type_id:o.value.locationType.id,operator_id:o.value.operator.id,is_active:o.value.is_active.id,is_binded_customer:o.value.is_binded_customer.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function F(){A.get("/settings")}function M(r){o.value.sortKey=r,o.value.sortBy=!o.value.sortBy,b()}return(r,a)=>(i(),d(T,null,[s(m(E),{title:"VM Management"}),s(z,null,{header:l(()=>[X]),default:l(()=>{var $,I;return[t("div",ee,[t("div",te,[t("div",se,[s(m(j),{href:"/settings/vend/create"},{default:l(()=>[s(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:l(()=>[s(m(Z),{class:"h-4 w-4","aria-hidden":"true"}),oe]),_:1})]),_:1})]),t("div",ae,[s(K,{placeholderStr:"Vend ID",modelValue:o.value.codes,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.codes=e),onKeyup:a[1]||(a[1]=G(e=>b(),["enter"]))},{default:l(()=>[u(" Vend ID "),le]),_:1},8,["modelValue"]),m(y).includes("admin-access vends")?(i(),U(K,{key:0,placeholderStr:"Customer",modelValue:o.value.customer,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.customer=e),onKeyup:a[3]||(a[3]=G(e=>b(),["enter"]))},{default:l(()=>[u(" Customer ")]),_:1},8,["modelValue"])):_("",!0),m(y).includes("admin-access vends")?(i(),d("div",ne,[re,s(x,{modelValue:o.value.categories,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value.categories=e),options:L.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):_("",!0),m(y).includes("admin-access vends")?(i(),d("div",ie,[ue,s(x,{modelValue:o.value.categoryGroups,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value.categoryGroups=e),options:S.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):_("",!0),m(y).includes("admin-access vends")?(i(),d("div",de,[ce,s(x,{modelValue:o.value.is_active,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value.is_active=e),options:h.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):_("",!0),m(y).includes("admin-access vends")?(i(),d("div",me,[pe,s(x,{modelValue:o.value.operator,"onUpdate:modelValue":a[7]||(a[7]=e=>o.value.operator=e),options:B.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):_("",!0),t("div",null,[_e,s(x,{modelValue:o.value.locationType,"onUpdate:modelValue":a[8]||(a[8]=e=>o.value.locationType=e),options:P.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),t("div",fe,[t("div",ge,[t("div",ve,[s(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[9]||(a[9]=e=>b())},{default:l(()=>[s(m(q),{class:"h-4 w-4","aria-hidden":"true"}),xe]),_:1}),s(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[10]||(a[10]=e=>F())},{default:l(()=>[s(m(J),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1})])]),t("div",ye,[t("p",be,[ke,t("span",Ve,c(($=n.vends.meta.from)!=null?$:0),1),we,t("span",Ce,c((I=n.vends.meta.to)!=null?I:0),1),Pe,t("span",Oe,c(n.vends.meta.total),1),Be]),s(x,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":a[11]||(a[11]=e=>o.value.numberPerPage=e),options:O.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:b},null,8,["modelValue","options"])])])]),t("div",Le,[t("div",Se,[t("div",$e,[t("table",Ie,[t("thead",Te,[t("tr",je,[s(v,null,{default:l(()=>[u(" # ")]),_:1}),s(Y,{modelName:"code",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:a[12]||(a[12]=e=>M("code"))},{default:l(()=>[u(" Vend ID ")]),_:1},8,["sortKey","sortBy"]),s(v,null,{default:l(()=>[u(" Customer ")]),_:1}),s(v,null,{default:l(()=>[u(" Cust Operator ")]),_:1}),s(v,null,{default:l(()=>[u(" Status ")]),_:1}),s(v,null,{default:l(()=>[u(" Deploy Date ")]),_:1}),s(v,null,{default:l(()=>[u(" Retired Date ")]),_:1}),s(v)])]),t("tbody",Ge,[(i(!0),d(T,null,H(n.vends.data,(e,f)=>(i(),d("tr",{key:e.id,class:"divide-x divide-gray-200"},[s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[u(c(n.vends.meta.from+f),1)]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[u(c(e.code),1)]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-left"},{default:l(()=>[t("a",{class:D([e&&e.customer&&e.customer.person_id?"text-blue-700":"text-purple-700"]),target:"_blank",href:e.customer&&e.customer.person_id?"//admin.happyice.com.sg/person/"+e.customer.person_id+"/edit":e.customer?"/customers/"+e.customer.id+"/edit":"#"},[e.customer&&e.customer.person_id&&(e.customer.virtual_customer_code||e.customer.virtual_customer_prefix)?(i(),d("span",Ae,[e.customer.virtual_customer_code?(i(),d("span",De,c(e.customer.virtual_customer_code),1)):_("",!0),e.customer.virtual_customer_prefix?(i(),d("span",Ke," ("+c(e.customer.virtual_customer_prefix)+") ",1)):_("",!0),Ne])):(i(),d("span",Fe,[e.customer&&e.customer.code?(i(),d("span",Me,[u(c(e.customer.code)+" ",1),Re])):_("",!0)])),e.customer?(i(),d("span",Ee,c(e.customer.name),1)):_("",!0)],10,Ue)]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[u(c(e.customer&&e.customer.operator?e.customer.operator.full_name:""),1)]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",He,[t("div",{class:D(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.is_active?"bg-green-200":"bg-red-200"]])},[t("div",ze,[t("span",Qe,c(e.is_active?"Active":"Not Active"),1)])],2)])]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[u(c(e.begin_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[u(c(e.termination_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),s(g,{currentIndex:f,totalLength:n.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",Ye,[s(m(j),{href:"/settings/vend/"+e.id+"/update"},{default:l(()=>[s(C,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-3 py-2 text-xs text-gray-800 flex space-x-1"},{default:l(()=>[s(m(W),{class:"w-4 h-4"}),Ze]),_:1})]),_:2},1032,["href"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),n.vends.data.length?_("",!0):(i(),d("tr",qe,We))])]),n.vends.data.length?(i(),U(Q,{key:0,links:n.vends.links,meta:n.vends.meta},null,8,["links","meta"])):_("",!0)])])])])]}),_:1})],64))}};export{ft as default};
