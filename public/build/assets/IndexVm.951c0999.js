import{i as x,l as O,j as G,o as m,g,a as n,b as y,w as a,F,H as j,d as e,P as M,c as D,p as b,t as i,m as U,f as r,J as T}from"./app.e7575326.js";import{_ as A}from"./Authenticated.fa9260e4.js";import{_ as C}from"./Button.24cbae9e.js";import{_ as I,r as H,T as p,a as R,b as u}from"./TableData.f525d283.js";import{_ as L}from"./MultiSelect.071347e5.js";import{_ as h}from"./TableHeadSort.6de04c93.js";import{r as E}from"./BackspaceIcon.54d8b46b.js";import"./open-closed.4f96d39d.js";import"./use-resolve-button-type.873c35f6.js";import"./RectangleStackIcon.71092e9f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const J=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Gross Profit by VM ",-1),q={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},z={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},W=r(" Vend ID "),X=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Y=r(" Cust Name "),Z={key:1},tt=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),et={key:2},ot=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),st=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Current Month ",-1),nt={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},at={class:"mt-3"},rt={class:"flex space-x-1"},lt=e("span",null," Search ",-1),it=e("span",null," Reset ",-1),dt={class:"flex flex-col space-y-2"},mt={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ut=e("span",null,"Showing",-1),ct={class:"font-medium"},_t=e("span",null,"to",-1),gt={class:"font-medium"},ht=e("span",null,"of",-1),ft={class:"font-medium"},yt=e("span",null,"results",-1),pt={class:"mt-2 grid grid-cols-1 gap-5 sm:grid-cols-3"},vt={class:"overflow-hidden rounded-lg bg-gray-100 mt-1 px-4 py-3 shadow"},xt=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Revenue (This Month)",-1),bt={class:"mt-1 text-2xl font-semibold tracking-normal text-gray-900"},Bt={class:"overflow-hidden rounded-lg bg-gray-100 mt-1 px-4 py-3 shadow"},Lt=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Gross Profit (This Month)",-1),Kt={class:"mt-1 text-2xl font-semibold tracking-normal text-gray-900"},St={class:"overflow-hidden rounded-lg bg-gray-100 mt-1 px-4 py-3 shadow"},wt=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Gross Profit Margin (This Month)",-1),Vt={class:"mt-1 text-2xl font-semibold tracking-normal text-gray-900"},kt={class:"mt-6 flex flex-col"},$t={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Pt={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll m-2"},Ft={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Mt={class:"bg-gray-100"},Dt={class:"divide-x divide-gray-200"},Tt=r(" # "),Ct=r(" ID "),It=r(" Name "),Nt=r(" This Month "),Ot=r(" Last Month "),Gt=r(" Last 2 Month "),jt={class:"divide-x divide-gray-200"},Ut=r(" Sales($) "),At=r(" GM($) "),Ht=r(" GM(%) "),Rt=r(" Sales($) "),Et=r(" GM($) "),Jt=r(" GM(%) "),qt=r(" Sales($) "),zt=r(" GM($) "),Qt=r(" GM(%) "),Wt={class:"bg-white"},Xt={key:0},Yt={key:0},Zt=e("br",null,null,-1),te={key:1},ee=e("br",null,null,-1),oe={key:1},se={key:0},ne=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),ae=[ne],ye={__name:"IndexVm",props:{categories:Object,monthOptions:Object,operators:Object,totals:[Array,Object],vends:Object},setup(l){const K=l,o=x({categories:[],codes:"",currentMonth:"",customer_name:"",operator_id:"",sortKey:"",sortBy:!0,numberPerPage:100}),k=x([]),S=x([]),w=x([]),V=x([]),B=O().props.value.auth.permissions;G(()=>{V.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.numberPerPage=V.value[0],k.value=K.categories.data.map(c=>({id:c.id,name:c.name})),S.value=K.monthOptions.map(c=>({id:c.id,name:c.name})),o.value.currentMonth=S.value[0],w.value=[{id:"all",full_name:"All"},...K.operators.data.map(c=>({id:c.id,full_name:c.full_name}))],o.value.operator_id=w.value[0]});function v(){T.Inertia.get("/reports/vm",{...o.value,currentMonth:o.value.currentMonth.id,operator_id:o.value.operator_id.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function N(){T.Inertia.get("/reports/vm")}function _(c){o.value.sortKey=c,o.value.sortBy=!o.value.sortBy,v()}return(c,s)=>(m(),g(F,null,[n(y(j),{title:"GP by VM"}),n(A,null,{header:a(()=>[J]),default:a(()=>{var $,P;return[e("div",q,[e("div",z,[e("div",Q,[n(I,{placeholderStr:"Vend ID",modelValue:o.value.codes,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.codes=t),onKeyup:s[1]||(s[1]=M(t=>v(),["enter"]))},{default:a(()=>[W,X]),_:1},8,["modelValue"]),y(B).includes("admin-access vends")?(m(),D(I,{key:0,placeholderStr:"Cust Name",modelValue:o.value.customer_name,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.customer_name=t),onKeyup:s[3]||(s[3]=M(t=>v(),["enter"]))},{default:a(()=>[Y]),_:1},8,["modelValue"])):b("",!0),y(B).includes("admin-access vends")?(m(),g("div",Z,[tt,n(L,{modelValue:o.value.operator_id,"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.operator_id=t),options:w.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),y(B).includes("admin-access vends")?(m(),g("div",et,[ot,n(L,{modelValue:o.value.categories,"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.categories=t),options:k.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),e("div",null,[st,n(L,{modelValue:o.value.currentMonth,"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.currentMonth=t),options:S.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",nt,[e("div",at,[e("div",rt,[n(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[7]||(s[7]=t=>v())},{default:a(()=>[n(y(H),{class:"h-4 w-4","aria-hidden":"true"}),lt]),_:1}),n(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[8]||(s[8]=t=>N())},{default:a(()=>[n(y(E),{class:"h-4 w-4","aria-hidden":"true"}),it]),_:1})])]),e("div",dt,[e("p",mt,[ut,e("span",ct,i(($=l.vends.meta.from)!=null?$:0),1),_t,e("span",gt,i((P=l.vends.meta.to)!=null?P:0),1),ht,e("span",ft,i(l.vends.meta.total),1),yt]),n(L,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.numberPerPage=t),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:v},null,8,["modelValue","options"])])]),e("dl",pt,[e("div",vt,[xt,e("dd",bt,i(l.totals.revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",Bt,[Lt,e("dd",Kt,i(l.totals.gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",St,[wt,e("dd",Vt,i(l.totals.gross_profit_margin.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}))+" % ",1)])])]),e("div",kt,[e("div",$t,[e("div",Pt,[e("table",Ft,[e("thead",Mt,[e("tr",Dt,[n(p,null,{default:a(()=>[Tt]),_:1}),n(p,null,{default:a(()=>[Ct]),_:1}),n(h,{modelName:"name",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[10]||(s[10]=t=>_("name"))},{default:a(()=>[It]),_:1},8,["sortKey","sortBy"]),n(p,{colspan:"3"},{default:a(()=>[Nt]),_:1}),n(p,{colspan:"3"},{default:a(()=>[Ot]),_:1}),n(p,{colspan:"3"},{default:a(()=>[Gt]),_:1})]),e("tr",jt,[n(p,{colspan:"3"}),n(h,{modelName:"this_month_revenue",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[11]||(s[11]=t=>_("this_month_revenue"))},{default:a(()=>[Ut]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"this_month_gross_profit",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[12]||(s[12]=t=>_("this_month_gross_profit"))},{default:a(()=>[At]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"this_month_gross_profit_margin",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[13]||(s[13]=t=>_("this_month_gross_profit_margin"))},{default:a(()=>[Ht]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"last_month_revenue",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[14]||(s[14]=t=>_("last_month_revenue"))},{default:a(()=>[Rt]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"last_month_gross_profit",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[15]||(s[15]=t=>_("last_month_gross_profit"))},{default:a(()=>[Et]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"last_month_gross_profit_margin",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[16]||(s[16]=t=>_("last_month_gross_profit_margin"))},{default:a(()=>[Jt]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"last_two_month_revenue",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[17]||(s[17]=t=>_("last_two_month_revenue"))},{default:a(()=>[qt]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"last_two_month_gross_profit",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[18]||(s[18]=t=>_("last_two_month_gross_profit"))},{default:a(()=>[zt]),_:1},8,["sortKey","sortBy"]),n(h,{modelName:"last_two_month_gross_profit_margin",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[19]||(s[19]=t=>_("last_two_month_gross_profit_margin"))},{default:a(()=>[Qt]),_:1},8,["sortKey","sortBy"])])]),e("tbody",Wt,[(m(!0),g(F,null,U(l.vends.data,(t,d)=>(m(),g("tr",{key:t.id,class:"divide-x divide-gray-200"},[n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-center"},{default:a(()=>[r(i(l.vends.meta.from+d),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-center"},{default:a(()=>[r(i(t.code),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-left"},{default:a(()=>[t.latestVendBinding&&t.latestVendBinding.customer?(m(),g("span",Xt,[y(B).includes("admin-access vends")?(m(),g("span",Yt,[r(i(t.latestVendBinding.customer.code)+" ",1),Zt,r(" "+i(t.latestVendBinding.customer.name),1)])):(m(),g("span",te,[r(i(t.latestVendBinding.customer.code)+" ",1),ee,r(" "+i(t.latestVendBinding.customer.name),1)]))])):(m(),g("span",oe,i(t.name),1))]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>[r(i(t.this_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>[r(i(t.this_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>{var f;return[r(i((f=t.this_month_gross_profit_margin)!=null?f:0),1)]}),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>[r(i(t.last_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>[r(i(t.last_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>{var f;return[r(i((f=t.last_month_gross_profit_margin)!=null?f:0),1)]}),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>[r(i(t.last_two_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>[r(i(t.last_two_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),n(u,{currentIndex:d,totalLength:l.vends.length,inputClass:"text-right"},{default:a(()=>{var f;return[r(i((f=t.last_two_month_gross_profit_margin)!=null?f:0),1)]}),_:2},1032,["currentIndex","totalLength"])]))),128)),l.vends.data.length?b("",!0):(m(),g("tr",se,ae))])]),l.vends.data.length?(m(),D(R,{key:0,links:l.vends.links,meta:l.vends.meta},null,8,["links","meta"])):b("",!0)])])])])]}),_:1})],64))}};export{ye as default};
