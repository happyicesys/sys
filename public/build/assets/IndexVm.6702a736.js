import{i as v,l as T,j as O,o as u,g as _,a as e,b as f,w as a,F,H as G,d as n,P as D,c as P,p as x,t as i,m as U,f as l,J as C}from"./app.6f1d142c.js";import{_ as j}from"./Authenticated.34e16d89.js";import{_ as I}from"./Button.224a8d6a.js";import{_ as M,r as A,T as g,a as H,b as m}from"./TableData.cf0fa460.js";import{_ as B}from"./MultiSelect.4b5bbfe9.js";import{_ as p}from"./TableHeadSort.bcaf82c4.js";import{r as R}from"./BackspaceIcon.e4cdc77f.js";import"./open-closed.ec67fade.js";import"./use-resolve-button-type.947dc198.js";import"./RectangleStackIcon.8c384d7f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const E=n("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Gross Profit by VM ",-1),J={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},q={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},z={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Q=l(" Vend ID "),W=n("span",{class:"text-[9px]"},' ("," for multiple) ',-1),X=l(" Cust Name "),Y={key:1},Z=n("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),tt={key:2},et=n("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ot=n("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Current Month ",-1),st={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},nt={class:"mt-3"},at={class:"flex space-x-1"},lt=n("span",null," Search ",-1),rt=n("span",null," Reset ",-1),it={class:"flex flex-col space-y-2"},dt={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ut=n("span",null,"Showing",-1),mt={class:"font-medium"},ct=n("span",null,"to",-1),_t={class:"font-medium"},gt=n("span",null,"of",-1),ht={class:"font-medium"},ft=n("span",null,"results",-1),pt={class:"mt-6 flex flex-col"},vt={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},yt={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll m-2"},xt={class:"min-w-full border-separate",style:{"border-spacing":"0"}},bt={class:"bg-gray-100"},Bt={class:"divide-x divide-gray-200"},Lt=l(" # "),Vt=l(" ID "),St=l(" Name "),wt=l(" This Month "),kt=l(" Last Month "),Kt=l(" Last 2 Month "),$t={class:"divide-x divide-gray-200"},Ft=l(" Sales($) "),Dt=l(" GM($) "),Pt=l(" GM(%) "),Ct=l(" Sales($) "),It=l(" GM($) "),Mt=l(" GM(%) "),Nt=l(" Sales($) "),Tt=l(" GM($) "),Ot=l(" GM(%) "),Gt={class:"bg-white"},Ut={key:0},jt={key:0},At=n("br",null,null,-1),Ht={key:1},Rt=n("br",null,null,-1),Et={key:1},Jt={key:0},qt=n("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),zt=[qt],le={__name:"IndexVm",props:{categories:Object,monthOptions:Object,operators:Object,vends:Object},setup(r){const L=r,o=v({categories:[],codes:"",currentMonth:"",customer_name:"",operator:"",sortKey:"",sortBy:!0,numberPerPage:100}),k=v([]),V=v([]),S=v([]);v("");const w=v([]),b=T().props.value.auth.permissions;O(()=>{w.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.numberPerPage=w.value[0],k.value=L.categories.data.map(c=>({id:c.id,name:c.name})),V.value=L.monthOptions.map(c=>({id:c.id,name:c.name})),o.value.currentMonth=V.value[0],S.value=[{id:"all",full_name:"All"},...L.operators.data.map(c=>({id:c.id,full_name:c.full_name}))],o.value.operator=S.value[0]});function y(){C.Inertia.get("/reports/vm",{...o.value,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function N(){C.Inertia.get("/reports/vm")}function h(c){o.value.sortKey=c,o.value.sortBy=!o.value.sortBy,y()}return(c,s)=>(u(),_(F,null,[e(f(G),{title:"GP by VM"}),e(j,null,{header:a(()=>[E]),default:a(()=>{var K,$;return[n("div",J,[n("div",q,[n("div",z,[e(M,{placeholderStr:"Vend ID",modelValue:o.value.codes,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.codes=t),onKeyup:s[1]||(s[1]=D(t=>y(),["enter"]))},{default:a(()=>[Q,W]),_:1},8,["modelValue"]),f(b).includes("admin-access vends")?(u(),P(M,{key:0,placeholderStr:"Cust Name",modelValue:o.value.customer_name,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.customer_name=t),onKeyup:s[3]||(s[3]=D(t=>y(),["enter"]))},{default:a(()=>[X]),_:1},8,["modelValue"])):x("",!0),f(b).includes("admin-access vends")?(u(),_("div",Y,[Z,e(B,{modelValue:o.value.operator,"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.operator=t),options:S.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):x("",!0),f(b).includes("admin-access vends")?(u(),_("div",tt,[et,e(B,{modelValue:o.value.categories,"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.categories=t),options:k.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):x("",!0),n("div",null,[ot,e(B,{modelValue:o.value.currentMonth,"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.currentMonth=t),options:V.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),n("div",st,[n("div",nt,[n("div",at,[e(I,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[7]||(s[7]=t=>y())},{default:a(()=>[e(f(A),{class:"h-4 w-4","aria-hidden":"true"}),lt]),_:1}),e(I,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[8]||(s[8]=t=>N())},{default:a(()=>[e(f(R),{class:"h-4 w-4","aria-hidden":"true"}),rt]),_:1})])]),n("div",it,[n("p",dt,[ut,n("span",mt,i((K=r.vends.meta.from)!=null?K:0),1),ct,n("span",_t,i(($=r.vends.meta.to)!=null?$:0),1),gt,n("span",ht,i(r.vends.meta.total),1),ft]),e(B,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.numberPerPage=t),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:y},null,8,["modelValue","options"])])])]),n("div",pt,[n("div",vt,[n("div",yt,[n("table",xt,[n("thead",bt,[n("tr",Bt,[e(g,null,{default:a(()=>[Lt]),_:1}),e(g,null,{default:a(()=>[Vt]),_:1}),e(p,{modelName:"name",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[10]||(s[10]=t=>h("name"))},{default:a(()=>[St]),_:1},8,["sortKey","sortBy"]),e(g,{colspan:"3"},{default:a(()=>[wt]),_:1}),e(g,{colspan:"3"},{default:a(()=>[kt]),_:1}),e(g,{colspan:"3"},{default:a(()=>[Kt]),_:1})]),n("tr",$t,[e(g,{colspan:"3"}),e(p,{modelName:"this_month_revenue",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[11]||(s[11]=t=>h("this_month_revenue"))},{default:a(()=>[Ft]),_:1},8,["sortKey","sortBy"]),e(p,{modelName:"this_month_gross_profit",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[12]||(s[12]=t=>h("this_month_gross_profit"))},{default:a(()=>[Dt]),_:1},8,["sortKey","sortBy"]),e(g,null,{default:a(()=>[Pt]),_:1}),e(p,{modelName:"last_month_revenue",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[13]||(s[13]=t=>h("last_month_revenue"))},{default:a(()=>[Ct]),_:1},8,["sortKey","sortBy"]),e(p,{modelName:"last_month_gross_profit",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[14]||(s[14]=t=>h("last_month_gross_profit"))},{default:a(()=>[It]),_:1},8,["sortKey","sortBy"]),e(g,null,{default:a(()=>[Mt]),_:1}),e(p,{modelName:"last_two_month_revenue",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[15]||(s[15]=t=>h("last_two_month_revenue"))},{default:a(()=>[Nt]),_:1},8,["sortKey","sortBy"]),e(p,{modelName:"last_two_month_gross_profit",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[16]||(s[16]=t=>h("last_two_month_gross_profit"))},{default:a(()=>[Tt]),_:1},8,["sortKey","sortBy"]),e(g,null,{default:a(()=>[Ot]),_:1})])]),n("tbody",Gt,[(u(!0),_(F,null,U(r.vends.data,(t,d)=>(u(),_("tr",{key:t.id,class:"divide-x divide-gray-200"},[e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[l(i(r.vends.meta.from+d),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[l(i(t.code),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-left"},{default:a(()=>[t.latestVendBinding&&t.latestVendBinding.customer?(u(),_("span",Ut,[f(b).includes("admin-access vends")?(u(),_("span",jt,[l(i(t.latestVendBinding.customer.code)+" ",1),At,l(" "+i(t.latestVendBinding.customer.name),1)])):(u(),_("span",Ht,[l(i(t.latestVendBinding.customer.code)+" ",1),Rt,l(" "+i(t.latestVendBinding.customer.name),1)]))])):(u(),_("span",Et,i(t.name),1))]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.this_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.this_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.this_month_gross_profit/t.this_month_revenue?(t.this_month_gross_profit/t.this_month_revenue*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):0),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.last_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.last_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.last_month_gross_profit/t.last_month_revenue?(t.last_month_gross_profit/t.last_month_revenue*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):0),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.last_two_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.last_two_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),e(m,{currentIndex:d,totalLength:r.vends.length,inputClass:"text-right"},{default:a(()=>[l(i(t.last_two_month_gross_profit/t.last_two_month_revenue?(t.last_two_month_gross_profit/t.last_two_month_revenue*100).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):0),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),r.vends.data.length?x("",!0):(u(),_("tr",Jt,zt))])]),r.vends.data.length?(u(),P(H,{key:0,links:r.vends.links,meta:r.vends.meta},null,8,["links","meta"])):x("",!0)])])])])]}),_:1})],64))}};export{le as default};
