import{_ as G}from"./Authenticated.0b1c71d0.js";import{_ as L}from"./Button.9bf152f3.js";import{d as j}from"./main.a6c0d4a7.js";import{o as f,g as v,d as e,r as N,a as o,b as y,a2 as C,i as g,j as A,w as s,F as M,H as E,t as i,m as F,p as w,c as K,f as r,J as O}from"./app.63b2c55f.js";import{_ as I,r as H,a as R,T as c,b as J,c as Y,d as m}from"./TableHeadSort.1c1fd218.js";import{_ as h}from"./MultiSelect.62e437bc.js";import"./open-closed.b32d4935.js";import"./use-resolve-button-type.948c374b.js";import"./RectangleStackIcon.3c65f34a.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.76c88547.js";const q={for:"text",class:"block text-sm font-medium text-gray-700"},z={class:"mt-1"},$={__name:"DatePicker",props:{modelValue:[Date,String],minDate:[Date,String],maxDate:[Date,String],enableTimePicker:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(d,{emit:p}){function x(_){p("update:modelValue",C(_).format("Y-M-D"))}return(_,a)=>(f(),v("div",null,[e("label",q,[N(_.$slots,"default")]),e("div",z,[o(y(j),{modelValue:d.modelValue,"onUpdate:modelValue":x,format:"yyyy-MM-dd",clearable:!1,monthChangeOnScroll:!1,autoApply:"",closeOnAutoApply:!0,minDate:d.minDate,maxDate:d.maxDate,enableTimePicker:d.enableTimePicker},null,8,["modelValue","minDate","maxDate","enableTimePicker"])])]))}},Q=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (Transactions) ",-1),W={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},X={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},Z={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ee={class:"col-span-5 md:col-span-1"},te=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Vend ID ",-1),ae={class:"col-span-5 md:col-span-1"},oe=r(" From "),le={class:"col-span-5 md:col-span-1"},se=r(" To "),ne={class:"col-span-5 md:col-span-1"},de=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),re={class:"col-span-5 md:col-span-1"},ie=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Pay Method ",-1),ue={class:"col-span-5 md:col-span-1"},me=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ce={class:"col-span-5 md:col-span-1"},pe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ge=r(" Cust ID "),_e=r(" Cust Name "),he={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},fe={class:"mt-3"},ve={class:"flex space-x-1"},xe=e("span",null," Search ",-1),ye=e("span",null," Reset ",-1),be={class:"flex flex-col space-y-2"},Ve={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ke=e("span",null,"Showing",-1),Ce={class:"font-medium"},Pe=e("span",null,"to",-1),De={class:"font-medium"},Se=e("span",null,"of",-1),Be={class:"font-medium"},Le=e("span",null,"results",-1),Me={class:"mt-6 flex flex-col"},we={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Oe={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ie={class:"min-w-full border-separate",style:{"border-spacing":"0"}},$e={class:"bg-gray-100"},Ue={class:"divide-x divide-gray-200"},Te=r(" # "),Ge=r(" DateTime "),je=r(" Code "),Ne=r(" Customer "),Ae=r(" Channel "),Ee=r(" Amount "),Fe=r(" Pay Method "),Ke=r(" Channels Error "),He=r(" Order ID "),Re={class:"bg-white"},Je=e("br",null,null,-1),Ye={key:0},qe=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),ze=[qe],dt={__name:"Transaction",props:{categories:Object,categoryGroups:Object,paymentMethods:Object,vends:Object,vendTransactions:Object,vendChannelErrors:Object},setup(d){const p=d,x=g([]),_=g([]);A(()=>{P.value=p.vends.data.map(n=>({id:n.id,code:n.code})),D.value=p.vendChannelErrors.data.map(n=>({id:n.id,desc:n.desc})),b.value=[{id:"",name:"All"},...p.paymentMethods.data.map(n=>({id:n.id,name:n.name}))],V.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],a.value.numberPerPage=V.value[0],a.value.paymentMethod=b.value[0],x.value=p.categories.data.map(n=>({id:n.id,name:n.name})),_.value=p.categoryGroups.data.map(n=>({id:n.id,name:n.name}))});const a=g({codes:[],categories:[],categoryGroups:[],customer_code:"",customer_name:"",errors:[],paymentMethod:"",date_from:C().startOf("month").toDate(),date_to:C().toDate(),sortKey:"",sortBy:!1,numberPerPage:100}),P=g([]),D=g([]),b=g([]),V=g([]);function k(){O.Inertia.get("/vends/transactions",{...a.value,categories:a.value.categories.map(n=>n.id),categoryGroups:a.value.categoryGroups.map(n=>n.id),codes:a.value.codes.map(n=>n.id),errors:a.value.errors.map(n=>n.id),paymentMethod:a.value.paymentMethod.id,numberPerPage:a.value.numberPerPage.id},{preserveState:!0,replace:!0})}function U(){O.Inertia.get("/vends/transactions")}function T(n){a.value.sortKey=n,a.value.sortBy=!a.value.sortBy,k()}return(n,l)=>(f(),v(M,null,[o(y(E),{title:"VM Transactions"}),o(G,null,{header:s(()=>[Q]),default:s(()=>{var S,B;return[e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[te,o(h,{modelValue:a.value.codes,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.codes=t),options:P.value,valueProp:"id",label:"code",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",ae,[o($,{modelValue:a.value.date_from,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.date_from=t),class:"col-span-5 md:col-span-1"},{default:s(()=>[oe]),_:1},8,["modelValue"])]),e("div",le,[o($,{modelValue:a.value.date_to,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.date_to=t),minDate:a.value.date_from,class:"col-span-5 md:col-span-1"},{default:s(()=>[se]),_:1},8,["modelValue","minDate"])]),e("div",ne,[de,o(h,{modelValue:a.value.errors,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.errors=t),options:D.value,valueProp:"id",label:"desc",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",re,[ie,o(h,{modelValue:a.value.paymentMethod,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value.paymentMethod=t),options:b.value,valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",ue,[me,o(h,{modelValue:a.value.categories,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.categories=t),options:x.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",ce,[pe,o(h,{modelValue:a.value.categoryGroups,"onUpdate:modelValue":l[6]||(l[6]=t=>a.value.categoryGroups=t),options:_.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),o(I,{placeholderStr:"Cust ID",modelValue:a.value.customer_code,"onUpdate:modelValue":l[7]||(l[7]=t=>a.value.customer_code=t)},{default:s(()=>[ge]),_:1},8,["modelValue"]),o(I,{placeholderStr:"Cust Name",modelValue:a.value.customer_name,"onUpdate:modelValue":l[8]||(l[8]=t=>a.value.customer_name=t)},{default:s(()=>[_e]),_:1},8,["modelValue"])]),e("div",he,[e("div",fe,[e("div",ve,[o(L,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[9]||(l[9]=t=>k())},{default:s(()=>[o(y(H),{class:"h-4 w-4","aria-hidden":"true"}),xe]),_:1}),o(L,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[10]||(l[10]=t=>U())},{default:s(()=>[o(y(R),{class:"h-4 w-4","aria-hidden":"true"}),ye]),_:1})])]),e("div",be,[e("p",Ve,[ke,e("span",Ce,i((S=d.vendTransactions.meta.from)!=null?S:0),1),Pe,e("span",De,i((B=d.vendTransactions.meta.to)!=null?B:0),1),Se,e("span",Be,i(d.vendTransactions.meta.total),1),Le]),o(h,{modelValue:a.value.numberPerPage,"onUpdate:modelValue":l[11]||(l[11]=t=>a.value.numberPerPage=t),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:k},null,8,["modelValue","options"])])])]),e("div",Me,[e("div",we,[e("div",Oe,[e("table",Ie,[e("thead",$e,[e("tr",Ue,[o(c,null,{default:s(()=>[Te]),_:1}),o(J,{modelName:"transaction_datetime",sortKey:a.value.sortKey,sortBy:a.value.sortBy,onSortTable:l[12]||(l[12]=t=>T("transaction_datetime"))},{default:s(()=>[Ge]),_:1},8,["sortKey","sortBy"]),o(c,null,{default:s(()=>[je]),_:1}),o(c,null,{default:s(()=>[Ne]),_:1}),o(c,null,{default:s(()=>[Ae]),_:1}),o(c,null,{default:s(()=>[Ee]),_:1}),o(c,null,{default:s(()=>[Fe]),_:1}),o(c,null,{default:s(()=>[Ke]),_:1}),o(c,null,{default:s(()=>[He]),_:1})])]),e("tbody",Re,[(f(!0),v(M,null,F(d.vendTransactions.data,(t,u)=>(f(),v("tr",{key:t.id,class:"divide-x divide-gray-200"},[o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-center"},{default:s(()=>[r(i(d.vendTransactions.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-center"},{default:s(()=>[r(i(t.transaction_datetime),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-center"},{default:s(()=>[r(i(t.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-left"},{default:s(()=>[r(i(t.vend.latestVendBinding&&t.vend.latestVendBinding.customer?t.vend.latestVendBinding.customer.code:null)+" ",1),Je,r(" "+i(t.vend.latestVendBinding&&t.vend.latestVendBinding.customer?t.vend.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-center"},{default:s(()=>[r(i(t.vendChannel.code),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-right"},{default:s(()=>[r(i(t.amount),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-left"},{default:s(()=>[r(i(t.paymentMethod?t.paymentMethod.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-left"},{default:s(()=>[r(i(t.vend_channel_error_desc),1)]),_:2},1032,["currentIndex","totalLength"]),o(m,{currentIndex:u,totalLength:d.vendTransactions.length,inputClass:"text-center"},{default:s(()=>[r(i(t.order_id),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.vendTransactions.data.length?w("",!0):(f(),v("tr",Ye,ze))])]),d.vendTransactions.data.length?(f(),K(Y,{key:0,links:d.vendTransactions.links,meta:d.vendTransactions.meta},null,8,["links","meta"])):w("",!0)])])])])]}),_:1})],64))}};export{dt as default};
