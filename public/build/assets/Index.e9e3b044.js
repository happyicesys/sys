import{_ as A}from"./Authenticated.cff79093.js";import{_ as M}from"./Button.af17f820.js";import{_ as $}from"./DatePicker.9110da34.js";import{_ as R}from"./Paginator.5644f981.js";import{_ as C,r as q}from"./SearchInput.b73130d6.js";import{_ as B}from"./MultiSelect.b525ff47.js";import{o as i,f as m,b as e,g as v,S as N,K as E,h as Q,a as l,u as h,w as o,F as V,Z,d as n,t as d,k as O,l as g,c as K,O as U,i as G,n as H}from"./app.aa4db6d1.js";import J from"./Complaint.9c63b755.js";import{_ as p,a as c}from"./TableData.d20d1242.js";import{_ as Y}from"./TableHeadSort.e297387a.js";import{r as W}from"./BackspaceIcon.ff608f1f.js";import"./open-closed.77987127.js";import"./use-resolve-button-type.e2e9a0f1.js";import"./RectangleStackIcon.9a7c1960.js";import"./main.e1381dd1.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.5552e900.js";import"./Modal.fe7629b2.js";import"./disposables.5884f40e.js";import"./ArrowUturnLeftIcon.646be595.js";function X(r,k){return i(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 2c-2.236 0-4.43.18-6.57.524C1.993 2.755 1 4.014 1 5.426v5.148c0 1.413.993 2.67 2.43 2.902.848.137 1.705.248 2.57.331v3.443a.75.75 0 001.28.53l3.58-3.579a.78.78 0 01.527-.224 41.202 41.202 0 005.183-.5c1.437-.232 2.43-1.49 2.43-2.903V5.426c0-1.413-.993-2.67-2.43-2.902A41.289 41.289 0 0010 2zm0 7a1 1 0 100-2 1 1 0 000 2zM8 8a1 1 0 11-2 0 1 1 0 012 0zm5 1a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])}const ee=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Delivery Platform Orders ",-1),te={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},le={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},oe={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ae=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ne={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},se={class:"mt-3"},re={class:"flex space-x-1"},de=e("span",null," Search ",-1),ie=e("span",null," Reset ",-1),ue={class:"flex flex-col space-y-2"},ce={class:"text-sm text-gray-700 leading-5 flex space-x-1"},me=e("span",null,"Showing",-1),_e={class:"font-medium"},fe=e("span",null,"to",-1),pe={class:"font-medium"},he=e("span",null,"of",-1),ge={class:"font-medium"},ve=e("span",null,"results",-1),xe={class:"mt-6 flex flex-col"},ye={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},be={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},we={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ce={class:"bg-gray-100"},Ve={class:"divide-x divide-gray-200"},ke=e("br",null,null,-1),Pe={class:"bg-white"},Le={key:0},De=e("br",null,null,-1),Ie={class:"flex flex-col"},Se={class:"font-semibold"},Me={class:"divide-y divide-gray-200"},$e={class:"flex py-1 px-3 space-x-2"},Be={class:"self-center font-semibold text-blue-700"},Ne={key:0},Oe=e("br",null,null,-1),Ke={class:"flex self-center"},Ue=["href"],Ye=["src"],je=e("span",{class:"self-center"}," x ",-1),Fe={class:"self-center"},Te={class:"flex flex-col space-y-1"},ze=["onClick"],Ae={class:"flex space-x-1"},Re=e("span",{class:"font-semibold"}," Complaint ",-1),qe={key:0},Ee=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Qe=[Ee],_t={__name:"Index",props:{deliveryPlatformOrders:Object,deliveryPlatformOperatorOptions:Object},setup(r){const k=r,s=v({order_id:"",short_order_id:"",vend_code:"",date_from:N().format("YYYY-MM-DD"),date_to:N().format("YYYY-MM-DD"),delivery_platform_operator_id:"",sortKey:"",sortBy:!0,numberPerPage:100}),y=v([]),P=v();v("");const L=E().props.auth.operatorCountry,b=v([]),x=v(!1);Q(()=>{b.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=b.value[0],y.value=[{id:"all",name:"All"},...k.deliveryPlatformOperatorOptions.data.map(_=>({id:_.id,name:_.deliveryPlatform.name+" ("+_.type+")"}))],s.value.delivery_platform_operator_id=y.value[0]});function j(_){P.value=_,x.value=!0}function F(){x.value=!1}function w(){U.get("/delivery-platform-orders",{...s.value,delivery_platform_operator_id:s.value.delivery_platform_operator_id.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function T(){U.get("/delivery-platform-orders")}function D(_){s.value.sortKey=_,s.value.sortBy=!s.value.sortBy,w()}function z(_){let a="";switch(_){case 1:case 2:a="bg-blue-400 text-gray-800";break;case 3:case 4:case 5:case 6:a="bg-yellow-400 text-gray-800";break;case 7:a="bg-green-400 text-white-800";break;case 98:case 99:a="bg-red-400 text-white-800";break}return a}return(_,a)=>(i(),m(V,null,[l(h(Z),{title:"Delivery Platform"}),l(A,null,{header:o(()=>[ee]),default:o(()=>{var I,S;return[e("div",te,[e("div",le,[e("div",oe,[l(C,{placeholderStr:"Name",modelValue:s.value.order_id,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.order_id=t)},{default:o(()=>[n(" Order ID ")]),_:1},8,["modelValue"]),l(C,{placeholderStr:"Name",modelValue:s.value.short_order_id,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.short_order_id=t)},{default:o(()=>[n(" Short Order ID ")]),_:1},8,["modelValue"]),l(C,{placeholderStr:"Vend ID",modelValue:s.value.vend_code,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.vend_code=t)},{default:o(()=>[n(" Vend ID ")]),_:1},8,["modelValue"]),l($,{modelValue:s.value.date_from,"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.date_from=t)},{default:o(()=>[n(" From ")]),_:1},8,["modelValue"]),l($,{modelValue:s.value.date_to,"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.date_to=t),minDate:s.value.date_from},{default:o(()=>[n(" To ")]),_:1},8,["modelValue","minDate"]),e("div",null,[ae,l(B,{modelValue:s.value.delivery_platform_operator_id,"onUpdate:modelValue":a[5]||(a[5]=t=>s.value.delivery_platform_operator_id=t),options:y.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",ne,[e("div",se,[e("div",re,[l(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[6]||(a[6]=t=>w())},{default:o(()=>[l(h(q),{class:"h-4 w-4","aria-hidden":"true"}),de]),_:1}),l(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[7]||(a[7]=t=>T())},{default:o(()=>[l(h(W),{class:"h-4 w-4","aria-hidden":"true"}),ie]),_:1})])]),e("div",ue,[e("p",ce,[me,e("span",_e,d((I=r.deliveryPlatformOrders.meta.from)!=null?I:0),1),fe,e("span",pe,d((S=r.deliveryPlatformOrders.meta.to)!=null?S:0),1),he,e("span",ge,d(r.deliveryPlatformOrders.meta.total),1),ve]),l(B,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":a[8]||(a[8]=t=>s.value.numberPerPage=t),options:b.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:w},null,8,["modelValue","options"])])])]),e("div",xe,[e("div",ye,[e("div",be,[e("table",we,[e("thead",Ce,[e("tr",Ve,[l(p,null,{default:o(()=>[n(" # ")]),_:1}),l(Y,{modelName:"order_created_at",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[9]||(a[9]=t=>D("order_created_at"))},{default:o(()=>[n(" Order Time ")]),_:1},8,["sortKey","sortBy"]),l(p,null,{default:o(()=>[n(" Platform ")]),_:1}),l(p,null,{default:o(()=>[n(" Order ID ")]),_:1}),l(p,null,{default:o(()=>[n(" Short Order ID ")]),_:1}),l(p,null,{default:o(()=>[n(" Status ")]),_:1}),l(Y,{modelName:"vend_code",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[10]||(a[10]=t=>D("vend_code"))},{default:o(()=>[n(" Vend ")]),_:1},8,["sortKey","sortBy"]),l(p,null,{default:o(()=>[n(" Transaction "),ke,n(" Order ID ")]),_:1}),l(p,null,{default:o(()=>[n(" (Channel) Item x Qty ")]),_:1}),l(p,null,{default:o(()=>[n(" Subtotal ")]),_:1}),l(p,null,{default:o(()=>[n(" Driver Phone Number ")]),_:1})])]),e("tbody",Pe,[(i(!0),m(V,null,O(r.deliveryPlatformOrders.data,(t,u)=>(i(),m("tr",{key:t.id,class:"divide-x divide-gray-200"},[l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(r.deliveryPlatformOrders.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t.order_created_at),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t&&t.deliveryPlatform?t.deliveryPlatform.name:null)+" ",1),t.deliveryPlatformOperator?(i(),m("span",Le,[De,n("("+d(t.deliveryPlatformOperator?t.deliveryPlatformOperator.type:null)+") ",1)])):g("",!0)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[l(h(G),{href:"/delivery-platform-orders/"+t.id+"/edit",class:"text-blue-600"},{default:o(()=>[n(d(t.order_id),1)]),_:2},1032,["href"])]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t.short_order_id),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[e("div",{class:H(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",z(t.status)])},[e("div",Ie,[e("span",Se,d(t.status_name),1)])],2)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-left"},{default:o(()=>[n(d(t.deliveryProductMappingVend.vend.full_name),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t.vend_transaction_order_id),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-left"},{default:o(()=>[e("ul",Me,[(i(!0),m(V,null,O(t.deliveryPlatformOrderItems,f=>(i(),m("li",$e,[e("span",Be,[f.orderItemVendChannels[0]?(i(),m("span",Ne," (#"+d(f.orderItemVendChannels[0].vend_channel_code)+") ",1)):g("",!0)]),e("span",null,[n(d(f.deliveryProductMappingItem.product.code)+" ",1),Oe,n(" "+d(f.deliveryProductMappingItem.product.name),1)]),e("div",Ke,[f.deliveryProductMappingItem.product.thumbnail?(i(),m("a",{key:0,href:f.deliveryProductMappingItem.product.thumbnail.full_url,target:"_blank"},[e("img",{class:"object-scale-down h-24 w-24 md:h-16 md:w-20 rounded-full",src:f.deliveryProductMappingItem.product.thumbnail.full_url,alt:""},null,8,Ye)],8,Ue)):g("",!0)]),je,e("span",Fe,d(f.qty),1)]))),256))])]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-right"},{default:o(()=>[n(d(t.subtotal_amount.toLocaleString(void 0,{minimumFractionDigits:h(L).is_currency_exponent_hidden?0:h(L).currency_exponent})),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[e("div",Te,[e("span",null,d(t.driver_phone_number),1),t.deliveryPlatformOrderComplaint?(i(),m("div",{key:0,class:"inline-flex justify-center items-center rounded px-1.5 py-1 text-xs font-medium border min-w-full bg-yellow-400 text-gray-800 hover:cursor-pointer",onClick:f=>j(t)},[e("div",Ae,[l(h(X),{class:"h-4 w-4","aria-hidden":"true"}),Re])],8,ze)):g("",!0)])]),_:2},1032,["currentIndex","totalLength"])]))),128)),r.deliveryPlatformOrders.data.length?g("",!0):(i(),m("tr",qe,Qe))])]),r.deliveryPlatformOrders.data.length?(i(),K(R,{key:0,links:r.deliveryPlatformOrders.links,meta:r.deliveryPlatformOrders.meta},null,8,["links","meta"])):g("",!0)])])])]),x.value?(i(),K(J,{key:0,model:P.value,showModal:x.value,onModalClose:F},null,8,["model","showModal"])):g("",!0)]}),_:1})],64))}};export{_t as default};
