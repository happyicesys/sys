import{o as d,f as u,b as e,h as l,K as Q,U as oe,a as c,u as m,w as v,F as W,Z as re,c as S,m as h,P as le,d as T,e as ie,t as g,l as ne,O as F}from"./app.e5bc1cfd.js";import{_ as de}from"./Authenticated.a92c9fc8.js";import{_ as k}from"./Button.ae23f755.js";import{_ as L}from"./Graph.1d5b4879.js";import{_ as O}from"./MultiSelect.b9d0c903.js";import{_ as ce,r as pe}from"./SearchInput.d2f27cba.js";import{r as ue}from"./BackspaceIcon.aafcec14.js";import"./open-closed.00e2994e.js";import"./use-resolve-button-type.6643db11.js";import"./RectangleStackIcon.49ae23f2.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.40abed7d.js";function me(V,p){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M14.77 4.21a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 011.08-1.04L10 8.168l3.71-3.938a.75.75 0 011.06-.02zm0 6a.75.75 0 01.02 1.06l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 111.08-1.04L10 14.168l3.71-3.938a.75.75 0 011.06-.02z","clip-rule":"evenodd"})])}function fe(V,p){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z","clip-rule":"evenodd"})])}const ye=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),ve={class:"p-3"},ge={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},_e={class:"p-4"},be=e("span",null," Show Filters ",-1),xe={key:0,class:"p-4 mx-2"},we={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},De=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Ge={key:0},Se=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ke={key:1},Oe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),Ve={key:2},Ce=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),$e=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Ne={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},Be={class:"mt-3"},je={class:"flex space-x-1"},Ae=e("span",null," Search ",-1),Je=e("span",null," Reset ",-1),Te=e("span",null," Hide Filters ",-1),Fe={class:"p-1 bg-white border-b border-gray-200 flex flex-col space-y-6"},Le={class:"text-center p-2"},Pe={class:"flex flex-col md:flex-row pt-5"},Ue={class:"md:basis-1/3 m-1"},ze={class:"md:basis-2/3 my-1 mx-4 px-4"},Ke=e("p",{class:"text-sm"}," Past 7 Days - Top 10 Best Performance ",-1),Me={class:"mt-2 flow-root"},Re={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ze={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},Ee={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},He={class:"min-w-full divide-y divide-gray-300"},qe=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),Qe={class:"divide-y divide-gray-200 bg-white"},We={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Xe={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},Ye={key:0},Ie=e("br",null,null,-1),et={key:1},tt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},at={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},st={key:0},ot=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),rt=[ot],lt={class:"pt-5"},ht={__name:"Dashboard",props:{categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object},setup(V){const p=V,i=l({categories:[],categoryGroups:[],codes:"",day_date_from:"",day_date_to:"",locationType:"",operator:""}),P=l([]),U=l([]),z=l(0),K=l(0),M=l(0),X=()=>{z.value+=1},Y=()=>{K.value+=1},I=()=>{M.value+=1},C=l([]),R=Q().props.auth.operator,$=l([]),b=Q().props.auth.permissions,x=l(!1),Z=l([]),w=l([]),N=l([]),ee=l({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),E=l([]),D=l([]),B=l([]),te=l({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),G=l([]),j=l([]),A=l([]),ae=l({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),J=l([]);oe(()=>{P.value=p.categories.data.map(t=>({id:t.id,name:t.name})),U.value=p.categoryGroups.data.map(t=>({id:t.id,name:t.name})),C.value=[{id:"all",name:"All"},...p.locationTypeOptions.data.map(t=>({id:t.id,name:t.name}))],$.value=[{id:"all",name:"All"},...p.operatorOptions.data.map(t=>({id:t.id,name:t.name}))],i.value.locationType=C.value[0],i.value.operator=$.value.find(t=>t.id==R.id),q()});function n(t,r){var a=parseInt(t.slice(1,3),16),f=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return"rgba("+a+", "+f+", "+s+", "+r+")"}function H(){F.visit(route("dashboard",{...i.value,categories:i.value.categories.map(t=>t.id),categoryGroups:i.value.categoryGroups.map(t=>t.id),location_type_id:i.value.locationType.id,operator_id:i.value.operator.id}),{only:["dayGraphData","monthGraphData","productGraphData","performerGraphData"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:t=>{F.reload({only:["dayGraphData","monthGraphData","productGraphData","performerGraphData"],preserveState:!0,preserveScroll:!0}),q()}})}function se(){F.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function q(){Z.value=[],w.value=[],N.value=[],E.value=[],D.value=[],B.value=[],G.value=[],j.value=[],A.value=[];let t=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],r=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];Z.value=JSON.parse(JSON.stringify(p.dayGraphData));let a=[];a=_.groupBy(JSON.parse(JSON.stringify(p.dayGraphData)).data,"month_name"),Object.keys(a).forEach((s,o)=>{w.value.push({label:s+" (#)",data:a[s].map(y=>y.count),backgroundColor:o%2==0?n(t[o+2],.2):n(t[o+2],.9),borderColor:o%2==0?n(t[o+2],.2):n(t[o+2],.9),yAxisID:"y1",type:"line",order:1}),w.value.push({label:s+" ($)",data:a[s].map(y=>y.amount),backgroundColor:o%2==0?n(t[o],.2):n(t[o],1),borderColor:o%2==0?n(t[o],.2):n(t[o],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let s=1;s<=31;s++)N.value.push(s);E.value=JSON.parse(JSON.stringify(p.monthGraphData));let f=[];f=JSON.parse(JSON.stringify(p.monthGraphData)),Object.keys(f).forEach((s,o)=>{D.value.push({label:s+" (#)",data:Object.values(f[s]).map(y=>y.count),backgroundColor:o%2==0?n(t[o+2],.2):n(t[o+2],.9),borderColor:o%2==0?n(t[o+2],.2):n(t[o+2],.9),yAxisID:"y1",type:"line",order:1}),D.value.push({label:s+" ($)",data:Object.values(f[s]).map(y=>y.amount),backgroundColor:o%2==0?n(t[o],.2):n(t[o],1),borderColor:o%2==0?n(t[o],.2):n(t[o],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let s=1;s<=12;s++)B.value.push(s);G.value=JSON.parse(JSON.stringify(p.productGraphData)),j.value.push({label:"Sales",data:G.value.data.map(s=>s.count),backgroundColor:r}),A.value=G.value.data.map(s=>s.product?s.product.code+" - "+s.product.name:null),J.value=JSON.parse(JSON.stringify(p.performerGraphData)),X(),Y(),I()}return(t,r)=>(d(),u(W,null,[c(m(re),{title:"Dashboard"}),c(de,null,{header:v(()=>[ye]),default:v(()=>[e("div",ve,[e("div",ge,[e("div",he,[e("div",_e,[!x.value&&m(b).includes("admin-access vends")?(d(),S(k,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:r[0]||(r[0]=a=>x.value=!0)},{default:v(()=>[c(m(me),{class:"h-4 w-4","aria-hidden":"true"}),be]),_:1})):h("",!0)]),x.value?(d(),u("div",xe,[e("div",we,[c(ce,{placeholderStr:"Vend ID",modelValue:i.value.codes,"onUpdate:modelValue":r[1]||(r[1]=a=>i.value.codes=a),onKeyup:r[2]||(r[2]=le(a=>H(),["enter"]))},{default:v(()=>[T(" Vend ID "),De]),_:1},8,["modelValue"]),m(b).includes("admin-access vends")?(d(),u("div",Ge,[Se,c(O,{modelValue:i.value.categories,"onUpdate:modelValue":r[3]||(r[3]=a=>i.value.categories=a),options:P.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),m(b).includes("admin-access vends")?(d(),u("div",ke,[Oe,c(O,{modelValue:i.value.categoryGroups,"onUpdate:modelValue":r[4]||(r[4]=a=>i.value.categoryGroups=a),options:U.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),m(b).includes("admin-access vends")?(d(),u("div",Ve,[Ce,c(O,{modelValue:i.value.operator,"onUpdate:modelValue":r[5]||(r[5]=a=>i.value.operator=a),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),e("div",null,[$e,c(O,{modelValue:i.value.locationType,"onUpdate:modelValue":r[6]||(r[6]=a=>i.value.locationType=a),options:C.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Ne,[e("div",Be,[e("div",je,[c(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:r[7]||(r[7]=ie(a=>H(),["prevent"]))},{default:v(()=>[c(m(pe),{class:"h-4 w-4","aria-hidden":"true"}),Ae]),_:1}),c(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:r[8]||(r[8]=a=>se())},{default:v(()=>[c(m(ue),{class:"h-4 w-4","aria-hidden":"true"}),Je]),_:1}),c(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:r[9]||(r[9]=a=>x.value=!1)},{default:v(()=>[c(m(fe),{class:"h-4 w-4","aria-hidden":"true"}),Te]),_:1})])])])])):h("",!0),e("div",Fe,[e("p",Le,g(i.value&&i.value.operator?i.value.operator.name:m(R).name),1),(d(),S(L,{key:z.value,type:"scatter",labels:N.value,datasets:w.value,options:ee.value},null,8,["labels","datasets","options"])),e("div",Pe,[e("div",Ue,[(d(),S(L,{key:K.value,type:"pie",labels:A.value,datasets:j.value,options:ae.value},null,8,["labels","datasets","options"]))]),e("div",ze,[Ke,e("div",Me,[e("div",Re,[e("div",Ze,[e("div",Ee,[e("table",He,[qe,e("tbody",Qe,[(d(!0),u(W,null,ne(J.value.data,(a,f)=>(d(),u("tr",{key:a.id},[e("td",We,g(f+1),1),e("td",Xe,[a.customer?(d(),u("span",Ye,[T(g(a.customer.code)+" ",1),Ie,T(" "+g(a.customer.name),1)])):(d(),u("span",et,g(a.name),1))]),e("td",tt,g(a.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),e("td",at,g(a.count),1)]))),128)),J.value.data.length?h("",!0):(d(),u("tr",st,rt))])])])])])])])]),e("div",lt,[(d(),S(L,{key:M.value,type:"scatter",labels:B.value,datasets:D.value,options:te.value},null,8,["labels","datasets","options"]))])])])])])]),_:1})],64))}};export{ht as default};
