import{g as c,T as k,K as F,h as T,f as d,a,u as _,w as p,F as M,o as r,Z as R,b as e,d as y,t as m,l as n,e as z,n as D,k as K,i as L,c as Z}from"./app.009697ae.js";import{_ as q}from"./Authenticated.fb2385b7.js";import{_ as g}from"./Button.37f68050.js";import"./main.5a48a47c.js";import{_ as x}from"./FormInput.262e39f7.js";import{_ as O}from"./MultiSelect.418dfc00.js";import{r as G}from"./PlusCircleIcon.4be410ed.js";import{r as H}from"./ArrowUturnLeftIcon.274a55d8.js";import{r as J}from"./CheckCircleIcon.dcf41f14.js";import{r as Q}from"./BackspaceIcon.65987218.js";import"./open-closed.0a17ce87.js";import"./use-resolve-button-type.af25536c.js";import"./RectangleStackIcon.00e2746e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.dbddf1f4.js";const W={class:"font-semibold text-xl text-gray-800 leading-tight"},X={key:0},Y={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},I={class:"mt-6 flex flex-col"},ee={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},te={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},oe=["onSubmit"],se={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},ae={class:"sm:col-span-6"},re={class:"sm:col-span-6"},le=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),de={class:"mt-1"},ie=["value"],ne={class:"sm:col-span-6"},ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ue={class:"mt-1"},pe=["value"],me={class:"sm:col-span-6"},_e=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ve={class:"mt-1"},fe=["value"],ye={class:"sm:col-span-6"},ge=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),xe={class:"mt-1"},he=["value"],be=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"},"Delivery Platform Product(s) ")])])],-1),we={key:0},Pe={key:1},ke=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Oe={key:0,class:"text-sm text-red-600"},Ve={key:2},je={key:3},Ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),Se={key:4,class:"sm:col-span-1"},Me=e("span",null," Add ",-1),De={key:5,class:"sm:col-span-6 flex flex-col mt-3"},Ue={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},$e={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Be={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Ne={class:"table-fixed min-w-full divide-y divide-gray-300"},Ae=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Code "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Ee={class:"bg-white"},Fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Te={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Re={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ze={class:"flex justify-center"},Ke=["src"],Le={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Ze={key:0},qe={key:1,class:"break-words"},Ge={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},He={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Je={key:0,class:"text-sm text-red-600"},Qe={class:"whitespace-nowrap py-4 text-sm text-center"},We={key:0},Xe=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Ye=[Xe],Ie={class:"sm:col-span-6"},et={class:"flex space-x-1 mt-5 justify-end"},tt=e("span",null," Back ",-1),ot=e("span",null," Save ",-1),yt={__name:"Edit",props:{categoryApiOptions:[Array,Object],deliveryProductMapping:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String},setup(V){const l=V,U=c([]),h=c([]),$=c([]),o=c(k(S()));c(!1);const b=c([]),w=c([]),u=c([]),j=c([]),C=c([]),P=c(""),B=F().props.auth.permissions;T(()=>{l.type=="create"?P.value="Create New":P.value="Edit",U.value=l.categoryApiOptions[0].categories.map(t=>({id:t.id,name:t.name,subCategories:t.subCategories})),h.value=[...l.operatorOptions.data.find(t=>t.id===l.deliveryProductMapping.data.operator_id).deliveryPlatformOperators.map(t=>({id:t.id,name:t.deliveryPlatform.name}))],b.value=[...l.operatorOptions.data.map(t=>({id:t.id,full_name:t.full_name}))],w.value=[...l.productMappingOptions[0].data.map(t=>({id:t.id,name:t.name}))],j.value=l.productOptions.data,o.value=l.deliveryProductMapping?k({...l.deliveryProductMapping.data,operator_id:b.value.find(t=>t.id===l.deliveryProductMapping.data.operator_id),operator_field:b.value.find(t=>t.id===l.deliveryProductMapping.data.operator_id).full_name,product_mapping_id:w.value.find(t=>t.id===l.deliveryProductMapping.data.product_mapping_id),product_mapping_field:w.value.find(t=>t.id===l.deliveryProductMapping.data.product_mapping_id).name,delivery_platform_operator_id:h.value.find(t=>t.id===l.deliveryProductMapping.data.delivery_platform_operator_id),delivery_platform_operator_field:h.value.find(t=>t.id===l.deliveryProductMapping.data.delivery_platform_operator_id).name}):k(S())});function S(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",sub_category_json:""}}function N(){u.value.map(function(t){return t.channel_code}).indexOf(o.value.channel_code)<0&&(u.value.push({product:o.value.product_id,channel_code:o.value.channel_code,delivery_platform_sub_category_json:o.value.sub_category_json,delivery_platform_amount:o.value.amount}),u.value.sort((t,i)=>t.channel_code-i.channel_code)),u.value.splice(u.value.indexOf(productMappingItem),1)}function A(t){u.value.splice(u.value.indexOf(t),1)}function E(){o.value.clearErrors(),l.type==="create"&&o.value.transform(t=>({...t,delivery_platform_operator_id:t.delivery_platform_operator_id?t.delivery_platform_operator_id.id:null,operator_id:t.operator_id?t.operator_id.id:null,product_mapping_id:t.product_mapping_id?t.product_mapping_id.id:null,productMappingItems:u.value})).post("/delivery-product-mappings/store",{preserveState:!0,replace:!0})}return(t,i)=>(r(),d(M,null,[a(_(R),{title:"Delivery Product Mapping"}),a(q,null,{header:p(()=>[e("h2",W,[y(m(P.value)+" Delivery Product Mapping ",1),V.type=="update"?(r(),d("span",X,m($.value.name),1)):n("",!0)])]),default:p(()=>[e("div",Y,[e("div",I,[e("div",ee,[e("div",te,[e("form",{onSubmit:z(E,["prevent"]),id:"submit"},[e("div",se,[e("div",ae,[a(x,{modelValue:o.value.name,"onUpdate:modelValue":i[0]||(i[0]=s=>o.value.name=s),error:o.value.errors.name},{default:p(()=>[y(" Name ")]),_:1},8,["modelValue","error"])]),e("div",re,[le,e("div",de,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:o.value.operator_field},null,8,ie)])]),e("div",ne,[ce,e("div",ue,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:o.value.delivery_platform_operator_field},null,8,pe)])]),e("div",me,[_e,e("div",ve,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:o.value.category_json.name},null,8,fe)])]),e("div",ye,[ge,e("div",xe,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:o.value.product_mapping_field},null,8,he)])]),be,o.value.id?(r(),d("div",we,[a(x,{modelValue:o.value.channel_code,"onUpdate:modelValue":i[1]||(i[1]=s=>o.value.channel_code=s),error:o.value.errors.channel_code,placeholderStr:"Channel ID"},{default:p(()=>[y(" Channel ID ")]),_:1},8,["modelValue","error"])])):n("",!0),o.value.id?(r(),d("div",Pe,[ke,a(O,{modelValue:o.value.product_id,"onUpdate:modelValue":i[2]||(i[2]=s=>o.value.product_id=s),options:j.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),o.value.errors.product_id?(r(),d("div",Oe,m(o.value.errors.product_id),1)):n("",!0)])):n("",!0),o.value.id?(r(),d("div",Ve,[a(x,{modelValue:o.value.amount,"onUpdate:modelValue":i[3]||(i[3]=s=>o.value.amount=s),error:o.value.errors.amount,placeholderStr:"Platform Price"},{default:p(()=>[y(" Price ")]),_:1},8,["modelValue","error"])])):n("",!0),o.value.id?(r(),d("div",je,[Ce,a(O,{modelValue:o.value.sub_category_json,"onUpdate:modelValue":i[4]||(i[4]=s=>o.value.sub_category_json=s),options:C.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):n("",!0),o.value.product_mapping_id?(r(),d("div",Se,[a(g,{type:"button",onClick:i[5]||(i[5]=s=>N()),class:D(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!o.value.channel_code||!o.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!o.value.channel_code||!o.value.product_id},{default:p(()=>[a(_(G),{class:"w-4 h-4"}),Me]),_:1},8,["class","disabled"])])):n("",!0),o.value.product_mapping_id?(r(),d("div",De,[e("div",Ue,[e("div",$e,[e("div",Be,[e("table",Ne,[Ae,e("tbody",Ee,[(r(!0),d(M,null,K(u.value,(s,v)=>(r(),d("tr",{key:s.id,class:D(v%2===0?void 0:"bg-gray-50")},[e("td",Fe,m(v+1),1),e("td",Te,m(s.channel_code),1),e("td",Re,[e("div",ze,[s.product&&s.product.thumbnail?(r(),d("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:s.product.thumbnail.full_url,alt:""},null,8,Ke)):n("",!0)])]),e("td",Le,[s.product.code?(r(),d("span",Ze,m(s.product.code),1)):n("",!0),s.product.name?(r(),d("span",qe,m(s.product.name),1)):n("",!0)]),e("td",Ge,[a(x,{modelValue:s.delivery_platform_amount,"onUpdate:modelValue":f=>s.delivery_platform_amount=f,error:o.value.errors["productMappingItems."+v+".delivery_platform_amount"],placeholderStr:"Platform Price"},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",He,[a(O,{modelValue:s.delivery_platform_sub_category_json,"onUpdate:modelValue":f=>s.delivery_platform_sub_category_json=f,options:C.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","options"]),o.value.errors["productMappingItems."+v+".delivery_platform_sub_category_json"]?(r(),d("div",Je,m(o.value.errors["productMappingItems."+v+".delivery_platform_sub_category_json"]),1)):n("",!0)]),e("td",Qe,[a(g,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:f=>A(s)},{default:p(()=>[a(_(Q),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),u.value.length?n("",!0):(r(),d("tr",We,Ye))])])])])])])):n("",!0)]),e("div",Ie,[e("div",et,[a(_(L),{href:"/settings"},{default:p(()=>[a(g,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:p(()=>[a(_(H),{class:"w-4 h-4"}),tt]),_:1})]),_:1}),_(B).includes("update vends")?(r(),Z(g,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:p(()=>[a(_(J),{class:"w-4 h-4"}),ot]),_:1})):n("",!0)])])],40,oe)])])])])]),_:1})],64))}};export{yt as default};
