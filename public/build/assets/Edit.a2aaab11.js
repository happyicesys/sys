import{g as v,T as y,K as h,h as O,f as p,a as r,u,w as d,F as N,o as i,Z as D,b as t,d as m,t as _,l as c,e as U,m as S,v as M,n as j,c as g}from"./app.1ece038f.js";import{_ as F}from"./Authenticated.f573d049.js";import{_ as x}from"./Button.5fc98e84.js";import{_ as w}from"./DatePicker.aca62bb3.js";import{_ as V}from"./FormInput.69d74e0f.js";import{_ as E}from"./MultiSelect.9fec74a9.js";import{r as T}from"./ArrowUturnLeftIcon.221e1abe.js";import{r as H}from"./ArrowUturnDownIcon.d515d32b.js";import{r as I}from"./CheckCircleIcon.e06ce6cc.js";import"./open-closed.64ac3fed.js";import"./use-resolve-button-type.e72f4658.js";import"./RectangleStackIcon.aee48c17.js";import"./main.7493f9c1.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.0576dfad.js";const J={class:"font-semibold text-xl text-gray-800 leading-tight"},K={key:0},P={key:1},q=t("br",null,null,-1),z={key:2},A=t("br",null,null,-1),R={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Z={class:"mt-6 flex flex-col"},G={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},L={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},Q={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},W={class:"sm:col-span-6"},X={class:"sm:col-span-6"},Y={class:"relative flex items-start"},ee={class:"flex h-6 items-center"},te=["disabled"],se=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"is_customer",class:"font-medium text-gray-900"},"Customer Binding?"),m(" "+_(" ")+" "),t("span",{id:"is_customer",class:"text-gray-500"},[t("span",{class:"sr-only"},"Customer Binding?"),m("retrieve customer data from cms")])],-1),oe={key:0,class:"sm:col-span-6"},ae=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Customer ",-1),ne={key:1,class:"sm:col-span-6"},le={class:"sm:col-span-3"},re={class:"sm:col-span-3"},de={class:"sm:col-span-6"},ie={class:"sm:col-span-6"},me={class:"flex space-x-1 mt-5 justify-end"},ue=t("span",null," Back ",-1),ce=t("span",null," Unbind ",-1),ve=t("span",null," Save ",-1),Oe={__name:"Edit",props:{adminCustomerOptions:Object,operatorOptions:Object,vend:Object,type:String},setup(a){const l=a,k=v([]);v([]);const e=v(y(C()));v(!1);const $=v([]),b=v("");h().props.auth.operatorCountry,h().props.auth.operatorRole;const f=h().props.auth.permissions;v(moment().format("HH:mm:ss")),O(()=>{console.log(JSON.parse(JSON.stringify(l.vend))),l.type=="create"?b.value="Create New":b.value="Edit",k.value=l.adminCustomerOptions.map(n=>({id:n.id,full_name:n.cust_id+" - "+n.company})),$.value=[{id:"all",full_name:"All"},...l.operatorOptions.data.map(n=>({id:n.id,full_name:n.full_name}))],e.value=l.vend?y(l.vend):y(C()),e.value.name=l.vend.name,l.vend.customer_id&&(e.value.is_customer=!0,e.value.customer_id={id:l.vend.customer_id,full_name:l.vend.customer_code+" - "+l.vend.customer_name})});function C(){return{name:"",begin_date:"",serial_num:"",termination_date:"",private_key:""}}function B(){e.value.is_customer}return(n,s)=>(i(),p(N,null,[r(u(D),{title:"VM Management"}),r(F,null,{header:d(()=>[t("h2",J,[m(_(b.value)+" Vending Machine ",1),a.type=="update"?(i(),p("span",K,_(a.vend.code),1)):c("",!0),a.vend.customer_name?(i(),p("span",P,[q,m(" "+_(a.vend.customer_code)+" - "+_(a.vend.customer_name),1)])):!a.vend.customer_name&&a.vend.name?(i(),p("span",z,[A,m(" "+_(a.vend.name),1)])):c("",!0)])]),default:d(()=>[t("div",R,[t("div",Z,[t("div",G,[t("div",L,[t("form",{onSubmit:s[11]||(s[11]=U((...o)=>n.submit&&n.submit(...o),["prevent"])),id:"submit"},[t("div",Q,[t("div",W,[r(V,{modelValue:e.value.code,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.code=o),error:e.value.errors.code,required:"true",disabled:a.vend.code},{default:d(()=>[m(" Code ")]),_:1},8,["modelValue","error","disabled"])]),t("div",X,[t("div",Y,[t("div",ee,[S(t("input",{"aria-describedby":"is_customer","onUpdate:modelValue":s[1]||(s[1]=o=>e.value.is_customer=o),onChange:s[2]||(s[2]=o=>B()),disabled:e.value.is_customer&&a.type=="update",name:"is_customer",type:"checkbox",class:j(["h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",[e.value.is_customer&&a.type=="update"?"bg-gray-200 hover:cursor-not-allowed":""]])},null,42,te),[[M,e.value.is_customer]])]),se])]),e.value.is_customer?(i(),p("div",oe,[ae,r(E,{modelValue:e.value.customer_id,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.customer_id=o),options:k.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):c("",!0),e.value.is_customer?c("",!0):(i(),p("div",ne,[r(V,{modelValue:e.value.name,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.name=o),error:e.value.errors.name,disabled:a.vend.customer_code&&a.vend.customer_name},{default:d(()=>[m(" Name ")]),_:1},8,["modelValue","error","disabled"])])),t("div",le,[u(f).includes("update vends")?(i(),g(w,{key:0,modelValue:e.value.begin_date,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.begin_date=o),error:e.value.errors.begin_date,onInput:s[6]||(s[6]=o=>n.onDateFromChanged())},{default:d(()=>[m(" Begin Date ")]),_:1},8,["modelValue","error"])):c("",!0)]),t("div",re,[u(f).includes("update vends")?(i(),g(w,{key:0,modelValue:e.value.termination_date,"onUpdate:modelValue":s[7]||(s[7]=o=>e.value.termination_date=o),error:e.value.errors.termination_date,minDate:e.value.begin_date},{default:d(()=>[m(" Termination Date ")]),_:1},8,["modelValue","error","minDate"])):c("",!0)]),t("div",de,[r(V,{modelValue:e.value.private_key,"onUpdate:modelValue":s[8]||(s[8]=o=>e.value.private_key=o),error:e.value.errors.private_key,disabled:!u(f).includes("update vends")},{default:d(()=>[m(" Private Key ")]),_:1},8,["modelValue","error","disabled"])])]),t("div",ie,[t("div",me,[r(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:s[9]||(s[9]=o=>n.$emit("modalClose")),form:"submit"},{default:d(()=>[r(u(T),{class:"w-4 h-4"}),ue]),_:1}),a.vend.latestVendBinding&&a.vend.latestVendBinding.customer&&u(f).includes("update vends")?(i(),g(x,{key:0,type:"button",class:"bg-yellow-500 hover:bg-yellow-600 text-white flex space-x-1",onClick:s[10]||(s[10]=o=>n.unbindCustomer(e.value.id))},{default:d(()=>[r(u(H),{class:"w-4 h-4"}),ce]),_:1})):c("",!0),u(f).includes("update vends")?(i(),g(x,{key:1,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:d(()=>[r(u(I),{class:"w-4 h-4"}),ve]),_:1})):c("",!0)])])],32)])])])])]),_:1})],64))}};export{Oe as default};
