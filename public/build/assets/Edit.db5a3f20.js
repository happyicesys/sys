import{g as $,T as f,Q as B,h as F,f as c,a as o,u as n,w as l,F as y,o as r,Z as N,b as e,d as p,t as x,l as d,e as w,c as v,i as U,k as j,n as E,O as M}from"./app.be5f36f8.js";import{_ as O}from"./Authenticated.2aece57f.js";import{_}from"./Button.2dd609ee.js";import{_ as k}from"./DatePicker.07da0377.js";import{_ as V}from"./FormInput.4baf9a3b.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.32e065c4.js";import{r as A}from"./ArrowPathIcon.873ea969.js";import{r as P}from"./ArrowUturnLeftIcon.8cd7e7b2.js";import{r as T}from"./ArrowUturnDownIcon.07d88a0b.js";import{r as K}from"./CheckCircleIcon.c06c8dcc.js";import{r as L}from"./PaperClipIcon.5db7617d.js";import"./keyboard.a111d22b.js";import"./use-resolve-button-type.f4da69a8.js";import"./RectangleStackIcon.8844149b.js";import"./main.e6443b1a.js";const q={class:"font-semibold text-xl text-gray-800 leading-tight"},z={key:0},I={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Q={class:"mt-6 flex flex-col"},R={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Z={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5 mb-3"},G={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-5 mb-3"},H={class:"sm:col-span-6"},J={class:"sm:col-span-6"},W={class:"sm:col-span-6"},X={class:"sm:col-span-6"},Y={class:"sm:col-span-6"},ee={class:"flex space-x-1 mt-5 justify-between"},te=e("span",null," Restart ",-1),se={class:"flex space-x-1"},ae=e("span",null," Back ",-1),oe=e("span",null," Unbind ",-1),ne=e("span",null," Save ",-1),le={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},re=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," APK Logs ")])],-1),ie=[re],de={key:1,class:"sm:col-span-6 flex flex-col mt-3"},ce={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},me={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},ue={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},pe={class:"min-w-full divide-y divide-gray-300"},ve=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Created At "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," File ")])],-1),_e={class:"bg-white"},fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},xe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},ge={class:"whitespace-nowrap py-4 text-sm text-center"},he={class:"flex w-0 space-x-2 items-center"},be=["href"],ye={key:0},we=e("td",{colspan:"3",class:"whitespace-nowrap py-4 text-sm font-medium text-black text-center"}," No records found ",-1),ke=[we],Te={__name:"Edit",props:{vend:Object,permissions:[Array,Object],type:String},setup(i){const g=i,t=$(f(h())),m=B().props.auth.permissions;function h(){return{name:"",begin_date:"",serial_num:"",termination_date:"",private_key:""}}F(()=>{t.value=g.vend.data?f(g.vend.data):f(h()),t.value.name=t.value.cust_full_name?t.value.cust_full_name:t.value.name});function C(u){M.post("/vends/"+u+"/restart",{},{preserveScroll:!0,preserveState:!0,replace:!0,onSuccess:()=>{emit("modalClose")}})}function D(){t.value.clearErrors(),t.value.post("/vends/"+t.value.id+"/update",{onSuccess:()=>{emit("modalClose")},preserveState:!0,replace:!0})}function S(u){t.value.post("/vends/"+u+"/unbind",{onSuccess:()=>{emit("modalClose")},preserveState:!0,replace:!0})}return(u,s)=>(r(),c(y,null,[o(n(N),{title:"Delivery Product Mapping"}),o(O,null,{header:l(()=>[e("h2",q,[p(" Editing "),i.vend.data?(r(),c("span",z,x(i.vend.data.code),1)):d("",!0)])]),default:l(()=>[e("div",I,[e("div",Q,[e("div",R,[e("div",Z,[e("form",{onSubmit:w(D,["prevent"]),id:"submit"},[e("div",G,[e("div",H,[o(V,{modelValue:t.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.name=a),error:t.value.errors.name,required:"true",disabled:t.value.cust_full_name},{default:l(()=>[p(" Name ")]),_:1},8,["modelValue","error","disabled"])]),e("div",J,[o(V,{modelValue:t.value.private_key,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.private_key=a),error:t.value.errors.private_key,disabled:!n(m).includes("update vends")},{default:l(()=>[p(" Private Key ")]),_:1},8,["modelValue","error","disabled"])]),e("div",W,[n(m).includes("update vends")?(r(),v(k,{key:0,modelValue:t.value.begin_date,"onUpdate:modelValue":s[2]||(s[2]=a=>t.value.begin_date=a),error:t.value.errors.begin_date,onInput:s[3]||(s[3]=a=>u.onDateFromChanged())},{default:l(()=>[p(" Begin Date (Default is the Creation/ First Invoice Date) ")]),_:1},8,["modelValue","error"])):d("",!0)]),e("div",X,[n(m).includes("update vends")?(r(),v(k,{key:0,modelValue:t.value.termination_date,"onUpdate:modelValue":s[4]||(s[4]=a=>t.value.termination_date=a),error:t.value.errors.termination_date,minDate:t.value.begin_date},{default:l(()=>[p(" Termination Date (Default is the Unbinding Date from CMS, status change) ")]),_:1},8,["modelValue","error","minDate"])):d("",!0)]),e("div",Y,[e("div",ee,[o(_,{class:"bg-red-500 hover:bg-red-600 text-white flex space-x-1",onClick:s[5]||(s[5]=w(a=>C(i.vend.data.id),["prevent"]))},{default:l(()=>[o(n(A),{class:"w-4 h-4"}),te]),_:1}),e("span",se,[o(n(U),{href:"/vends"},{default:l(()=>[o(_,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:l(()=>[o(n(P),{class:"w-4 h-4"}),ae]),_:1})]),_:1}),i.vend.latestVendBinding&&i.vend.latestVendBinding.customer&&n(m).includes("update vends")?(r(),v(_,{key:0,type:"button",class:"bg-yellow-500 hover:bg-yellow-600 text-white flex space-x-1",onClick:s[6]||(s[6]=a=>S(t.value.id))},{default:l(()=>[o(n(T),{class:"w-4 h-4"}),oe]),_:1})):d("",!0),n(m).includes("update vends")?(r(),v(_,{key:1,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:l(()=>[o(n(K),{class:"w-4 h-4"}),ne]),_:1})):d("",!0)])])]),t.value.id?(r(),c("div",le,ie)):d("",!0),t.value.id?(r(),c("div",de,[e("div",ce,[e("div",me,[e("div",ue,[e("table",pe,[ve,e("tbody",_e,[(r(!0),c(y,null,j(i.vend.logs,(a,b)=>(r(),c("tr",{key:a.id,class:E(b%2===0?void 0:"bg-gray-50")},[e("td",fe,x(b+1),1),e("td",xe,x(a.created_at),1),e("td",ge,[e("div",he,[o(n(L),{class:"h-5 w-5 flex-shrink-0 text-gray-400","aria-hidden":"true"}),e("a",{href:a.full_url,target:"_blank",class:"font-medium text-indigo-600 hover:text-indigo-500"},"Download",8,be)])])],2))),128)),!i.vend.logs||!i.vend.logs.length?(r(),c("tr",ye,ke)):d("",!0)])])])])])])):d("",!0)])],32)])])])])]),_:1})],64))}};export{Te as default};
