import{i as v,l as O,j as G,o as h,g as f,a as s,b as p,w as r,F,H as j,d as e,P as D,c as M,p as b,t as i,m as U,f as a,J as T}from"./app.e7575326.js";import{_ as A}from"./Authenticated.fa9260e4.js";import{_ as C}from"./Button.24cbae9e.js";import{_ as I,r as H,T as y,a as R,b as u}from"./TableData.f525d283.js";import{_ as B}from"./MultiSelect.071347e5.js";import{_}from"./TableHeadSort.6de04c93.js";import{r as E}from"./BackspaceIcon.54d8b46b.js";import"./open-closed.4f96d39d.js";import"./use-resolve-button-type.873c35f6.js";import"./RectangleStackIcon.71092e9f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const J=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Gross Profit by Product ",-1),q={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},z={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},W=a(" Vend ID "),X=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Y=a(" Cust Name "),Z={key:1},tt=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),et={key:2},ot=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),st=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Current Month ",-1),nt={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},rt={class:"mt-3"},at={class:"flex space-x-1"},lt=e("span",null," Search ",-1),it=e("span",null," Reset ",-1),dt={class:"flex flex-col space-y-2"},ut={class:"text-sm text-gray-700 leading-5 flex space-x-1"},mt=e("span",null,"Showing",-1),ct={class:"font-medium"},_t=e("span",null,"to",-1),gt={class:"font-medium"},ht=e("span",null,"of",-1),ft={class:"font-medium"},pt=e("span",null,"results",-1),yt={class:"mt-2 grid grid-cols-1 gap-5 sm:grid-cols-3"},xt={class:"overflow-hidden rounded-lg bg-gray-100 mt-1 px-4 py-3 shadow"},vt=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Revenue (This Month)",-1),bt={class:"mt-1 text-2xl font-semibold tracking-normal text-gray-900"},Bt={class:"overflow-hidden rounded-lg bg-gray-100 mt-1 px-4 py-3 shadow"},Lt=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Gross Profit (This Month)",-1),Kt={class:"mt-1 text-2xl font-semibold tracking-normal text-gray-900"},St={class:"overflow-hidden rounded-lg bg-gray-100 mt-1 px-4 py-3 shadow"},wt=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Gross Profit Margin (This Month)",-1),$t={class:"mt-1 text-2xl font-semibold tracking-normal text-gray-900"},Pt={class:"mt-6 flex flex-col"},kt={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Vt={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll m-2"},Ft={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Dt={class:"bg-gray-100"},Mt={class:"divide-x divide-gray-200"},Tt=a(" # "),Ct=a(" ID "),It=a(" Name "),Nt=a(" This Month "),Ot=a(" Last Month "),Gt=a(" Last 2 Month "),jt={class:"divide-x divide-gray-200"},Ut=a(" Sales($) "),At=a(" GM($) "),Ht=a(" GM(%) "),Rt=a(" Sales($) "),Et=a(" GM($) "),Jt=a(" GM(%) "),qt=a(" Sales($) "),zt=a(" GM($) "),Qt=a(" GM(%) "),Wt={class:"bg-white"},Xt={key:0},Yt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Zt=[Yt],me={__name:"IndexProduct",props:{categories:Object,monthOptions:Object,operators:Object,totals:[Array,Object],products:Object},setup(l){const L=l,t=v({categories:[],codes:"",currentMonth:"",customer_name:"",operator_id:"",sortKey:"",sortBy:!0,numberPerPage:100}),P=v([]),K=v([]),S=v([]),w=v([]),$=O().props.value.auth.permissions;G(()=>{w.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],t.value.numberPerPage=w.value[0],P.value=L.categories.data.map(m=>({id:m.id,name:m.name})),K.value=L.monthOptions.map(m=>({id:m.id,name:m.name})),t.value.currentMonth=K.value[0],S.value=[{id:"all",full_name:"All"},...L.operators.data.map(m=>({id:m.id,full_name:m.full_name}))],t.value.operator_id=S.value[0]});function x(){T.Inertia.get("/reports/product",{...t.value,currentMonth:t.value.currentMonth.id,operator_id:t.value.operator_id.id,numberPerPage:t.value.numberPerPage.id},{preserveState:!0,replace:!0})}function N(){T.Inertia.get("/reports/product")}function c(m){t.value.sortKey=m,t.value.sortBy=!t.value.sortBy,x()}return(m,o)=>(h(),f(F,null,[s(p(j),{title:"GP by Product"}),s(A,null,{header:r(()=>[J]),default:r(()=>{var k,V;return[e("div",q,[e("div",z,[e("div",Q,[s(I,{placeholderStr:"Vend ID",modelValue:t.value.codes,"onUpdate:modelValue":o[0]||(o[0]=n=>t.value.codes=n),onKeyup:o[1]||(o[1]=D(n=>x(),["enter"]))},{default:r(()=>[W,X]),_:1},8,["modelValue"]),p($).includes("admin-access products")?(h(),M(I,{key:0,placeholderStr:"Cust Name",modelValue:t.value.customer_name,"onUpdate:modelValue":o[2]||(o[2]=n=>t.value.customer_name=n),onKeyup:o[3]||(o[3]=D(n=>x(),["enter"]))},{default:r(()=>[Y]),_:1},8,["modelValue"])):b("",!0),p($).includes("admin-access products")?(h(),f("div",Z,[tt,s(B,{modelValue:t.value.operator_id,"onUpdate:modelValue":o[4]||(o[4]=n=>t.value.operator_id=n),options:S.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),p($).includes("admin-access products")?(h(),f("div",et,[ot,s(B,{modelValue:t.value.categories,"onUpdate:modelValue":o[5]||(o[5]=n=>t.value.categories=n),options:P.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),e("div",null,[st,s(B,{modelValue:t.value.currentMonth,"onUpdate:modelValue":o[6]||(o[6]=n=>t.value.currentMonth=n),options:K.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",nt,[e("div",rt,[e("div",at,[s(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[7]||(o[7]=n=>x())},{default:r(()=>[s(p(H),{class:"h-4 w-4","aria-hidden":"true"}),lt]),_:1}),s(C,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[8]||(o[8]=n=>N())},{default:r(()=>[s(p(E),{class:"h-4 w-4","aria-hidden":"true"}),it]),_:1})])]),e("div",dt,[e("p",ut,[mt,e("span",ct,i((k=l.products.meta.from)!=null?k:0),1),_t,e("span",gt,i((V=l.products.meta.to)!=null?V:0),1),ht,e("span",ft,i(l.products.meta.total),1),pt]),s(B,{modelValue:t.value.numberPerPage,"onUpdate:modelValue":o[9]||(o[9]=n=>t.value.numberPerPage=n),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:x},null,8,["modelValue","options"])])]),e("dl",yt,[e("div",xt,[vt,e("dd",bt,i(l.totals.revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",Bt,[Lt,e("dd",Kt,i(l.totals.gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),e("div",St,[wt,e("dd",$t,i(l.totals.gross_profit_margin.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}))+" % ",1)])])]),e("div",Pt,[e("div",kt,[e("div",Vt,[e("table",Ft,[e("thead",Dt,[e("tr",Mt,[s(y,null,{default:r(()=>[Tt]),_:1}),s(y,null,{default:r(()=>[Ct]),_:1}),s(_,{modelName:"name",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[10]||(o[10]=n=>c("name"))},{default:r(()=>[It]),_:1},8,["sortKey","sortBy"]),s(y,{colspan:"3"},{default:r(()=>[Nt]),_:1}),s(y,{colspan:"3"},{default:r(()=>[Ot]),_:1}),s(y,{colspan:"3"},{default:r(()=>[Gt]),_:1})]),e("tr",jt,[s(y,{colspan:"3"}),s(_,{modelName:"this_month_revenue",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[11]||(o[11]=n=>c("this_month_revenue"))},{default:r(()=>[Ut]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"this_month_gross_profit",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[12]||(o[12]=n=>c("this_month_gross_profit"))},{default:r(()=>[At]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"this_month_gross_profit_margin",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[13]||(o[13]=n=>c("this_month_gross_profit_margin"))},{default:r(()=>[Ht]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"last_month_revenue",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[14]||(o[14]=n=>c("last_month_revenue"))},{default:r(()=>[Rt]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"last_month_gross_profit",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[15]||(o[15]=n=>c("last_month_gross_profit"))},{default:r(()=>[Et]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"last_month_gross_profit_margin",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[16]||(o[16]=n=>c("last_month_gross_profit_margin"))},{default:r(()=>[Jt]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"last_two_month_revenue",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[17]||(o[17]=n=>c("last_two_month_revenue"))},{default:r(()=>[qt]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"last_two_month_gross_profit",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[18]||(o[18]=n=>c("last_two_month_gross_profit"))},{default:r(()=>[zt]),_:1},8,["sortKey","sortBy"]),s(_,{modelName:"last_two_month_gross_profit_margin",sortKey:t.value.sortKey,sortBy:t.value.sortBy,onSortTable:o[19]||(o[19]=n=>c("last_two_month_gross_profit_margin"))},{default:r(()=>[Qt]),_:1},8,["sortKey","sortBy"])])]),e("tbody",Wt,[(h(!0),f(F,null,U(l.products.data,(n,d)=>(h(),f("tr",{key:n.id,class:"divide-x divide-gray-200"},[s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-center"},{default:r(()=>[a(i(l.products.meta.from+d),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-center"},{default:r(()=>[a(i(n.code),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-left"},{default:r(()=>[a(i(n.name),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>[a(i(n.this_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>[a(i(n.this_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>{var g;return[a(i((g=n.this_month_gross_profit_margin)!=null?g:0),1)]}),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>[a(i(n.last_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>[a(i(n.last_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>{var g;return[a(i((g=n.last_month_gross_profit_margin)!=null?g:0),1)]}),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>[a(i(n.last_two_month_revenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>[a(i(n.last_two_month_gross_profit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),_:2},1032,["currentIndex","totalLength"]),s(u,{currentIndex:d,totalLength:l.products.length,inputClass:"text-right"},{default:r(()=>{var g;return[a(i((g=n.last_two_month_gross_profit_margin)!=null?g:0),1)]}),_:2},1032,["currentIndex","totalLength"])]))),128)),l.products.data.length?b("",!0):(h(),f("tr",Xt,Zt))])]),l.products.data.length?(h(),M(R,{key:0,links:l.products.links,meta:l.products.meta},null,8,["links","meta"])):b("",!0)])])])])]}),_:1})],64))}};export{me as default};
