import{o as a,g as d,d as o,i as m,u as g,l as B,j,c as h,a as r,w as u,p as c,T as N,t as f,b as v,e as k,n as U,f as y}from"./app.d04782eb.js";import{_ as x}from"./Button.3868bd5a.js";import z from"./Uom.1b020aa5.js";import{_ as C}from"./FormInput.a222ddcf.js";import{_ as D}from"./FormTextarea.6d8043f9.js";import{_ as E}from"./MultiSelect.ae062684.js";import{_ as F}from"./Modal.f7ba0e85.js";import{r as P}from"./RectangleStackIcon.7811add5.js";import{r as T}from"./ArrowUturnLeftIcon.a857c646.js";import{r as q}from"./CheckCircleIcon.9dd17ecd.js";import"./open-closed.f3fb7173.js";function G(l,p){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 00.177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0116.25 17H3.75A1.75 1.75 0 012 15.25V4.75zm10.25 7a.75.75 0 000-1.5h-4.5a.75.75 0 000 1.5h4.5z","clip-rule":"evenodd"})])}function H(l,p){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M3.75 3A1.75 1.75 0 002 4.75v10.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0018 15.25v-8.5A1.75 1.75 0 0016.25 5h-4.836a.25.25 0 01-.177-.073L9.823 3.513A1.75 1.75 0 008.586 3H3.75zM10 8a.75.75 0 01.75.75v1.5h1.5a.75.75 0 010 1.5h-1.5v1.5a.75.75 0 01-1.5 0v-1.5h-1.5a.75.75 0 010-1.5h1.5v-1.5A.75.75 0 0110 8z","clip-rule":"evenodd"})])}const I={class:"flex flex-col md:flex-row space-x-2"},L={key:0,class:"text-gray-600"},R={key:1},J={key:2,class:"text-gray-600"},K=["onSubmit"],Q={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},W={class:"sm:col-span-6 pb-3"},X={class:"mt-1 flex flex-col md:flex-row space-y-2 md:space-y-0 items-center"},Y={class:"h-28 w-28 overflow-hidden rounded-full bg-gray-100"},Z=["src"],ee=["value"],oe={key:0,class:"text-sm text-red-600"},te={class:"sm:col-span-2"},se=y(" Code "),ae={class:"sm:col-span-4"},re=y(" Name "),le={class:"sm:col-span-6"},ne=y(" Desc "),de={class:"col-span-12 sm:col-span-6"},ie=o("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),ue={key:0,class:"text-sm text-red-600"},ce={class:"sm:col-span-6"},me={class:"flex space-x-1 mt-5 pt-5 justify-end"},pe=o("span",null," Back ",-1),ve={key:0,class:"flex space-x-1 items-center"},fe=o("span",null," Deactivate ",-1),_e={key:1,class:"flex space-x-1 items-center"},ge=o("span",null," Activate ",-1),he=o("span",null," Save ",-1),Ae={__name:"Form",props:{categories:Object,categoryGroups:Object,product:Object,uoms:Object,type:String,showModal:Boolean,operatorOptions:Object},emits:["modalClose"],setup(l,{emit:p}){const i=l,V=m([]),$=m([]),_=m(!1),M=m([]),e=m(g(w())),b=m([]);B().props.value.auth.operatorRole,j(()=>{e.value=i.product?g(i.product):g(w()),V.value=i.categories.data.map(t=>({id:t.id,name:t.name})),$.value=i.categoryGroups.data.map(t=>({id:t.id,name:t.name})),M.value=i.uoms.data.map(t=>({id:t.id,name:t.name})),b.value=i.operatorOptions.slice(1)});function w(){return{code:"",desc:"",name:"",thumbnail:"",is_inventory:1,is_commission:"",is_supermarket_fee:"",category_id:"",category_group_id:"",operator_id:""}}function O(){e.value.clearErrors(),i.type==="create"&&e.value.transform(t=>({...t,operator_id:t.operator_id.id})).post("/products/create",{onSuccess:()=>{p("modalClose")},preserveState:!0,replace:!0}),i.type==="update"&&e.value.transform(t=>({...t,operator_id:t.operator_id.id})).post("/products/"+e.value.id+"/update",{onSuccess:()=>{p("modalClose")},preserveState:!0,replace:!0})}function S(){e.value.post("/products/"+e.value.id+"/toggle-activate-deactivate",{onSuccess:()=>{p("modalClose")},preserveState:!0,replace:!0})}function A(){_.value=!1}return(t,s)=>(a(),h(N,{to:"body"},[r(F,{open:l.showModal,onModalClose:s[6]||(s[6]=n=>t.$emit("modalClose"))},{header:u(()=>[o("div",I,[l.product?(a(),d("span",L," Editing ")):c("",!0),i.product?(a(),d("span",R,f(l.product.name),1)):(a(),d("span",J," Create New Product "))])]),default:u(()=>[o("form",{onSubmit:k(O,["prevent"]),id:"submit"},[o("div",Q,[o("div",W,[o("div",X,[o("span",Y,[l.product&&l.product.thumbnail?(a(),d("img",{key:0,class:"h-28 w-28 rounded-full border",src:l.product.thumbnail.full_url,alt:""},null,8,Z)):c("",!0),r(v(P),{class:"h-28 w-28 text-gray-300"})]),o("input",{type:"file",onInput:s[0]||(s[0]=n=>e.value.thumbnail=n.target.files[0]),class:"ml-5 rounded-md border border-gray-300 bg-white py-2 px-3 text-sm font-medium leading-4 text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},null,32),e.value.progress?(a(),d("progress",{key:0,value:e.value.progress.percentage,max:"100"},f(e.value.progress.percentage)+"% ",9,ee)):c("",!0)]),e.value.errors.thumbnail?(a(),d("div",oe,f(e.value.errors.thumbnail),1)):c("",!0)]),o("div",te,[r(C,{modelValue:e.value.code,"onUpdate:modelValue":s[1]||(s[1]=n=>e.value.code=n),error:e.value.errors.code,required:"true"},{default:u(()=>[se]),_:1},8,["modelValue","error"])]),o("div",ae,[r(C,{modelValue:e.value.name,"onUpdate:modelValue":s[2]||(s[2]=n=>e.value.name=n),error:e.value.errors.name,required:"true"},{default:u(()=>[re]),_:1},8,["modelValue","error"])]),o("div",le,[r(D,{modelValue:e.value.desc,"onUpdate:modelValue":s[3]||(s[3]=n=>e.value.desc=n),error:e.value.errors.desc},{default:u(()=>[ne]),_:1},8,["modelValue","error"])]),o("div",de,[ie,r(E,{modelValue:e.value.operator_id,"onUpdate:modelValue":s[4]||(s[4]=n=>e.value.operator_id=n),options:b.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"top",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.operator_id?(a(),d("div",ue,f(e.value.errors.operator_id),1)):c("",!0)])]),o("div",ce,[o("div",me,[r(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:s[5]||(s[5]=k(n=>t.$emit("modalClose"),["prevent"])),form:"submit"},{default:u(()=>[r(v(T),{class:"w-4 h-4"}),pe]),_:1}),e.value.id?(a(),h(x,{key:0,type:"button",onClick:S,class:U(["text-white",[e.value.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"]])},{default:u(()=>[o("div",null,[e.value.is_active?(a(),d("span",ve,[r(v(G),{class:"w-4 h-4"}),fe])):(a(),d("span",_e,[r(v(H),{class:"w-4 h-4"}),ge]))])]),_:1},8,["class"])):c("",!0),r(x,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[r(v(q),{class:"w-4 h-4"}),he]),_:1})])])],40,K)]),_:1},8,["open"]),_.value?(a(),h(z,{key:0,product:l.product,uoms:l.uoms,showModal:_.value,onModalClose:A},null,8,["product","uoms","showModal"])):c("",!0)]))}};export{Ae as default};
