import{g as p,Q as B,h as T,f as u,a as n,u as g,w as l,F as D,o as r,Z as z,b as t,d,t as m,k as E,l as f,c as h,O as x,n as K,e as M}from"./app.a8665d67.js";import{_ as Q}from"./Authenticated.c910776b.js";import{_ as k}from"./Button.59093f0b.js";import Z from"./ChannelOverview.7d322af4.js";import{_ as q}from"./Paginator.b3291598.js";import{_ as A,r as G}from"./SearchInput.6aac4213.js";import{_ as O}from"./MultiSelect.fb8e083c.js";import{_,a as v}from"./TableData.ea8487a0.js";import{r as H}from"./BackspaceIcon.b48c0691.js";import{r as J}from"./MagnifyingGlassCircleIcon.2f64c49a.js";import{r as W}from"./PauseCircleIcon.2419f547.js";import{r as X}from"./PlayCircleIcon.f5578870.js";import{r as Y}from"./XCircleIcon.6e68f169.js";import"./keyboard.fb5c2133.js";import"./use-resolve-button-type.c5e60069.js";import"./RectangleStackIcon.c1d6a20a.js";import"./FormInput.b0c963b4.js";import"./Modal.7e371582.js";import"./disposables.655edb3f.js";import"./CheckCircleIcon.6e538d94.js";import"./PencilSquareIcon.3b71c334.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.08010314.js";const ee=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Delivery Platform Vend ",-1),te={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ne={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},le={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},se=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ae=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Del Product Mapping ",-1),oe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},re={class:"mt-3"},ie={class:"flex space-x-1"},de=t("span",null," Search ",-1),ue=t("span",null," Reset ",-1),ce={class:"flex flex-col space-y-2"},me={class:"text-sm text-gray-700 leading-5 flex space-x-1"},pe=t("span",null,"Showing",-1),fe={class:"font-medium"},_e=t("span",null,"to",-1),ve={class:"font-medium"},ge=t("span",null,"of",-1),he={class:"font-medium"},xe=t("span",null,"results",-1),ye={class:"mt-6 flex flex-col"},be={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},ke={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},we={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ve={class:"bg-gray-100"},Ce={class:"divide-x divide-gray-200"},Pe={class:"bg-white"},Oe={key:0},$e={key:0},Ie={key:1},Le={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},Se={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},Be={class:"flex flex-col space-y-1"},De={key:2,class:"text-xs"},Me={key:3,class:"text-xs"},Ae=t("span",{class:"text-xs"},"Unbind VM",-1),Ue={key:0},je=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Ne=[je],rt={__name:"Index",props:{deliveryProductMappingVends:Object,deliveryPlatformOperatorOptions:Object,deliveryProductMappingOptions:Object},setup(s){const y=s,a=p({vend_code:"",delivery_platform_operator_id:"",delivery_product_mapping_id:"",platform_ref_id:"",sortKey:"",sortBy:!1,status:"",numberPerPage:100}),w=p([]);p();const V=p([]),$=p();B().props.auth.operatorCountry;const C=p([]),b=p(!1);B().props.auth.permissions,p(),T(()=>{C.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],a.value.numberPerPage=C.value[0],w.value=[{id:"all",name:"All"},...y.deliveryPlatformOperatorOptions.data.map(i=>({id:i.id,name:i.deliveryPlatform.name+" ("+i.type+")"}))],a.value.delivery_platform_operator_id=w.value[0],V.value=[{id:"all",name:"All"},...y.deliveryProductMappingOptions.data.map(i=>({id:i.id,name:i.name}))],a.value.delivery_product_mapping_id=V.value[0]});function U(i){$.value=i,b.value=!0}function j(){b.value=!1}function I(){x.get("/delivery-product-mapping-vends",{...a.value,delivery_platform_operator_id:a.value.delivery_platform_operator_id.id,delivery_product_mapping_id:a.value.delivery_product_mapping_id.id,numberPerPage:a.value.numberPerPage.id},{preserveState:!0,replace:!0})}function N(){x.get("/delivery-product-mapping-vends")}function F(i){let o=i.is_active?"Are you sure to pause this vending machine?":"Are you sure to resume this vending machine?";!confirm(o)||x.post("/delivery-product-mappings/vends/"+i.id+"/toggle-pause-vend",{},{preserveState:!1,preserveScroll:!0,replace:!0})}function R(i){!confirm("Are you sure to delete this entry?")||x.delete("/delivery-product-mappings/unbind/"+i,{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{x.reload({only:["unbindedVendOptions"]}),unbindedVendOptions.value=y.unbindedVendOptions?y.unbindedVendOptions.data:[]}})}return(i,o)=>(r(),u(D,null,[n(g(z),{title:"Delivery Platform Vend"}),n(Q,null,{header:l(()=>[ee]),default:l(()=>{var P,L;return[t("div",te,[t("div",ne,[t("div",le,[t("div",null,[se,n(O,{modelValue:a.value.delivery_platform_operator_id,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.delivery_platform_operator_id=e),options:w.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[ae,n(O,{modelValue:a.value.delivery_product_mapping_id,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.delivery_product_mapping_id=e),options:V.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),n(A,{placeholderStr:"Vend ID",modelValue:a.value.vend_code,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.vend_code=e)},{default:l(()=>[d(" Vend ID ")]),_:1},8,["modelValue"]),n(A,{placeholderStr:"Platform ID",modelValue:a.value.platform_ref_id,"onUpdate:modelValue":o[3]||(o[3]=e=>a.value.platform_ref_id=e)},{default:l(()=>[d(" Platform ID ")]),_:1},8,["modelValue"])]),t("div",oe,[t("div",re,[t("div",ie,[n(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[4]||(o[4]=e=>I())},{default:l(()=>[n(g(G),{class:"h-4 w-4","aria-hidden":"true"}),de]),_:1}),n(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[5]||(o[5]=e=>N())},{default:l(()=>[n(g(H),{class:"h-4 w-4","aria-hidden":"true"}),ue]),_:1})])]),t("div",ce,[t("p",me,[pe,t("span",fe,m((P=s.deliveryProductMappingVends.meta.from)!=null?P:0),1),_e,t("span",ve,m((L=s.deliveryProductMappingVends.meta.to)!=null?L:0),1),ge,t("span",he,m(s.deliveryProductMappingVends.meta.total),1),xe]),n(O,{modelValue:a.value.numberPerPage,"onUpdate:modelValue":o[6]||(o[6]=e=>a.value.numberPerPage=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:I},null,8,["modelValue","options"])])])]),t("div",ye,[t("div",be,[t("div",ke,[t("table",we,[t("thead",Ve,[t("tr",Ce,[n(_,null,{default:l(()=>[d(" # ")]),_:1}),n(_,null,{default:l(()=>[d(" Vend ID ")]),_:1}),n(_,null,{default:l(()=>[d(" Platform ID ")]),_:1}),n(_,null,{default:l(()=>[d(" Customer ID ")]),_:1}),n(_,null,{default:l(()=>[d(" Customer Name ")]),_:1}),n(_,null,{default:l(()=>[d(" Channel ")]),_:1}),n(_,null,{default:l(()=>[d(" VM Status ")]),_:1}),n(_)])]),t("tbody",Pe,[(r(!0),u(D,null,E(s.deliveryProductMappingVends.data,(e,c)=>(r(),u("tr",{key:e.id,class:"divide-x divide-gray-200"},[n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:l(()=>[d(m(s.deliveryProductMappingVends.meta.from+c),1)]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:l(()=>[d(m(e.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-left"},{default:l(()=>[d(m(e.platform_ref_id),1)]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:l(()=>[e.vend&&e.vend.latestVendBinding&&e.vend.latestVendBinding.customer?(r(),u("span",Oe,m(e.vend.latestVendBinding.customer.code),1)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-left"},{default:l(()=>[e.vend&&e.vend.latestVendBinding&&e.vend.latestVendBinding.customer?(r(),u("span",$e,m(e.vend.latestVendBinding.customer.name),1)):(r(),u("span",Ie,m(e.vend.name),1))]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:l(()=>[e.deliveryProductMappingVendChannels?(r(),h(g(J),{key:0,class:"h-5 w-5 text-green-500 hover:cursor-pointer","aria-hidden":"true",onClick:S=>U(e)},null,8,["onClick"])):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:l(()=>[e.is_active==1?(r(),u("span",Le," Operating ")):f("",!0),e.is_active==0?(r(),u("span",Se," Paused ")):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(v,{currentIndex:c,totalLength:s.deliveryProductMappingVends.length,inputClass:"text-center"},{default:l(()=>[t("div",Be,[n(k,{class:K(["flex space-x-1 w-fit",[e.is_active?"bg-yellow-300 hover:bg-yellow-400 text-black":"bg-green-500 hover:bg-green-600 text-white"]]),onClick:M(S=>F(e),["prevent"])},{default:l(()=>[e.is_active?(r(),h(g(W),{key:0,class:"w-3 h-3"})):(r(),h(g(X),{key:1,class:"w-3 h-3"})),e.is_active?(r(),u("span",De," Pause VM ")):(r(),u("span",Me," Resume VM "))]),_:2},1032,["class","onClick"]),e.is_active?f("",!0):(r(),h(k,{key:0,class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white w-fit",onClick:M(S=>R(e.id),["prevent"])},{default:l(()=>[n(g(Y),{class:"w-3 h-3"}),Ae]),_:2},1032,["onClick"]))])]),_:2},1032,["currentIndex","totalLength"])]))),128)),s.deliveryProductMappingVends.data.length?f("",!0):(r(),u("tr",Ue,Ne))])]),s.deliveryProductMappingVends.data.length?(r(),h(q,{key:0,links:s.deliveryProductMappingVends.links,meta:s.deliveryProductMappingVends.meta},null,8,["links","meta"])):f("",!0)])])])]),b.value?(r(),h(Z,{key:0,deliveryProductMappingVendModel:$.value,showModal:b.value,onModalClose:j},null,8,["deliveryProductMappingVendModel","showModal"])):f("",!0)]}),_:1})],64))}};export{rt as default};
