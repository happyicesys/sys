import{g as c,T as z,K as J,h as K,f as d,a as s,u as m,w as p,F as C,o as r,Z as L,b as t,d as x,t as _,l as n,e as Z,n as U,k as q,i as G,c as H,O as B}from"./app.a5ba100b.js";import{_ as Q}from"./Authenticated.891b50c9.js";import{_ as g}from"./Button.b17e3b5e.js";import"./main.bc27eb6c.js";import{_ as h}from"./FormInput.52d22637.js";import{_ as v}from"./MultiSelect.52fedbb8.js";import{r as W}from"./PlusCircleIcon.30207191.js";import{r as X}from"./ArrowUturnLeftIcon.f641cb83.js";import{r as Y}from"./CheckCircleIcon.82c6f758.js";import{r as I}from"./BackspaceIcon.67c581b0.js";import"./open-closed.34e7965e.js";import"./use-resolve-button-type.ceb68aa2.js";import"./RectangleStackIcon.c2c6dc58.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.562fa679.js";const ee={class:"font-semibold text-xl text-gray-800 leading-tight"},te={key:0},oe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},le={class:"mt-6 flex flex-col"},ae={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},se={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},re=["onSubmit"],de={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},ne={class:"sm:col-span-6"},ie={class:"sm:col-span-6"},ce=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),pe={key:0,class:"sm:col-span-6"},ue=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),me={key:1,class:"sm:col-span-6"},_e=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ve={key:2,class:"sm:col-span-6"},fe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),ye={key:3,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},xe=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"},"Delivery Platform Product(s) ")])],-1),ge=[xe],he={key:4},be={key:5},we=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Ve={key:0,class:"text-sm text-red-600"},ke={key:6},Oe={key:7},Pe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),Se={key:8,class:"sm:col-span-1"},je=t("span",null," Add ",-1),Ce={key:9,class:"sm:col-span-6 flex flex-col mt-3"},Ue={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Be={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},De={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},$e={class:"table-fixed min-w-full divide-y divide-gray-300"},Ae=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Code "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Ne={class:"bg-white"},Fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Me={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ee={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Te={class:"flex justify-center"},Re=["src"],ze={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Je={key:0},Ke={key:1,class:"break-words"},Le={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},qe={class:"whitespace-nowrap py-4 text-sm text-center"},Ge={key:0},He=t("td",{colspan:"5",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Qe=[He],We={class:"sm:col-span-6"},Xe={class:"flex space-x-1 mt-5 justify-end"},Ye=t("span",null," Back ",-1),Ie=t("span",null," Save ",-1),_t={__name:"Form",props:{categoryApiOptions:[Array,Object],deliveryProductMappings:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String},setup(V){const u=V,k=c([]),b=c([]),e=c(z($()));c(!1);const O=c([]),P=c([]),i=c([]),S=c([]),f=c([]),w=c(""),D=J().props.auth.permissions;K(()=>{u.type=="create"?w.value="Create New":w.value="Edit",O.value=[...u.operatorOptions.data.map(l=>({id:l.id,full_name:l.full_name}))],S.value=u.productOptions.data});function $(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",sub_category_json:""}}function A(){i.value.map(function(l){return l.channel_code}).indexOf(e.value.channel_code)<0&&(i.value.push({product:e.value.product_id,channel_code:e.value.channel_code,delivery_platform_sub_category_json:e.value.sub_category_json,delivery_platform_amount:e.value.amount}),i.value.sort((l,a)=>l.channel_code-a.channel_code)),i.value.splice(i.value.indexOf(productMappingItem),1)}function N(){f.value=[],f.value=e.value.category_json.subCategories}function F(){B.reload({only:["categoryApiOptions","productMappingOptions"],data:{delivery_platform_operator_id:e.value.delivery_platform_operator_id.id,operator_id:e.value.operator_id.id},replace:!0,preserveState:!0,onSuccess:l=>{k.value=u.categoryApiOptions[0].categories.map(a=>({id:a.id,name:a.name,subCategories:a.subCategories})),P.value=[...u.productMappingOptions[0].data.map(a=>({id:a.id,name:a.name}))],f.value=[]}})}function M(){b.value=[...u.operatorOptions.data.find(l=>l.id===e.value.operator_id.id).deliveryPlatformOperators.map(l=>({id:l.id,name:l.deliveryPlatform.name}))]}function E(){B.reload({only:["productMappingItems"],data:{product_mapping_id:e.value.product_mapping_id},replace:!0,preserveState:!0,onSuccess:l=>{i.value=[...u.productMappingItems[0].data]}})}function T(l){i.value.splice(i.value.indexOf(l),1)}function R(){e.value.clearErrors(),u.type==="create"&&e.value.transform(l=>({...l,customer_id:l.customer_id?l.customer_id.id:null,operator_id:l.operator_id?l.operator_id.id:null})).post("/vends/create",{preserveState:!0,replace:!0,resetOnSuccess:!0}),u.type==="update"&&e.value.transform(l=>({...l,customer_id:l.customer_id?l.customer_id.id:null,operator_id:l.operator_id?l.operator_id.id:null})).post("/vends/"+e.value.id+"/update",{preserveState:!0,replace:!0})}return(l,a)=>(r(),d(C,null,[s(m(L),{title:"Delivery Product Mapping"}),s(Q,null,{header:p(()=>[t("h2",ee,[x(_(w.value)+" Delivery Product Mapping ",1),V.type=="update"?(r(),d("span",te,_(l.deliveryProductMapping.name),1)):n("",!0)])]),default:p(()=>[t("div",oe,[t("div",le,[t("div",ae,[t("div",se,[t("form",{onSubmit:Z(R,["prevent"]),id:"submit"},[t("div",de,[t("div",ne,[s(h,{modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.name=o),error:e.value.errors.name},{default:p(()=>[x(" Name ")]),_:1},8,["modelValue","error"])]),t("div",ie,[ce,s(v,{modelValue:e.value.operator_id,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.operator_id=o),options:O.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:M},null,8,["modelValue","options"])]),e.value.operator_id&&b.value.length?(r(),d("div",pe,[ue,s(v,{modelValue:e.value.delivery_platform_operator_id,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.delivery_platform_operator_id=o),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:F},null,8,["modelValue","options"])])):n("",!0),e.value.delivery_platform_operator_id?(r(),d("div",me,[_e,s(v,{modelValue:e.value.category_json,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.category_json=o),options:k.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:N},null,8,["modelValue","options"])])):n("",!0),e.value.delivery_platform_operator_id?(r(),d("div",ve,[fe,s(v,{modelValue:e.value.product_mapping_id,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.product_mapping_id=o),options:P.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:E},null,8,["modelValue","options"])])):n("",!0),e.value.product_mapping_id?(r(),d("div",ye,ge)):n("",!0),e.value.product_mapping_id?(r(),d("div",he,[s(h,{modelValue:e.value.channel_code,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.channel_code=o),error:e.value.errors.channel_code,placeholderStr:"Channel ID"},{default:p(()=>[x(" Channel ID ")]),_:1},8,["modelValue","error"])])):n("",!0),e.value.product_mapping_id?(r(),d("div",be,[we,s(v,{modelValue:e.value.product_id,"onUpdate:modelValue":a[6]||(a[6]=o=>e.value.product_id=o),options:S.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.product_id?(r(),d("div",Ve,_(e.value.errors.product_id),1)):n("",!0)])):n("",!0),e.value.product_mapping_id?(r(),d("div",ke,[s(h,{modelValue:e.value.amount,"onUpdate:modelValue":a[7]||(a[7]=o=>e.value.amount=o),error:e.value.errors.amount,placeholderStr:"Platform Price"},{default:p(()=>[x(" Price ")]),_:1},8,["modelValue","error"])])):n("",!0),e.value.product_mapping_id?(r(),d("div",Oe,[Pe,s(v,{modelValue:e.value.sub_category_json,"onUpdate:modelValue":a[8]||(a[8]=o=>e.value.sub_category_json=o),options:f.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):n("",!0),e.value.product_mapping_id?(r(),d("div",Se,[s(g,{type:"button",onClick:a[9]||(a[9]=o=>A()),class:U(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!e.value.channel_code||!e.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!e.value.channel_code||!e.value.product_id},{default:p(()=>[s(m(W),{class:"w-4 h-4"}),je]),_:1},8,["class","disabled"])])):n("",!0),e.value.product_mapping_id?(r(),d("div",Ce,[t("div",Ue,[t("div",Be,[t("div",De,[t("table",$e,[Ae,t("tbody",Ne,[(r(!0),d(C,null,q(i.value,(o,j)=>(r(),d("tr",{key:o.id,class:U(j%2===0?void 0:"bg-gray-50")},[t("td",Fe,_(j+1),1),t("td",Me,_(o.channel_code),1),t("td",Ee,[t("div",Te,[o.product&&o.product.thumbnail?(r(),d("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:o.product.thumbnail.full_url,alt:""},null,8,Re)):n("",!0)])]),t("td",ze,[o.product.code?(r(),d("span",Je,_(o.product.code),1)):n("",!0),o.product.name?(r(),d("span",Ke,_(o.product.name),1)):n("",!0)]),t("td",Le,[s(h,{modelValue:o.delivery_platform_amount,"onUpdate:modelValue":y=>o.delivery_platform_amount=y,error:e.value.errors.delivery_platform_amount,placeholderStr:"Platform Price"},null,8,["modelValue","onUpdate:modelValue","error"])]),t("td",Ze,[s(v,{modelValue:o.delivery_platform_sub_category_json,"onUpdate:modelValue":y=>o.delivery_platform_sub_category_json=y,options:f.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","options"])]),t("td",qe,[s(g,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:y=>T(o)},{default:p(()=>[s(m(I),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),i.value.length?n("",!0):(r(),d("tr",Ge,Qe))])])])])])])):n("",!0)]),t("div",We,[t("div",Xe,[s(m(G),{href:"/settings"},{default:p(()=>[s(g,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:p(()=>[s(m(X),{class:"w-4 h-4"}),Ye]),_:1})]),_:1}),m(D).includes("update vends")?(r(),H(g,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:p(()=>[s(m(Y),{class:"w-4 h-4"}),Ie]),_:1})):n("",!0)])])],40,re)])])])])]),_:1})],64))}};export{_t as default};
