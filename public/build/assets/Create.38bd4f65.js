import{g as u,o as r,c as m,w as o,b as e,a as l,u as s,r as B,f as v,l as p,F as S,k as M,t as k,T as w,Q as b,U as V,h as N,Z as D,e as F,d as $,i as I}from"./app.99614ce8.js";import{_ as Y}from"./Authenticated.90f1cbff.js";import{_ as C}from"./Button.f9684ed8.js";import{_ as q}from"./DatePicker.aa6d66a4.js";import{r as U}from"./MagnifyingGlassCircleIcon.7348141e.js";import{e as Z,o as j,t as E,l as H,a as T,Z as z}from"./combobox.07f36fc0.js";import{r as A}from"./ArrowUturnLeftIcon.1ecdf0f3.js";import{r as L}from"./CheckCircleIcon.d32a4446.js";import"./keyboard.9caa1f2d.js";import"./use-resolve-button-type.e812ba35.js";import"./RectangleStackIcon.f6dd4a8c.js";import"./main.e3129d54.js";import"./disposables.ccbd4e76.js";const O={class:"flex space-x-1"},Q={key:0,class:"text-red-500"},R={class:"relative mt-1"},G=["onClick"],J={class:"block truncate"},K={key:1,class:"text-sm text-red-600"},P={__name:"SearchVendCodeInput",props:{modelValue:[String,Number],required:[Boolean,String],error:String},emits:["update:modelValue","selected"],setup(i,{emit:x}){const t=x,c=u([]),g=_.debounce(async a=>{if(!a.target.value.length){c.value=[];return}axios({method:"get",url:"/api/vends/search/"+a.target.value}).then(d=>{c.value=d.data}).catch(d=>{console.log(d)})},300);function h(a){t("update:modelValue",a.target.value),g(a)}function y(a){t("selected",a)}return(a,d)=>(r(),m(s(z),{as:"div"},{default:o(()=>[e("div",O,[l(s(Z),{class:"block text-sm font-medium text-gray-700"},{default:o(()=>[B(a.$slots,"default")]),_:3}),i.required?(r(),v("span",Q," * ")):p("",!0)]),e("div",R,[l(s(j),{class:"w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",onInput:h,value:i.modelValue},null,8,["value"]),l(s(E),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:o(()=>[l(s(U),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),c.value.length>0?(r(),m(s(H),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:o(()=>[(r(!0),v(S,null,M(c.value,n=>(r(),m(s(T),{as:"template"},{default:o(()=>[e("li",{class:"relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-100",onClick:f=>y(n)},[e("span",J,k(n.code),1)],8,G)]),_:2},1024))),256))]),_:1})):p("",!0),i.error?(r(),v("div",K,k(i.error),1)):p("",!0)])]),_:3}))}},W={class:"font-semibold text-xl text-gray-800 leading-tight"},X={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ee={class:"mt-6 flex flex-col"},te={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},se={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},oe={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},ae={class:"sm:col-span-6"},re={class:"sm:col-span-3"},le={class:"sm:col-span-6"},ne={class:"flex flex-col space-y-1 sm:flex-row sm:space-x-1 sm:space-y-0 mt-5 justify-end"},de=e("span",null," Back ",-1),ie=e("span",null," Save ",-1),we={__name:"Create",props:{vend:Object,type:String},setup(i){const x=i;u([]);const t=u(w(h()));u(!1);const c=u("");b().props.auth.operatorCountry,b().props.auth.operatorRole;const g=b().props.auth.permissions;u(V().format("HH:mm:ss")),N(()=>{c.value="Create New",t.value=w(h())});function h(){return{code:"",begin_date:V().format("YYYY-MM-DD")}}function y(d){t.value.code=d.code}function a(){t.value.clearErrors(),x.type==="create"&&t.value.post("/settings/vend/store",{preserveState:!0,replace:!0})}return(d,n)=>(r(),v(S,null,[l(s(D),{title:"VM Management"}),l(Y,null,{header:o(()=>[e("h2",W,k(c.value)+" Vending Machine ",1)]),default:o(()=>[e("div",X,[e("div",ee,[e("div",te,[e("div",se,[e("form",{onSubmit:F(a,["prevent"]),id:"submit"},[e("div",oe,[e("div",ae,[i.type=="create"?(r(),m(P,{key:0,modelValue:t.value.code,"onUpdate:modelValue":n[0]||(n[0]=f=>t.value.code=f),onSelected:y,required:"true",error:t.value.errors.code},{default:o(()=>[$(" Code ")]),_:1},8,["modelValue","error"])):p("",!0)]),e("div",re,[s(g).includes("update vends")?(r(),m(q,{key:0,modelValue:t.value.begin_date,"onUpdate:modelValue":n[1]||(n[1]=f=>t.value.begin_date=f),error:t.value.errors.begin_date,onInput:n[2]||(n[2]=f=>d.onDateFromChanged())},{default:o(()=>[$(" Begin Date ")]),_:1},8,["modelValue","error"])):p("",!0)])]),e("div",le,[e("div",ne,[l(s(I),{href:"/settings",class:"bg-gray-300 hover:bg-gray-400 text-gray-700 rounded"},{default:o(()=>[l(C,{class:"space-x-1"},{default:o(()=>[l(s(A),{class:"w-4 h-4"}),de]),_:1})]),_:1}),s(g).includes("update vends")?(r(),m(C,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:o(()=>[l(s(L),{class:"w-4 h-4"}),ie]),_:1})):p("",!0)])])],32)])])])])]),_:1})],64))}};export{we as default};
