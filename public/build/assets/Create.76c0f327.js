import{g as c,T as z,K as J,h as K,f as d,a as s,u as _,w as p,F as C,o as r,Z as L,b as t,d as g,t as m,l as i,e as Z,n as U,k as q,i as G,c as H,O as B}from"./app.e38e8891.js";import{_ as Q}from"./Authenticated.2b161553.js";import{_ as h}from"./Button.46fd4c92.js";import"./main.1b96dfbe.js";import{_ as b}from"./FormInput.e86626bc.js";import{_ as v}from"./MultiSelect.f3f3b46f.js";import{r as W}from"./PlusCircleIcon.bcaf52d9.js";import{r as X}from"./ArrowUturnLeftIcon.45d122e6.js";import{r as Y}from"./CheckCircleIcon.2962e6ee.js";import{r as I}from"./BackspaceIcon.d5d84ce5.js";import"./open-closed.22813fed.js";import"./use-resolve-button-type.cf50c916.js";import"./RectangleStackIcon.7548c8fa.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.9ef3d7a2.js";const ee={class:"font-semibold text-xl text-gray-800 leading-tight"},te={key:0},oe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},le={class:"mt-6 flex flex-col"},ae={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},se={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},re=["onSubmit"],de={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},ie={class:"sm:col-span-6"},ne={class:"sm:col-span-6"},ce=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),pe={key:0,class:"sm:col-span-6"},ue=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),me={key:1,class:"sm:col-span-6"},_e=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ve={key:2,class:"sm:col-span-6"},ye=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),fe={key:3,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},xe=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Delivery Platform Product(s) ")])],-1),ge=[xe],he={key:4},be={key:5},we=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Ve={key:0,class:"text-sm text-red-600"},ke={key:6},Oe={key:7},Pe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),Se={key:8,class:"sm:col-span-1"},je=t("span",null," Add ",-1),Ce={key:9,class:"sm:col-span-6 flex flex-col mt-3"},Ue={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Be={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},De={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},$e={class:"table-fixed min-w-full divide-y divide-gray-300"},Ae=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Code "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Ne={class:"bg-white"},Me={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ee={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Te={class:"flex justify-center"},Re=["src"],ze={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Je={key:0},Ke={key:1,class:"break-words"},Le={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},qe={key:0,class:"text-sm text-red-600"},Ge={class:"whitespace-nowrap py-4 text-sm text-center"},He={key:0},Qe=t("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),We=[Qe],Xe={class:"sm:col-span-6"},Ye={class:"flex space-x-1 mt-5 justify-end"},Ie=t("span",null," Back ",-1),et=t("span",null," Save ",-1),vt={__name:"Create",props:{categoryApiOptions:[Array,Object],deliveryProductMappings:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String},setup(k){const u=k,O=c([]),w=c([]),e=c(z($()));c(!1);const P=c([]),S=c([]),n=c([]),j=c([]),y=c([]),V=c(""),D=J().props.auth.permissions;K(()=>{u.type=="create"?V.value="Create New":V.value="Edit",P.value=[...u.operatorOptions.data.map(a=>({id:a.id,full_name:a.full_name}))],j.value=u.productOptions.data});function $(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",sub_category_json:""}}function A(){n.value.map(function(a){return a.channel_code}).indexOf(e.value.channel_code)<0&&(n.value.push({product:e.value.product_id,channel_code:e.value.channel_code,delivery_platform_sub_category_json:e.value.sub_category_json,delivery_platform_amount:e.value.amount}),n.value.sort((a,l)=>a.channel_code-l.channel_code)),n.value.splice(n.value.indexOf(productMappingItem),1)}function N(){y.value=[],y.value=e.value.category_json.subCategories}function M(){B.reload({only:["categoryApiOptions","productMappingOptions"],data:{delivery_platform_operator_id:e.value.delivery_platform_operator_id.id,operator_id:e.value.operator_id.id},replace:!0,preserveState:!0,onSuccess:a=>{O.value=u.categoryApiOptions[0].categories.map(l=>({id:l.id,name:l.name,subCategories:l.subCategories})),S.value=[...u.productMappingOptions[0].data.map(l=>({id:l.id,name:l.name}))],y.value=[]}})}function F(){w.value=[...u.operatorOptions.data.find(a=>a.id===e.value.operator_id.id).deliveryPlatformOperators.map(a=>({id:a.id,name:a.deliveryPlatform.name}))]}function E(){B.reload({only:["productMappingItems"],data:{product_mapping_id:e.value.product_mapping_id},replace:!0,preserveState:!0,onSuccess:a=>{n.value=[...u.productMappingItems[0].data]}})}function T(a){n.value.splice(n.value.indexOf(a),1)}function R(){e.value.clearErrors(),u.type==="create"&&e.value.transform(a=>({...a,delivery_platform_operator_id:a.delivery_platform_operator_id?a.delivery_platform_operator_id.id:null,operator_id:a.operator_id?a.operator_id.id:null,product_mapping_id:a.product_mapping_id?a.product_mapping_id.id:null,productMappingItems:n.value})).post("/delivery-product-mappings/store",{preserveState:!0,replace:!0})}return(a,l)=>(r(),d(C,null,[s(_(L),{title:"Delivery Product Mapping"}),s(Q,null,{header:p(()=>[t("h2",ee,[g(m(V.value)+" Delivery Product Mapping ",1),k.type=="update"?(r(),d("span",te,m(a.deliveryProductMapping.name),1)):i("",!0)])]),default:p(()=>[t("div",oe,[t("div",le,[t("div",ae,[t("div",se,[t("form",{onSubmit:Z(R,["prevent"]),id:"submit"},[t("div",de,[t("div",ie,[s(b,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.name=o),error:e.value.errors.name},{default:p(()=>[g(" Name ")]),_:1},8,["modelValue","error"])]),t("div",ne,[ce,s(v,{modelValue:e.value.operator_id,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.operator_id=o),options:P.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:F},null,8,["modelValue","options"])]),e.value.operator_id&&w.value.length?(r(),d("div",pe,[ue,s(v,{modelValue:e.value.delivery_platform_operator_id,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.delivery_platform_operator_id=o),options:w.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:M},null,8,["modelValue","options"])])):i("",!0),e.value.delivery_platform_operator_id?(r(),d("div",me,[_e,s(v,{modelValue:e.value.category_json,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.category_json=o),options:O.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:N},null,8,["modelValue","options"])])):i("",!0),e.value.delivery_platform_operator_id?(r(),d("div",ve,[ye,s(v,{modelValue:e.value.product_mapping_id,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.product_mapping_id=o),options:S.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:E},null,8,["modelValue","options"])])):i("",!0),e.value.product_mapping_id?(r(),d("div",fe,ge)):i("",!0),e.value.product_mapping_id?(r(),d("div",he,[s(b,{modelValue:e.value.channel_code,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.channel_code=o),error:e.value.errors.channel_code,placeholderStr:"Channel ID"},{default:p(()=>[g(" Channel ID ")]),_:1},8,["modelValue","error"])])):i("",!0),e.value.product_mapping_id?(r(),d("div",be,[we,s(v,{modelValue:e.value.product_id,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.product_id=o),options:j.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.product_id?(r(),d("div",Ve,m(e.value.errors.product_id),1)):i("",!0)])):i("",!0),e.value.product_mapping_id?(r(),d("div",ke,[s(b,{modelValue:e.value.amount,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.amount=o),error:e.value.errors.amount,placeholderStr:"Platform Price"},{default:p(()=>[g(" Price ")]),_:1},8,["modelValue","error"])])):i("",!0),e.value.product_mapping_id?(r(),d("div",Oe,[Pe,s(v,{modelValue:e.value.sub_category_json,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.sub_category_json=o),options:y.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):i("",!0),e.value.product_mapping_id?(r(),d("div",Se,[s(h,{type:"button",onClick:l[9]||(l[9]=o=>A()),class:U(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!e.value.channel_code||!e.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!e.value.channel_code||!e.value.product_id},{default:p(()=>[s(_(W),{class:"w-4 h-4"}),je]),_:1},8,["class","disabled"])])):i("",!0),e.value.product_mapping_id?(r(),d("div",Ce,[t("div",Ue,[t("div",Be,[t("div",De,[t("table",$e,[Ae,t("tbody",Ne,[(r(!0),d(C,null,q(n.value,(o,f)=>(r(),d("tr",{key:o.id,class:U(f%2===0?void 0:"bg-gray-50")},[t("td",Me,m(f+1),1),t("td",Fe,m(o.channel_code),1),t("td",Ee,[t("div",Te,[o.product&&o.product.thumbnail?(r(),d("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:o.product.thumbnail.full_url,alt:""},null,8,Re)):i("",!0)])]),t("td",ze,[o.product.code?(r(),d("span",Je,m(o.product.code),1)):i("",!0),o.product.name?(r(),d("span",Ke,m(o.product.name),1)):i("",!0)]),t("td",Le,[s(b,{modelValue:o.delivery_platform_amount,"onUpdate:modelValue":x=>o.delivery_platform_amount=x,error:e.value.errors["productMappingItems."+f+".delivery_platform_amount"],placeholderStr:"Platform Price"},null,8,["modelValue","onUpdate:modelValue","error"])]),t("td",Ze,[s(v,{modelValue:o.delivery_platform_sub_category_json,"onUpdate:modelValue":x=>o.delivery_platform_sub_category_json=x,options:y.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","options"]),e.value.errors["productMappingItems."+f+".delivery_platform_sub_category_json"]?(r(),d("div",qe,m(e.value.errors["productMappingItems."+f+".delivery_platform_sub_category_json"]),1)):i("",!0)]),t("td",Ge,[s(h,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:x=>T(o)},{default:p(()=>[s(_(I),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),n.value.length?i("",!0):(r(),d("tr",He,We))])])])])])])):i("",!0)]),t("div",Xe,[t("div",Ye,[s(_(G),{href:"/settings"},{default:p(()=>[s(h,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:p(()=>[s(_(X),{class:"w-4 h-4"}),Ie]),_:1})]),_:1}),_(D).includes("update vends")?(r(),H(h,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:p(()=>[s(_(Y),{class:"w-4 h-4"}),et]),_:1})):i("",!0)])])],40,re)])])])])]),_:1})],64))}};export{vt as default};
