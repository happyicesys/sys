import{g as S,T as f,Q as $,h as B,f as c,a as n,u as o,w as l,F as y,o as r,Z as F,b as e,d as p,t as x,l as d,e as w,c as _,i as N,k as U,n as j,O as E}from"./app.6c1fd100.js";import{_ as M}from"./Authenticated.4931123b.js";import{_ as v}from"./Button.c220b9da.js";import{_ as k}from"./DatePicker.9e961d77.js";import{_ as O}from"./FormInput.80b139a0.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.200ceaf2.js";import{r as A}from"./ArrowPathIcon.23daf48d.js";import{r as T}from"./ArrowUturnLeftIcon.0e5d2ed7.js";import{r as L}from"./ArrowUturnDownIcon.92cff30d.js";import{r as P}from"./CheckCircleIcon.d3a38b3a.js";import{r as q}from"./PaperClipIcon.e12ee7d6.js";import"./keyboard.a01f6322.js";import"./use-resolve-button-type.0de40f2b.js";import"./RectangleStackIcon.aa1824e2.js";import"./main.0dda3f8c.js";const z={class:"font-semibold text-xl text-gray-800 leading-tight"},I={key:0},K={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Q={class:"mt-6 flex flex-col"},R={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Z={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5 mb-3"},G={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-5 mb-3"},H={class:"sm:col-span-6"},J={class:"sm:col-span-6"},W={class:"sm:col-span-6"},X={class:"sm:col-span-6"},Y={class:"flex space-x-1 mt-5 justify-between"},ee=e("span",null," Restart ",-1),te={class:"flex space-x-1"},se=e("span",null," Back ",-1),ae=e("span",null," Unbind ",-1),ne=e("span",null," Save ",-1),oe={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},re=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," APK Logs ")])],-1),le=[re],ie={key:1,class:"sm:col-span-6 flex flex-col mt-3"},de={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},ce={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},me={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},ue={class:"min-w-full divide-y divide-gray-300"},pe=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Created At "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," File ")])],-1),_e={class:"bg-white"},ve={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},xe={class:"whitespace-nowrap py-4 text-sm text-center"},ge={class:"flex w-0 space-x-2 items-center"},he=["href"],be={key:0},ye=e("td",{colspan:"3",class:"whitespace-nowrap py-4 text-sm font-medium text-black text-center"}," No records found ",-1),we=[ye],Te={__name:"Edit",props:{vend:Object,permissions:[Array,Object],type:String},setup(i){const g=i,t=S(f(h())),u=$().props.auth.permissions;function h(){return{name:"",begin_date:"",serial_num:"",termination_date:"",private_key:""}}B(()=>{t.value=g.vend.data?f(g.vend.data):f(h()),t.value.name=t.value.cust_full_name?t.value.cust_full_name:t.value.name});function V(m){E.post("/vends/"+m+"/restart",{},{preserveScroll:!0,preserveState:!0,replace:!0,onSuccess:()=>{emit("modalClose")}})}function C(){t.value.clearErrors(),t.value.post("/vends/"+t.value.id+"/update",{onSuccess:()=>{emit("modalClose")},preserveState:!0,replace:!0})}function D(m){t.value.post("/vends/"+m+"/unbind",{onSuccess:()=>{emit("modalClose")},preserveState:!0,replace:!0})}return(m,s)=>(r(),c(y,null,[n(o(F),{title:"Delivery Product Mapping"}),n(M,null,{header:l(()=>[e("h2",z,[p(" Editing "),i.vend.data?(r(),c("span",I,x(i.vend.data.code),1)):d("",!0)])]),default:l(()=>[e("div",K,[e("div",Q,[e("div",R,[e("div",Z,[e("form",{onSubmit:w(C,["prevent"]),id:"submit"},[e("div",G,[e("div",H,[n(O,{modelValue:t.value.customer.name,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.customer.name=a),error:t.value.errors.name,required:"true",disabled:t.value.cust_full_name},{default:l(()=>[p(" Name ")]),_:1},8,["modelValue","error","disabled"])]),e("div",J,[o(u).includes("update vends")?(r(),_(k,{key:0,modelValue:t.value.begin_date,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.begin_date=a),error:t.value.errors.begin_date,onInput:s[2]||(s[2]=a=>m.onDateFromChanged())},{default:l(()=>[p(" Begin Date (Default is the Creation/ First Invoice Date) ")]),_:1},8,["modelValue","error"])):d("",!0)]),e("div",W,[o(u).includes("update vends")?(r(),_(k,{key:0,modelValue:t.value.termination_date,"onUpdate:modelValue":s[3]||(s[3]=a=>t.value.termination_date=a),error:t.value.errors.termination_date,minDate:t.value.begin_date},{default:l(()=>[p(" Termination Date (Default is the Unbinding Date from CMS, status change) ")]),_:1},8,["modelValue","error","minDate"])):d("",!0)]),e("div",X,[e("div",Y,[n(v,{class:"bg-red-500 hover:bg-red-600 text-white flex space-x-1",onClick:s[4]||(s[4]=w(a=>V(i.vend.data.id),["prevent"]))},{default:l(()=>[n(o(A),{class:"w-4 h-4"}),ee]),_:1}),e("span",te,[n(o(N),{href:"/vends"},{default:l(()=>[n(v,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:l(()=>[n(o(T),{class:"w-4 h-4"}),se]),_:1})]),_:1}),i.vend.latestVendBinding&&i.vend.latestVendBinding.customer&&o(u).includes("update vends")?(r(),_(v,{key:0,type:"button",class:"bg-yellow-500 hover:bg-yellow-600 text-white flex space-x-1",onClick:s[5]||(s[5]=a=>D(t.value.id))},{default:l(()=>[n(o(L),{class:"w-4 h-4"}),ae]),_:1})):d("",!0),o(u).includes("update vends")?(r(),_(v,{key:1,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:l(()=>[n(o(P),{class:"w-4 h-4"}),ne]),_:1})):d("",!0)])])]),t.value.id?(r(),c("div",oe,le)):d("",!0),t.value.id?(r(),c("div",ie,[e("div",de,[e("div",ce,[e("div",me,[e("table",ue,[pe,e("tbody",_e,[(r(!0),c(y,null,U(i.vend.data.logs,(a,b)=>(r(),c("tr",{key:a.id,class:j(b%2===0?void 0:"bg-gray-50")},[e("td",ve,x(b+1),1),e("td",fe,x(a.created_at),1),e("td",xe,[e("div",ge,[n(o(q),{class:"h-5 w-5 flex-shrink-0 text-gray-400","aria-hidden":"true"}),e("a",{href:a.full_url,target:"_blank",class:"font-medium text-indigo-600 hover:text-indigo-500"},"Download",8,he)])])],2))),128)),!i.vend.data.logs||!i.vend.data.logs.length?(r(),c("tr",be,we)):d("",!0)])])])])])])):d("",!0)])],32)])])])])]),_:1})],64))}};export{Te as default};
