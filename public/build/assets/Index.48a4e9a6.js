import{g as c,K as b,h as R,f as p,a as o,u as i,w as l,F as D,o as u,Z as E,b as e,i as G,N as $,d,c as L,l as f,t as m,k as H,O as S}from"./app.61a2f055.js";import{_ as Y}from"./Authenticated.592a3478.js";import{_ as V}from"./Button.7ffe81a1.js";import{_ as h,a as Z,b as v}from"./TableData.268ba8da.js";import{_ as T,r as q}from"./SearchInput.9678c9a9.js";import{_ as y}from"./MultiSelect.59f68398.js";import{_ as z}from"./TableHeadSort.34dd4e80.js";import{r as J}from"./PlusIcon.bd876ce4.js";import{r as Q}from"./BackspaceIcon.7bc8950e.js";import{r as W}from"./PencilSquareIcon.da75f6f2.js";import{r as X}from"./TrashIcon.441d00d9.js";import"./open-closed.296efdbe.js";import"./use-resolve-button-type.afce7b0b.js";import"./RectangleStackIcon.690c9d4a.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.daf6461b.js";const ee=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," VM Management ",-1),te={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},oe={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},se={class:"flex justify-end"},ae=e("span",null," Create ",-1),le={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ne=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),re={key:2},de=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ie={key:3},ue=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ce={key:4},me=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Customer Binded? ",-1),pe={key:5},ge=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),fe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),ve={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},_e={class:"mt-3"},xe={class:"flex space-x-1"},he=e("span",null," Search ",-1),ye=e("span",null," Reset ",-1),be={class:"flex flex-col space-y-2"},Ve={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ke=e("span",null,"Showing",-1),Be={class:"font-medium"},we=e("span",null,"to",-1),Ce={class:"font-medium"},Oe=e("span",null,"of",-1),Pe={class:"font-medium"},$e=e("span",null,"results",-1),Le={class:"mt-6 flex flex-col"},Se={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Te={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ie={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ne={class:"bg-gray-100"},Ke={class:"divide-x divide-gray-200"},Ue={class:"bg-white"},De={key:0},Ge=["href"],je=e("br",null,null,-1),Ae={key:1},Fe={class:"flex justify-center space-x-1"},Me=e("span",null," Edit ",-1),Re=e("span",null," Delete ",-1),Ee={key:0},He=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Ye=[He],it={__name:"Index",props:{categories:Object,categoryGroups:Object,locationTypeOptions:Object,operatorOptions:Object,vends:Object},setup(r){const k=r,s=c({codes:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],locationType:"",operator:"",is_binded_customer:"",sortKey:"",sortBy:!0,numberPerPage:"",visited:!0}),B=c([]),I=c([]),N=c([]),j=b().props.initBinded;c(!1);const C=c([]),O=c([]),P=c([]);c(""),c(),b().props.auth.operatorCountry,b().props.auth.operatorRole;const _=b().props.auth.permissions,w=b().props.auth.roles;c(moment().format("HH:mm:ss")),R(()=>{O.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=O.value[0],I.value=k.categories.data.map(n=>({id:n.id,name:n.name})),N.value=k.categoryGroups.data.map(n=>({id:n.id,name:n.name})),B.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],C.value=[{id:"all",value:"All"},...k.locationTypeOptions.data.map(n=>({id:n.id,value:n.name}))],P.value=[{id:"all",full_name:"All"},...k.operatorOptions.data.map(n=>({id:n.id,full_name:n.full_name}))],s.value.locationType=C.value[0],s.value.operator=P.value[0],s.value.is_binded_customer=j&&(w[0]=="superadmin"||w[0]=="admin"||w[0]=="supervisor"||w[0]=="driver")?B.value[1]:B.value[0]});function A(n){!confirm("Are you sure to delete "+n.name+"?")||S.delete("/vends/"+n.id)}function x(){S.get("/settings",{...s.value,categories:s.value.categories.map(n=>n.id),categoryGroups:s.value.categoryGroups.map(n=>n.id),location_type_id:s.value.locationType.id,operator_id:s.value.operator.id,is_binded_customer:s.value.is_binded_customer.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function F(){S.get("/settings")}function M(n){s.value.sortKey=n,s.value.sortBy=!s.value.sortBy,x()}return(n,a)=>(u(),p(D,null,[o(i(E),{title:"VM Management"}),o(Y,null,{header:l(()=>[ee]),default:l(()=>{var K,U;return[e("div",te,[e("div",oe,[e("div",se,[o(i(G),{href:"/settings/vend/0/create"},{default:l(()=>[o(V,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:l(()=>[o(i(J),{class:"h-4 w-4","aria-hidden":"true"}),ae]),_:1})]),_:1})]),e("div",le,[o(T,{placeholderStr:"Vend ID",modelValue:s.value.codes,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.codes=t),onKeyup:a[1]||(a[1]=$(t=>x(),["enter"]))},{default:l(()=>[d(" Vend ID "),ne]),_:1},8,["modelValue"]),i(_).includes("admin-access vends")?(u(),L(T,{key:0,placeholderStr:"Cust ID",modelValue:s.value.customer_code,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.customer_code=t),onKeyup:a[3]||(a[3]=$(t=>x(),["enter"]))},{default:l(()=>[d(" Cust ID ")]),_:1},8,["modelValue"])):f("",!0),i(_).includes("admin-access vends")?(u(),L(T,{key:1,placeholderStr:"Cust Name",modelValue:s.value.customer_name,"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.customer_name=t),onKeyup:a[5]||(a[5]=$(t=>x(),["enter"]))},{default:l(()=>[d(" Cust Name ")]),_:1},8,["modelValue"])):f("",!0),i(_).includes("admin-access vends")?(u(),p("div",re,[de,o(y,{modelValue:s.value.categories,"onUpdate:modelValue":a[6]||(a[6]=t=>s.value.categories=t),options:I.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),i(_).includes("admin-access vends")?(u(),p("div",ie,[ue,o(y,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":a[7]||(a[7]=t=>s.value.categoryGroups=t),options:N.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),i(_).includes("admin-access vends")?(u(),p("div",ce,[me,o(y,{modelValue:s.value.is_binded_customer,"onUpdate:modelValue":a[8]||(a[8]=t=>s.value.is_binded_customer=t),options:B.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),i(_).includes("admin-access vends")?(u(),p("div",pe,[ge,o(y,{modelValue:s.value.operator,"onUpdate:modelValue":a[9]||(a[9]=t=>s.value.operator=t),options:P.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),e("div",null,[fe,o(y,{modelValue:s.value.locationType,"onUpdate:modelValue":a[10]||(a[10]=t=>s.value.locationType=t),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",ve,[e("div",_e,[e("div",xe,[o(V,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[11]||(a[11]=t=>x())},{default:l(()=>[o(i(q),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1}),o(V,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[12]||(a[12]=t=>F())},{default:l(()=>[o(i(Q),{class:"h-4 w-4","aria-hidden":"true"}),ye]),_:1})])]),e("div",be,[e("p",Ve,[ke,e("span",Be,m((K=r.vends.meta.from)!=null?K:0),1),we,e("span",Ce,m((U=r.vends.meta.to)!=null?U:0),1),Oe,e("span",Pe,m(r.vends.meta.total),1),$e]),o(y,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":a[13]||(a[13]=t=>s.value.numberPerPage=t),options:O.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:x},null,8,["modelValue","options"])])])]),e("div",Le,[e("div",Se,[e("div",Te,[e("table",Ie,[e("thead",Ne,[e("tr",Ke,[o(h,null,{default:l(()=>[d(" # ")]),_:1}),o(z,{modelName:"code",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[14]||(a[14]=t=>M("code"))},{default:l(()=>[d(" Code ")]),_:1},8,["sortKey","sortBy"]),o(h,null,{default:l(()=>[d(" Name ")]),_:1}),o(h,null,{default:l(()=>[d(" Begin Date ")]),_:1}),o(h,null,{default:l(()=>[d(" Termination Date ")]),_:1}),o(h,null,{default:l(()=>[d(" Operator ")]),_:1}),o(h)])]),e("tbody",Ue,[(u(!0),p(D,null,H(r.vends.data,(t,g)=>(u(),p("tr",{key:t.id,class:"divide-x divide-gray-200"},[o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:l(()=>[d(m(r.vends.meta.from+g),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:l(()=>[d(m(t.code),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:l(()=>[t.latestVendBinding&&t.latestVendBinding.customer?(u(),p("span",De,[e("a",{class:"text-blue-700",target:"_blank",href:"//admin.happyice.com.sg/person/vend-code/"+t.code},[d(m(t.latestVendBinding.customer.code)+" ",1),je,d(" "+m(t.latestVendBinding.customer.name),1)],8,Ge)])):(u(),p("span",Ae,m(t.name),1))]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:l(()=>[d(m(t.begin_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:l(()=>[d(m(t.termination_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:l(()=>[d(m(t.latestOperator?t.latestOperator.full_name:""),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:l(()=>[e("div",Fe,[o(i(G),{href:"/settings/vend/"+t.id+"/update"},{default:l(()=>[o(V,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-3 py-2 text-xs text-gray-800 flex space-x-1"},{default:l(()=>[o(i(W),{class:"w-4 h-4"}),Me]),_:1})]),_:2},1032,["href"]),o(V,{type:"button",class:"bg-red-300 hover:bg-red-400 px-3 py-2 text-xs text-red-800 flex space-x-1",onClick:Ze=>A(t)},{default:l(()=>[o(i(X),{class:"w-4 h-4"}),Re]),_:2},1032,["onClick"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),r.vends.data.length?f("",!0):(u(),p("tr",Ee,Ye))])]),r.vends.data.length?(u(),L(Z,{key:0,links:r.vends.links,meta:r.vends.meta},null,8,["links","meta"])):f("",!0)])])])])]}),_:1})],64))}};export{it as default};
