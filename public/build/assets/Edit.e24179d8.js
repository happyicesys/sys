import{o as s,f as r,b as e,g,T as h,K as B,h as E,a as l,u as c,w as u,F as D,Z as U,d as x,t as p,l as d,e as f,n as b,i as z,c as w,k as T,m as j,a3 as C}from"./app.65e610ac.js";import{_ as F}from"./Authenticated.3b994291.js";import{_}from"./Button.499a747f.js";import{_ as N}from"./FormInput.3b5a051d.js";import{_ as I}from"./FormTextarea.29825908.js";import{_ as Q}from"./MultiSelect.510a1742.js";import{r as H}from"./ArrowUturnLeftIcon.73f6ced8.js";import{r as S}from"./CheckCircleIcon.210ceba6.js";import{r as L}from"./PencilSquareIcon.8ed82405.js";import{r as R}from"./PlusCircleIcon.58279394.js";import"./open-closed.93526457.js";import"./use-resolve-button-type.fad07e76.js";import"./RectangleStackIcon.f3e6d5d7.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.20dd0bdd.js";function K(k,m){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M19 10a.75.75 0 00-.75-.75H8.704l1.048-.943a.75.75 0 10-1.004-1.114l-2.5 2.25a.75.75 0 000 1.114l2.5 2.25a.75.75 0 101.004-1.114l-1.048-.943h9.546A.75.75 0 0019 10z","clip-rule":"evenodd"})])}const Z={class:"font-semibold text-xl text-gray-800 leading-tight"},G={key:0},J={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},W={class:"mt-6 flex flex-col"},X={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Y={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},ee=["onSubmit"],te={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},se={class:"sm:col-span-6"},oe={class:"py-3"},re={class:"flex flex-col"},ae={class:"font-semibold"},le={class:"sm:col-span-3"},de=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Order ID ",-1),ie={class:"mt-1"},ne=["href"],ce=["value"],ue={class:"sm:col-span-3"},pe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Short Order ID ",-1),me={class:"mt-1"},_e=["value"],ve={class:"sm:col-span-6"},fe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ye={class:"mt-1"},ge=["value"],he={class:"sm:col-span-6"},xe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Order Datetime ",-1),be={class:"mt-1"},we=["value"],ke={class:"sm:col-span-6"},Pe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),Me={key:0,class:"mt-1"},Ve=["href"],De=["value"],je={class:"sm:col-span-6"},Ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Product Mapping ",-1),Se={key:0,class:"mt-1"},$e=["href"],Oe=["value"],qe={class:"sm:col-span-6"},Ae={class:"sm:col-span-6"},Be={class:"flex space-x-1 mt-5 justify-end"},Ee=e("span",null," Back ",-1),Ue=e("span",null," Save ",-1),ze=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Order Item(s) ")])])],-1),Te={key:0,class:"sm:col-span-6"},Fe={class:"flex space-x-1 mt-5 justify-start"},Ne={key:2,class:"text-xs"},Ie={key:3,class:"text-xs"},Qe=e("span",null," Save Order ",-1),He={key:1,class:"sm:col-span-3"},Le=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Re={key:0,class:"text-sm text-red-600"},Ke={key:2,class:"sm:col-span-2"},Ze={key:3,class:"sm:col-span-1"},Ge=e("span",null," Add ",-1),Je={key:4,class:"sm:col-span-6 flex flex-col mt-3"},We={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Xe={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Ye={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},et={class:"table-fixed min-w-full divide-y divide-gray-300"},tt=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Qty "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price ")])],-1),st={class:"bg-white"},ot={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},rt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},at={class:"flex justify-center"},lt=["src"],dt={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},it={key:0},nt={key:1,class:"break-words"},ct={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},ut={key:0},pt=["onUpdate:modelValue"],mt={key:1},_t={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},vt={key:0},ft=["onUpdate:modelValue"],yt={key:1},gt={key:0},ht=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),xt=[ht],Bt={__name:"Edit",props:{deliveryPlatformOrder:Object},setup(k){const m=k,t=g(h(M())),v=g([]),n=g(!1),P=B().props.auth.operatorCountry;E(()=>{t.value=m.deliveryPlatformOrder?h(m.deliveryPlatformOrder.data):h(M()),v.value=m.deliveryPlatformOrder.data});function M(){return{id:"",order_id:"",short_order_id:"",deliveryPlatform:{name:""},operator_id:"",order_created_at:""}}function $(){n.value=!n.value}function O(){!confirm("Are you sure to edit this order?")||(t.value.transform(o=>({...o,delivery_platform_order_items:v.value.deliveryPlatformOrderItems})).post("/delivery-platform-orders/"+t.value.id+"/update-order-items",{preserveState:!0,replace:!0}),n.value=!1)}function q(i){let a="";switch(i){case 1:case 2:a="bg-blue-400 text-gray-800";break;case 3:case 4:case 5:a="bg-yellow-400 text-gray-800";break;case 6:a="bg-green-400 text-white-800";break;case 98:case 99:a="bg-red-400 text-white-800";break}return a}function A(){t.value.clearErrors(),m.type==="update"&&t.value.transform(i=>({...i,timezone:i.timezone?i.timezone.name:null,country_id:i.country_id?i.country_id.id:null})).post("/operators/"+t.value.id+"/update",{preserveState:!0,replace:!0})}return(i,a)=>(s(),r(D,null,[l(c(U),{title:"Delivery Platform Order"}),l(F,null,{header:u(()=>[e("h2",Z,[x(" Edit Delivery Platform Order "),i.type=="update"?(s(),r("span",G,p(t.value.order_id)+" "+p(t.value.short_order_id),1)):d("",!0)])]),default:u(()=>[e("div",J,[e("div",W,[e("div",X,[e("div",Y,[e("form",{onSubmit:f(A,["prevent"]),id:"submit"},[e("div",te,[e("div",se,[e("div",oe,[e("div",{class:b(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border",q(v.value.status)])},[e("div",re,[e("span",ae,p(v.value.status_name),1)])],2)])]),e("div",le,[de,e("div",ie,[e("a",{href:"/delivery-platform-orders?order_id="+t.value.order_id,target:"_blank"},[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-pointer text-blue-600 font-medium",value:t.value.order_id,readonly:""},null,8,ce)],8,ne)])]),e("div",ue,[pe,e("div",me,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.short_order_id,disabled:""},null,8,_e)])]),e("div",ve,[fe,e("div",ye,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.deliveryPlatform.name,disabled:""},null,8,ge)])]),e("div",he,[xe,e("div",be,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.order_created_at,disabled:""},null,8,we)])]),e("div",ke,[Pe,t.value.deliveryProductMappingVend&&t.value.deliveryProductMappingVend.vend?(s(),r("div",Me,[e("a",{href:"/vends?codes="+t.value.deliveryProductMappingVend.vend.code,target:"_blank"},[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-pointer text-blue-600 font-medium",value:t.value.deliveryProductMappingVend.vend.full_name,readonly:""},null,8,De)],8,Ve)])):d("",!0)]),e("div",je,[Ce,t.value.deliveryProductMappingVend&&t.value.deliveryProductMappingVend.deliveryProductMapping?(s(),r("div",Se,[e("a",{href:"/delivery-product-mappings/"+t.value.deliveryProductMappingVend.deliveryProductMapping.id+"/edit",target:"_blank"},[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-pointer text-blue-600 font-medium",value:t.value.deliveryProductMappingVend.deliveryProductMapping.name,readonly:""},null,8,Oe)],8,$e)])):d("",!0)]),e("div",qe,[l(I,{modelValue:t.value.remarks,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.remarks=o),error:t.value.errors.remarks},{default:u(()=>[x(" Remarks ")]),_:1},8,["modelValue","error"])]),e("div",Ae,[e("div",Be,[l(c(z),{href:"/delivery-platform-orders"},{default:u(()=>[l(_,{type:"button",class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:u(()=>[l(c(H),{class:"w-4 h-4"}),Ee]),_:1})]),_:1}),l(_,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[l(c(S),{class:"w-4 h-4"}),Ue]),_:1})])]),ze,t.value.id?(s(),r("div",Te,[e("div",Fe,[l(_,{class:"flex space-x-1 bg-gray-300 hover:bg-gray-400 text-black-700",onClick:a[1]||(a[1]=f(o=>$(),["prevent"]))},{default:u(()=>[n.value?(s(),w(c(K),{key:1,class:"w-3 h-3"})):(s(),w(c(L),{key:0,class:"w-4 h-4"})),n.value?(s(),r("span",Ie," Hide Edit ")):(s(),r("span",Ne," Edit Order "))]),_:1}),n.value?(s(),w(_,{key:0,class:"flex space-x-1 bg-green-500 hover:bg-green-600 text-white",onClick:a[2]||(a[2]=f(o=>O(t.value.id),["prevent"]))},{default:u(()=>[l(c(S),{class:"w-4 h-4"}),Qe]),_:1})):d("",!0)])])):d("",!0),t.value.id&&n.value?(s(),r("div",He,[Le,l(Q,{modelValue:t.value.delivery_platform_product_mapping_item_id,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.delivery_platform_product_mapping_item_id=o),options:i.deliveryPlatformProductMappingItemOptions,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(s(),r("div",Re,p(t.value.errors.product_id),1)):d("",!0)])):d("",!0),t.value.id&&n.value?(s(),r("div",Ke,[l(N,{modelValue:t.value.qty,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.qty=o),error:t.value.errors.qty,placeholderStr:"Qty"},{default:u(()=>[x(" Qty ")]),_:1},8,["modelValue","error"])])):d("",!0),t.value.id&&n.value?(s(),r("div",Ze,[l(_,{type:"button",onClick:a[5]||(a[5]=f(o=>i.addDeliveryProductMappingItem(),["prevent"])),class:b(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.delivery_platform_product_mapping_item_id||!t.value.qty?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.delivery_platform_product_mapping_item_id||!t.value.qty},{default:u(()=>[l(c(R),{class:"w-4 h-4"}),Ge]),_:1},8,["class","disabled"])])):d("",!0),t.value.id?(s(),r("div",Je,[e("div",We,[e("div",Xe,[e("div",Ye,[e("table",et,[tt,e("tbody",st,[(s(!0),r(D,null,T(m.deliveryPlatformOrder.data.deliveryPlatformOrderItems,(o,V)=>(s(),r("tr",{key:o.id,class:b(V%2===0?void 0:"bg-gray-50")},[e("td",ot,p(V+1),1),e("td",rt,[e("div",at,[o.deliveryProductMappingItem.product&&o.deliveryProductMappingItem.product.thumbnail?(s(),r("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:o.deliveryProductMappingItem.product.thumbnail.full_url,alt:""},null,8,lt)):d("",!0)])]),e("td",dt,[o.deliveryProductMappingItem.product.code?(s(),r("span",it,p(o.deliveryProductMappingItem.product.code),1)):d("",!0),o.deliveryProductMappingItem.product.name?(s(),r("span",nt,p(o.deliveryProductMappingItem.product.name),1)):d("",!0)]),e("td",ct,[n.value?(s(),r("span",ut,[j(e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md","onUpdate:modelValue":y=>o.qty=y},null,8,pt),[[C,o.qty]])])):(s(),r("span",mt,p(o.qty),1))]),e("td",_t,[n.value?(s(),r("span",vt,[j(e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md","onUpdate:modelValue":y=>o.amount=y},null,8,ft),[[C,o.amount]])])):(s(),r("span",yt,p(o.amount.toLocaleString(void 0,{minimumFractionDigits:c(P).is_currency_exponent_hidden?0:c(P).currency_exponent})),1))])],2))),128)),!m.deliveryPlatformOrder.data.deliveryPlatformOrderItems||!m.deliveryPlatformOrder.data.deliveryPlatformOrderItems.length?(s(),r("tr",gt,xt)):d("",!0)])])])])])])):d("",!0)])],40,ee)])])])])]),_:1})],64))}};export{Bt as default};
