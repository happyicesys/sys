import{g as c,K as $,h as H,f as m,a as o,u,w as a,F as U,o as d,Z as Y,b as e,i as D,N as L,d as i,c as w,l as f,t as p,k as Z,O as S}from"./app.c1ecacbd.js";import{_ as q}from"./Authenticated.71dc77f1.js";import{_ as b}from"./Button.f770599f.js";import z from"./Form.0d5c1e5d.js";import{_ as h,a as J,b as v}from"./TableData.fee1d11e.js";import{_ as I,r as Q}from"./SearchInput.978e75d1.js";import{_ as y}from"./MultiSelect.1a4e007f.js";import{_ as W}from"./TableHeadSort.0d452c8d.js";import{r as X}from"./PlusIcon.0f4bec2b.js";import{r as ee}from"./BackspaceIcon.533f93ca.js";import{r as te}from"./PencilSquareIcon.7b5eee74.js";import{r as oe}from"./TrashIcon.fa7009d2.js";import"./open-closed.3e73817b.js";import"./use-resolve-button-type.30304aad.js";import"./RectangleStackIcon.221714de.js";import"./FormInput.2a47cc5d.js";import"./Modal.f2a190f6.js";import"./ArrowUturnLeftIcon.ce6e025c.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.741a9f44.js";const se=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," VM Management ",-1),le={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ae={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},ne={class:"flex justify-end"},re=e("span",null," Create ",-1),de={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ie=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),ue={key:2},ce=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),me={key:3},pe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),fe={key:4},ge=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Customer Binded? ",-1),ve={key:5},_e=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),xe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),he={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ye={class:"mt-3"},be={class:"flex space-x-1"},Ve=e("span",null," Search ",-1),ke=e("span",null," Reset ",-1),we={class:"flex flex-col space-y-2"},Ce={class:"text-sm text-gray-700 leading-5 flex space-x-1"},Be=e("span",null,"Showing",-1),Oe={class:"font-medium"},Pe=e("span",null,"to",-1),$e={class:"font-medium"},Le=e("span",null,"of",-1),Se={class:"font-medium"},Ie=e("span",null,"results",-1),Me={class:"mt-6 flex flex-col"},Te={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Ne={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ke={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ue={class:"bg-gray-100"},De={class:"divide-x divide-gray-200"},je={class:"bg-white"},Ge={key:0},Ae=["href"],Fe=e("br",null,null,-1),Re={key:1},Ee={key:0},He={class:"flex justify-center space-x-1"},Ye=e("span",null," Edit ",-1),Ze=e("span",null," Delete ",-1),qe={key:0},ze=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Je=[ze],_t={__name:"Index",props:{categories:Object,categoryGroups:Object,locationTypeOptions:Object,operatorOptions:Object,vends:Object},setup(r){const V=r,s=c({codes:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],locationType:"",operator:"",is_binded_customer:"",sortKey:"",sortBy:!1,numberPerPage:"",visited:!0}),k=c([]),M=c([]),T=c([]);c(!1);const C=c([]),B=c([]),O=c([]),j=c(""),G=c();$().props.auth.operatorCountry;const P=$().props.auth.operatorRole,_=$().props.auth.permissions;c(moment().format("HH:mm:ss")),H(()=>{B.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=B.value[0],M.value=V.categories.data.map(n=>({id:n.id,name:n.name})),T.value=V.categoryGroups.data.map(n=>({id:n.id,name:n.name})),k.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],C.value=[{id:"all",value:"All"},...V.locationTypeOptions.data.map(n=>({id:n.id,value:n.name}))],O.value=[{id:"all",full_name:"All"},...V.operatorOptions.data.map(n=>({id:n.id,full_name:n.full_name}))],s.value.locationType=C.value[0],s.value.operator=O.value[0],P.value=="admin"||P.value=="supervisor"||P.value=="driver"?s.value.is_binded_customer=k.value[1]:s.value.is_binded_customer=k.value[0]});function A(n){!confirm("Are you sure to delete "+n.name+"?")||S.delete("/vends/"+n.id)}function x(){S.get("/vends",{...s.value,telco_id:s.value.telco_id.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function F(){S.get("/vends")}function R(n){s.value.sortKey=n,s.value.sortBy=!s.value.sortBy,x()}function E(){showModal.value=!1}return(n,l)=>(d(),m(U,null,[o(u(Y),{title:"VM Management"}),o(q,null,{header:a(()=>[se]),default:a(()=>{var N,K;return[e("div",le,[e("div",ae,[e("div",ne,[o(u(D),{href:"/settings/vend/0/create"},{default:a(()=>[o(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:a(()=>[o(u(X),{class:"h-4 w-4","aria-hidden":"true"}),re]),_:1})]),_:1})]),e("div",de,[o(I,{placeholderStr:"Vend ID",modelValue:s.value.codes,"onUpdate:modelValue":l[0]||(l[0]=t=>s.value.codes=t),onKeyup:l[1]||(l[1]=L(t=>x(),["enter"]))},{default:a(()=>[i(" Vend ID "),ie]),_:1},8,["modelValue"]),u(_).includes("admin-access vends")?(d(),w(I,{key:0,placeholderStr:"Cust ID",modelValue:s.value.customer_code,"onUpdate:modelValue":l[2]||(l[2]=t=>s.value.customer_code=t),onKeyup:l[3]||(l[3]=L(t=>x(),["enter"]))},{default:a(()=>[i(" Cust ID ")]),_:1},8,["modelValue"])):f("",!0),u(_).includes("admin-access vends")?(d(),w(I,{key:1,placeholderStr:"Cust Name",modelValue:s.value.customer_name,"onUpdate:modelValue":l[4]||(l[4]=t=>s.value.customer_name=t),onKeyup:l[5]||(l[5]=L(t=>x(),["enter"]))},{default:a(()=>[i(" Cust Name ")]),_:1},8,["modelValue"])):f("",!0),u(_).includes("admin-access vends")?(d(),m("div",ue,[ce,o(y,{modelValue:s.value.categories,"onUpdate:modelValue":l[6]||(l[6]=t=>s.value.categories=t),options:M.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),u(_).includes("admin-access vends")?(d(),m("div",me,[pe,o(y,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":l[7]||(l[7]=t=>s.value.categoryGroups=t),options:T.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),u(_).includes("admin-access vends")?(d(),m("div",fe,[ge,o(y,{modelValue:s.value.is_binded_customer,"onUpdate:modelValue":l[8]||(l[8]=t=>s.value.is_binded_customer=t),options:k.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),u(_).includes("admin-access vends")?(d(),m("div",ve,[_e,o(y,{modelValue:s.value.operator,"onUpdate:modelValue":l[9]||(l[9]=t=>s.value.operator=t),options:O.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),e("div",null,[xe,o(y,{modelValue:s.value.locationType,"onUpdate:modelValue":l[10]||(l[10]=t=>s.value.locationType=t),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",he,[e("div",ye,[e("div",be,[o(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[11]||(l[11]=t=>x())},{default:a(()=>[o(u(Q),{class:"h-4 w-4","aria-hidden":"true"}),Ve]),_:1}),o(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[12]||(l[12]=t=>F())},{default:a(()=>[o(u(ee),{class:"h-4 w-4","aria-hidden":"true"}),ke]),_:1})])]),e("div",we,[e("p",Ce,[Be,e("span",Oe,p((N=r.vends.meta.from)!=null?N:0),1),Pe,e("span",$e,p((K=r.vends.meta.to)!=null?K:0),1),Le,e("span",Se,p(r.vends.meta.total),1),Ie]),o(y,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":l[13]||(l[13]=t=>s.value.numberPerPage=t),options:B.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:x},null,8,["modelValue","options"])])])]),e("div",Me,[e("div",Te,[e("div",Ne,[e("table",Ke,[e("thead",Ue,[e("tr",De,[o(h,null,{default:a(()=>[i(" # ")]),_:1}),o(W,{modelName:"code",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:l[14]||(l[14]=t=>R("code"))},{default:a(()=>[i(" Code ")]),_:1},8,["sortKey","sortBy"]),o(h,null,{default:a(()=>[i(" Name ")]),_:1}),o(h,null,{default:a(()=>[i(" Begin Date ")]),_:1}),o(h,null,{default:a(()=>[i(" Termination Date ")]),_:1}),o(h,null,{default:a(()=>[i(" Operator ")]),_:1}),o(h)])]),e("tbody",je,[(d(!0),m(U,null,Z(r.vends.data,(t,g)=>(d(),m("tr",{key:t.id,class:"divide-x divide-gray-200"},[o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[i(p(r.vends.meta.from+g),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:a(()=>[i(p(t.code),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:a(()=>[t.latestVendBinding&&t.latestVendBinding.customer?(d(),m("span",Ge,[e("a",{class:"text-blue-700",target:"_blank",href:"//admin.happyice.com.sg/person/vend-code/"+t.code},[i(p(t.latestVendBinding.customer.code)+" ",1),Fe,i(" "+p(t.latestVendBinding.customer.name),1)],8,Ae)])):(d(),m("span",Re,p(t.name),1))]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[i(p(t.begin_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[i(p(t.termination_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[t.latestOperator?(d(),m("span",Ee,p(t),1)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),o(v,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:a(()=>[e("div",He,[o(u(D),{href:"/settings/vend/"+t.id+"/update"},{default:a(()=>[o(b,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-3 py-2 text-xs text-gray-800 flex space-x-1"},{default:a(()=>[o(u(te),{class:"w-4 h-4"}),Ye]),_:1})]),_:2},1032,["href"]),o(b,{type:"button",class:"bg-red-300 hover:bg-red-400 px-3 py-2 text-xs text-red-800 flex space-x-1",onClick:Qe=>A(t)},{default:a(()=>[o(u(oe),{class:"w-4 h-4"}),Ze]),_:2},1032,["onClick"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),r.vends.data.length?f("",!0):(d(),m("tr",qe,Je))])]),r.vends.data.length?(d(),w(J,{key:0,links:r.vends.links,meta:r.vends.meta},null,8,["links","meta"])):f("",!0)])])])]),n.showModal?(d(),w(z,{key:0,vend:G.value,type:j.value,showModal:n.showModal,onModalClose:E},null,8,["vend","type","showModal"])):f("",!0)]}),_:1})],64))}};export{_t as default};
