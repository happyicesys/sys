import{g as m,T as I,K as xe,h as ge,j as L,f as o,a as r,u as v,w as i,F as S,o as l,Z as he,b as e,d as u,t as c,l as d,e as h,i as ye,n as b,k as P,c as y,O as V}from"./app.4ea561de.js";import{_ as be}from"./Authenticated.fc486f5c.js";import{_ as g}from"./Button.186f76df.js";import we from"./ChannelOverview.3bb7ecf0.js";import ke from"./EditItem.0c5f4f18.js";import{_ as w}from"./FormInput.176630f6.js";import{_ as O}from"./MultiSelect.718cb95e.js";import{_ as j,a as M}from"./TableData.e074782f.js";import{r as Se}from"./ArrowUturnLeftIcon.1cca62d7.js";import{r as R}from"./CheckCircleIcon.5a6bdcf3.js";import{r as E}from"./PlusCircleIcon.b08b3450.js";import{r as Ve}from"./PencilSquareIcon.aa230263.js";import{r as T}from"./XCircleIcon.b020b883.js";import{r as X}from"./PauseCircleIcon.ba720c5a.js";import{r as Ce}from"./PlayCircleIcon.97892476.js";import"./open-closed.9b3740ac.js";import"./use-resolve-button-type.a595af34.js";import"./RectangleStackIcon.bf7bcecf.js";import"./Modal.8da25faa.js";import"./disposables.ca90838c.js";import"./BackspaceIcon.f410e87c.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.8a8cc677.js";const Pe={class:"font-semibold text-xl text-gray-800 leading-tight"},Oe={key:0},je={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Me={class:"mt-6 flex flex-col"},$e={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},qe={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},De=["onSubmit"],Be={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},Ue={class:"sm:col-span-6"},Ae={class:"sm:col-span-6"},Ne=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),Ie={class:"mt-1"},Le=["value"],Re={class:"sm:col-span-6"},Ee=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),Te={class:"mt-1"},Fe=["value"],Qe={class:"sm:col-span-6"},Ke=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ze={class:"mt-1"},Ze=["value"],Ge={class:"sm:col-span-6"},He=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),Je={class:"mt-1"},We=["value"],Xe={class:"sm:col-span-3"},Ye={class:"sm:col-span-3"},et=e("div",{class:"sm:col-span-6"},[e("label",{for:"reserved",class:"italic text-blue-800"},' By setting "Reserved Percentage" and "Reserved Quantity", the sellable qty equivalent to whichever higher. If lower than reserved, channel becomes inactive, both default value are 0. ')],-1),tt={class:"sm:col-span-6"},st={class:"flex space-x-1 mt-5 justify-end"},lt=e("span",null," Back ",-1),ot=e("span",null," Save ",-1),at=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Delivery Platform Product(s) ")])])],-1),rt={key:0},nt={key:1},dt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),it={key:0,class:"text-sm text-red-600"},ct={key:2},ut={key:3},pt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),mt={key:4,class:"sm:col-span-1"},_t=e("span",null," Add ",-1),vt={key:5,class:"sm:col-span-6 flex flex-col mt-3"},ft={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},xt={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},gt={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},ht={class:"table-fixed min-w-full divide-y divide-gray-300"},yt=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Status "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),bt={class:"bg-white"},wt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},kt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},St={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Vt={class:"flex justify-center"},Ct=["src"],Pt={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Ot={key:0},jt={key:1,class:"break-words"},Mt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},$t={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},qt={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},Dt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Bt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ut={class:"whitespace-nowrap py-4 pr-2 text-sm text-center"},At=e("span",{class:"text-xs"}," Edit ",-1),Nt={key:0},It=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Lt=[It],Rt=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Bundle Sales")])])],-1),Et={key:6,class:"sm:col-span-6"},Tt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," (Create New) Type ",-1),Ft={key:7,class:"sm:col-span-6"},Qt={key:8,class:"sm:col-span-3"},Kt={key:9,class:"sm:col-span-3"},zt={class:"sm:col-span-6 text-blue-700 text-semibold"},Zt={key:10,class:"sm:col-span-5"},Gt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Ht={key:11,class:"sm:col-span-1"},Jt=e("span",null," Add ",-1),Wt={key:12,class:"sm:col-span-6 text-red-400 text-sm font-bold"},Xt={key:13,class:"sm:col-span-6 flex flex-col mt-3"},Yt={role:"list",class:"divide-y divide-gray-100 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl"},es={class:"flex justify-between gap-x-6 px-4 py-5 hover:bg-gray-50 sm:px-6"},ts={class:"flex min-w-0 gap-x-4"},ss={class:"text-sm pt-3"},ls=["src"],os={class:"min-w-0 flex-auto pt-3"},as={class:"text-sm font-semibold leading-6 text-gray-900"},rs=e("span",{class:"absolute inset-x-0 -top-px bottom-0"},null,-1),ns={class:"flex items-center gap-x-3"},ds={key:14,class:"sm:col-span-6"},is=e("span",null," Save Bundle ",-1),cs={key:15,class:"sm:col-span-6 flex flex-col mt-2 mx-5 mb-3"},us={class:"mt-6 flex flex-col"},ps={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},ms={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},_s={class:"min-w-full border-separate",style:{"border-spacing":"0"}},vs={class:"bg-gray-100"},fs={class:"divide-x divide-gray-200"},xs={class:"bg-white"},gs={class:"divide-y divide-gray-200"},hs={class:"flex py-1 px-3 space-x-2"},ys={class:"self-center font-semibold text-blue-700"},bs={class:"flex self-center"},ws=["href"],ks=["src"],Ss={class:"mt-3"},Vs=e("br",null,null,-1),Cs={key:0},Ps=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Os=[Ps],js={key:16,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},Ms=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"}," Vending Machine Binding ")])],-1),$s=[Ms],qs={key:17,class:"sm:col-span-3"},Ds=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),Bs={key:0,class:"text-sm text-red-600"},Us={key:18,class:"sm:col-span-2"},As={key:19,class:"sm:col-span-1"},Ns=e("span",null," Add ",-1),Is={key:20,class:"sm:col-span-6 flex flex-col mt-3"},Ls={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Rs={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Es={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Ts={class:"min-w-full divide-y divide-gray-300"},Fs=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"},[u(" Vend ID "),e("br"),u(" (Platform Ref ID) ")]),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Status "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," VM Status "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Qs={class:"bg-white"},Ks={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},zs={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Zs=e("br",null,null,-1),Gs={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left"},Hs={key:0},Js=e("br",null,null,-1),Ws={key:1},Xs={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ys=["onClick"],el={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},tl={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},sl={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},ll={class:"whitespace-nowrap py-2 text-xs text-center p-3"},ol={class:"flex flex-col space-y-1"},al={key:2,class:"text-xs"},rl={key:3,class:"text-xs"},nl=e("span",null,"Unbind VM",-1),dl={key:0},il=e("td",{colspan:"6",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),cl=[il],Dl={__name:"Edit",props:{bundleSalesOptions:[Array,Object],deliveryProductMapping:Object,productMappingItems:Object,productOptions:Object,type:String,unbindedVendOptions:[Array,Object]},setup(F){const p=F,$=m(""),x=m([]),Q=m([]),q=m([]),k=m([]),K=m([]),z=m([]),t=m(I(W()));m(!1);const C=m(!0),Y=m([]),ee=m([]),D=m(!1),B=m(!1),te=m([]),A=m(""),se=xe().props.auth.roles,Z=m(),N=m([]);ge(()=>{p.type=="create"?A.value="Create New":A.value="Edit",Q.value=[...p.bundleSalesOptions.map(a=>({id:a.id,name:a.name,is_same:a.is_same,type:a.type,phrase_1:a.phrase_1,phrase_2:a.phrase_2,phrase_3:a.phrase_3}))],q.value=p.deliveryProductMapping.data,k.value=p.deliveryProductMapping.data.deliveryProductMappingBulks,z.value=p.deliveryProductMapping.data.deliveryProductMappingItems.map(a=>({id:a.id,full_name:"(#"+a.channel_code+") "+a.product.code+" "+a.product.name,img_url:a.product.thumbnail.full_url,amount:a.amount})),t.value=q.value?I(q.value):I(W()),N.value=[...p.unbindedVendOptions.data.map(a=>({id:a.id,full_name:a.full_name}))]});const G=L(function(){return t.value.promo_label&&t.value.promo_value&&t.value.total_qty?t.value.promo_label.phrase_1+t.value.total_qty+t.value.promo_label.phrase_2+t.value.promo_value+t.value.promo_label.phrase_3:""}),H=L(function(){let a=!0;return $.value="",(!t.value.promo_label||!t.value.promo_value||!t.value.delivery_product_mapping_item_id)&&(a=!1),t.value.total_qty==0&&(a=!1),C.value&&x.value.length==1&&(a=!1),!C.value&&x.value.length>0&&x.value.filter(n=>t.value.delivery_product_mapping_item_id.id==n.delivery_product_mapping_item_id.id).length>0&&(a=!1,$.value="Product already added"),a}),J=L(function(){let a=!1;return x.value.length>1&&!C.value&&(a=!0),x.value.length==1&&C.value&&(a=!0),a});function W(){return{id:"",bundle_name:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",platform_ref_id:"",product_mapping_id:"",promo_label:"",promo_type:"",promo_value:"",reserved_percent:0,reserved_qty:0,sub_category_json:"",total_amount:"",total_qty:""}}function le(){t.value.delivery_product_mapping_item_id&&x.value.push({delivery_product_mapping_item_id:t.value.delivery_product_mapping_item_id})}function oe(){Y.value.map(function(a){return a.channel_code}).indexOf(t.value.channel_code)<0&&V.post("/delivery-product-mapping-items/delivery-product-mapping/"+t.value.id+"/store",{...t.value,product_id:t.value.product_id?t.value.product_id.id:null},{preserveState:!1,preserveScroll:!0,replace:!0})}function ae(a){V.post("/delivery-product-mappings/"+t.value.id+"/bind-vend",{vend_id:a,platform_ref_id:t.value.platform_ref_id},{preserveState:!1,preserveScroll:!0,replace:!0})}function re(){t.value.promo_label.is_same==!0?C.value=!0:C.value=!1}function ne(a){Z.value=a,D.value=!0}function de(){D.value=!1}function ie(a){K.value=a,B.value=!0}function ce(){B.value=!1}function ue(a){x.value.splice(a,1)}function pe(a){!confirm("Are you sure to delete this entry?")||V.delete("/delivery-product-mappings/bulks/"+a,{preserveState:!1,preserveScroll:!0,replace:!0})}function me(){V.post("/delivery-product-mappings/"+t.value.id+"/save-bundle-sales",{bundle_label:t.value.promo_label.id,bundle_name:t.value.bundle_name,bundle_type:t.value.promo_label.type,bundle_value:t.value.promo_value,bundle_desc:G.value,bundleSalesItems:x.value&&x.value.length>0?x.value.map(a=>({id:a.delivery_product_mapping_item_id.id,qty:a.qty})):[],total_qty:t.value.total_qty},{preserveState:!1,preserveScroll:!0,replace:!0})}function _e(){t.value.clearErrors(),t.value.transform(a=>({name:a.name,reserved_percent:a.reserved_percent,reserved_qty:a.reserved_qty})).post("/delivery-product-mappings/"+t.value.id+"/update",{preserveState:!0,replace:!0})}function ve(a){let n=a.is_active?"Are you sure to pause this vending machine?":"Are you sure to resume this vending machine?";!confirm(n)||V.post("/delivery-product-mappings/vends/"+a.id+"/toggle-pause-vend",{},{preserveState:!1,preserveScroll:!0,replace:!0})}function fe(a){!confirm("Are you sure to delete this entry?")||V.delete("/delivery-product-mappings/unbind/"+a,{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{V.reload({only:["unbindedVendOptions"]}),N.value=p.unbindedVendOptions?p.unbindedVendOptions.data:[]}})}return(a,n)=>(l(),o(S,null,[r(v(he),{title:"Delivery Product Mapping"}),r(be,null,{header:i(()=>[e("h2",Pe,[u(c(A.value)+" Delivery Product Mapping ",1),F.type=="update"?(l(),o("span",Oe,c(q.value.name),1)):d("",!0)])]),default:i(()=>[e("div",je,[e("div",Me,[e("div",$e,[e("div",qe,[e("form",{onSubmit:h(_e,["prevent"]),id:"submit"},[e("div",Be,[e("div",Ue,[r(w,{modelValue:t.value.name,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value.name=s),error:t.value.errors.name},{default:i(()=>[u(" Name ")]),_:1},8,["modelValue","error"])]),e("div",Ae,[Ne,e("div",Ie,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:p.deliveryProductMapping.data.operator.full_name,disabled:""},null,8,Le)])]),e("div",Re,[Ee,e("div",Te,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:p.deliveryProductMapping.data.deliveryPlatformOperator.deliveryPlatform.name+" ("+p.deliveryProductMapping.data.deliveryPlatformOperator.type+")",disabled:""},null,8,Fe)])]),e("div",Qe,[Ke,e("div",ze,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:p.deliveryProductMapping.data.category_json.id+" - "+p.deliveryProductMapping.data.category_json.name,disabled:""},null,8,Ze)])]),e("div",Ge,[He,e("div",Je,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:p.deliveryProductMapping.data.productMapping.name,disabled:""},null,8,We)])]),e("div",Xe,[r(w,{modelValue:t.value.reserved_percent,"onUpdate:modelValue":n[1]||(n[1]=s=>t.value.reserved_percent=s),error:t.value.errors.reserved_percent},{default:i(()=>[u(" Reserved Percentage (%) ")]),_:1},8,["modelValue","error"])]),e("div",Ye,[r(w,{modelValue:t.value.reserved_qty,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value.reserved_qty=s),error:t.value.errors.reserved_qty},{default:i(()=>[u(" Reserved Quantity ")]),_:1},8,["modelValue","error"])]),et,e("div",tt,[e("div",st,[r(v(ye),{href:"/delivery-product-mappings"},{default:i(()=>[r(g,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:i(()=>[r(v(Se),{class:"w-4 h-4"}),lt]),_:1})]),_:1}),r(g,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:i(()=>[r(v(R),{class:"w-4 h-4"}),ot]),_:1})])]),at,t.value.id?(l(),o("div",rt,[r(w,{modelValue:t.value.channel_code,"onUpdate:modelValue":n[3]||(n[3]=s=>t.value.channel_code=s),error:t.value.errors.channel_code,placeholderStr:"Channel ID"},{default:i(()=>[u(" Channel ID ")]),_:1},8,["modelValue","error"])])):d("",!0),t.value.id?(l(),o("div",nt,[dt,r(O,{modelValue:t.value.product_id,"onUpdate:modelValue":n[4]||(n[4]=s=>t.value.product_id=s),options:ee.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(l(),o("div",it,c(t.value.errors.product_id),1)):d("",!0)])):d("",!0),t.value.id?(l(),o("div",ct,[r(w,{modelValue:t.value.amount,"onUpdate:modelValue":n[5]||(n[5]=s=>t.value.amount=s),error:t.value.errors.amount,placeholderStr:"Platform Price"},{default:i(()=>[u(" Price ")]),_:1},8,["modelValue","error"])])):d("",!0),t.value.id?(l(),o("div",ut,[pt,r(O,{modelValue:t.value.sub_category_json,"onUpdate:modelValue":n[6]||(n[6]=s=>t.value.sub_category_json=s),options:te.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):d("",!0),t.value.product_mapping_id?(l(),o("div",mt,[r(g,{type:"button",onClick:n[7]||(n[7]=h(s=>oe(),["prevent"])),class:b(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.channel_code||!t.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.channel_code||!t.value.product_id},{default:i(()=>[r(v(E),{class:"w-4 h-4"}),_t]),_:1},8,["class","disabled"])])):d("",!0),t.value.product_mapping_id?(l(),o("div",vt,[e("div",ft,[e("div",xt,[e("div",gt,[e("table",ht,[yt,e("tbody",bt,[(l(!0),o(S,null,P(p.deliveryProductMapping.data.deliveryProductMappingItems,(s,f)=>(l(),o("tr",{key:s.id,class:b(f%2===0?void 0:"bg-gray-50")},[e("td",wt,c(f+1),1),e("td",kt,c(s.channel_code),1),e("td",St,[e("div",Vt,[s.product&&s.product.thumbnail?(l(),o("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:s.product.thumbnail.full_url,alt:""},null,8,Ct)):d("",!0)])]),e("td",Pt,[s.product.code?(l(),o("span",Ot,c(s.product.code),1)):d("",!0),s.product.name?(l(),o("span",jt,c(s.product.name),1)):d("",!0)]),e("td",Mt,[s.is_active==1?(l(),o("span",$t," Active ")):d("",!0),s.is_active==0?(l(),o("span",qt," Paused ")):d("",!0)]),e("td",Dt,c(s.amount.toLocaleString(void 0,{minimumFractionDigits:p.deliveryProductMapping.data.operator.country.is_currency_exponent_hidden?0:p.deliveryProductMapping.data.operator.country.currency_exponent,maximumFractionDigits:p.deliveryProductMapping.data.operator.country.is_currency_exponent_hidden?0:p.deliveryProductMapping.data.operator.country.currency_exponent})),1),e("td",Bt,c(s.sub_category_json.name),1),e("td",Ut,[r(g,{class:"bg-gray-300 hover:bg-gray-400 text-black flex space-x-1",onClick:h(_=>ie(s),["prevent"])},{default:i(()=>[r(v(Ve),{class:"w-3 h-3"}),At]),_:2},1032,["onClick"])])],2))),128)),!p.deliveryProductMapping.data.deliveryProductMappingItems||!p.deliveryProductMapping.data.deliveryProductMappingItems.length?(l(),o("tr",Nt,Lt)):d("",!0)])])])])])])):d("",!0),Rt,t.value.id?(l(),o("div",Et,[Tt,r(O,{modelValue:t.value.promo_label,"onUpdate:modelValue":n[8]||(n[8]=s=>t.value.promo_label=s),options:Q.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:re},null,8,["modelValue","options"])])):d("",!0),t.value.promo_label?(l(),o("div",Ft,[r(w,{modelValue:t.value.bundle_name,"onUpdate:modelValue":n[9]||(n[9]=s=>t.value.bundle_name=s),error:t.value.errors.bundle_name,placeholderStr:"Name"},{default:i(()=>[u(" Template Name ")]),_:1},8,["modelValue","error"])])):d("",!0),t.value.promo_label?(l(),o("div",Qt,[r(w,{modelValue:t.value.total_qty,"onUpdate:modelValue":n[10]||(n[10]=s=>t.value.total_qty=s),error:t.value.errors.total_qty,placeholderStr:"Total Qty"},{default:i(()=>[u(" Total Qty ")]),_:1},8,["modelValue","error"])])):d("",!0),t.value.promo_label?(l(),o("div",Kt,[r(w,{modelValue:t.value.promo_value,"onUpdate:modelValue":n[11]||(n[11]=s=>t.value.promo_value=s),error:t.value.errors.promo_value,placeholderStr:"Value"},{default:i(()=>[u(" Value (final price OR value off OR percentage) ")]),_:1},8,["modelValue","error"])])):d("",!0),e("span",zt,c(G.value),1),t.value.promo_label?(l(),o("span",Zt,[Gt,r(O,{modelValue:t.value.delivery_product_mapping_item_id,"onUpdate:modelValue":n[12]||(n[12]=s=>t.value.delivery_product_mapping_item_id=s),options:z.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):d("",!0),t.value.product_mapping_id?(l(),o("div",Ht,[t.value.promo_label?(l(),y(g,{key:0,type:"button",onClick:n[13]||(n[13]=h(s=>le(),["prevent"])),class:b(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[H.value?"":"opacity-50 cursor-not-allowed"]]),disabled:!H.value},{default:i(()=>[r(v(E),{class:"w-4 h-4"}),Jt]),_:1},8,["class","disabled"])):d("",!0)])):d("",!0),$.value?(l(),o("span",Wt,c($.value),1)):d("",!0),t.value.product_mapping_id?(l(),o("div",Xt,[e("ul",Yt,[(l(!0),o(S,null,P(x.value,(s,f)=>(l(),o("li",es,[e("div",ts,[e("span",ss,c(f+1),1),e("img",{class:"h-12 w-12 flex-none rounded-full bg-gray-50",src:s.delivery_product_mapping_item_id.img_url,alt:""},null,8,ls),e("div",os,[e("p",as,[rs,u(" "+c(s.delivery_product_mapping_item_id.full_name),1)])])]),e("div",ns,[r(g,{onClick:h(_=>ue(f),["prevent"]),class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white"},{default:i(()=>[r(v(T),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])]))),256))])])):d("",!0),t.value.product_mapping_id?(l(),o("div",ds,[t.value.promo_label?(l(),y(g,{key:0,type:"button",onClick:n[14]||(n[14]=h(s=>me(),["prevent"])),class:b(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-1",[J.value?"":"opacity-50 cursor-not-allowed"]]),disabled:!J.value},{default:i(()=>[r(v(R),{class:"w-4 h-4"}),is]),_:1},8,["class","disabled"])):d("",!0)])):d("",!0),t.value.product_mapping_id?(l(),o("div",cs,[e("div",us,[e("div",ps,[e("div",ms,[e("table",_s,[e("thead",vs,[e("tr",fs,[r(j,null,{default:i(()=>[u(" # ")]),_:1}),r(j,null,{default:i(()=>[u(" Bundle Name ")]),_:1}),r(j,null,{default:i(()=>[u(" Type ")]),_:1}),r(j,null,{default:i(()=>[u(" (Channel) Product ")]),_:1}),r(j,null,{default:i(()=>[u(" Action ")]),_:1})])]),e("tbody",xs,[(l(!0),o(S,null,P(p.deliveryProductMapping.data.deliveryProductMappingBulks,(s,f)=>(l(),o("tr",{key:s.id,class:"divide-x divide-gray-300"},[r(M,{currentIndex:f,totalLength:k.value.length,inputClass:"text-center"},{default:i(()=>[u(c(f+1),1)]),_:2},1032,["currentIndex","totalLength"]),r(M,{currentIndex:f,totalLength:k.value.length,inputClass:"text-center"},{default:i(()=>[u(c(s.name),1)]),_:2},1032,["currentIndex","totalLength"]),r(M,{currentIndex:f,totalLength:k.value.length,inputClass:"text-center"},{default:i(()=>[u(c(s.promo_desc),1)]),_:2},1032,["currentIndex","totalLength"]),r(M,{currentIndex:f,totalLength:k.value.length,inputClass:"text-left"},{default:i(()=>[e("ul",gs,[(l(!0),o(S,null,P(s.deliveryProductMappingBulkItems,_=>(l(),o("li",hs,[e("span",ys," (#"+c(_.deliveryProductMappingItem.channel_code)+") ",1),e("div",bs,[_.deliveryProductMappingItem.product.thumbnail?(l(),o("a",{key:0,href:_.deliveryProductMappingItem.product.thumbnail.full_url,target:"_blank"},[e("img",{class:"object-scale-down h-24 w-24 md:h-16 md:w-20 rounded-full",src:_.deliveryProductMappingItem.product.thumbnail.full_url,alt:""},null,8,ks)],8,ws)):d("",!0)]),e("span",Ss,[u(c(_.deliveryProductMappingItem.product.code)+" ",1),Vs,u(" "+c(_.deliveryProductMappingItem.product.name),1)])]))),256))])]),_:2},1032,["currentIndex","totalLength"]),r(M,{currentIndex:f,totalLength:k.value.length,inputClass:"text-center"},{default:i(()=>[r(g,{onClick:h(_=>pe(s.id),["prevent"]),class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white"},{default:i(()=>[r(v(T),{class:"w-4 h-4"})]),_:2},1032,["onClick"])]),_:2},1032,["currentIndex","totalLength"])]))),128)),k.value.length?d("",!0):(l(),o("tr",Cs,Os))])])])])])])):d("",!0),t.value.product_mapping_id?(l(),o("div",js,$s)):d("",!0),t.value.product_mapping_id?(l(),o("div",qs,[Ds,r(O,{modelValue:t.value.vend_id,"onUpdate:modelValue":n[15]||(n[15]=s=>t.value.vend_id=s),options:N.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.vend_id?(l(),o("div",Bs,c(t.value.errors.vend_id),1)):d("",!0)])):d("",!0),t.value.product_mapping_id?(l(),o("div",Us,[r(w,{modelValue:t.value.platform_ref_id,"onUpdate:modelValue":n[16]||(n[16]=s=>t.value.platform_ref_id=s),error:t.value.errors.platform_ref_id,placeholderStr:"Platform ID"},{default:i(()=>[u(" Platform ID (Store ID) ")]),_:1},8,["modelValue","error"])])):d("",!0),t.value.product_mapping_id?(l(),o("div",As,[r(g,{type:"button",onClick:n[17]||(n[17]=h(s=>ae(t.value.vend_id.id),["prevent"])),class:b(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[t.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!t.value.vend_id},{default:i(()=>[r(v(E),{class:"w-4 h-4"}),Ns]),_:1},8,["class","disabled"])])):d("",!0),t.value.product_mapping_id?(l(),o("div",Is,[e("div",Ls,[e("div",Rs,[e("div",Es,[e("table",Ts,[Fs,e("tbody",Qs,[(l(!0),o(S,null,P(p.deliveryProductMapping.data.deliveryProductMappingVends,(s,f)=>(l(),o("tr",{key:s.id,class:b(f%2===0?void 0:"bg-gray-50")},[e("td",Ks,c(f+1),1),e("td",zs,[u(c(s.vend.code)+" ",1),Zs,u(" ("+c(s.platform_ref_id)+") ",1)]),e("td",Gs,[s.vend.latestVendBinding&&s.vend.latestVendBinding.customer?(l(),o("span",Hs,[u(c(s.vend.latestVendBinding.customer.code)+" ",1),Js,u(" "+c(s.vend.latestVendBinding.customer.name),1)])):(l(),o("span",Ws,c(s.vend.name),1))]),e("td",Xs,[s.deliveryProductMappingVendChannels?(l(),o("ul",{key:0,class:"sm:grid sm:grid-cols-[105px_minmax(110px,_1fr)_100px] hover:cursor-pointer",onClick:_=>ne(s)},[(l(!0),o(S,null,P(s.deliveryProductMappingVendChannels,(_,U)=>(l(),o("li",{class:b(["quick-look",[U>0&&String(_.vend_channel_code)[0]!==String(s.deliveryProductMappingVendChannels[U-1].vend_channel_code)[0]?"col-start-1":""]])},[e("span",{class:b([[U>0&&String(_.vend_channel_code)[0]!==String(s.deliveryProductMappingVendChannels[U-1].vend_channel_code)[0]?"border-t-4 pt-1":""],"flex space-x-2"])},[e("span",null," #"+c(_.vend_channel_code),1),_.is_active==1?(l(),y(v(R),{key:0,class:"w-4 h-4 fill-green-500"})):(l(),y(v(X),{key:1,class:"w-4 h-4 fill-red-500"}))],2)],2))),256))],8,Ys)):d("",!0)]),e("td",el,[s.is_active==1?(l(),o("span",tl," Operating ")):d("",!0),s.is_active==0?(l(),o("span",sl," Paused ")):d("",!0)]),e("td",ll,[e("div",ol,[r(g,{class:b(["flex space-x-1",[s.is_active?"bg-yellow-300 hover:bg-yellow-400 text-black":"bg-green-500 hover:bg-green-600 text-white"]]),onClick:h(_=>ve(s),["prevent"])},{default:i(()=>[s.is_active?(l(),y(v(X),{key:0,class:"w-3 h-3"})):(l(),y(v(Ce),{key:1,class:"w-3 h-3"})),s.is_active?(l(),o("span",al," Pause VM ")):(l(),o("span",rl," Resume VM "))]),_:2},1032,["class","onClick"]),v(se).includes("superadmin")?(l(),y(g,{key:0,class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white",onClick:h(_=>fe(s.id),["prevent"])},{default:i(()=>[s.is_active?(l(),y(v(T),{key:0,class:"w-3 h-3"})):d("",!0),nl]),_:2},1032,["onClick"])):d("",!0)])])],2))),128)),p.deliveryProductMapping.data.deliveryProductMappingVends.length?d("",!0):(l(),o("tr",dl,cl))])])])])])])):d("",!0)])],40,De)])])])]),D.value?(l(),y(we,{key:0,vend:Z.value,deliveryProductMapping:p.deliveryProductMapping.data,showModal:D.value,onModalClose:de},null,8,["vend","deliveryProductMapping","showModal"])):d("",!0),B.value?(l(),y(ke,{key:1,deliveryProductMapping:p.deliveryProductMapping.data,deliveryProductMappingItemObj:K.value,showModal:B.value,onModalClose:ce},null,8,["deliveryProductMapping","deliveryProductMappingItemObj","showModal"])):d("",!0)]),_:1})],64))}};export{Dl as default};
