import{_ as Y}from"./Authenticated.c333a0a9.js";import{_ as b}from"./Button.e02061ca.js";import q from"./Form.1e0f46f5.js";import{_ as H}from"./Paginator.f5d337d8.js";import{_ as L}from"./SearchInput.7dad337f.js";import{_ as x}from"./MultiSelect.0de761bc.js";import{_ as g,a as f}from"./TableData.1bd7e047.js";import{_ as U}from"./TableHeadSort.fa8a352d.js";import{g as c,h as J,f as m,a as t,u as h,w as a,F as P,o as i,Z as Q,b as l,i as T,d as r,t as u,k as D,l as v,c as N,O as z,n as W}from"./app.23f69410.js";import{r as X}from"./PlusIcon.064d72fe.js";import{r as ee}from"./MagnifyingGlassIcon.c46b9c8c.js";import{r as te}from"./BackspaceIcon.1bcb07c1.js";import{r as le}from"./PencilSquareIcon.aec57082.js";import"./keyboard.0c05cab2.js";import"./use-resolve-button-type.8f594bcf.js";import"./RectangleStackIcon.86791b6c.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.b143ea91.js";const se=l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Customers ",-1),ae={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},oe={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},ne={class:"flex justify-end"},re=l("span",null," Create ",-1),de={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ie=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ue=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category Group ",-1),ce=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Active? ",-1),me=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Zone ",-1),pe=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Price Template ",-1),fe=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Tags ",-1),ge=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is From CMS ",-1),ve={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},_e={class:"mt-3"},xe={class:"flex space-x-1"},he=l("span",null," Search ",-1),ye=l("span",null," Reset ",-1),be={class:"flex flex-col space-y-2"},Ve={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ke=l("span",null,"Showing",-1),Ce={class:"font-medium"},we=l("span",null,"to",-1),Le={class:"font-medium"},Pe=l("span",null,"of",-1),Se={class:"font-medium"},Be=l("span",null,"results",-1),Ie={class:"mt-6 flex flex-col"},Oe={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},je={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},$e={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ae={class:"bg-gray-100"},Ue={class:"divide-x divide-gray-200"},Te={class:"bg-white"},De=["href"],Ne={key:0},ze={key:0},Fe={key:1},Ke=l("br",null,null,-1),Me={key:1},Ge={key:0},Ze=l("br",null,null,-1),Ee={key:0,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[10px] font-small border min-w-full bg-green-200"},Re={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"},Ye={key:0,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[12px] font-small border min-w-full bg-green-300"},qe={key:1,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[12px] font-small border min-w-full bg-red-300"},He={class:"flex justify-center space-x-1"},Je=l("span",null," Edit ",-1),Qe={key:0},We=l("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Xe=[We],xt={__name:"Index",props:{customers:Object,categories:Object,categoryGroups:Object,priceTemplates:Object,profiles:Object,statuses:Object,tags:Object,users:Object,zones:Object},setup(d){const _=d,s=c({customer:"",name:"",ref_id:"",status:"",vend_code:"",sortKey:"",sortBy:!0,numberPerPage:100}),V=c(!1),y=c([]),F=c(),S=c([]),B=c([]),k=c([]),K=c([]);c([]);const I=c([]),M=c([]),O=c([]),G=c(""),C=c([]);J(()=>{y.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],C.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=C.value[0],S.value=_.categories.data.map(n=>({id:n.id,name:n.name})),B.value=_.categoryGroups.data.map(n=>({id:n.id,name:n.name})),k.value=_.priceTemplates.data.map(n=>({id:n.id,name:n.name})),K.value=_.profiles.data.map(n=>({id:n.id,name:n.name})),M.value=_.users.data.map(n=>({id:n.id,name:n.name})),O.value=_.zones.data.map(n=>({id:n.id,name:n.name})),k.value=_.priceTemplates.data.map(n=>({id:n.id,name:n.name})),I.value=_.tags.data.map(n=>({id:n.id,name:n.name})),s.value.is_active=y.value[0],s.value.is_cms=y.value[0]});function w(){z.get("/customers",{...s.value,is_cms:s.value.is_cms.id,is_active:s.value.is_active.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function Z(){z.get("/customers")}function j(n){s.value.sortKey=n,s.value.sortBy=!s.value.sortBy,w()}function E(){V.value=!1}return(n,o)=>(i(),m(P,null,[t(h(Q),{title:"Customers"}),t(Y,null,{header:a(()=>[se]),default:a(()=>{var $,A;return[l("div",ae,[l("div",oe,[l("div",ne,[t(h(T),{href:"/customers/create"},{default:a(()=>[t(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:a(()=>[t(h(X),{class:"h-4 w-4","aria-hidden":"true"}),re]),_:1})]),_:1})]),l("div",de,[t(L,{placeholderStr:"ID",modelValue:s.value.ref_id,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.ref_id=e)},{default:a(()=>[r(" ID ")]),_:1},8,["modelValue"]),t(L,{placeholderStr:"ID",modelValue:s.value.vend_code,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.vend_code=e)},{default:a(()=>[r(" Vend ID ")]),_:1},8,["modelValue"]),t(L,{placeholderStr:"Customer",modelValue:s.value.customer,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value.customer=e)},{default:a(()=>[r(" Customer ")]),_:1},8,["modelValue"]),l("div",null,[ie,t(x,{modelValue:s.value.categories,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.categories=e),options:S.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ue,t(x,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":o[4]||(o[4]=e=>s.value.categoryGroups=e),options:B.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ce,t(x,{modelValue:s.value.is_active,"onUpdate:modelValue":o[5]||(o[5]=e=>s.value.is_active=e),options:y.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[me,t(x,{modelValue:s.value.zone_id,"onUpdate:modelValue":o[6]||(o[6]=e=>s.value.zone_id=e),options:O.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[pe,t(x,{modelValue:s.value.price_template_id,"onUpdate:modelValue":o[7]||(o[7]=e=>s.value.price_template_id=e),options:k.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[fe,t(x,{modelValue:s.value.tags,"onUpdate:modelValue":o[8]||(o[8]=e=>s.value.tags=e),options:I.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ge,t(x,{modelValue:s.value.is_cms,"onUpdate:modelValue":o[9]||(o[9]=e=>s.value.is_cms=e),options:y.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),l("div",ve,[l("div",_e,[l("div",xe,[t(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[10]||(o[10]=e=>w())},{default:a(()=>[t(h(ee),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1}),t(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[11]||(o[11]=e=>Z())},{default:a(()=>[t(h(te),{class:"h-4 w-4","aria-hidden":"true"}),ye]),_:1})])]),l("div",be,[l("p",Ve,[ke,l("span",Ce,u(($=d.customers.meta.from)!=null?$:0),1),we,l("span",Le,u((A=d.customers.meta.to)!=null?A:0),1),Pe,l("span",Se,u(d.customers.meta.total),1),Be]),t(x,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":o[12]||(o[12]=e=>s.value.numberPerPage=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:w},null,8,["modelValue","options"])])])]),l("div",Ie,[l("div",Oe,[l("div",je,[l("table",$e,[l("thead",Ae,[l("tr",Ue,[t(g,null,{default:a(()=>[r(" # ")]),_:1}),t(g,null,{default:a(()=>[r(" ID ")]),_:1}),t(g,null,{default:a(()=>[r(" Vend ID ")]),_:1}),t(U,{modelName:"name",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[13]||(o[13]=e=>j("name"))},{default:a(()=>[r(" Customer ")]),_:1},8,["sortKey","sortBy"]),t(g,null,{default:a(()=>[r(" Label ")]),_:1}),t(g,null,{default:a(()=>[r(" Del Address ")]),_:1}),t(g,null,{default:a(()=>[r(" Del Postcode ")]),_:1}),t(g,null,{default:a(()=>[r(" Tags ")]),_:1}),t(g,null,{default:a(()=>[r(" Zone ")]),_:1}),t(g,null,{default:a(()=>[r(" Status ")]),_:1}),t(U,{modelName:"created_at",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[14]||(o[14]=e=>j("created_at"))},{default:a(()=>[r(" Created At ")]),_:1},8,["sortKey","sortBy"]),t(g,null,{default:a(()=>[r(" Action ")]),_:1})])]),l("tbody",Te,[(i(!0),m(P,null,D(d.customers.data,(e,p)=>(i(),m("tr",{key:e.id,class:"divide-x divide-gray-200"},[t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(u(d.customers.meta.from+p),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(u(e.ref_id),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(u(e.vend?e.vend.code:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-left"},{default:a(()=>[l("a",{class:W([e&&e.person_id?"text-blue-700":"text-purple-700"]),target:"_blank",href:e&&e.person_id?"//admin.happyice.com.sg/person/"+e.person_id+"/edit":e?"/customers/"+e.id+"/edit":"#"},[e.person_id&&(e.virtual_customer_code||e.virtual_customer_prefix)?(i(),m("span",Ne,[e.virtual_customer_code?(i(),m("span",ze,u(e.virtual_customer_code),1)):v("",!0),e.virtual_customer_prefix?(i(),m("span",Fe," ("+u(e.virtual_customer_prefix)+") ",1)):v("",!0),Ke])):(i(),m("span",Me,[e.code?(i(),m("span",Ge,[r(u(e.code)+" ",1),Ze])):v("",!0)])),r(" "+u(e.name),1)],10,De)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[e.person_id?(i(),m("div",Ee," From CMS ")):v("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-left"},{default:a(()=>[r(u(e.deliveryAddress?e.deliveryAddress.full_address:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(u(e.deliveryAddress?e.deliveryAddress.postcode:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-left"},{default:a(()=>[(i(!0),m(P,null,D(e.tags,R=>(i(),m("span",Re,u(R.name),1))),256))]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(u(e.zone?e.zone.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[e.is_active?(i(),m("div",Ye," Active ")):v("",!0),e.is_active?v("",!0):(i(),m("div",qe," Not Active "))]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(u(e.created_at),1)]),_:2},1032,["currentIndex","totalLength"]),t(f,{currentIndex:p,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[l("div",He,[t(h(T),{href:"/customers/"+e.id+"/edit"},{default:a(()=>[t(b,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-2 py-1 text-xs text-gray-800 flex space-x-1"},{default:a(()=>[t(h(le),{class:"w-4 h-4"}),Je]),_:1})]),_:2},1032,["href"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.customers.data.length?v("",!0):(i(),m("tr",Qe,Xe))])]),d.customers.data.length?(i(),N(H,{key:0,links:d.customers.links,meta:d.customers.meta},null,8,["links","meta"])):v("",!0)])])])]),V.value?(i(),N(q,{key:0,customer:F.value,type:G.value,showModal:V.value,onModalClose:E},null,8,["customer","type","showModal"])):v("",!0)]}),_:1})],64))}};export{xt as default};
