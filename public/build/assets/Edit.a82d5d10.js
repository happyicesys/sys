import{g as p,T as O,K as $,h as q,f as l,a as d,u,w as m,F as P,o as a,Z as G,b as e,d as _,t as c,l as i,e as V,n as y,k as A,i as H,c as Q,O as W}from"./app.e38e8891.js";import{_ as X}from"./Authenticated.2b161553.js";import{_ as v}from"./Button.46fd4c92.js";import"./main.1b96dfbe.js";import{_ as j}from"./FormInput.e86626bc.js";import{_ as C}from"./MultiSelect.f3f3b46f.js";import{r as F}from"./PlusCircleIcon.bcaf52d9.js";import{r as Y}from"./ArrowUturnLeftIcon.45d122e6.js";import{r as I}from"./CheckCircleIcon.2962e6ee.js";import{r as U}from"./BackspaceIcon.d5d84ce5.js";import"./open-closed.22813fed.js";import"./use-resolve-button-type.cf50c916.js";import"./RectangleStackIcon.7548c8fa.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.9ef3d7a2.js";const ee={class:"font-semibold text-xl text-gray-800 leading-tight"},te={key:0},se={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},oe={class:"mt-6 flex flex-col"},ae={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},le={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},re=["onSubmit"],de={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},ie={class:"sm:col-span-6"},ne={class:"sm:col-span-6"},ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),pe={class:"mt-1"},ue=["value"],me={class:"sm:col-span-6"},_e=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ve={class:"mt-1"},ge=["value"],fe={class:"sm:col-span-6"},xe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ye={class:"mt-1"},he=["value"],be={class:"sm:col-span-6"},we=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),ke={class:"mt-1"},Oe=["value"],Pe=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Delivery Platform Product(s) ")])])],-1),Ve={key:0},je={key:1},Ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Se={key:0,class:"text-sm text-red-600"},Me={key:2},De={key:3},Be=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),Ne={key:4,class:"sm:col-span-1"},$e=e("span",null," Add ",-1),Ae={key:5,class:"sm:col-span-6 flex flex-col mt-3"},Fe={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Ue={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Ee={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Te={class:"table-fixed min-w-full divide-y divide-gray-300"},Je=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Le={class:"bg-white"},Re={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ke={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ze={class:"flex justify-center"},qe=["src"],Ge={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},He={key:0},Qe={key:1,class:"break-words"},We={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Xe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ye={class:"whitespace-nowrap py-4 text-sm text-center"},Ie={key:0},et=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),tt=[et],st={key:6,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},ot=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"}," Vending Machine Binding ")])],-1),at=[ot],lt={key:7,class:"sm:col-span-5"},rt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),dt={key:0,class:"text-sm text-red-600"},it={key:8,class:"sm:col-span-1"},nt=e("span",null," Add ",-1),ct={key:9,class:"sm:col-span-6 flex flex-col mt-3"},pt={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},ut={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},mt={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},_t={class:"min-w-full divide-y divide-gray-300"},vt=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),gt={class:"bg-white"},ft={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},xt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},yt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left"},ht={key:0},bt=e("br",null,null,-1),wt={key:1},kt={class:"whitespace-nowrap py-4 text-sm text-center"},Ot={class:"sm:col-span-6"},Pt={class:"flex space-x-1 mt-5 justify-end"},Vt=e("span",null," Back ",-1),jt=e("span",null," Save ",-1),Rt={__name:"Edit",props:{categoryApiOptions:[Array,Object],deliveryProductMapping:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String},setup(S){const r=S,E=p([]),h=p([]),T=p([]),f=p([]),M=p([]),t=p(O(N()));p(!1);const x=$().props.auth.operatorCountry,b=p([]),w=p([]),J=p([]),D=p([]),B=p([]),k=p(""),L=$().props.auth.permissions;q(()=>{r.type=="create"?k.value="Create New":k.value="Edit",E.value=r.categoryApiOptions[0].categories.map(s=>({id:s.id,name:s.name,subCategories:s.subCategories})),h.value=[...r.operatorOptions.data.find(s=>s.id===r.deliveryProductMapping.data.operator_id).deliveryPlatformOperators.map(s=>({id:s.id,name:s.deliveryPlatform.name}))],b.value=[...r.operatorOptions.data.map(s=>({id:s.id,full_name:s.full_name}))],w.value=[...r.productMappingOptions[0].data.map(s=>({id:s.id,name:s.name}))],D.value=r.productOptions.data,t.value=r.deliveryProductMapping?O({...r.deliveryProductMapping.data,operator_id:b.value.find(s=>s.id===r.deliveryProductMapping.data.operator_id),operator_field:b.value.find(s=>s.id===r.deliveryProductMapping.data.operator_id).full_name,product_mapping_id:w.value.find(s=>s.id===r.deliveryProductMapping.data.product_mapping_id),product_mapping_field:w.value.find(s=>s.id===r.deliveryProductMapping.data.product_mapping_id).name,delivery_platform_operator_id:h.value.find(s=>s.id===r.deliveryProductMapping.data.delivery_platform_operator_id),delivery_platform_operator_field:h.value.find(s=>s.id===r.deliveryProductMapping.data.delivery_platform_operator_id).name}):O(N()),f.value=r.deliveryProductMapping?r.deliveryProductMapping.data.deliveryProductMappingItems:[],M.value=r.deliveryProductMapping?r.deliveryProductMapping.data.deliveryProductMappingVends:[],B.value=r.deliveryProductMapping?r.deliveryProductMapping.data.category_json.subCategories:[],console.log(JSON.parse(JSON.stringify(r.deliveryProductMapping.data)))});function N(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",sub_category_json:""}}function R(){J.value.map(function(s){return s.channel_code}).indexOf(t.value.channel_code)<0&&W.post("/delivery-product-mapping-items/delivery-product-mapping/"+t.value.id+"/store",{...t.value,product_id:t.value.product_id?t.value.product_id.id:null},{preserveState:!1,preserveScroll:!0,replace:!0})}function z(s){t.value.delete("/delivery-product-mapping-items/"+s.id,{preserveState:!1,replace:!0})}function K(){t.value.clearErrors(),t.value.transform(s=>({name:s.name})).post("/delivery-product-mappings/"+t.value.id+"/update",{preserveState:!0,replace:!0})}return(s,n)=>(a(),l(P,null,[d(u(G),{title:"Delivery Product Mapping"}),d(X,null,{header:m(()=>[e("h2",ee,[_(c(k.value)+" Delivery Product Mapping ",1),S.type=="update"?(a(),l("span",te,c(T.value.name),1)):i("",!0)])]),default:m(()=>[e("div",se,[e("div",oe,[e("div",ae,[e("div",le,[e("form",{onSubmit:V(K,["prevent"]),id:"submit"},[e("div",de,[e("div",ie,[d(j,{modelValue:t.value.name,"onUpdate:modelValue":n[0]||(n[0]=o=>t.value.name=o),error:t.value.errors.name},{default:m(()=>[_(" Name ")]),_:1},8,["modelValue","error"])]),e("div",ne,[ce,e("div",pe,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.operator_field},null,8,ue)])]),e("div",me,[_e,e("div",ve,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.delivery_platform_operator_field},null,8,ge)])]),e("div",fe,[xe,e("div",ye,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.category_json.name},null,8,he)])]),e("div",be,[we,e("div",ke,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.product_mapping_field},null,8,Oe)])]),Pe,t.value.id?(a(),l("div",Ve,[d(j,{modelValue:t.value.channel_code,"onUpdate:modelValue":n[1]||(n[1]=o=>t.value.channel_code=o),error:t.value.errors.channel_code,placeholderStr:"Channel ID"},{default:m(()=>[_(" Channel ID ")]),_:1},8,["modelValue","error"])])):i("",!0),t.value.id?(a(),l("div",je,[Ce,d(C,{modelValue:t.value.product_id,"onUpdate:modelValue":n[2]||(n[2]=o=>t.value.product_id=o),options:D.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(a(),l("div",Se,c(t.value.errors.product_id),1)):i("",!0)])):i("",!0),t.value.id?(a(),l("div",Me,[d(j,{modelValue:t.value.amount,"onUpdate:modelValue":n[3]||(n[3]=o=>t.value.amount=o),error:t.value.errors.amount,placeholderStr:"Platform Price"},{default:m(()=>[_(" Price ")]),_:1},8,["modelValue","error"])])):i("",!0),t.value.id?(a(),l("div",De,[Be,d(C,{modelValue:t.value.sub_category_json,"onUpdate:modelValue":n[4]||(n[4]=o=>t.value.sub_category_json=o),options:B.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):i("",!0),t.value.product_mapping_id?(a(),l("div",Ne,[d(v,{type:"button",onClick:n[5]||(n[5]=V(o=>R(),["prevent"])),class:y(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.channel_code||!t.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.channel_code||!t.value.product_id},{default:m(()=>[d(u(F),{class:"w-4 h-4"}),$e]),_:1},8,["class","disabled"])])):i("",!0),t.value.product_mapping_id?(a(),l("div",Ae,[e("div",Fe,[e("div",Ue,[e("div",Ee,[e("table",Te,[Je,e("tbody",Le,[(a(!0),l(P,null,A(f.value,(o,g)=>(a(),l("tr",{key:o.id,class:y(g%2===0?void 0:"bg-gray-50")},[e("td",Re,c(g+1),1),e("td",ze,c(o.channel_code),1),e("td",Ke,[e("div",Ze,[o.product&&o.product.thumbnail?(a(),l("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:o.product.thumbnail.full_url,alt:""},null,8,qe)):i("",!0)])]),e("td",Ge,[o.product.code?(a(),l("span",He,c(o.product.code),1)):i("",!0),o.product.name?(a(),l("span",Qe,c(o.product.name),1)):i("",!0)]),e("td",We,c(o.amount.toLocaleString(void 0,{minimumFractionDigits:u(x).is_currency_exponent_hidden?0:u(x).currency_exponent,maximumFractionDigits:u(x).is_currency_exponent_hidden?0:u(x).currency_exponent})),1),e("td",Xe,c(o.sub_category_json.name),1),e("td",Ye,[d(v,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:V(Z=>z(o),["prevent"])},{default:m(()=>[d(u(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),!f.value||!f.value.length?(a(),l("tr",Ie,tt)):i("",!0)])])])])])])):i("",!0),t.value.product_mapping_id?(a(),l("div",st,at)):i("",!0),t.value.product_mapping_id?(a(),l("div",lt,[rt,d(C,{modelValue:t.value.vend_id,"onUpdate:modelValue":n[6]||(n[6]=o=>t.value.vend_id=o),options:s.unbindedVendOptions,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.vend_id?(a(),l("div",dt,c(t.value.errors.vend_id),1)):i("",!0)])):i("",!0),t.value.product_mapping_id?(a(),l("div",it,[d(v,{type:"button",onClick:n[7]||(n[7]=o=>s.bindProductMappingItem()),class:y(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[t.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!t.value.vend_id},{default:m(()=>[d(u(F),{class:"w-4 h-4"}),nt]),_:1},8,["class","disabled"])])):i("",!0),t.value.product_mapping_id?(a(),l("div",ct,[e("div",pt,[e("div",ut,[e("div",mt,[e("table",_t,[vt,e("tbody",gt,[(a(!0),l(P,null,A(M.value,(o,g)=>(a(),l("tr",{key:o.id,class:y(g%2===0?void 0:"bg-gray-50")},[e("td",ft,c(g+1),1),e("td",xt,c(o.code),1),e("td",yt,[o.latestVendBinding&&o.latestVendBinding.customer?(a(),l("span",ht,[_(c(o.latestVendBinding.customer.code)+" ",1),bt,_(" "+c(o.latestVendBinding.customer.name),1)])):(a(),l("span",wt,c(o.name),1))]),e("td",kt,[d(v,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:Z=>s.unbindProductMappingItem(o)},{default:m(()=>[d(u(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128))])])])])])])):i("",!0)]),e("div",Ot,[e("div",Pt,[d(u(H),{href:"/delivery-product-mappings"},{default:m(()=>[d(v,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:m(()=>[d(u(Y),{class:"w-4 h-4"}),Vt]),_:1})]),_:1}),u(L).includes("update vends")?(a(),Q(v,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:m(()=>[d(u(I),{class:"w-4 h-4"}),jt]),_:1})):i("",!0)])])],40,re)])])])])]),_:1})],64))}};export{Rt as default};
