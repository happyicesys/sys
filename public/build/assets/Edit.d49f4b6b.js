import{g as c,T as w,K as S,h as R,f as l,a as d,u as p,w as u,F as D,o as r,Z as z,b as e,d as v,t as m,l as i,e as k,n as $,k as K,i as Z,c as q,O as G}from"./app.dcca0713.js";import{_ as H}from"./Authenticated.0693d95b.js";import{_ as g}from"./Button.17864e48.js";import"./main.30e3abf9.js";import{_ as O}from"./FormInput.da75a7d6.js";import{_ as N}from"./MultiSelect.e6caafc6.js";import{r as J}from"./PlusCircleIcon.eb67335d.js";import{r as Q}from"./ArrowUturnLeftIcon.220a071c.js";import{r as W}from"./CheckCircleIcon.2a8cd457.js";import{r as X}from"./BackspaceIcon.5e1e228c.js";import"./open-closed.b8ef908e.js";import"./use-resolve-button-type.6cad309e.js";import"./RectangleStackIcon.36e2d999.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.a6262e92.js";const Y={class:"font-semibold text-xl text-gray-800 leading-tight"},I={key:0},ee={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},te={class:"mt-6 flex flex-col"},oe={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},se={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},ae=["onSubmit"],re={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},le={class:"sm:col-span-6"},de={class:"sm:col-span-6"},ie=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),ne={class:"mt-1"},ce=["value"],pe={class:"sm:col-span-6"},ue=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),me={class:"mt-1"},_e=["value"],fe={class:"sm:col-span-6"},ve=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ge={class:"mt-1"},ye=["value"],xe={class:"sm:col-span-6"},he=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),be={class:"mt-1"},we=["value"],ke=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"},"Delivery Platform Product(s) ")])])],-1),Oe={key:0},Pe={key:1},je=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Ce={key:0,class:"text-sm text-red-600"},Ve={key:2},Me={key:3},Se=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),De={key:4,class:"sm:col-span-1"},$e=e("span",null," Add ",-1),Ne={key:5,class:"sm:col-span-6 flex flex-col mt-3"},Ae={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Be={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Fe={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Ue={class:"table-fixed min-w-full divide-y divide-gray-300"},Ee=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Te={class:"bg-white"},Le={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Re={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ke={class:"flex justify-center"},Ze=["src"],qe={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Ge={key:0},He={key:1,class:"break-words"},Je={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Qe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},We={class:"whitespace-nowrap py-4 text-sm text-center"},Xe={key:0},Ye=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Ie=[Ye],et={class:"sm:col-span-6"},tt={class:"flex space-x-1 mt-5 justify-end"},ot=e("span",null," Back ",-1),st=e("span",null," Save ",-1),xt={__name:"Edit",props:{categoryApiOptions:[Array,Object],deliveryProductMapping:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String},setup(P){const a=P,A=c([]),y=c([]),B=c([]),_=c([]),t=c(w(V()));c(!1);const f=S().props.auth.operatorCountry,x=c([]),h=c([]),F=c([]),j=c([]),C=c([]),b=c(""),U=S().props.auth.permissions;R(()=>{a.type=="create"?b.value="Create New":b.value="Edit",A.value=a.categoryApiOptions[0].categories.map(o=>({id:o.id,name:o.name,subCategories:o.subCategories})),y.value=[...a.operatorOptions.data.find(o=>o.id===a.deliveryProductMapping.data.operator_id).deliveryPlatformOperators.map(o=>({id:o.id,name:o.deliveryPlatform.name}))],x.value=[...a.operatorOptions.data.map(o=>({id:o.id,full_name:o.full_name}))],h.value=[...a.productMappingOptions[0].data.map(o=>({id:o.id,name:o.name}))],j.value=a.productOptions.data,t.value=a.deliveryProductMapping?w({...a.deliveryProductMapping.data,operator_id:x.value.find(o=>o.id===a.deliveryProductMapping.data.operator_id),operator_field:x.value.find(o=>o.id===a.deliveryProductMapping.data.operator_id).full_name,product_mapping_id:h.value.find(o=>o.id===a.deliveryProductMapping.data.product_mapping_id),product_mapping_field:h.value.find(o=>o.id===a.deliveryProductMapping.data.product_mapping_id).name,delivery_platform_operator_id:y.value.find(o=>o.id===a.deliveryProductMapping.data.delivery_platform_operator_id),delivery_platform_operator_field:y.value.find(o=>o.id===a.deliveryProductMapping.data.delivery_platform_operator_id).name}):w(V()),_.value=a.deliveryProductMapping?a.deliveryProductMapping.data.deliveryProductMappingItems:[],C.value=a.deliveryProductMapping?a.deliveryProductMapping.data.category_json.subCategories:[]});function V(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",sub_category_json:""}}function E(){F.value.map(function(o){return o.channel_code}).indexOf(t.value.channel_code)<0&&G.post("/delivery-product-mapping-items/delivery-product-mapping/"+t.value.id+"/store",{...t.value,product_id:t.value.product_id?t.value.product_id.id:null},{preserveState:!1,preserveScroll:!0,replace:!0})}function T(o){t.value.delete("/delivery-product-mapping-items/"+o.id,{preserveState:!1,replace:!0})}function L(){t.value.clearErrors(),t.value.transform(o=>({name:o.name})).post("/delivery-product-mappings/"+t.value.id+"/update",{preserveState:!0,replace:!0})}return(o,n)=>(r(),l(D,null,[d(p(z),{title:"Delivery Product Mapping"}),d(H,null,{header:u(()=>[e("h2",Y,[v(m(b.value)+" Delivery Product Mapping ",1),P.type=="update"?(r(),l("span",I,m(B.value.name),1)):i("",!0)])]),default:u(()=>[e("div",ee,[e("div",te,[e("div",oe,[e("div",se,[e("form",{onSubmit:k(L,["prevent"]),id:"submit"},[e("div",re,[e("div",le,[d(O,{modelValue:t.value.name,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value.name=s),error:t.value.errors.name},{default:u(()=>[v(" Name ")]),_:1},8,["modelValue","error"])]),e("div",de,[ie,e("div",ne,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.operator_field},null,8,ce)])]),e("div",pe,[ue,e("div",me,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.delivery_platform_operator_field},null,8,_e)])]),e("div",fe,[ve,e("div",ge,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.category_json.name},null,8,ye)])]),e("div",xe,[he,e("div",be,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.product_mapping_field},null,8,we)])]),ke,t.value.id?(r(),l("div",Oe,[d(O,{modelValue:t.value.channel_code,"onUpdate:modelValue":n[1]||(n[1]=s=>t.value.channel_code=s),error:t.value.errors.channel_code,placeholderStr:"Channel ID"},{default:u(()=>[v(" Channel ID ")]),_:1},8,["modelValue","error"])])):i("",!0),t.value.id?(r(),l("div",Pe,[je,d(N,{modelValue:t.value.product_id,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value.product_id=s),options:j.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(r(),l("div",Ce,m(t.value.errors.product_id),1)):i("",!0)])):i("",!0),t.value.id?(r(),l("div",Ve,[d(O,{modelValue:t.value.amount,"onUpdate:modelValue":n[3]||(n[3]=s=>t.value.amount=s),error:t.value.errors.amount,placeholderStr:"Platform Price"},{default:u(()=>[v(" Price ")]),_:1},8,["modelValue","error"])])):i("",!0),t.value.id?(r(),l("div",Me,[Se,d(N,{modelValue:t.value.sub_category_json,"onUpdate:modelValue":n[4]||(n[4]=s=>t.value.sub_category_json=s),options:C.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):i("",!0),t.value.product_mapping_id?(r(),l("div",De,[d(g,{type:"button",onClick:n[5]||(n[5]=k(s=>E(),["prevent"])),class:$(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.channel_code||!t.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.channel_code||!t.value.product_id},{default:u(()=>[d(p(J),{class:"w-4 h-4"}),$e]),_:1},8,["class","disabled"])])):i("",!0),t.value.product_mapping_id?(r(),l("div",Ne,[e("div",Ae,[e("div",Be,[e("div",Fe,[e("table",Ue,[Ee,e("tbody",Te,[(r(!0),l(D,null,K(_.value,(s,M)=>(r(),l("tr",{key:s.id,class:$(M%2===0?void 0:"bg-gray-50")},[e("td",Le,m(M+1),1),e("td",Re,m(s.channel_code),1),e("td",ze,[e("div",Ke,[s.product&&s.product.thumbnail?(r(),l("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:s.product.thumbnail.full_url,alt:""},null,8,Ze)):i("",!0)])]),e("td",qe,[s.product.code?(r(),l("span",Ge,m(s.product.code),1)):i("",!0),s.product.name?(r(),l("span",He,m(s.product.name),1)):i("",!0)]),e("td",Je,m(s.amount.toLocaleString(void 0,{minimumFractionDigits:p(f).is_currency_exponent_hidden?0:p(f).currency_exponent,maximumFractionDigits:p(f).is_currency_exponent_hidden?0:p(f).currency_exponent})),1),e("td",Qe,m(s.sub_category_json.name),1),e("td",We,[d(g,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:k(at=>T(s),["prevent"])},{default:u(()=>[d(p(X),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),!_.value||!_.value.length?(r(),l("tr",Xe,Ie)):i("",!0)])])])])])])):i("",!0)]),e("div",et,[e("div",tt,[d(p(Z),{href:"/delivery-product-mappings"},{default:u(()=>[d(g,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:u(()=>[d(p(Q),{class:"w-4 h-4"}),ot]),_:1})]),_:1}),p(U).includes("update vends")?(r(),q(g,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[d(p(W),{class:"w-4 h-4"}),st]),_:1})):i("",!0)])])],40,ae)])])])])]),_:1})],64))}};export{xt as default};
