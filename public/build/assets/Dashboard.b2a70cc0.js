import{g as i,Q as z,S as ge,f as n,a as y,u as c,w as D,F as f,o as r,Z as ve,b as e,c as G,l as b,M as H,d as S,e as xe,t as m,k as x,O as Q,n as C,U as be}from"./app.f3062371.js";import{_ as we}from"./Authenticated.180eb514.js";import{_ as F}from"./Button.59fe63df.js";import{_ as J}from"./Graph.1203e02b.js";import{_ as Y}from"./MultiSelect.0423e214.js";import{_ as q,r as De}from"./SearchInput.8d86133b.js";import{r as ke,a as Se}from"./ChevronDoubleUpIcon.02cb69d9.js";import{r as Oe}from"./BackspaceIcon.dbd1680b.js";import"./keyboard.bb7c7ab3.js";import"./use-resolve-button-type.6ac6d159.js";import"./RectangleStackIcon.7fd022bb.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.9057c9c8.js";const Ge=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),Ce={class:"p-3"},Ne={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},Ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},je={class:"p-4"},Me=e("span",null," Show Filters ",-1),Be={key:0,class:"p-4 mx-2"},Te={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Fe=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),Je={key:0},$e=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),Ae={key:1},Le=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),Ke=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),Re={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},Ue={class:"mt-3"},Pe={class:"flex space-x-1"},Ze=e("span",null," Search ",-1),Ee=e("span",null," Reset ",-1),ze=e("span",null," Hide Filters ",-1),He={class:"p-1 py-4 bg-white border-b border-gray-200 flex flex-col space-y-6"},Qe={class:"text-center p-2"},Ye={class:"flex flex-col md:flex-row pt-5"},qe={class:"md:basis-1/3 m-1"},We={class:"md:basis-2/3 my-1 mx-4 px-4"},Xe={class:"text-sm flex justify-between"},Ie=e("div",null," Past 30 Days - Top 10 Best Performance ",-1),et={class:"mt-2 flow-root"},tt={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},st={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},at={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},ot={class:"min-w-full divide-y divide-gray-300"},rt={class:"bg-gray-50"},lt=e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # ",-1),nt=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine ",-1),it={scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"},ct=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ",-1),dt={class:"divide-y divide-gray-200 bg-white"},ut={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},pt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},mt={key:0},yt=e("br",null,null,-1),ht={key:1},_t=e("br",null,null,-1),ft={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},gt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},vt={key:0},xt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),bt=[xt],wt={class:"pt-5"},Dt={class:"pt-5"},kt={key:0,class:"pt-5 my-1 mx-4 px-4"},St=e("p",{class:"text-sm flex justify-between"},[e("div",null," Monthly Analytics By Criteria ")],-1),Ot={class:"pb-3 mb-2"},Gt={class:"sm:hidden"},Ct=e("label",{for:"tabs",class:"sr-only"},"Select a tab",-1),Nt=["value","selected"],Vt={class:"hidden sm:block"},jt={class:"border-b border-gray-200"},Mt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Bt=["onClick"],Tt={class:"mt-2 flow-root"},Ft={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Jt={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},$t={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},At={class:"min-w-full divide-y divide-gray-300"},Lt={class:"bg-gray-50"},Kt=e("th",{scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"}," Name ",-1),Rt=e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"},null,-1),Ut={scope:"col",class:"px-3 py-2 text-center text-sm font-semibold text-gray-900"},Pt={class:"divide-y divide-gray-200 bg-white"},Zt={rowspan:"3",class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 row-span-3"},Et=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Daily Sales/ VM ",-1),zt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Ht=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Machine Count ",-1),Qt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Yt=e("td",{class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-600 sm:pl-6 row-span-3"}," Total Sales ",-1),qt={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600 text-right"},Wt={key:0},Xt=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),It=[Xt],ps={__name:"Dashboard",props:{activeMachineGraphData:Object,categories:Object,categoryGroups:Object,dayGraphData:Object,locationTypeOptions:Object,monthGraphData:Object,months:Object,monthsByModel:Object,operatorOptions:Object,productGraphData:Object,performerGraphData:Object,vendCount:Number},setup(k){const h=k,d=i({categories:[],categoryGroups:[],codes:"",customer_code:"",customer_name:"",day_date_from:"",day_date_to:"",locationType:"",operator:"",monthlyTypeName:"location-type"}),W=i([]),ie=i([]),X=i(0),I=i(0),ee=i(0),te=i(0),ce=()=>{X.value+=1},de=()=>{I.value+=1},ue=()=>{ee.value+=1},pe=()=>{te.value+=1},$=i([]),se=z().props.auth.operator,u=z().props.auth.operatorCountry,A=i([]),N=z().props.auth.permissions,V=i(!1),L=i([{name:"Location Type",slug:"location-type",current:!0,href:"#"},{name:"Category",slug:"category",current:!1,href:"#"},{name:"Operator",slug:"operator",current:!1,href:"#"}]),ae=i([]),j=i([]),K=i([]),me=i({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales("+u.currency_symbol+")"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days"},legend:{reverse:!0}}}),oe=i([]),M=i([]),R=i([]),ye=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales("+u.currency_symbol+")"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months"},legend:{reverse:!0}}}),B=i([]),U=i([]),P=i([]),he=i({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers"}}}),T=i([]),re=i([]),Z=i([]),E=i([]),_e=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Count(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Number of Active Vending Machine in Market, by Month"}}});ge(()=>{W.value=h.categories.data.map(s=>({id:s.id,name:s.name})),ie.value=h.categoryGroups.data.map(s=>({id:s.id,name:s.name})),$.value=[{id:"all",name:"All"},...h.locationTypeOptions.data.map(s=>({id:s.id,name:s.name}))],A.value=[{id:"all",name:"All"},...h.operatorOptions.data.map(s=>({id:s.id,name:s.name}))],d.value.locationType=$.value[0],d.value.operator=A.value.find(s=>s.id==se.id),ne()});function p(s,l){var t=parseInt(s.slice(1,3),16),g=parseInt(s.slice(3,5),16),v=parseInt(s.slice(5,7),16);return"rgba("+t+", "+g+", "+v+", "+l+")"}function O(){Q.visit(route("dashboard",{...d.value,categories:d.value.categories.map(s=>s.id),categoryGroups:d.value.categoryGroups.map(s=>s.id),location_type_id:d.value.locationType.id,operator_id:d.value.operator.id}),{only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0,replace:!0,onSuccess:s=>{Q.reload({only:["activeMachineGraphData","dayGraphData","monthGraphData","monthsByModel","productGraphData","performerGraphData","vendCount"],preserveState:!0,preserveScroll:!0}),ne()}})}function le(s){L.value.forEach(l=>{l.current=!1}),s.current=!0,d.value.monthlyTypeName=s.slug,O()}function fe(){Q.get("/dashboard",{},{preserveState:!1,preserveScroll:!0})}function ne(){re.value=[],Z.value=[],E.value=[],ae.value=[],j.value=[],K.value=[],oe.value=[],M.value=[],R.value=[],B.value=[],U.value=[],P.value=[];let s=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],l=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];ae.value=JSON.parse(JSON.stringify(h.dayGraphData));let t=[];t=_.groupBy(JSON.parse(JSON.stringify(h.dayGraphData)).data,"month_name"),Object.keys(t).forEach((o,a)=>{j.value.push({label:o+" (#)",data:t[o].map(w=>w.count),backgroundColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),borderColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),yAxisID:"y1",type:"line",order:1}),j.value.push({label:o+" ("+u.currency_symbol+")",data:t[o].map(w=>w.amount),backgroundColor:a%2==0?p(s[a],.2):p(s[a],1),borderColor:a%2==0?p(s[a],.2):p(s[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=31;o++)K.value.push(o);oe.value=JSON.parse(JSON.stringify(h.monthGraphData));let g=[];g=JSON.parse(JSON.stringify(h.monthGraphData)),Object.keys(g).forEach((o,a)=>{M.value.push({label:o+" (#)",data:Object.values(g[o]).map(w=>w.count),backgroundColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),borderColor:a%2==0?p(s[a+2],.2):p(s[a+2],.9),yAxisID:"y1",type:"line",order:1}),M.value.push({label:o+" ("+u.currency_symbol+")",data:Object.values(g[o]).map(w=>w.amount),backgroundColor:a%2==0?p(s[a],.2):p(s[a],1),borderColor:a%2==0?p(s[a],.2):p(s[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=12;o++)R.value.push(o);B.value=JSON.parse(JSON.stringify(h.productGraphData)),U.value.push({label:"Sales",data:B.value.data.map(o=>o.count),backgroundColor:l}),P.value=B.value.data.map(o=>o.product?o.product.code+" - "+o.product.name:null),T.value=JSON.parse(JSON.stringify(h.performerGraphData)),re.value=JSON.parse(JSON.stringify(h.activeMachineGraphData));let v=[];v=JSON.parse(JSON.stringify(h.activeMachineGraphData)),Object.keys(v).forEach((o,a)=>{Z.value.push({label:o+" (#)",data:Object.values(v[o]).map(w=>w.count),backgroundColor:a%2==0?p(s[a],.2):p(s[a],.9),borderColor:a%2==0?p(s[a],.2):p(s[a],.9),type:"line"})});for(let o=1;o<=12;o++)E.value.push(o);ce(),de(),ue(),pe()}return(s,l)=>(r(),n(f,null,[y(c(ve),{title:"Dashboard"}),y(we,null,{header:D(()=>[Ge]),default:D(()=>[e("div",Ce,[e("div",Ne,[e("div",Ve,[e("div",je,[!V.value&&c(N).includes("admin-access vends")?(r(),G(F,{key:0,class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-200 px-4 py-3 md:px-4 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[0]||(l[0]=t=>V.value=!0)},{default:D(()=>[y(c(ke),{class:"h-4 w-4","aria-hidden":"true"}),Me]),_:1})):b("",!0)]),V.value?(r(),n("div",Be,[e("div",Te,[y(q,{placeholderStr:"Vend ID",modelValue:d.value.codes,"onUpdate:modelValue":l[1]||(l[1]=t=>d.value.codes=t),onKeyup:l[2]||(l[2]=H(t=>O(),["enter"]))},{default:D(()=>[S(" Vend ID "),Fe]),_:1},8,["modelValue"]),y(q,{placeholderStr:"Cust ID",modelValue:d.value.customer_code,"onUpdate:modelValue":l[3]||(l[3]=t=>d.value.customer_code=t),onKeyup:l[4]||(l[4]=H(t=>O(),["enter"]))},{default:D(()=>[S(" Cust ID ")]),_:1},8,["modelValue"]),y(q,{placeholderStr:"Cust Name",modelValue:d.value.customer_name,"onUpdate:modelValue":l[5]||(l[5]=t=>d.value.customer_name=t),onKeyup:l[6]||(l[6]=H(t=>O(),["enter"]))},{default:D(()=>[S(" Cust Name ")]),_:1},8,["modelValue"]),c(N).includes("admin-access vends")?(r(),n("div",Je,[$e,y(Y,{modelValue:d.value.categories,"onUpdate:modelValue":l[7]||(l[7]=t=>d.value.categories=t),options:W.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),c(N).includes("admin-access vends")?(r(),n("div",Ae,[Le,y(Y,{modelValue:d.value.operator,"onUpdate:modelValue":l[8]||(l[8]=t=>d.value.operator=t),options:A.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),e("div",null,[Ke,y(Y,{modelValue:d.value.locationType,"onUpdate:modelValue":l[9]||(l[9]=t=>d.value.locationType=t),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",Re,[e("div",Ue,[e("div",Pe,[y(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[10]||(l[10]=xe(t=>O(),["prevent"]))},{default:D(()=>[y(c(De),{class:"h-4 w-4","aria-hidden":"true"}),Ze]),_:1}),y(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[11]||(l[11]=t=>fe())},{default:D(()=>[y(c(Oe),{class:"h-4 w-4","aria-hidden":"true"}),Ee]),_:1}),y(F,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[12]||(l[12]=t=>V.value=!1)},{default:D(()=>[y(c(Se),{class:"h-4 w-4","aria-hidden":"true"}),ze]),_:1})])])])])):b("",!0),e("div",He,[e("p",Qe,m(d.value&&d.value.operator?d.value.operator.name:c(se).name),1),(r(),G(J,{key:X.value,type:"scatter",labels:K.value,datasets:j.value,options:me.value},null,8,["labels","datasets","options"])),e("div",Ye,[e("div",qe,[(r(),G(J,{key:I.value,type:"pie",labels:P.value,datasets:U.value,options:he.value},null,8,["labels","datasets","options"]))]),e("div",We,[e("p",Xe,[Ie,e("div",null," Based on "+m(k.vendCount)+" active machine(s) ",1)]),e("div",et,[e("div",tt,[e("div",st,[e("div",at,[e("table",ot,[e("thead",rt,[e("tr",null,[lt,nt,e("th",it," Amount("+m(c(u).currency_symbol)+") ",1),ct])]),e("tbody",dt,[(r(!0),n(f,null,x(T.value.data,(t,g)=>(r(),n("tr",{key:t.id},[e("td",ut,m(g+1),1),e("td",pt,[t.customer?(r(),n("span",mt,[S(m(t.customer.code)+" ",1),yt,S(" "+m(t.customer.name),1)])):(r(),n("span",ht,[S(m(t.code)+" ",1),_t,S(" "+m(t.name),1)]))]),e("td",ft,m(t.amount.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),1),e("td",gt,m(t.count),1)]))),128)),T.value.data.length?b("",!0):(r(),n("tr",vt,bt))])])])])])])])]),e("div",wt,[(r(),G(J,{key:ee.value,type:"scatter",labels:R.value,datasets:M.value,options:ye.value},null,8,["labels","datasets","options"]))]),e("div",Dt,[(r(),G(J,{key:te.value,type:"scatter",labels:E.value,datasets:Z.value,options:_e.value},null,8,["labels","datasets","options"]))]),c(N).includes("admin-access analytics")?(r(),n("div",kt,[St,e("div",Ot,[e("div",Gt,[Ct,e("select",{id:"tabs",name:"tabs",class:"block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm",onChange:l[13]||(l[13]=t=>le(t))},[(r(!0),n(f,null,x(L.value,t=>(r(),n("option",{key:t,value:t.href,selected:t.current},m(t.name),9,Nt))),128))],32)]),e("div",Vt,[e("div",jt,[e("nav",Mt,[(r(!0),n(f,null,x(L.value,t=>(r(),n("span",{key:t.name,class:C(["hover:cursor-pointer",[t.current?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-200 hover:text-gray-700","flex whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]]),onClick:g=>le(t)},m(t.name),11,Bt))),128))])])])]),e("div",Tt,[e("div",Ft,[e("div",Jt,[e("div",$t,[e("table",At,[e("thead",Lt,[e("tr",null,[Kt,Rt,(r(!0),n(f,null,x(k.months.data,t=>(r(),n("th",Ut,[e("span",{class:C([t.number==c(be)().format("M")?"bg-yellow-300 rounded p-2":""])},m(t.short_name),3)]))),256))])]),(r(!0),n(f,null,x(k.monthsByModel,(t,g)=>(r(),n("tbody",Pt,[e("tr",null,[e("td",Zt,m(g),1),Et,(r(!0),n(f,null,x(k.months.data,v=>(r(),n("td",zt,[(r(!0),n(f,null,x(t,(o,a)=>(r(),n("span",null,[v.number==a?(r(),n("span",{key:0,class:C([o.current?"font-bold":"font-medium",t[a-1]&&t[a-1].average<o.average?"text-green-600":t[a-1]?"text-red-600":""])},m(o.average.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),3)):b("",!0)]))),256))]))),256))]),e("tr",null,[Ht,(r(!0),n(f,null,x(k.months.data,v=>(r(),n("td",Qt,[(r(!0),n(f,null,x(t,(o,a)=>(r(),n("span",null,[v.number==a?(r(),n("span",{key:0,class:C([o.current?"font-bold":"font-medium"])},m(o.vend_count.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),3)):b("",!0)]))),256))]))),256))]),e("tr",null,[Yt,(r(!0),n(f,null,x(k.months.data,v=>(r(),n("td",qt,[(r(!0),n(f,null,x(t,(o,a)=>(r(),n("span",null,[v.number==a?(r(),n("span",{key:0,class:C([o.current?"font-bold":"font-medium"])},m(o.amount.toLocaleString(void 0,{minimumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent,maximumFractionDigits:c(u).is_currency_exponent_hidden?0:c(u).currency_exponent})),3)):b("",!0)]))),256))]))),256))]),T.value.data.length?b("",!0):(r(),n("tr",Wt,It))]))),256))])])])])])])):b("",!0)])])])])]),_:1})],64))}};export{ps as default};
