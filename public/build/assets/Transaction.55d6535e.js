import{_ as O}from"./Authenticated.6e746a9b.js";import{_ as M}from"./Button.e8e1b8cd.js";import{d as I}from"./main.f910ae89.js";import{o as f,g,d as e,r as U,a as t,b as x,a2 as k,j as A,i as _,w as o,F as w,H as j,t as i,m as E,p as L,c as F,f as d,J as S}from"./app.2287fc35.js";import{r as N,a as K,T as m,_ as H,b as R,c as u}from"./TableHeadSort.f0b0e858.js";import{_ as v}from"./MultiSelect.4a64ae74.js";import"./open-closed.8cb1004c.js";import"./use-resolve-button-type.7ea9563e.js";import"./RectangleStackIcon.038b8d49.js";import"./_plugin-vue_export-helper.cdc0426e.js";const J={for:"text",class:"block text-sm font-medium text-gray-700"},Y={class:"mt-1"},T={__name:"DatePicker",props:{modelValue:[Date,String],minDate:[Date,String],maxDate:[Date,String],enableTimePicker:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:p}){function a(h){p("update:modelValue",k(h).format("Y-M-D"))}return(h,y)=>(f(),g("div",null,[e("label",J,[U(h.$slots,"default")]),e("div",Y,[t(x(I),{modelValue:n.modelValue,"onUpdate:modelValue":a,format:"yyyy-MM-dd",clearable:!1,monthChangeOnScroll:!1,autoApply:"",closeOnAutoApply:!0,minDate:n.minDate,maxDate:n.maxDate,enableTimePicker:n.enableTimePicker},null,8,["modelValue","minDate","maxDate","enableTimePicker"])])]))}},q=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (Transactions) ",-1),z={class:"m-2 sm:mx-5 sm:my-3 px-2 sm:px-4 lg:px-6"},G={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-5 px-3 md:px-6 py-6"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},W={class:"col-span-5 md:col-span-1"},X=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Code ",-1),Z={class:"col-span-5 md:col-span-1"},ee=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),te={class:"col-span-5 md:col-span-1"},ae=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Pay Method ",-1),se={class:"col-span-5 md:col-span-1"},ne=d(" From "),oe={class:"col-span-5 md:col-span-1"},le=d(" To "),de={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},re={class:"mt-3"},ie={class:"flex space-x-1"},ce=e("span",null," Search ",-1),ue=e("span",null," Reset ",-1),me={class:"flex flex-col space-y-2"},he={class:"text-sm text-gray-700 leading-5 flex space-x-1"},fe=e("span",null,"Showing",-1),pe={class:"font-medium"},_e=e("span",null,"to",-1),ge={class:"font-medium"},ve=e("span",null,"of",-1),xe={class:"font-medium"},ye=e("span",null,"results",-1),be={class:"mt-6 flex flex-col"},Ve={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Pe={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},ke={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ce={class:"bg-gray-100"},De={class:"divide-x divide-gray-200"},Me=d(" # "),we=d(" DateTime "),Le=d(" Code "),Se=d(" Channel "),Te=d(" Amount "),$e=d(" Pay Method "),Be=d(" Channels Error "),Oe=d(" Order ID "),Ie={class:"bg-white"},Ue={key:0},Ae=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),je=[Ae],Ge={__name:"Transaction",props:{paymentMethods:Object,vends:Object,vendTransactions:Object,vendChannelErrors:Object},setup(n){const p=n;A(()=>{h.value=p.vends.data.map(r=>({id:r.id,code:r.code})),y.value=p.vendChannelErrors.data.map(r=>({id:r.id,desc:r.desc})),b.value=[{id:"",name:"All"},...p.paymentMethods.data.map(r=>({id:r.id,name:r.name}))],V.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],a.value.numberPerPage=V.value[0],a.value.paymentMethod=b.value[0]});const a=_({codes:[],errors:[],paymentMethod:"",date_from:k().startOf("month").toDate(),date_to:k().toDate(),sortKey:"",sortBy:!0,numberPerPage:100}),h=_([]),y=_([]),b=_([]),V=_([]);function P(){S.Inertia.get("/vends/transactions",{...a.value,codes:a.value.codes.map(r=>r.id),errors:a.value.errors.map(r=>r.id),paymentMethod:a.value.paymentMethod.id,numberPerPage:a.value.numberPerPage.id},{preserveState:!0,replace:!0})}function $(){S.Inertia.get("/vends/transactions")}function B(r){a.value.sortKey=r,a.value.sortBy=!a.value.sortBy,P()}return(r,l)=>(f(),g(w,null,[t(x(j),{title:"VM Transactions"}),t(O,null,{header:o(()=>[q]),default:o(()=>{var C,D;return[e("div",z,[e("div",G,[e("div",Q,[e("div",W,[X,t(v,{modelValue:a.value.codes,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value.codes=s),options:h.value,valueProp:"id",label:"code",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",Z,[ee,t(v,{modelValue:a.value.errors,"onUpdate:modelValue":l[1]||(l[1]=s=>a.value.errors=s),options:y.value,valueProp:"id",label:"desc",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",te,[ae,t(v,{modelValue:a.value.paymentMethod,"onUpdate:modelValue":l[2]||(l[2]=s=>a.value.paymentMethod=s),options:b.value,valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",se,[t(T,{modelValue:a.value.date_from,"onUpdate:modelValue":l[3]||(l[3]=s=>a.value.date_from=s),class:"col-span-5 md:col-span-1"},{default:o(()=>[ne]),_:1},8,["modelValue"])]),e("div",oe,[t(T,{modelValue:a.value.date_to,"onUpdate:modelValue":l[4]||(l[4]=s=>a.value.date_to=s),minDate:a.value.date_from,class:"col-span-5 md:col-span-1"},{default:o(()=>[le]),_:1},8,["modelValue","minDate"])])]),e("div",de,[e("div",re,[e("div",ie,[t(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[5]||(l[5]=s=>P())},{default:o(()=>[t(x(N),{class:"h-4 w-4","aria-hidden":"true"}),ce]),_:1}),t(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[6]||(l[6]=s=>$())},{default:o(()=>[t(x(K),{class:"h-4 w-4","aria-hidden":"true"}),ue]),_:1})])]),e("div",me,[e("p",he,[fe,e("span",pe,i((C=n.vendTransactions.meta.from)!=null?C:0),1),_e,e("span",ge,i((D=n.vendTransactions.meta.to)!=null?D:0),1),ve,e("span",xe,i(n.vendTransactions.meta.total),1),ye]),t(v,{modelValue:a.value.numberPerPage,"onUpdate:modelValue":l[7]||(l[7]=s=>a.value.numberPerPage=s),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:P},null,8,["modelValue","options"])])])]),e("div",be,[e("div",Ve,[e("div",Pe,[e("table",ke,[e("thead",Ce,[e("tr",De,[t(m,null,{default:o(()=>[Me]),_:1}),t(H,{modelName:"transaction_datetime",sortKey:a.value.sortKey,sortBy:a.value.sortBy,onSortTable:l[8]||(l[8]=s=>B("transaction_datetime"))},{default:o(()=>[we]),_:1},8,["sortKey","sortBy"]),t(m,null,{default:o(()=>[Le]),_:1}),t(m,null,{default:o(()=>[Se]),_:1}),t(m,null,{default:o(()=>[Te]),_:1}),t(m,null,{default:o(()=>[$e]),_:1}),t(m,null,{default:o(()=>[Be]),_:1}),t(m,null,{default:o(()=>[Oe]),_:1})])]),e("tbody",Ie,[(f(!0),g(w,null,E(n.vendTransactions.data,(s,c)=>(f(),g("tr",{key:s.id,class:"divide-x divide-gray-200"},[t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:o(()=>[d(i(n.vendTransactions.meta.from+c),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:o(()=>[d(i(s.transaction_datetime),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:o(()=>[d(i(s.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:o(()=>[d(i(s.vendChannel.code),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-right"},{default:o(()=>[d(i(s.amount),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:o(()=>[d(i(s.paymentMethod?s.paymentMethod.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-left"},{default:o(()=>[d(i(s.vend_channel_error_desc),1)]),_:2},1032,["currentIndex","totalLength"]),t(u,{currentIndex:c,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:o(()=>[d(i(s.order_id),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),n.vendTransactions.data.length?L("",!0):(f(),g("tr",Ue,je))])]),n.vendTransactions.data.length?(f(),F(R,{key:0,links:n.vendTransactions.links,meta:n.vendTransactions.meta},null,8,["links","meta"])):L("",!0)])])])])]}),_:1})],64))}};export{Ge as default};
