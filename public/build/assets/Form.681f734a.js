import{g as n,T as P,K as k,h as j,f as c,a as r,u as d,w as a,F as w,o as m,Z as B,b as t,d as y,t as g,l as _,e as N,i as M,c as D,O as $}from"./app.ec18ef6a.js";import{_ as F}from"./Authenticated.28390677.js";import{_ as x}from"./Button.970da128.js";import"./main.9b8d1456.js";import{_ as C}from"./FormInput.87616010.js";import{_ as h}from"./MultiSelect.3cb2fcdc.js";import{r as E}from"./ArrowUturnLeftIcon.5408ee2d.js";import{r as U}from"./CheckCircleIcon.13add622.js";import"./open-closed.21ff182f.js";import"./use-resolve-button-type.5c16f99c.js";import"./RectangleStackIcon.8d6c2b45.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.56960726.js";const A={class:"font-semibold text-xl text-gray-800 leading-tight"},T={key:0},I={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},K={class:"mt-6 flex flex-col"},Z={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},q={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},z=["onSubmit"],G={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},H={class:"sm:col-span-6"},J={class:"sm:col-span-6"},L=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),Q={key:0,class:"sm:col-span-6"},R=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),W={class:"sm:col-span-6"},X={class:"flex space-x-1 mt-5 justify-end"},Y=t("span",null," Back ",-1),ee=t("span",null," Save ",-1),ce={__name:"Form",props:{deliveryPlatformOperators:Object,deliveryProductMappings:Object,operatorOptions:Object,categoryApiOptions:[Array,Object],type:String},setup(f){const l=f,p=n([]),o=n(P(O()));n(!1);const v=n([]),u=n(""),b=k().props.auth.permissions;j(()=>{l.type=="create"?u.value="Create New":u.value="Edit",v.value=[...l.operatorOptions.data.map(e=>({id:e.id,full_name:e.full_name}))]});function O(){return{id:"",name:"",operator_id:"",delivery_platform_operator_id:"",category_json:""}}function S(){p.value=[],$.reload({only:["deliveryPlatformOperators"],data:{operator_id:o.value.operator_id.id},replace:!0,preserveState:!0}),p.value=[...l.deliveryPlatformOperators.data.map(e=>({id:e.id,name:e.deliveryPlatform.name}))]}function V(){o.value.clearErrors(),l.type==="create"&&o.value.transform(e=>({...e,customer_id:e.customer_id?e.customer_id.id:null,operator_id:e.operator_id?e.operator_id.id:null})).post("/vends/create",{preserveState:!0,replace:!0,resetOnSuccess:!0}),l.type==="update"&&o.value.transform(e=>({...e,customer_id:e.customer_id?e.customer_id.id:null,operator_id:e.operator_id?e.operator_id.id:null})).post("/vends/"+o.value.id+"/update",{preserveState:!0,replace:!0})}return(e,s)=>(m(),c(w,null,[r(d(B),{title:"Delivery Product Mapping"}),r(F,null,{header:a(()=>[t("h2",A,[y(g(u.value)+" Delivery Product Mapping ",1),f.type=="update"?(m(),c("span",T,g(e.deliveryProductMapping.name),1)):_("",!0)])]),default:a(()=>[t("div",I,[t("div",K,[t("div",Z,[t("div",q,[t("form",{onSubmit:N(V,["prevent"]),id:"submit"},[t("div",G,[t("div",H,[r(C,{modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value.name=i),error:o.value.errors.name},{default:a(()=>[y(" Name ")]),_:1},8,["modelValue","error"])]),t("div",J,[L,r(h,{modelValue:o.value.operator_id,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value.operator_id=i),options:v.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:S},null,8,["modelValue","options"])]),o.value.operator_id&&p.value.length?(m(),c("div",Q,[R,r(h,{modelValue:o.value.delivery_platform_operator_id,"onUpdate:modelValue":s[2]||(s[2]=i=>o.value.delivery_platform_operator_id=i),options:p.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):_("",!0)]),t("div",W,[t("div",X,[r(d(M),{href:"/settings"},{default:a(()=>[r(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:a(()=>[r(d(E),{class:"w-4 h-4"}),Y]),_:1})]),_:1}),d(b).includes("update vends")?(m(),D(x,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:a(()=>[r(d(U),{class:"w-4 h-4"}),ee]),_:1})):_("",!0)])])],40,z)])])])])]),_:1})],64))}};export{ce as default};
