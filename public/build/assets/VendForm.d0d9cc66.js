import{g as h,T as y,h as O,c as j,a as i,w as u,p as P,o,b as e,f as a,l as m,t as l,k as w,F as k,n as C,u as _,e as V,d as f}from"./app.71d02280.js";import{_ as x}from"./Button.ecda21ce.js";import{_ as F}from"./Modal.41e5a517.js";import{_ as D}from"./MultiSelect.90eb7951.js";import{r as J}from"./PlusCircleIcon.947cc350.js";import{r as T}from"./ArrowUturnLeftIcon.3885c7e4.js";import{r as A}from"./CheckCircleIcon.6787e4d0.js";import{r as E}from"./BackspaceIcon.fe55ab6d.js";import"./keyboard.985538e7.js";import"./disposables.aac3c136.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.f4c53e83.js";const R={class:"flex flex-col md:flex-row space-x-2"},z={key:0,class:"text-gray-600"},L={key:1},U={key:2,class:"text-gray-600"},q={class:"overflow-hidden bg-white shadow sm:rounded-lg"},G={class:"border-t border-gray-200 px-4 py-5 sm:p-0"},H={class:"sm:divide-y sm:divide-gray-200"},I={class:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6"},K=e("dt",{class:"text-sm font-medium text-gray-500"}," Name ",-1),Q={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},W={class:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6"},X=e("dt",{class:"text-sm font-medium text-gray-500"}," Remarks ",-1),Y={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Z={class:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6"},ee=e("dt",{class:"text-sm font-medium text-gray-500"},"Channel - Product",-1),se={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},te={role:"list",class:"divide-y divide-gray-200 rounded-md border border-gray-200"},oe={class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm"},ae={class:"flex w-0 flex-1 space-x-2 items-center"},de={class:"text-blue-700 text-md pr-2"},le={key:0},ne={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},ie={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},re=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Vending Machine Binding ")])],-1),ce=[re],me={key:1,class:"sm:col-span-5"},pe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),ue={key:0,class:"text-sm text-red-600"},_e={key:2,class:"sm:col-span-1"},xe=e("span",null," Add ",-1),ve={key:3,class:"sm:col-span-6 flex flex-col mt-3"},he={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},ye={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},fe={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},ge={class:"min-w-full divide-y divide-gray-300"},be=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),we={class:"bg-white"},ke={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ce={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},$e={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left"},Ne={key:0},Se={key:0},Be=e("br",null,null,-1),Me={key:1},Oe=e("br",null,null,-1),je={key:1},Pe={class:"whitespace-nowrap py-4 text-sm text-center"},Ve={key:0},Fe=e("td",{colspan:"5",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),De=[Fe],Je={class:"sm:col-span-6"},Te={class:"flex space-x-1 mt-5 justify-end"},Ae=e("span",null," Back ",-1),Ee=e("span",null," Save ",-1),Ye={__name:"VendForm",props:{productMapping:Object,type:String,showModal:Boolean,unbindedVends:Object},emits:["modalClose"],setup(v,{emit:$}){const c=v,N=$,t=h(y(g())),p=h([]),r=h([]);O(()=>{t.value=c.productMapping?y(c.productMapping):y(g()),p.value=c.unbindedVends.data,r.value=JSON.parse(JSON.stringify(c.productMapping.vends))});function g(){return{id:"",name:"",remarks:"",vend_id:""}}function S(){t.value.clearErrors(),c.type==="update"&&t.value.transform(n=>({...n,productMappingVends:r.value})).post("/product-mappings/"+t.value.id+"/update/vends",{onSuccess:()=>{N("modalClose")},preserveState:!0,replace:!0})}function B(){r.value.indexOf(t.value.vend_id)<0&&(r.value.push(t.value.vend_id),r.value.sort((n,d)=>n.code-d.code),p.value.splice(p.value.indexOf(t.value.vend_id),1),p.value.sort((n,d)=>n.code-d.code))}function M(n){r.value.splice(r.value.indexOf(n),1),p.value.push(n),p.value.sort((d,s)=>d.code-s.code)}return(n,d)=>(o(),j(P,{to:"body"},[i(F,{open:v.showModal,onModalClose:d[3]||(d[3]=s=>n.$emit("modalClose"))},{header:u(()=>[e("div",R,[c.productMapping?(o(),a("span",z," Product Mapping for ")):m("",!0),c.productMapping?(o(),a("span",L,l(c.productMapping.name),1)):(o(),a("span",U," Create New Product Mapping "))])]),default:u(()=>[e("div",q,[e("div",G,[e("dl",H,[e("div",I,[K,e("dd",Q,l(t.value.name),1)]),e("div",W,[X,e("dd",Y,l(t.value.remarks),1)]),e("div",Z,[ee,e("dd",se,[e("ul",te,[(o(!0),a(k,null,w(v.productMapping.productMappingItemsJson,s=>(o(),a("li",oe,[e("div",ae,[e("span",de,l(s.channel_code),1),s.product.code?(o(),a("span",le,l(s.product.code),1)):m("",!0),e("span",null," - "+l(s.product.name),1)])]))),256))])])])])])]),e("form",{onSubmit:V(S,["prevent"]),id:"submit"},[e("div",ne,[t.value.id?(o(),a("div",ie,ce)):m("",!0),t.value.id?(o(),a("div",me,[pe,i(D,{modelValue:t.value.vend_id,"onUpdate:modelValue":d[0]||(d[0]=s=>t.value.vend_id=s),options:p.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.vend_id?(o(),a("div",ue,l(t.value.errors.vend_id),1)):m("",!0)])):m("",!0),t.value.id?(o(),a("div",_e,[i(x,{type:"button",onClick:d[1]||(d[1]=s=>B()),class:C(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[t.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!t.value.vend_id},{default:u(()=>[i(_(J),{class:"w-4 h-4"}),xe]),_:1},8,["class","disabled"])])):m("",!0),t.value.id?(o(),a("div",ve,[e("div",he,[e("div",ye,[e("div",fe,[e("table",ge,[be,e("tbody",we,[(o(!0),a(k,null,w(r.value,(s,b)=>(o(),a("tr",{key:s.id,class:C(b%2===0?void 0:"bg-gray-50")},[e("td",ke,l(b+1),1),e("td",Ce,l(s.code),1),e("td",$e,[s&&s.customer?(o(),a("span",Ne,[s.customer.person_id?(o(),a("span",Se,[f(l(s.customer.virtual_customer_code)+" ("+l(s.customer.virtual_customer_prefix)+") ",1),Be])):(o(),a("span",Me,[f(l(s.customer.code)+" ",1),Oe])),f(" "+l(s.customer.name),1)])):(o(),a("span",je,l(s.name),1))]),e("td",Pe,[i(x,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:Re=>M(s)},{default:u(()=>[i(_(E),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),r.value.length?m("",!0):(o(),a("tr",Ve,De))])])])])])])):m("",!0)]),e("div",Je,[e("div",Te,[i(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:d[2]||(d[2]=s=>n.$emit("modalClose")),form:"submit"},{default:u(()=>[i(_(T),{class:"w-4 h-4"}),Ae]),_:1}),i(x,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[i(_(A),{class:"w-4 h-4"}),Ee]),_:1})])])],32)]),_:1},8,["open"])]))}};export{Ye as default};
