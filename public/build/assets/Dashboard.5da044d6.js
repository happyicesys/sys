import{h as r,K as F,U as E,f as p,a as i,u as b,w as f,F as j,o as c,Z as K,b as t,P as R,d as O,m as h,l as z,S as V,t as g}from"./app.2ca23373.js";import{_ as H}from"./Authenticated.b0da2f61.js";import{_ as C}from"./Graph.1f4050d4.js";import{_ as v}from"./MultiSelect.ceaaecb2.js";import{_ as q}from"./SearchInput.cac6d3ec.js";import"./open-closed.2ea361b8.js";import"./use-resolve-button-type.57a6ffc5.js";import"./RectangleStackIcon.8ba474a2.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.95dad68a.js";const Q=t("div",{class:"flex flex-col space-y-1"},[t("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),W={class:"p-3"},X={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},I=t("div",{class:"p-4"},null,-1),ee={key:0,class:"p-4 mx-2"},te={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},se=t("span",{class:"text-[9px]"},' ("," for multiple) ',-1),ae={key:0},oe=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),le={key:1},re=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ie={key:2},ne=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),de=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),pe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ce={class:"mt-3"},ue={class:"flex space-x-1"},me=t("span",null," Search ",-1),ye=t("span",null," Reset ",-1),fe=t("span",null," Hide Filters ",-1),ge={class:"p-1 bg-white border-b border-gray-200 flex flex-col space-y-6"},_e={class:"flex flex-col md:flex-row pt-5"},he={class:"md:basis-1/3 m-1"},be={class:"md:basis-2/3 my-1 mx-4 px-4"},ve=t("p",{class:"text-sm"}," Past 7 Days - Top 10 Best Performance ",-1),xe={class:"mt-2 flow-root"},ke={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},we={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},De={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},Se={class:"min-w-full divide-y divide-gray-300"},Ge=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),t("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),t("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),t("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),Oe={class:"divide-y divide-gray-200 bg-white"},Ve={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Ce={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},Ne={key:0},Be=t("br",null,null,-1),$e={key:1},Je={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},Ae={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},Fe={key:0},je=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Pe=[je],Ue={class:"pt-5"},qe={__name:"Dashboard",props:{dayGraphData:Object,monthGraphData:Object,productGraphData:Object,performerGraphData:Object},setup(P){const y=P,n=r({day_date_from:"",day_date_to:""});r(0);const x=F().props.auth.operator,k=F().props.auth.permissions,N=r(!1),U=r([]),w=r([]),B=r([]),T=r({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days ("+x.name+")"},legend:{reverse:!0}}}),L=r([]),D=r([]),$=r([]),M=r({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months ("+x.name+")"},legend:{reverse:!0}}}),S=r([]),J=r([]),A=r([]),Z=r({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers ("+x.name+")"}}}),G=r([]);E(()=>{let s=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],o=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];U.value=JSON.parse(JSON.stringify(y.dayGraphData));let m=[];m=_.groupBy(JSON.parse(JSON.stringify(y.dayGraphData)).data,"month_name"),Object.keys(m).forEach((a,e)=>{w.value.push({label:a+" (#)",data:m[a].map(u=>u.count),backgroundColor:e%2==0?l(s[e+2],.2):l(s[e+2],.9),borderColor:e%2==0?l(s[e+2],.2):l(s[e+2],.9),yAxisID:"y1",type:"line",order:1}),w.value.push({label:a+" ($)",data:m[a].map(u=>u.amount),backgroundColor:e%2==0?l(s[e],.2):l(s[e],1),borderColor:e%2==0?l(s[e],.2):l(s[e],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let a=1;a<=31;a++)B.value.push(a);L.value=JSON.parse(JSON.stringify(y.monthGraphData));let d=[];d=JSON.parse(JSON.stringify(y.monthGraphData)),Object.keys(d).forEach((a,e)=>{D.value.push({label:a+" (#)",data:Object.values(d[a]).map(u=>u.count),backgroundColor:e%2==0?l(s[e+2],.2):l(s[e+2],.9),borderColor:e%2==0?l(s[e+2],.2):l(s[e+2],.9),yAxisID:"y1",type:"line",order:1}),D.value.push({label:a+" ($)",data:Object.values(d[a]).map(u=>u.amount),backgroundColor:e%2==0?l(s[e],.2):l(s[e],1),borderColor:e%2==0?l(s[e],.2):l(s[e],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let a=1;a<=12;a++)$.value.push(a);S.value=JSON.parse(JSON.stringify(y.productGraphData)),J.value.push({label:"Sales",data:S.value.data.map(a=>a.count),backgroundColor:o}),A.value=S.value.data.map(a=>a.product.code+" - "+a.product.name),G.value=JSON.parse(JSON.stringify(y.performerGraphData))});function l(s,o){var m=parseInt(s.slice(1,3),16),d=parseInt(s.slice(3,5),16),a=parseInt(s.slice(5,7),16);return"rgba("+m+", "+d+", "+a+", "+o+")"}return(s,o)=>{const m=V("MagnifyingGlassIcon"),d=V("Button"),a=V("BackspaceIcon");return c(),p(j,null,[i(b(K),{title:"Dashboard"}),i(H,null,{header:f(()=>[Q]),default:f(()=>[t("div",W,[t("div",X,[t("div",Y,[I,N.value?(c(),p("div",ee,[t("div",te,[i(q,{placeholderStr:"Vend ID",modelValue:n.value.codes,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value.codes=e),onKeyup:o[1]||(o[1]=R(e=>s.onSearchFilterUpdated(),["enter"]))},{default:f(()=>[O(" Vend ID "),se]),_:1},8,["modelValue"]),b(k).includes("admin-access vends")?(c(),p("div",ae,[oe,i(v,{modelValue:n.value.categories,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value.categories=e),options:s.categoryOptions,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),b(k).includes("admin-access vends")?(c(),p("div",le,[re,i(v,{modelValue:n.value.categoryGroups,"onUpdate:modelValue":o[3]||(o[3]=e=>n.value.categoryGroups=e),options:s.categoryGroupOptions,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),b(k).includes("admin-access vends")?(c(),p("div",ie,[ne,i(v,{modelValue:n.value.operator,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value.operator=e),options:s.operatorOptions,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):h("",!0),t("div",null,[de,i(v,{modelValue:n.value.locationType,"onUpdate:modelValue":o[5]||(o[5]=e=>n.value.locationType=e),options:s.locationTypeOptions,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),t("div",pe,[t("div",ce,[t("div",ue,[i(d,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[6]||(o[6]=e=>s.onSearchFilterUpdated())},{default:f(()=>[i(m,{class:"h-4 w-4","aria-hidden":"true"}),me]),_:1}),i(d,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[7]||(o[7]=e=>s.resetFilters())},{default:f(()=>[i(a,{class:"h-4 w-4","aria-hidden":"true"}),ye]),_:1}),i(d,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[8]||(o[8]=e=>N.value=!1)},{default:f(()=>[i(a,{class:"h-4 w-4","aria-hidden":"true"}),fe]),_:1})])])])])):h("",!0),t("div",ge,[i(C,{key:"dayGraphData",type:"scatter",labels:B.value,datasets:w.value,options:T.value},null,8,["labels","datasets","options"]),t("div",_e,[t("div",he,[i(C,{key:"productGraphData",type:"pie",labels:A.value,datasets:J.value,options:Z.value},null,8,["labels","datasets","options"])]),t("div",be,[ve,t("div",xe,[t("div",ke,[t("div",we,[t("div",De,[t("table",Se,[Ge,t("tbody",Oe,[(c(!0),p(j,null,z(G.value.data,(e,u)=>(c(),p("tr",{key:e.id},[t("td",Ve,g(u+1),1),t("td",Ce,[e.customer?(c(),p("span",Ne,[O(g(e.customer.code)+" ",1),Be,O(" "+g(e.customer.name),1)])):(c(),p("span",$e,g(e.name),1))]),t("td",Je,g(e.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),t("td",Ae,g(e.count),1)]))),128)),G.value.data.length?h("",!0):(c(),p("tr",Fe,Pe))])])])])])])])]),t("div",Ue,[i(C,{key:"monthGraphData",type:"scatter",labels:$.value,datasets:D.value,options:M.value},null,8,["labels","datasets","options"])])])])])])]),_:1})],64)}}};export{qe as default};
