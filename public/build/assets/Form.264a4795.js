import{o as s,g as n,d as t,i as p,u as _,j as B,c as f,a as l,w as c,p as u,T as O,t as h,b as v,e as w,n as j,f as x}from"./app.fd5b8333.js";import{_ as y}from"./Button.0e05370f.js";import N from"./Uom.5b3e4afa.js";import{_ as C}from"./FormInput.bd146e11.js";import{_ as z}from"./FormTextarea.713b0bab.js";import"./MultiSelect.1a8e0dc4.js";import{_ as D}from"./Modal.c4c4129f.js";import{r as U}from"./RectangleStackIcon.3bb42c44.js";import{r as E}from"./ArrowUturnLeftIcon.5e480c42.js";import{r as F}from"./CheckCircleIcon.7ca985d9.js";import"./open-closed.b3e35393.js";function T(a,m){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M2 4.75C2 3.784 2.784 3 3.75 3h4.836c.464 0 .909.184 1.237.513l1.414 1.414a.25.25 0 00.177.073h4.836c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0116.25 17H3.75A1.75 1.75 0 012 15.25V4.75zm10.25 7a.75.75 0 000-1.5h-4.5a.75.75 0 000 1.5h4.5z","clip-rule":"evenodd"})])}function q(a,m){return s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M3.75 3A1.75 1.75 0 002 4.75v10.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0018 15.25v-8.5A1.75 1.75 0 0016.25 5h-4.836a.25.25 0 01-.177-.073L9.823 3.513A1.75 1.75 0 008.586 3H3.75zM10 8a.75.75 0 01.75.75v1.5h1.5a.75.75 0 010 1.5h-1.5v1.5a.75.75 0 01-1.5 0v-1.5h-1.5a.75.75 0 010-1.5h1.5v-1.5A.75.75 0 0110 8z","clip-rule":"evenodd"})])}const G={class:"flex flex-col md:flex-row space-x-2"},H={key:0,class:"text-gray-600"},I={key:1},L={key:2,class:"text-gray-600"},P=["onSubmit"],J={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},K={class:"sm:col-span-6 pb-3"},Q={class:"mt-1 flex flex-col md:flex-row space-y-2 md:space-y-0 items-center"},R={class:"h-28 w-28 overflow-hidden rounded-full bg-gray-100"},W=["src"],X=["value"],Y={key:0,class:"text-sm text-red-600"},Z={class:"sm:col-span-2"},ee=x(" Code "),oe={class:"sm:col-span-4"},te=x(" Name "),se={class:"sm:col-span-6"},re=x(" Desc "),ae={class:"sm:col-span-6"},le={class:"flex space-x-1 mt-5 pt-5 justify-end"},ne=t("span",null," Back ",-1),de={key:0,class:"flex space-x-1 items-center"},ie=t("span",null," Deactivate ",-1),ce={key:1,class:"flex space-x-1 items-center"},ue=t("span",null," Activate ",-1),me=t("span",null," Save ",-1),ke={__name:"Form",props:{categories:Object,categoryGroups:Object,product:Object,uoms:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(a,{emit:m}){const i=a,k=p([]),V=p([]),g=p(!1),M=p([]),e=p(_(b()));B(()=>{e.value=i.product?_(i.product):_(b()),k.value=i.categories.data.map(o=>({id:o.id,name:o.name})),V.value=i.categoryGroups.data.map(o=>({id:o.id,name:o.name})),M.value=i.uoms.data.map(o=>({id:o.id,name:o.name}))});function b(){return{code:"",desc:"",name:"",thumbnail:"",is_inventory:1,is_commission:"",is_supermarket_fee:"",category_id:"",category_group_id:""}}function $(){e.value.clearErrors(),i.type==="create"&&e.value.transform(o=>({...o,category_id:o.category_id.id,category_group_id:o.category_group_id.id})).post("/products/create",{onSuccess:()=>{m("modalClose")},preserveState:!0,replace:!0}),i.type==="update"&&e.value.transform(o=>({...o,category_id:o.category_id.id,category_group_id:o.category_group_id.id})).post("/products/"+e.value.id+"/update",{onSuccess:()=>{m("modalClose")},preserveState:!0,replace:!0})}function S(){e.value.post("/products/"+e.value.id+"/toggle-activate-deactivate",{onSuccess:()=>{m("modalClose")},preserveState:!0,replace:!0})}function A(){g.value=!1}return(o,r)=>(s(),f(O,{to:"body"},[l(D,{open:a.showModal,onModalClose:r[5]||(r[5]=d=>o.$emit("modalClose"))},{header:c(()=>[t("div",G,[a.product?(s(),n("span",H," Editing ")):u("",!0),i.product?(s(),n("span",I,h(a.product.name),1)):(s(),n("span",L," Create New Product "))])]),default:c(()=>[t("form",{onSubmit:w($,["prevent"]),id:"submit"},[t("div",J,[t("div",K,[t("div",Q,[t("span",R,[a.product&&a.product.thumbnail?(s(),n("img",{key:0,class:"h-28 w-28 rounded-full border",src:a.product.thumbnail.full_url,alt:""},null,8,W)):u("",!0),l(v(U),{class:"h-28 w-28 text-gray-300"})]),t("input",{type:"file",onInput:r[0]||(r[0]=d=>e.value.thumbnail=d.target.files[0]),class:"ml-5 rounded-md border border-gray-300 bg-white py-2 px-3 text-sm font-medium leading-4 text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},null,32),e.value.progress?(s(),n("progress",{key:0,value:e.value.progress.percentage,max:"100"},h(e.value.progress.percentage)+"% ",9,X)):u("",!0)]),e.value.errors.thumbnail?(s(),n("div",Y,h(e.value.errors.thumbnail),1)):u("",!0)]),t("div",Z,[l(C,{modelValue:e.value.code,"onUpdate:modelValue":r[1]||(r[1]=d=>e.value.code=d),error:e.value.errors.code,required:"true"},{default:c(()=>[ee]),_:1},8,["modelValue","error"])]),t("div",oe,[l(C,{modelValue:e.value.name,"onUpdate:modelValue":r[2]||(r[2]=d=>e.value.name=d),error:e.value.errors.name,required:"true"},{default:c(()=>[te]),_:1},8,["modelValue","error"])]),t("div",se,[l(z,{modelValue:e.value.desc,"onUpdate:modelValue":r[3]||(r[3]=d=>e.value.desc=d),error:e.value.errors.desc},{default:c(()=>[re]),_:1},8,["modelValue","error"])])]),t("div",ae,[t("div",le,[l(y,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:r[4]||(r[4]=w(d=>o.$emit("modalClose"),["prevent"])),form:"submit"},{default:c(()=>[l(v(E),{class:"w-4 h-4"}),ne]),_:1}),e.value.id?(s(),f(y,{key:0,type:"button",onClick:S,class:j(["text-white",[e.value.is_active?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"]])},{default:c(()=>[t("div",null,[e.value.is_active?(s(),n("span",de,[l(v(T),{class:"w-4 h-4"}),ie])):(s(),n("span",ce,[l(v(q),{class:"w-4 h-4"}),ue]))])]),_:1},8,["class"])):u("",!0),l(y,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:c(()=>[l(v(F),{class:"w-4 h-4"}),me]),_:1})])])],40,P)]),_:1},8,["open"]),g.value?(s(),f(N,{key:0,product:a.product,uoms:a.uoms,showModal:g.value,onModalClose:A},null,8,["product","uoms","showModal"])):u("",!0)]))}};export{ke as default};
