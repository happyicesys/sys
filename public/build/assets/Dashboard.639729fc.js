import{o as d,f as p,b as e,h as i,K as j,U as M,a as n,u as y,w as g,F as L,Z as E,P as K,d as O,m as b,l as R,t as h}from"./app.09198d16.js";import{_ as H}from"./Authenticated.e87f29e9.js";import{_ as V}from"./Button.55a361b3.js";import{_ as C}from"./Graph.22f976ab.js";import{_ as v}from"./MultiSelect.20a8799f.js";import{_ as q,r as Q}from"./SearchInput.610e202d.js";import{r as W}from"./BackspaceIcon.54694c4a.js";import"./open-closed.153f939f.js";import"./use-resolve-button-type.831aaa0f.js";import"./RectangleStackIcon.9284777a.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.78577212.js";function X(N,m){return d(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 15.79a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 11.832 6.29 15.77a.75.75 0 01-1.06.02zm0-6a.75.75 0 01-.02-1.06l4.25-4.5a.75.75 0 011.08 0l4.25 4.5a.75.75 0 11-1.08 1.04L10 5.832 6.29 9.77a.75.75 0 01-1.06.02z","clip-rule":"evenodd"})])}const Y=e("div",{class:"flex flex-col space-y-1"},[e("div",{class:"flex space-x-2 items-center"}," Dashboard ")],-1),I={class:"p-3"},ee={class:"max-w-7xl mx-auto sm:px-3 lg:px-2"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},se=e("div",{class:"p-4"},null,-1),ae={key:0,class:"p-4 mx-2"},oe={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},le=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),re={key:0},ie=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ne={key:1},de=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),pe={key:2},ce=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),ue=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),me={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},fe={class:"mt-3"},ye={class:"flex space-x-1"},ge=e("span",null," Search ",-1),he=e("span",null," Reset ",-1),_e=e("span",null," Hide Filters ",-1),be={class:"p-1 bg-white border-b border-gray-200 flex flex-col space-y-6"},ve={class:"flex flex-col md:flex-row pt-5"},xe={class:"md:basis-1/3 m-1"},we={class:"md:basis-2/3 my-1 mx-4 px-4"},ke=e("p",{class:"text-sm"}," Past 7 Days - Top 10 Best Performance ",-1),De={class:"mt-2 flow-root"},Se={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ge={class:"inline-block min-w-full py-2 align-middle sm:px-3 lg:px-4"},Oe={class:"overflow-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg"},Ve={class:"min-w-full divide-y divide-gray-300"},Ce=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," # "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Vending Machine "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Amount($) "),e("th",{scope:"col",class:"px-3 py-2 text-left text-sm font-semibold text-gray-900"}," Sales(#) ")])],-1),Ne={class:"divide-y divide-gray-200 bg-white"},$e={class:"whitespace-nowrap py-1 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Be={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-600"},Je={key:0},Ae=e("br",null,null,-1),Fe={key:1},je={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},Le={class:"whitespace-nowrap px-3 py-1 text-sm text-gray-500 text-right mx-3"},Pe={key:0},Ue=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Te=[Ue],Ze={class:"pt-5"},Ie={__name:"Dashboard",props:{dayGraphData:Object,monthGraphData:Object,productGraphData:Object,performerGraphData:Object},setup(N){const m=N,c=i({day_date_from:"",day_date_to:""});i(0);const x=j().props.auth.operator,w=j().props.auth.permissions,$=i(!1),P=i([]),k=i([]),B=i([]),U=i({scales:{x:{ticks:{min:1,max:31,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Days ("+x.name+")"},legend:{reverse:!0}}}),T=i([]),D=i([]),J=i([]),Z=i({scales:{x:{ticks:{min:1,max:12,stepSize:1}},y:{position:"left",title:{display:!0,text:"Sales($)"},beginAtZero:!0},y1:{position:"right",title:{display:!0,text:"Sales(#)"},beginAtZero:!0}},plugins:{title:{display:!0,text:"Sales by Months ("+x.name+")"},legend:{reverse:!0}}}),S=i([]),A=i([]),F=i([]),z=i({plugins:{legend:{display:!1},title:{display:!0,text:"Past 7 Days - 10 Best Sellers ("+x.name+")"}}}),G=i([]);M(()=>{let t=["#3e95cd","#ff7f7f","#007500","#808080","#c45850"],l=["#37a2eb","#ff6384","#4cc1c0","#ff9f40","#9a66ff","#ffcd56","#c9cbcf"];P.value=JSON.parse(JSON.stringify(m.dayGraphData));let s=[];s=_.groupBy(JSON.parse(JSON.stringify(m.dayGraphData)).data,"month_name"),Object.keys(s).forEach((o,a)=>{k.value.push({label:o+" (#)",data:s[o].map(f=>f.count),backgroundColor:a%2==0?r(t[a+2],.2):r(t[a+2],.9),borderColor:a%2==0?r(t[a+2],.2):r(t[a+2],.9),yAxisID:"y1",type:"line",order:1}),k.value.push({label:o+" ($)",data:s[o].map(f=>f.amount),backgroundColor:a%2==0?r(t[a],.2):r(t[a],1),borderColor:a%2==0?r(t[a],.2):r(t[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=31;o++)B.value.push(o);T.value=JSON.parse(JSON.stringify(m.monthGraphData));let u=[];u=JSON.parse(JSON.stringify(m.monthGraphData)),Object.keys(u).forEach((o,a)=>{D.value.push({label:o+" (#)",data:Object.values(u[o]).map(f=>f.count),backgroundColor:a%2==0?r(t[a+2],.2):r(t[a+2],.9),borderColor:a%2==0?r(t[a+2],.2):r(t[a+2],.9),yAxisID:"y1",type:"line",order:1}),D.value.push({label:o+" ($)",data:Object.values(u[o]).map(f=>f.amount),backgroundColor:a%2==0?r(t[a],.2):r(t[a],1),borderColor:a%2==0?r(t[a],.2):r(t[a],1),fill:!1,yAxisID:"y",type:"bar",order:2})});for(let o=1;o<=12;o++)J.value.push(o);S.value=JSON.parse(JSON.stringify(m.productGraphData)),A.value.push({label:"Sales",data:S.value.data.map(o=>o.count),backgroundColor:l}),F.value=S.value.data.map(o=>o.product.code+" - "+o.product.name),G.value=JSON.parse(JSON.stringify(m.performerGraphData))});function r(t,l){var s=parseInt(t.slice(1,3),16),u=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return"rgba("+s+", "+u+", "+o+", "+l+")"}return(t,l)=>(d(),p(L,null,[n(y(E),{title:"Dashboard"}),n(H,null,{header:g(()=>[Y]),default:g(()=>[e("div",I,[e("div",ee,[e("div",te,[se,$.value?(d(),p("div",ae,[e("div",oe,[n(q,{placeholderStr:"Vend ID",modelValue:c.value.codes,"onUpdate:modelValue":l[0]||(l[0]=s=>c.value.codes=s),onKeyup:l[1]||(l[1]=K(s=>t.onSearchFilterUpdated(),["enter"]))},{default:g(()=>[O(" Vend ID "),le]),_:1},8,["modelValue"]),y(w).includes("admin-access vends")?(d(),p("div",re,[ie,n(v,{modelValue:c.value.categories,"onUpdate:modelValue":l[2]||(l[2]=s=>c.value.categories=s),options:t.categoryOptions,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),y(w).includes("admin-access vends")?(d(),p("div",ne,[de,n(v,{modelValue:c.value.categoryGroups,"onUpdate:modelValue":l[3]||(l[3]=s=>c.value.categoryGroups=s),options:t.categoryGroupOptions,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),y(w).includes("admin-access vends")?(d(),p("div",pe,[ce,n(v,{modelValue:c.value.operator,"onUpdate:modelValue":l[4]||(l[4]=s=>c.value.operator=s),options:t.operatorOptions,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):b("",!0),e("div",null,[ue,n(v,{modelValue:c.value.locationType,"onUpdate:modelValue":l[5]||(l[5]=s=>c.value.locationType=s),options:t.locationTypeOptions,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",me,[e("div",fe,[e("div",ye,[n(V,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[6]||(l[6]=s=>t.onSearchFilterUpdated())},{default:g(()=>[n(y(Q),{class:"h-4 w-4","aria-hidden":"true"}),ge]),_:1}),n(V,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[7]||(l[7]=s=>t.resetFilters())},{default:g(()=>[n(y(W),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1}),n(V,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:l[8]||(l[8]=s=>$.value=!1)},{default:g(()=>[n(y(X),{class:"h-4 w-4","aria-hidden":"true"}),_e]),_:1})])])])])):b("",!0),e("div",be,[n(C,{key:"dayGraphData",type:"scatter",labels:B.value,datasets:k.value,options:U.value},null,8,["labels","datasets","options"]),e("div",ve,[e("div",xe,[n(C,{key:"productGraphData",type:"pie",labels:F.value,datasets:A.value,options:z.value},null,8,["labels","datasets","options"])]),e("div",we,[ke,e("div",De,[e("div",Se,[e("div",Ge,[e("div",Oe,[e("table",Ve,[Ce,e("tbody",Ne,[(d(!0),p(L,null,R(G.value.data,(s,u)=>(d(),p("tr",{key:s.id},[e("td",$e,h(u+1),1),e("td",Be,[s.customer?(d(),p("span",Je,[O(h(s.customer.code)+" ",1),Ae,O(" "+h(s.customer.name),1)])):(d(),p("span",Fe,h(s.name),1))]),e("td",je,h(s.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),e("td",Le,h(s.count),1)]))),128)),G.value.data.length?b("",!0):(d(),p("tr",Pe,Te))])])])])])])])]),e("div",Ze,[n(C,{key:"monthGraphData",type:"scatter",labels:J.value,datasets:D.value,options:Z.value},null,8,["labels","datasets","options"])])])])])])]),_:1})],64))}};export{Ie as default};
