import{g as p,T as b,K as x,U as S,h as j,f as v,a as d,u as c,w as u,F as N,o as i,Z as M,b as t,d as n,t as _,l as m,n as h,e as E,c as f,m as F,v as Y,i as A}from"./app.024e39e5.js";import{_ as P}from"./Authenticated.9fe60fc0.js";import{_ as V}from"./Button.33536ddb.js";import{_ as q}from"./DatePicker.53db14f6.js";import{_ as k}from"./FormInput.a4bc002f.js";import{_ as $}from"./MultiSelect.35807366.js";import{_ as H}from"./SearchVendCodeInput.c14ccca6.js";import{r as I}from"./ArrowUturnLeftIcon.00eea8ad.js";import{r as K,a as T}from"./PlayIcon.cf546182.js";import{r as z}from"./CheckCircleIcon.71ce7f83.js";import"./open-closed.4c597dc4.js";import"./use-resolve-button-type.0e6f995d.js";import"./RectangleStackIcon.7a8167e6.js";import"./main.c0edd862.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.18709a47.js";import"./MagnifyingGlassCircleIcon.83439c67.js";import"./platform.ff812502.js";const R={class:"font-semibold text-xl text-gray-800 leading-tight"},Z={key:0},G={key:1},J=t("br",null,null,-1),L={key:2},Q=t("br",null,null,-1),W={class:"flex flex-col"},X={class:"font-bold"},ee={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},te={class:"mt-6 flex flex-col"},se={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},oe={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},ae=["onSubmit"],re={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},le={class:"sm:col-span-6"},ie={class:"sm:col-span-6"},de={class:"relative flex items-start"},ne={class:"flex h-6 items-center"},ue=["disabled"],me=t("div",{class:"ml-3 text-sm leading-6"},[t("label",{for:"is_customer",class:"font-medium text-gray-900"},"Customer Binding?"),n(" "+_(" ")+" "),t("span",{id:"is_customer",class:"text-gray-500"},[t("span",{class:"sr-only"},"Customer Binding?"),n("retrieve customer data from cms")])],-1),ce={key:0,class:"sm:col-span-6"},ve=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Customer ",-1),pe={key:1,class:"sm:col-span-6"},_e={class:"sm:col-span-6"},fe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),ge={class:"sm:col-span-3"},ye={class:"sm:col-span-6"},be={class:"sm:col-span-6"},xe={class:"flex space-x-1 mt-5 justify-end"},he=t("span",null," Back ",-1),Ve={key:0,class:"flex"},ke={key:1,class:"flex"},we=t("span",null," Save ",-1),Ie={__name:"Edit",props:{adminCustomerOptions:Object,operatorOptions:Object,vend:Object,type:String},setup(o){const l=o,w=p([]);p([]);const e=p(b(O()));p(!1);const C=p([]),y=p("");x().props.auth.operatorCountry,x().props.auth.operatorRole;const g=x().props.auth.permissions;p(S().format("HH:mm:ss")),j(()=>{l.type=="create"?y.value="Create New":y.value="Edit",w.value=l.adminCustomerOptions.map(s=>({id:s.id,full_name:s.cust_id+" - "+s.company})),C.value=[...l.operatorOptions.data.map(s=>({id:s.id,full_name:s.full_name}))],e.value=l.vend&&l.vend.id?b(l.vend):b(O()),e.value.name=l.vend.name,l.vend.customer_id&&(e.value.is_customer=!0,e.value.customer_id={id:l.vend.person_id,full_name:l.vend.customer_code+" - "+l.vend.customer_name}),l.vend.operator_id&&(e.value.operator_id={id:l.vend.operator_id,full_name:l.vend.operator_name})});function O(){return{code:"",name:"",begin_date:S().format("YYYY-MM-DD"),customer_id:"",operator_id:"",serial_num:"",termination_date:"",private_key:""}}function B(s){e.value.code=s.code}function U(){e.value.clearErrors(),l.type==="create"&&e.value.transform(s=>({...s,customer_id:s.customer_id?s.customer_id.id:null,operator_id:s.operator_id?s.operator_id.id:null})).post("/vends/create",{preserveState:!0,replace:!0}),l.type==="update"&&e.value.transform(s=>({...s,customer_id:s.customer_id?s.customer_id.id:null,operator_id:s.operator_id?s.operator_id.id:null})).post("/vends/"+e.value.id+"/update",{preserveState:!0,replace:!0})}function D(){e.value.post("/settings/"+e.value.id+"/toggle-activation",{})}return(s,a)=>(i(),v(N,null,[d(c(M),{title:"Operator"}),d(P,null,{header:u(()=>[t("h2",R,[n(_(y.value)+" Vending Machine ",1),o.type=="update"?(i(),v("span",Z,_(o.vend.code),1)):m("",!0),o.vend.customer_name?(i(),v("span",G,[J,n(" "+_(o.vend.customer_code)+" - "+_(o.vend.customer_name),1)])):!o.vend.customer_name&&o.vend.name?(i(),v("span",L,[Q,n(" "+_(o.vend.name),1)])):m("",!0)]),t("span",null,[t("div",{class:h(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-fit",[o.vend.is_active?"bg-green-200":"bg-red-200"]])},[t("div",W,[t("span",X,_(o.vend.is_active?"Active":"Inactive"),1)])],2)])]),default:u(()=>[t("div",ee,[t("div",te,[t("div",se,[t("div",oe,[t("form",{onSubmit:E(U,["prevent"]),id:"submit"},[t("div",re,[t("div",le,[o.type=="update"?(i(),f(k,{key:0,modelValue:e.value.code,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.code=r),error:e.value.errors.code,required:"true",disabled:o.vend.code},{default:u(()=>[n(" Code ")]),_:1},8,["modelValue","error","disabled"])):m("",!0),o.type=="create"?(i(),f(H,{key:1,modelValue:e.value.code,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value.code=r),onSelected:B,required:"true",error:e.value.errors.code},{default:u(()=>[n(" Code ")]),_:1},8,["modelValue","error"])):m("",!0)]),t("div",ie,[t("div",de,[t("div",ne,[F(t("input",{"aria-describedby":"is_customer","onUpdate:modelValue":a[2]||(a[2]=r=>e.value.is_customer=r),disabled:o.vend.customer_id&&o.type=="update",name:"is_customer",type:"checkbox",class:h(["h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",[o.vend.customer_id&&o.type=="update"?"bg-gray-200 hover:cursor-not-allowed":""]])},null,10,ue),[[Y,e.value.is_customer]])]),me])]),e.value.is_customer?(i(),v("div",ce,[ve,d($,{modelValue:e.value.customer_id,"onUpdate:modelValue":a[3]||(a[3]=r=>e.value.customer_id=r),options:w.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):m("",!0),e.value.is_customer?m("",!0):(i(),v("div",pe,[d(k,{modelValue:e.value.name,"onUpdate:modelValue":a[4]||(a[4]=r=>e.value.name=r),error:e.value.errors.name},{default:u(()=>[n(" Name ")]),_:1},8,["modelValue","error"])])),t("div",_e,[fe,d($,{modelValue:e.value.operator_id,"onUpdate:modelValue":a[5]||(a[5]=r=>e.value.operator_id=r),options:C.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",ge,[c(g).includes("update vends")?(i(),f(q,{key:0,modelValue:e.value.begin_date,"onUpdate:modelValue":a[6]||(a[6]=r=>e.value.begin_date=r),error:e.value.errors.begin_date,onInput:a[7]||(a[7]=r=>s.onDateFromChanged())},{default:u(()=>[n(" Begin Date ")]),_:1},8,["modelValue","error"])):m("",!0)]),t("div",ye,[d(k,{modelValue:e.value.private_key,"onUpdate:modelValue":a[8]||(a[8]=r=>e.value.private_key=r),error:e.value.errors.private_key,disabled:!c(g).includes("update vends")},{default:u(()=>[n(" Private Key ")]),_:1},8,["modelValue","error","disabled"])])]),t("div",be,[t("div",xe,[d(c(A),{href:"/settings"},{default:u(()=>[d(V,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:u(()=>[d(c(I),{class:"w-4 h-4"}),he]),_:1})]),_:1}),c(g).includes("update vends")?(i(),f(V,{key:0,type:"button",class:h(["text-white flex space-x-1",[o.vend.is_active?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"]]),onClick:a[9]||(a[9]=r=>D())},{default:u(()=>[o.vend.is_active?m("",!0):(i(),v("span",Ve,[d(c(K),{class:"w-4 h-4 pt-1"}),n("Activate ")])),o.vend.is_active?(i(),v("span",ke,[d(c(T),{class:"w-4 h-4 pt-1"}),n("Deactivate ")])):m("",!0)]),_:1},8,["class"])):m("",!0),c(g).includes("update vends")?(i(),f(V,{key:1,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[d(c(z),{class:"w-4 h-4"}),we]),_:1})):m("",!0)])])],40,ae)])])])])]),_:1})],64))}};export{Ie as default};
