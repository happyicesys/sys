import{_ as j}from"./Authenticated.fe4dc7cf.js";import{_ as O}from"./Button.70d31857.js";import{r as D,a as F,T as _,_ as b,b as H,c}from"./TableHeadSort.338236e5.js";import{_ as p}from"./SearchInput.1c49ecef.js";import{_ as V}from"./MultiSelect.f1ffdba3.js";import{i as x,j as A,o as h,g as f,a as t,b as I,w as l,F as y,H as q,d as n,t as r,m as C,p as E,c as M,f as o,J as w,n as T}from"./app.860330db.js";import"./open-closed.dd83d023.js";import"./use-resolve-button-type.e3f9d058.js";import"./RectangleStackIcon.87b4c7eb.js";import"./_plugin-vue_export-helper.cdc0426e.js";const R=n("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (List) ",-1),z={class:"m-2 sm:mx-5 sm:my-3 px-2 sm:px-4 lg:px-6"},J={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-5 px-3 md:px-6 py-6"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},W=o(" Vend ID "),X=o(" Serial Num "),Y=o(" Temp >> "),Z=n("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),ee=o(" Cust ID "),te=o(" Cust ID Name "),ne=n("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),le=n("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),oe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},se={class:"mt-3"},ae={class:"flex space-x-1"},re=n("span",null," Search ",-1),de=n("span",null," Reset ",-1),ie={class:"flex flex-col space-y-2"},ue={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ce=n("span",null,"Showing",-1),me={class:"font-medium"},ge=n("span",null,"to",-1),_e={class:"font-medium"},he=n("span",null,"of",-1),fe={class:"font-medium"},pe=n("span",null,"results",-1),xe={class:"mt-6 flex flex-col"},ye={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},ve={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},be={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ve={class:"bg-gray-100"},Ce={class:"divide-x divide-gray-200"},Be=o(" # "),Le=o(" Code "),Se=o(" Temp "),ke=o(" Name "),Ie=o(" Category "),we=o(" Channel Status "),Te=o(" Inventory Status "),Ne=o(" Balance Stock "),Pe=o(" Out of Stock SKU "),Ke=o(" Last Temp "),$e=o(" Coin Amount "),Oe=o(" Serial Num "),Ee=o(" Firmware Ver "),Ue=o(" Door Opening? "),Ge=o(" Sensor Normal? "),je={class:"bg-white"},De={class:"flex flex-col"},Fe=["onClick"],He=n("br",null,null,-1),Ae=n("br",null,null,-1),qe={class:"flex flex-col space-y-1"},Me=n("br",null,null,-1),Re={class:"grid grid-cols-[120px_minmax(120px,_1fr)_120px] gap-1"},ze={class:"font-semibold"},Je={class:"text-blue-600 text-sm pl-1"},Qe={class:"pl-1"},We=n("br",null,null,-1),Xe=n("br",null,null,-1),Ye={key:0},Ze=n("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),et=[Ze],ct={__name:"Index",props:{categories:Object,categoryGroups:Object,vends:Object,vendChannelErrors:Object},setup(d){const B=d,s=x({code:"",serialNum:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],tempHigherThan:"",vend_channel_error_id:"",sortKey:"",sortBy:!0,numberPerPage:""}),L=x([]),S=x([]),N=x([]),P=x([]);A(()=>{L.value=[{id:"",desc:"All"},{id:"errors_only",desc:"Errors Only"},...B.vendChannelErrors.data],S.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.vend_channel_error_id=L.value[0],s.value.numberPerPage=S.value[0],N.value=B.categories.data.map(m=>({id:m.id,name:m.name})),P.value=B.categoryGroups.data.map(m=>({id:m.id,name:m.name}))});function k(){w.Inertia.get("/vends",{...s.value,vend_channel_error_id:s.value.vend_channel_error_id.id,categories:s.value.categories.map(m=>m.id),categoryGroups:s.value.categoryGroups.map(m=>m.id),numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function U(m){w.Inertia.get("/vends/"+m+"/temp")}function G(){w.Inertia.get("/vends")}function v(m){s.value.sortKey=m,s.value.sortBy=!this.filters.sortBy,k()}return(m,a)=>(h(),f(y,null,[t(I(q),{title:"Vending Machines"}),t(j,null,{header:l(()=>[R]),default:l(()=>{var K,$;return[n("div",z,[n("div",J,[n("div",Q,[t(p,{placeholderStr:"Code",modelValue:s.value.code,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.code=e)},{default:l(()=>[W]),_:1},8,["modelValue"]),t(p,{placeholderStr:"Serial Num",modelValue:s.value.serialNum,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.serialNum=e)},{default:l(()=>[X]),_:1},8,["modelValue"]),t(p,{placeholderStr:"Number",modelValue:s.value.tempHigherThan,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.tempHigherThan=e)},{default:l(()=>[Y]),_:1},8,["modelValue"]),n("div",null,[Z,t(V,{modelValue:s.value.vend_channel_error_id,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.vend_channel_error_id=e),options:L.value,trackBy:"id",valueProp:"id",label:"desc",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t(p,{placeholderStr:"Cust ID",modelValue:s.value.customer_code,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.customer_code=e)},{default:l(()=>[ee]),_:1},8,["modelValue"]),t(p,{placeholderStr:"Cust ID Name",modelValue:s.value.customer_name,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.customer_name=e)},{default:l(()=>[te]),_:1},8,["modelValue"]),n("div",null,[ne,t(V,{modelValue:s.value.categories,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value.categories=e),options:N.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),n("div",null,[le,t(V,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value.categoryGroups=e),options:P.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),n("div",oe,[n("div",se,[n("div",ae,[t(O,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[8]||(a[8]=e=>k())},{default:l(()=>[t(I(D),{class:"h-4 w-4","aria-hidden":"true"}),re]),_:1}),t(O,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[9]||(a[9]=e=>G())},{default:l(()=>[t(I(F),{class:"h-4 w-4","aria-hidden":"true"}),de]),_:1})])]),n("div",ie,[n("p",ue,[ce,n("span",me,r((K=d.vends.meta.from)!=null?K:0),1),ge,n("span",_e,r(($=d.vends.meta.to)!=null?$:0),1),he,n("span",fe,r(d.vends.meta.total),1),pe]),t(V,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":a[10]||(a[10]=e=>s.value.numberPerPage=e),options:S.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:k},null,8,["modelValue","options"])])])]),n("div",xe,[n("div",ye,[n("div",ve,[n("table",be,[n("thead",Ve,[n("tr",Ce,[t(_,null,{default:l(()=>[Be]),_:1}),t(b,{modelName:"code",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[11]||(a[11]=e=>v("code"))},{default:l(()=>[Le]),_:1},8,["sortKey","sortBy"]),t(b,{modelName:"temp",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[12]||(a[12]=e=>v("temp"))},{default:l(()=>[Se]),_:1},8,["sortKey","sortBy"]),t(_,null,{default:l(()=>[ke]),_:1}),t(_,null,{default:l(()=>[Ie]),_:1}),t(_,null,{default:l(()=>[we]),_:1}),t(_,null,{default:l(()=>[Te]),_:1}),t(_,null,{default:l(()=>[Ne]),_:1}),t(_,null,{default:l(()=>[Pe]),_:1}),t(b,{modelName:"temp_updated_at",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[13]||(a[13]=e=>v("temp_updated_at"))},{default:l(()=>[Ke]),_:1},8,["sortKey","sortBy"]),t(b,{modelName:"coin_amount",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[14]||(a[14]=e=>v("coin_amount"))},{default:l(()=>[$e]),_:1},8,["sortKey","sortBy"]),t(_,null,{default:l(()=>[Oe]),_:1}),t(_,null,{default:l(()=>[Ee]),_:1}),t(_,null,{default:l(()=>[Ue]),_:1}),t(_,null,{default:l(()=>[Ge]),_:1})])]),n("tbody",je,[(h(!0),f(y,null,C(d.vends.data,(e,u)=>(h(),f("tr",{key:e.id,class:"divide-x divide-gray-200"},[t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(d.vends.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.code),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[n("div",De,[n("button",{type:"button",class:T(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.temp>-15?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600"]]),onClick:i=>U(e.id)},r(e.is_temp_error?"Error":e.temp),11,Fe)])]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-left"},{default:l(()=>[o(r(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.code:null)+" ",1),He,o(" "+r(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-left"},{default:l(()=>[o(r(e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.category?e.latestVendBinding.customer.category.name:null)+" ",1),Ae,o(" "+r(e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.category&&e.latestVendBinding.customer.category.category_group?e.latestVendBinding.customer.category.category_group.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[(h(!0),f(y,null,C(e.vendChannels.map(function(i){return i}).filter(function(i){var g;return(g=i.vendChannelErrorLogs.length)!=null?g:i.vendChannelErrorLogs}),i=>(h(),f("span",qe,[(h(!0),f(y,null,C(i.vendChannelErrorLogs.filter(function(g){return!g.is_error_cleared}),g=>(h(),f("span",{class:T(["inline-flex items-center rounded px-2.5 py-0.5 text-xs font-medium border",[g.is_error_cleared?"bg-green-100 text-green-800":"bg-red-100 text-red-800"]])},[o(" #"+r(i.code)+", "+r(g.vendChannelError.desc)+" ",1),Me,o(" "+r(g.created_at),1)],2))),256))]))),256))]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[n("div",Re,[(h(!0),f(y,null,C(e.vendChannels.map(function(i){return i}).filter(function(i){return i.capacity>0&&i.code<1e3}),(i,g)=>(h(),f("div",{class:T(["inline-flex justify-between items-center rounded px-2.5 py-0.5 text-xs font-medium border min-w-full",[g>0&&String(i.code)[0]!==String(e.vendChannels[g-1].code)[0]?"col-start-1":""]])},[n("div",ze," #"+r(i.code)+", ",1),n("div",Je,r(i.capacity-i.qty)+", ",1),n("div",Qe,r(i.qty)+"/"+r(i.capacity),1)],2))),256))])]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.vendChannelsTotals.qty)+"/ "+r(e.vendChannelsTotals.capacity)+" ",1),We,o(" ("+r(e.vendChannelsTotals.balancePercent)+"%) ",1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.vendChannelsTotals.outOfStockSku)+"/ "+r(e.vendChannelsTotals.count)+" ",1),Xe,o(" ("+r(e.vendChannelsTotals.outOfStockSkuPercent)+"%) ",1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.temp_updated_at),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-right"},{default:l(()=>[o(r(e.coin_amount),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.serial_num),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.firmware_ver),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.is_door_open),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[o(r(e.is_sensor_normal),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.vends.data.length?E("",!0):(h(),f("tr",Ye,et))])]),d.vends.data.length?(h(),M(H,{key:0,links:d.vends.links,meta:d.vends.meta},null,8,["links","meta"])):E("",!0)])])])])]}),_:1})],64))}};export{ct as default};
