import{_ as A}from"./Authenticated.4ecfbc32.js";import{_ as M}from"./Button.24b314e0.js";import{_ as O}from"./DatePicker.8862a99c.js";import{_ as R}from"./Paginator.3f13e10b.js";import{_ as V,r as q}from"./SearchInput.72e47069.js";import{_ as k}from"./MultiSelect.839a19b4.js";import{o as i,f as m,b as e,g,S as $,K as E,h as Q,a as l,u as h,w as o,F as P,Z,d as n,t as d,k as N,l as v,c as j,O as K,i as G,n as H}from"./app.d7ae98cc.js";import J from"./Complaint.9d77b741.js";import{_ as p,a as c}from"./TableData.0c726291.js";import{_ as U}from"./TableHeadSort.4eb777ed.js";import{r as W}from"./BackspaceIcon.7d7408be.js";import"./open-closed.bf1d37ac.js";import"./use-resolve-button-type.16560a01.js";import"./RectangleStackIcon.aca728dd.js";import"./main.eef0520f.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.09cc7868.js";import"./Modal.14fead9a.js";import"./disposables.c1f22710.js";import"./ArrowUturnLeftIcon.86d7a320.js";function X(r,y){return i(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 2c-2.236 0-4.43.18-6.57.524C1.993 2.755 1 4.014 1 5.426v5.148c0 1.413.993 2.67 2.43 2.902.848.137 1.705.248 2.57.331v3.443a.75.75 0 001.28.53l3.58-3.579a.78.78 0 01.527-.224 41.202 41.202 0 005.183-.5c1.437-.232 2.43-1.49 2.43-2.903V5.426c0-1.413-.993-2.67-2.43-2.902A41.289 41.289 0 0010 2zm0 7a1 1 0 100-2 1 1 0 000 2zM8 8a1 1 0 11-2 0 1 1 0 012 0zm5 1a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})])}const ee=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Delivery Platform Orders ",-1),te={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},le={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},oe={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ae=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),se=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Status ",-1),ne={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},re={class:"mt-3"},de={class:"flex space-x-1"},ie=e("span",null," Search ",-1),ue=e("span",null," Reset ",-1),ce={class:"flex flex-col space-y-2"},me={class:"text-sm text-gray-700 leading-5 flex space-x-1"},fe=e("span",null,"Showing",-1),_e={class:"font-medium"},pe=e("span",null,"to",-1),he={class:"font-medium"},ve=e("span",null,"of",-1),ge={class:"font-medium"},xe=e("span",null,"results",-1),ye={class:"mt-6 flex flex-col"},be={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},we={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ce={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ve={class:"bg-gray-100"},ke={class:"divide-x divide-gray-200"},Pe=e("br",null,null,-1),Le={class:"bg-white"},Se={key:0},De=e("br",null,null,-1),Ie={class:"flex flex-col"},Be={class:"font-semibold"},Me={class:"divide-y divide-gray-200"},Oe={class:"flex py-1 px-3 space-x-2"},$e={class:"self-center font-semibold text-blue-700"},Ne={key:0},je=e("br",null,null,-1),Ke={class:"flex self-center"},Ue=["href"],Ye=["src"],Fe=e("span",{class:"self-center"}," x ",-1),Te={class:"self-center"},ze={class:"flex flex-col space-y-1"},Ae=["onClick"],Re={class:"flex space-x-1"},qe=e("span",{class:"font-semibold"}," Complaint ",-1),Ee={key:0},Qe=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Ze=[Qe],_t={__name:"Index",props:{deliveryPlatformOrders:Object,deliveryPlatformOperatorOptions:Object,deliveryPlatformOrderStatusOptions:Object},setup(r){const y=r,a=g({order_id:"",short_order_id:"",vend_code:"",date_from:$().format("YYYY-MM-DD"),date_to:$().format("YYYY-MM-DD"),delivery_platform_operator_id:"",sortKey:"",sortBy:!0,status:"",numberPerPage:100}),b=g([]),L=g();g("");const S=E().props.auth.operatorCountry,w=g([]),x=g(!1);Q(()=>{w.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],a.value.numberPerPage=w.value[0],b.value=[{id:"all",name:"All"},...y.deliveryPlatformOperatorOptions.data.map(f=>({id:f.id,name:f.deliveryPlatform.name+" ("+f.type+")"}))],a.value.delivery_platform_operator_id=b.value[0],a.value.status=y.deliveryPlatformOrderStatusOptions[0]});function Y(f){L.value=f,x.value=!0}function F(){x.value=!1}function C(){K.get("/delivery-platform-orders",{...a.value,delivery_platform_operator_id:a.value.delivery_platform_operator_id.id,status:a.value.status.id,numberPerPage:a.value.numberPerPage.id},{preserveState:!0,replace:!0})}function T(){K.get("/delivery-platform-orders")}function D(f){a.value.sortKey=f,a.value.sortBy=!a.value.sortBy,C()}function z(f){let s="";switch(f){case 1:case 2:s="bg-blue-400 text-gray-800";break;case 3:case 4:case 5:case 6:s="bg-yellow-400 text-gray-800";break;case 7:s="bg-green-400 text-white-800";break;case 98:case 99:s="bg-red-400 text-white-800";break}return s}return(f,s)=>(i(),m(P,null,[l(h(Z),{title:"Delivery Platform"}),l(A,null,{header:o(()=>[ee]),default:o(()=>{var I,B;return[e("div",te,[e("div",le,[e("div",oe,[l(V,{placeholderStr:"Name",modelValue:a.value.order_id,"onUpdate:modelValue":s[0]||(s[0]=t=>a.value.order_id=t)},{default:o(()=>[n(" Order ID ")]),_:1},8,["modelValue"]),l(V,{placeholderStr:"Name",modelValue:a.value.short_order_id,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.short_order_id=t)},{default:o(()=>[n(" Short Order ID ")]),_:1},8,["modelValue"]),l(V,{placeholderStr:"Vend ID",modelValue:a.value.vend_code,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.vend_code=t)},{default:o(()=>[n(" Vend ID ")]),_:1},8,["modelValue"]),l(O,{modelValue:a.value.date_from,"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.date_from=t)},{default:o(()=>[n(" From ")]),_:1},8,["modelValue"]),l(O,{modelValue:a.value.date_to,"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.date_to=t),minDate:a.value.date_from},{default:o(()=>[n(" To ")]),_:1},8,["modelValue","minDate"]),e("div",null,[ae,l(k,{modelValue:a.value.delivery_platform_operator_id,"onUpdate:modelValue":s[5]||(s[5]=t=>a.value.delivery_platform_operator_id=t),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",null,[se,l(k,{modelValue:a.value.status,"onUpdate:modelValue":s[6]||(s[6]=t=>a.value.status=t),options:r.deliveryPlatformOrderStatusOptions,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",ne,[e("div",re,[e("div",de,[l(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[7]||(s[7]=t=>C())},{default:o(()=>[l(h(q),{class:"h-4 w-4","aria-hidden":"true"}),ie]),_:1}),l(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[8]||(s[8]=t=>T())},{default:o(()=>[l(h(W),{class:"h-4 w-4","aria-hidden":"true"}),ue]),_:1})])]),e("div",ce,[e("p",me,[fe,e("span",_e,d((I=r.deliveryPlatformOrders.meta.from)!=null?I:0),1),pe,e("span",he,d((B=r.deliveryPlatformOrders.meta.to)!=null?B:0),1),ve,e("span",ge,d(r.deliveryPlatformOrders.meta.total),1),xe]),l(k,{modelValue:a.value.numberPerPage,"onUpdate:modelValue":s[9]||(s[9]=t=>a.value.numberPerPage=t),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:C},null,8,["modelValue","options"])])])]),e("div",ye,[e("div",be,[e("div",we,[e("table",Ce,[e("thead",Ve,[e("tr",ke,[l(p,null,{default:o(()=>[n(" # ")]),_:1}),l(U,{modelName:"order_created_at",sortKey:a.value.sortKey,sortBy:a.value.sortBy,onSortTable:s[10]||(s[10]=t=>D("order_created_at"))},{default:o(()=>[n(" Order Time ")]),_:1},8,["sortKey","sortBy"]),l(p,null,{default:o(()=>[n(" Platform ")]),_:1}),l(p,null,{default:o(()=>[n(" Order ID ")]),_:1}),l(p,null,{default:o(()=>[n(" Short Order ID ")]),_:1}),l(p,null,{default:o(()=>[n(" Status ")]),_:1}),l(U,{modelName:"vend_code",sortKey:a.value.sortKey,sortBy:a.value.sortBy,onSortTable:s[11]||(s[11]=t=>D("vend_code"))},{default:o(()=>[n(" Vend ")]),_:1},8,["sortKey","sortBy"]),l(p,null,{default:o(()=>[n(" Transaction "),Pe,n(" Order ID ")]),_:1}),l(p,null,{default:o(()=>[n(" (Channel) Item x Qty ")]),_:1}),l(p,null,{default:o(()=>[n(" Subtotal ")]),_:1}),l(p,null,{default:o(()=>[n(" Driver Phone Number ")]),_:1})])]),e("tbody",Le,[(i(!0),m(P,null,N(r.deliveryPlatformOrders.data,(t,u)=>(i(),m("tr",{key:t.id,class:"divide-x divide-gray-200"},[l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(r.deliveryPlatformOrders.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t.order_created_at),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t&&t.deliveryPlatform?t.deliveryPlatform.name:null)+" ",1),t.deliveryPlatformOperator?(i(),m("span",Se,[De,n("("+d(t.deliveryPlatformOperator?t.deliveryPlatformOperator.type:null)+") ",1)])):v("",!0)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[l(h(G),{href:"/delivery-platform-orders/"+t.id+"/edit",class:"text-blue-600"},{default:o(()=>[n(d(t.order_id),1)]),_:2},1032,["href"])]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t.short_order_id),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[e("div",{class:H(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",z(t.status)])},[e("div",Ie,[e("span",Be,d(t.status_name),1)])],2)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-left"},{default:o(()=>[n(d(t.deliveryProductMappingVend.vend.full_name),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[n(d(t.vend_transaction_order_id),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-left"},{default:o(()=>[e("ul",Me,[(i(!0),m(P,null,N(t.deliveryPlatformOrderItems,_=>(i(),m("li",Oe,[e("span",$e,[_.orderItemVendChannels[0]?(i(),m("span",Ne," (#"+d(_.orderItemVendChannels[0].vend_channel_code)+") ",1)):v("",!0)]),e("span",null,[n(d(_.deliveryProductMappingItem.product.code)+" ",1),je,n(" "+d(_.deliveryProductMappingItem.product.name),1)]),e("div",Ke,[_.deliveryProductMappingItem.product.thumbnail?(i(),m("a",{key:0,href:_.deliveryProductMappingItem.product.thumbnail.full_url,target:"_blank"},[e("img",{class:"object-scale-down h-24 w-24 md:h-16 md:w-20 rounded-full",src:_.deliveryProductMappingItem.product.thumbnail.full_url,alt:""},null,8,Ye)],8,Ue)):v("",!0)]),Fe,e("span",Te,d(_.qty),1)]))),256))])]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-right"},{default:o(()=>[n(d(t.subtotal_amount.toLocaleString(void 0,{minimumFractionDigits:h(S).is_currency_exponent_hidden?0:h(S).currency_exponent})),1)]),_:2},1032,["currentIndex","totalLength"]),l(c,{currentIndex:u,totalLength:r.deliveryPlatformOrders.length,inputClass:"text-center"},{default:o(()=>[e("div",ze,[e("span",null,d(t.driver_phone_number),1),t.deliveryPlatformOrderComplaint?(i(),m("div",{key:0,class:"inline-flex justify-center items-center rounded px-1.5 py-1 text-xs font-medium border min-w-full bg-yellow-400 text-gray-800 hover:cursor-pointer",onClick:_=>Y(t)},[e("div",Re,[l(h(X),{class:"h-4 w-4","aria-hidden":"true"}),qe])],8,Ae)):v("",!0)])]),_:2},1032,["currentIndex","totalLength"])]))),128)),r.deliveryPlatformOrders.data.length?v("",!0):(i(),m("tr",Ee,Ze))])]),r.deliveryPlatformOrders.data.length?(i(),j(R,{key:0,links:r.deliveryPlatformOrders.links,meta:r.deliveryPlatformOrders.meta},null,8,["links","meta"])):v("",!0)])])])]),x.value?(i(),j(J,{key:0,model:L.value,showModal:x.value,onModalClose:F},null,8,["model","showModal"])):v("",!0)]}),_:1})],64))}};export{_t as default};
