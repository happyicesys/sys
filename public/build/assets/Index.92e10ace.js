import{_ as R}from"./Authenticated.90f1cbff.js";import{_ as k}from"./Button.f9684ed8.js";import Y from"./Form.1e0f46f5.js";import{_ as q}from"./Paginator.99aac391.js";import{_ as H}from"./SearchInput.b596fdd0.js";import{_ as x}from"./MultiSelect.bc86ff70.js";import{_ as f,a as m}from"./TableData.04fc5165.js";import{_ as C}from"./TableHeadSort.60898873.js";import{g as c,h as J,f as g,a as t,u as y,w as o,F as P,o as p,Z as Q,b as l,i as A,d as r,t as i,k as T,l as _,c as N,O as U,n as W}from"./app.99614ce8.js";import{r as X}from"./PlusIcon.a79dfa8a.js";import{r as ee}from"./MagnifyingGlassIcon.8ba45cb2.js";import{r as te}from"./BackspaceIcon.dcb8cbd1.js";import{r as le}from"./PencilSquareIcon.2db2ec6c.js";import"./keyboard.9caa1f2d.js";import"./use-resolve-button-type.e812ba35.js";import"./RectangleStackIcon.f6dd4a8c.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.90c3a329.js";const se=l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Customers ",-1),oe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ae={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},ne={class:"flex justify-end"},re=l("span",null," Create ",-1),de={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ie=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ue=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category Group ",-1),ce=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Active? ",-1),me=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Zone ",-1),pe=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Price Template ",-1),ge=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Tags ",-1),fe=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is From CMS ",-1),ve={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},xe={class:"mt-3"},ye={class:"flex space-x-1"},_e=l("span",null," Search ",-1),he=l("span",null," Reset ",-1),be={class:"flex flex-col space-y-2"},ke={class:"text-sm text-gray-700 leading-5 flex space-x-1"},Ce=l("span",null,"Showing",-1),Ve={class:"font-medium"},Le=l("span",null,"to",-1),we={class:"font-medium"},Be=l("span",null,"of",-1),Pe={class:"font-medium"},Se=l("span",null,"results",-1),Oe={class:"mt-6 flex flex-col"},Ie={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},$e={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},je={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ke={class:"bg-gray-100"},Ae={class:"divide-x divide-gray-200"},Te={class:"bg-white"},Ne=["href"],Ue={key:0},Ge=l("br",null,null,-1),ze={key:0,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[10px] font-small border min-w-full bg-green-200"},Fe={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"},Me={key:0,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[12px] font-small border min-w-full bg-green-300"},De={key:1,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[12px] font-small border min-w-full bg-red-300"},Ze={class:"flex justify-center space-x-1"},Ee=l("span",null," Edit ",-1),Re={key:0},Ye=l("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),qe=[Ye],pt={__name:"Index",props:{customers:Object,categories:Object,categoryGroups:Object,priceTemplates:Object,profiles:Object,statuses:Object,tags:Object,users:Object,zones:Object},setup(d){const v=d,s=c({customer:"",name:"",status:"",sortKey:"",sortBy:!0,numberPerPage:100}),V=c(!1),h=c([]),G=c(),S=c([]),O=c([]),L=c([]),z=c([]);c([]);const I=c([]),F=c([]),$=c([]),M=c(""),w=c([]);J(()=>{h.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],w.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=w.value[0],S.value=v.categories.data.map(n=>({id:n.id,name:n.name})),O.value=v.categoryGroups.data.map(n=>({id:n.id,name:n.name})),L.value=v.priceTemplates.data.map(n=>({id:n.id,name:n.name})),z.value=v.profiles.data.map(n=>({id:n.id,name:n.name})),F.value=v.users.data.map(n=>({id:n.id,name:n.name})),$.value=v.zones.data.map(n=>({id:n.id,name:n.name})),L.value=v.priceTemplates.data.map(n=>({id:n.id,name:n.name})),I.value=v.tags.data.map(n=>({id:n.id,name:n.name})),s.value.is_active=h.value[0],s.value.is_cms=h.value[0]});function B(){U.get("/customers",{...s.value,is_cms:s.value.is_cms.id,is_active:s.value.is_active.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function D(){U.get("/customers")}function b(n){s.value.sortKey=n,s.value.sortBy=!s.value.sortBy,B()}function Z(){V.value=!1}return(n,a)=>(p(),g(P,null,[t(y(Q),{title:"Customers"}),t(R,null,{header:o(()=>[se]),default:o(()=>{var j,K;return[l("div",oe,[l("div",ae,[l("div",ne,[t(y(A),{href:"/customers/create"},{default:o(()=>[t(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:o(()=>[t(y(X),{class:"h-4 w-4","aria-hidden":"true"}),re]),_:1})]),_:1})]),l("div",de,[t(H,{placeholderStr:"Customer",modelValue:s.value.customer,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.customer=e)},{default:o(()=>[r(" Customer ")]),_:1},8,["modelValue"]),l("div",null,[ie,t(x,{modelValue:s.value.categories,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.categories=e),options:S.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ue,t(x,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.categoryGroups=e),options:O.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ce,t(x,{modelValue:s.value.is_active,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.is_active=e),options:h.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[me,t(x,{modelValue:s.value.zone_id,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.zone_id=e),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[pe,t(x,{modelValue:s.value.price_template_id,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.price_template_id=e),options:L.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ge,t(x,{modelValue:s.value.tags,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value.tags=e),options:I.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[fe,t(x,{modelValue:s.value.is_cms,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value.is_cms=e),options:h.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),l("div",ve,[l("div",xe,[l("div",ye,[t(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[8]||(a[8]=e=>B())},{default:o(()=>[t(y(ee),{class:"h-4 w-4","aria-hidden":"true"}),_e]),_:1}),t(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:a[9]||(a[9]=e=>D())},{default:o(()=>[t(y(te),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1})])]),l("div",be,[l("p",ke,[Ce,l("span",Ve,i((j=d.customers.meta.from)!=null?j:0),1),Le,l("span",we,i((K=d.customers.meta.to)!=null?K:0),1),Be,l("span",Pe,i(d.customers.meta.total),1),Se]),t(x,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":a[10]||(a[10]=e=>s.value.numberPerPage=e),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:B},null,8,["modelValue","options"])])])]),l("div",Oe,[l("div",Ie,[l("div",$e,[l("table",je,[l("thead",Ke,[l("tr",Ae,[t(f,null,{default:o(()=>[r(" # ")]),_:1}),t(f,null,{default:o(()=>[r(" Vend ID ")]),_:1}),t(C,{modelName:"name",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[11]||(a[11]=e=>b("name"))},{default:o(()=>[r(" Customer ")]),_:1},8,["sortKey","sortBy"]),t(f,null,{default:o(()=>[r(" Label ")]),_:1}),t(C,{modelName:"category_id",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[12]||(a[12]=e=>b("category_id"))},{default:o(()=>[r(" Category ")]),_:1},8,["sortKey","sortBy"]),t(C,{modelName:"category_group",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[13]||(a[13]=e=>b("category_group"))},{default:o(()=>[r(" Group ")]),_:1},8,["sortKey","sortBy"]),t(f,null,{default:o(()=>[r(" Del Address ")]),_:1}),t(f,null,{default:o(()=>[r(" Del Postcode ")]),_:1}),t(f,null,{default:o(()=>[r(" Tags ")]),_:1}),t(f,null,{default:o(()=>[r(" Zone ")]),_:1}),t(f,null,{default:o(()=>[r(" Status ")]),_:1}),t(C,{modelName:"created_at",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:a[14]||(a[14]=e=>b("created_at"))},{default:o(()=>[r(" Created At ")]),_:1},8,["sortKey","sortBy"]),t(f,null,{default:o(()=>[r(" Action ")]),_:1})])]),l("tbody",Te,[(p(!0),g(P,null,T(d.customers.data,(e,u)=>(p(),g("tr",{key:e.id,class:"divide-x divide-gray-200"},[t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(d.customers.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(e.vend?e.vend.code:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-left"},{default:o(()=>[l("a",{class:W([e.person_id?"text-blue-700":"text-gray-800"]),target:"_blank",href:"//admin.happyice.com.sg/person/"+e.person_id+"/edit"},[e.person_id?(p(),g("span",Ue,[r(i(e.virtual_customer_code)+" ("+i(e.virtual_customer_prefix)+") ",1),Ge])):_("",!0),r(" "+i(e.name),1)],10,Ne)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[e.person_id?(p(),g("div",ze," From CMS ")):_("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(e.category?e.category.name:""),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(e.category&&e.category.categoryGroup?e.category.categoryGroup.name:""),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-left"},{default:o(()=>[r(i(e.deliveryAddress?e.deliveryAddress.full_address:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(e.deliveryAddress?e.deliveryAddress.postcode:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-left"},{default:o(()=>[(p(!0),g(P,null,T(e.tags,E=>(p(),g("span",Fe,i(E.name),1))),256))]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(e.zone?e.zone.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[e.is_active?(p(),g("div",Me," Active ")):_("",!0),e.is_active?_("",!0):(p(),g("div",De," Not Active "))]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[r(i(e.created_at),1)]),_:2},1032,["currentIndex","totalLength"]),t(m,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:o(()=>[l("div",Ze,[t(y(A),{href:"/customers/"+e.id+"/edit"},{default:o(()=>[t(k,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-2 py-1 text-xs text-gray-800 flex space-x-1"},{default:o(()=>[t(y(le),{class:"w-4 h-4"}),Ee]),_:1})]),_:2},1032,["href"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.customers.data.length?_("",!0):(p(),g("tr",Re,qe))])]),d.customers.data.length?(p(),N(q,{key:0,links:d.customers.links,meta:d.customers.meta},null,8,["links","meta"])):_("",!0)])])])]),V.value?(p(),N(Y,{key:0,customer:G.value,type:M.value,showModal:V.value,onModalClose:Z},null,8,["customer","type","showModal"])):_("",!0)]}),_:1})],64))}};export{pt as default};
