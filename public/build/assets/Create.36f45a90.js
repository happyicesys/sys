import{g as _,T as C,Q as D,h as $,f as m,a,u as p,w as i,F as A,o as r,Z as I,b as e,e as w,n as L,l as n,m as U,S as O,d as u,c as S,t as x,i as M}from"./app.aee0ddd0.js";import{_ as T}from"./Authenticated.2632dc42.js";import{_ as N}from"./Button.6b07dcc4.js";import{_ as F}from"./DatePicker.2c466614.js";import{_ as c}from"./FormInput.2e3fcd22.js";import{_ as g}from"./MultiSelect.2bc52b1d.js";import{_ as q}from"./SearchAddressInput.b7d22ed9.js";import{r as G}from"./CheckCircleIcon.2231fcbc.js";import{r as R}from"./ArrowUturnLeftIcon.f03b6c0e.js";import"./keyboard.791df48e.js";import"./use-resolve-button-type.c7cd7066.js";import"./RectangleStackIcon.cf409a8f.js";import"./main.f8c8be7c.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.a1d77a56.js";import"./combobox.bfd96bc5.js";import"./disposables.7b840c4b.js";import"./MagnifyingGlassCircleIcon.de99f49b.js";const z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create Customer ",-1),K={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Q={class:"mt-6 flex flex-col"},Y={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Z={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5 mb-3"},H={class:"pb-5"},J=e("div",{class:"relative mb-5"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-start"},[e("span",{class:"px-2 bg-white text-lg font-medium text-gray-900 rounded"}," Customer ")])],-1),W={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-5 mb-3"},X={class:"sm:col-span-6 flex space-x-1"},ee={key:0},se={key:1},te={key:1,class:"inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border w-fit bg-green-300"},oe=e("div",{class:"flex flex-col"}," From CMS ",-1),le=[oe],de={key:2,class:"inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border w-fit bg-gray-300"},ae=e("div",{class:"flex flex-col"}," No Customer Binding ",-1),ie=[ae],re={key:0,class:"sm:col-span-6"},ne=e("legend",{class:"sr-only"},"Plan",-1),ue={class:"space-y-5"},me={class:"relative flex items-start"},ce={class:"flex h-6 items-center"},ve=e("div",{class:"ml-3 text-sm leading-6"},[e("label",{for:"is_existing",class:"font-medium text-gray-900"},"Pull From CMS")],-1),_e={class:"relative flex items-start"},pe={class:"flex h-6 items-center"},fe=e("div",{class:"ml-3 text-sm leading-6"},[e("label",{for:"is_new",class:"font-medium text-gray-900"},"Create New Customer")],-1),be={key:1,class:"sm:col-span-6"},ge={class:"sm:col-span-6"},xe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," CMS Customer ",-1),ye={key:2,class:"sm:col-span-6 grid grid-cols-1 gap-3 sm:grid-cols-6"},he={class:"sm:col-span-2"},Ve={class:"sm:col-span-3"},ke={class:"sm:col-span-2"},Ce={key:3,class:"sm:col-span-6 grid grid-cols-1 gap-3 sm:grid-cols-6"},we=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-6 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-start"},[e("span",{class:"px-4 bg-white text-lg font-medium text-gray-900 rounded"}," Contact ")])])],-1),Ue={class:"sm:col-span-3"},Oe={class:"sm:col-span-3"},Se={class:"sm:col-span-2"},Ne=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Phone Code ",-1),je={key:0,class:"text-sm text-red-600"},Be={class:"sm:col-span-4"},Ee=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-start"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"}," Address ")])])],-1),Pe={class:"sm:col-span-6"},De={class:"sm:col-span-3"},$e={class:"sm:col-span-3"},Ae={class:"sm:col-span-3"},Ie={class:"sm:col-span-3"},Le={class:"sm:col-span-3"},Me=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Country ",-1),Te={key:0,class:"text-sm text-red-600"},Fe={class:"sm:col-span-3 hidden"},qe={class:"sm:col-span-3 hidden"},Ge=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-start"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"}," Operator ")])])],-1),Re={class:"col-span-12 sm:col-span-6"},ze=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"},[u(" Operator "),e("span",{class:"text-red-500"}," * ")],-1),Ke={key:0,class:"text-sm text-red-600"},Qe={class:"sm:col-span-6"},Ye={class:"flex justify-between"},Ze={class:"flex space-x-1"},He=e("span",null," Save Customer ",-1),Je=e("span",null," Back ",-1),ps={__name:"Create",props:{cmsCustomerOptions:Object,vendOptions:Object,countries:Object,operatorOptions:Object,customer:Object,type:String},setup(d){const f=d,s=_(C(k()));_([]),_([{id:"true",value:"Yes"},{id:"false",value:"No"}]);const y=_([]),b=_([]),v=_(1),h=_([]),V=D().props.auth.permissions,j=_([]);function k(){return{id:"",customer_id:"",operator_id:"",begin_date:"",termination_date:"",id:"",code:"",name:"",address:{block_num:"",building:"",country_id:"",latitude:"",longitude:"",postcode:"",street_name:"",unit_num:""},contact:{name:"",email:"",phone_country_id:"",phone_num:""},vend_id:"",cms_customer_id:"",is_existing:1}}$(()=>{y.value=f.cmsCustomerOptions.map(l=>({id:l.id,full_name:l.prefix+"-"+l.code+" - "+l.company})),b.value=f.countries.data,h.value=f.operatorOptions.data,s.value=C(k()),j.value=f.vendOptions.map(l=>({id:l.id,full_name:l.code}))});function B(){s.value.clearErrors(),s.value.transform(l=>({...l,cms_customer_id:l.cms_customer_id?l.cms_customer_id.id:null,begin_date:l.begin_date&&l.begin_date!="Invalid date"?l.begin_date:null,termination_date:l.termination_date&&l.termination_date!="Invalid date"?l.termination_date:null,operator_id:l.operator_id?l.operator_id.id:null,contact:{...l.contact,phone_country_id:l.contact.phone_country_id?l.contact.phone_country_id.id:null},address:{...l.address,country_id:l.address.country_id?l.address.country_id.id:null},is_existing:v.value})).post("/customers/store",{onSuccess:()=>{},preserveState:!0,replace:!0})}function E(){s.value.clearErrors(),s.value.post("/customers/"+s.value.id+"/update",{onSuccess:()=>{emit("modalClose")},preserveState:!0,replace:!0})}function P(l){s.value.customer.address={block_num:l.BLK_NO,building:l.BUILDING,country_id:b.value[0],latitude:l.LATITUDE,longitude:l.LONGTITUDE,postcode:l.POSTAL,street_name:l.ROAD_NAME,unit_num:""}}return(l,t)=>(r(),m(A,null,[a(p(I),{title:"Customer"}),a(T,null,{header:i(()=>[z]),default:i(()=>[e("div",K,[e("div",Q,[e("div",Y,[e("div",Z,[e("form",{onSubmit:w(E,["prevent"]),id:"submit"},[e("div",H,[J,e("div",W,[e("div",X,[d.customer.id?(r(),m("div",{key:0,class:L(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border w-fit",[d.customer.is_active?"bg-green-300":"bg-red-300"]])},[d.customer.is_active?(r(),m("span",ee," Active ")):n("",!0),d.customer.is_active?n("",!0):(r(),m("span",se," Not Active "))],2)):n("",!0),d.customer.id&&d.customer.person_id?(r(),m("div",te,le)):n("",!0),d.customer.id&&!d.customer.vend?(r(),m("div",de,ie)):n("",!0)]),d.customer.id?n("",!0):(r(),m("fieldset",re,[ne,e("div",ue,[e("div",me,[e("div",ce,[U(e("input",{id:"isExisting","aria-describedby":"is-existing-description",name:"isExisting",type:"radio","onUpdate:modelValue":t[0]||(t[0]=o=>v.value=o),value:"1",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[O,v.value]])]),ve]),e("div",_e,[e("div",pe,[U(e("input",{id:"isExisting","aria-describedby":"is-new-description",name:"isExisting",type:"radio","onUpdate:modelValue":t[1]||(t[1]=o=>v.value=o),value:"0",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[O,v.value]])]),fe])])])),!d.customer.id&&v.value==1?(r(),m("div",be,[e("div",ge,[xe,a(g,{modelValue:s.value.cms_customer_id,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.cms_customer_id=o),options:y.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])])):n("",!0),d.customer.id&&!d.customer.person_id||!d.customer.id&&v.value!=1?(r(),m("div",ye,[e("div",he,[a(c,{modelValue:s.value.code,"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.code=o),error:s.value.errors.code,disabled:s.value.person_id},{default:i(()=>[u(" Cust Code ")]),_:1},8,["modelValue","error","disabled"])]),e("div",Ve,[a(c,{modelValue:s.value.name,"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.name=o),error:s.value.errors.name,required:"true",disabled:s.value.person_id},{default:i(()=>[u(" Cust Name ")]),_:1},8,["modelValue","error","disabled"])])])):n("",!0),e("div",ke,[p(V).includes("update customers")?(r(),S(F,{key:0,modelValue:s.value.begin_date,"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.begin_date=o),error:s.value.errors.begin_date,onInput:t[6]||(t[6]=o=>l.onDateFromChanged())},{default:i(()=>[u(" Begin Date ")]),_:1},8,["modelValue","error"])):n("",!0)]),d.customer.id&&!d.customer.person_id||!d.customer.id&&v.value!=1?(r(),m("div",Ce,[we,e("div",Ue,[a(c,{modelValue:s.value.contact.name,"onUpdate:modelValue":t[7]||(t[7]=o=>s.value.contact.name=o),error:s.value.errors["contact.name"],disabled:d.customer.person_id},{default:i(()=>[u(" Name ")]),_:1},8,["modelValue","error","disabled"])]),e("div",Oe,[a(c,{modelValue:s.value.contact.email,"onUpdate:modelValue":t[8]||(t[8]=o=>s.value.contact.email=o),error:s.value.errors["contact.email"],disabled:d.customer.person_id},{default:i(()=>[u(" Email ")]),_:1},8,["modelValue","error","disabled"])]),e("div",Se,[Ne,a(g,{modelValue:s.value.contact.phone_country_id,"onUpdate:modelValue":t[9]||(t[9]=o=>s.value.contact.phone_country_id=o),options:b.value,disabled:s.value.person_id,trackBy:"id",valueProp:"id",label:"phone_code",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options","disabled"]),s.value.errors["contact.phone_country_id"]?(r(),m("div",je,x(s.value.errors["contact.phone_country_id"]),1)):n("",!0)]),e("div",Be,[a(c,{modelValue:s.value.contact.phone_num,"onUpdate:modelValue":t[10]||(t[10]=o=>s.value.contact.phone_num=o),required:"true",error:s.value.errors["contact.phone_num"],disabled:d.customer.person_id},{default:i(()=>[u(" Phone Number ")]),_:1},8,["modelValue","error","disabled"])]),Ee,e("div",Pe,[a(q,{modelValue:s.value.address.postcode,"onUpdate:modelValue":t[11]||(t[11]=o=>s.value.address.postcode=o),onSelected:P,required:"true",error:s.value.errors["address.postcode"],disabled:d.customer.person_id},{default:i(()=>[u(" Postcode ")]),_:1},8,["modelValue","error","disabled"])]),e("div",De,[a(c,{modelValue:s.value.address.unit_num,"onUpdate:modelValue":t[12]||(t[12]=o=>s.value.address.unit_num=o),required:"true",error:s.value.errors["address.unit_num"]},{default:i(()=>[u(" Unit Num ")]),_:1},8,["modelValue","error"])]),e("div",$e,[a(c,{modelValue:s.value.address.block_num,"onUpdate:modelValue":t[13]||(t[13]=o=>s.value.address.block_num=o),error:s.value.errors["address.block_num"],disabled:d.customer.person_id},{default:i(()=>[u(" Block Num ")]),_:1},8,["modelValue","error","disabled"])]),e("div",Ae,[a(c,{modelValue:s.value.address.building,"onUpdate:modelValue":t[14]||(t[14]=o=>s.value.address.building=o),error:s.value.errors["address.building"],disabled:d.customer.person_id},{default:i(()=>[u(" Building Name ")]),_:1},8,["modelValue","error","disabled"])]),e("div",Ie,[a(c,{modelValue:s.value.address.street_name,"onUpdate:modelValue":t[15]||(t[15]=o=>s.value.address.street_name=o),required:"true",error:s.value.errors["address.street_name"],disabled:d.customer.person_id},{default:i(()=>[u(" Street Name ")]),_:1},8,["modelValue","error","disabled"])]),e("div",Le,[Me,a(g,{modelValue:s.value.address.country_id,"onUpdate:modelValue":t[16]||(t[16]=o=>s.value.address.country_id=o),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",disabled:d.customer.person_id},null,8,["modelValue","options","disabled"]),s.value.errors["address.country_id"]?(r(),m("div",Te,x(s.value.errors["address.country_id"]),1)):n("",!0)]),e("div",Fe,[a(c,{modelValue:s.value.address.latitude,"onUpdate:modelValue":t[17]||(t[17]=o=>s.value.address.latitude=o)},{default:i(()=>[u(" Latitude ")]),_:1},8,["modelValue"])]),e("div",qe,[a(c,{modelValue:s.value.address.longitude,"onUpdate:modelValue":t[18]||(t[18]=o=>s.value.address.longitude=o)},{default:i(()=>[u(" Longitude ")]),_:1},8,["modelValue"])])])):n("",!0),Ge,e("div",Re,[ze,a(g,{modelValue:s.value.operator_id,"onUpdate:modelValue":t[19]||(t[19]=o=>s.value.operator_id=o),options:h.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"top",class:"mt-1"},null,8,["modelValue","options"]),s.value.errors.operator_id?(r(),m("div",Ke,x(s.value.errors.operator_id),1)):n("",!0)]),e("div",Qe,[e("span",Ye,[e("span",Ze,[p(V).includes("update customers")?(r(),S(N,{key:0,type:"button",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1",onClick:t[20]||(t[20]=w(o=>B(),["prevent"]))},{default:i(()=>[a(p(G),{class:"w-4 h-4"}),He]),_:1})):n("",!0),a(p(M),{href:"/customers"},{default:i(()=>[a(N,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:i(()=>[a(p(R),{class:"w-4 h-4"}),Je]),_:1})]),_:1})])])])])])],32)])])])])]),_:1})],64))}};export{ps as default};
