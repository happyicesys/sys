import{i as _,u as v,l as C,j as $,o as n,c as j,a as t,w as d,T as B,d as s,g as i,p as f,t as x,f as p,b as y,e as O}from"./app.cf6e579d.js";import{_ as V}from"./Button.d2aa38bb.js";import{_ as m}from"./FormInput.30a8bc13.js";import{_ as U}from"./Modal.46a96a94.js";import{_ as w}from"./MultiSelect.452cecaa.js";import{r as N}from"./ArrowUturnLeftIcon.4141a8fc.js";import{r as M}from"./CheckCircleIcon.18935ad3.js";import"./open-closed.3b5807ce.js";const E={class:"flex flex-col md:flex-row space-x-2"},P={key:0,class:"text-gray-600"},T={key:1},F={key:2,class:"text-gray-600"},R=["onSubmit"],D={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},q={class:"col-span-12 sm:col-span-6"},L=p(" Name "),z={class:"col-span-12 sm:col-span-6"},A=p(" Email "),G={class:"col-span-12 sm:col-span-6"},H=p(" Username "),I={class:"col-span-12 sm:col-span-6"},J={key:0,class:"col-span-12 sm:col-span-6"},K=s("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Role ",-1),Q={class:"col-span-12 sm:col-span-6"},W=s("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),X={key:0,class:"text-sm text-red-600"},Y={class:"sm:col-span-6"},Z={class:"flex space-x-1 mt-5 justify-end"},ee=s("span",null," Back ",-1),oe=s("span",null," Save ",-1),ue={__name:"Form",props:{user:Object,countries:Object,operators:Object,roles:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(u,{emit:g}){const l=u,e=_(v(c())),b=_([]),h=_([]),k=C().props.value.auth.operatorRole;$(()=>{e.value=l.user?v({...c(),...l.user}):v(c()),b.value=l.operators.data,h.value=l.roles.data});function c(){return{name:"",email:"",username:"",password:"",operator_id:"",role_id:""}}function S(){e.value.clearErrors(),l.type==="create"&&e.value.transform(r=>({...r,operator_id:r.operator_id.id,role_id:r.role_id.id})).post("/users/create",{onSuccess:()=>{g("modalClose")},preserveState:!0,replace:!0}),l.type==="update"&&e.value.transform(r=>({...r,operator_id:r.operator_id.id,role_id:r.role_id.id})).post("/users/"+e.value.id+"/update",{onSuccess:()=>{g("modalClose")},preserveState:!0,replace:!0})}return(r,o)=>(n(),j(B,{to:"body"},[t(U,{open:u.showModal,onModalClose:o[7]||(o[7]=a=>r.$emit("modalClose"))},{header:d(()=>[s("div",E,[l.user?(n(),i("span",P," Editing ")):f("",!0),l.user?(n(),i("span",T,x(l.user.name),1)):(n(),i("span",F," Create New User "))])]),default:d(()=>[s("form",{onSubmit:O(S,["prevent"]),id:"submit"},[s("div",D,[s("div",q,[t(m,{modelValue:e.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value.name=a),error:e.value.errors.name,required:"true"},{default:d(()=>[L]),_:1},8,["modelValue","error"])]),s("div",z,[t(m,{modelValue:e.value.email,"onUpdate:modelValue":o[1]||(o[1]=a=>e.value.email=a),error:e.value.errors.email},{default:d(()=>[A]),_:1},8,["modelValue","error"])]),s("div",G,[t(m,{modelValue:e.value.username,"onUpdate:modelValue":o[2]||(o[2]=a=>e.value.username=a),error:e.value.errors.username},{default:d(()=>[H]),_:1},8,["modelValue","error"])]),s("div",I,[t(m,{modelValue:e.value.password,"onUpdate:modelValue":o[3]||(o[3]=a=>e.value.password=a),error:e.value.errors.password,placeholderStr:[u.type=="update"?"Leave blank for same password":""],inputType:"password",autocomplete:"new-password"},{default:d(()=>[p(" Password "+x(u.type=="update"?"(Override)":""),1)]),_:1},8,["modelValue","error","placeholderStr"])]),y(k)?f("",!0):(n(),i("div",J,[K,t(w,{modelValue:e.value.role_id,"onUpdate:modelValue":o[4]||(o[4]=a=>e.value.role_id=a),options:h.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])),s("div",Q,[W,t(w,{modelValue:e.value.operator_id,"onUpdate:modelValue":o[5]||(o[5]=a=>e.value.operator_id=a),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"top",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.operator_id?(n(),i("div",X,x(e.value.errors.operator_id),1)):f("",!0)])]),s("div",Y,[s("div",Z,[t(V,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:o[6]||(o[6]=a=>r.$emit("modalClose")),form:"submit"},{default:d(()=>[t(y(N),{class:"w-4 h-4"}),ee]),_:1}),t(V,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:d(()=>[t(y(M),{class:"w-4 h-4"}),oe]),_:1})])])],40,R)]),_:1},8,["open"])]))}};export{ue as default};
