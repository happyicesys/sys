import{o as r,g as n,d as e,i as v,u as h,j as S,c as j,a as d,w as i,T as A,p as c,t as m,n as C,b as f,F as M,m as N,e as U,f as _}from"./app.af89aff7.js";import{_ as x}from"./Button.a5e4aba5.js";import{_ as B}from"./FormInput.23b5513a.js";import{_ as F}from"./FormTextarea.41c63f6d.js";import{_ as D}from"./Modal.2a551b42.js";import{_ as g}from"./MultiSelect.aa3a34c6.js";import{r as T}from"./ArrowUturnLeftIcon.fdb91ce7.js";import{r as E}from"./CheckCircleIcon.6a17fd85.js";import{r as P}from"./BackspaceIcon.0a13fd7b.js";import"./open-closed.b6538a35.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.768f14c7.js";function q(p,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z","clip-rule":"evenodd"})])}const L={class:"flex flex-col md:flex-row space-x-2"},R={key:0,class:"text-gray-600"},G={key:1},H={key:2,class:"text-gray-600"},I=["onSubmit"],J={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},K={class:"sm:col-span-2"},Q=_(" Code "),W={class:"sm:col-span-4"},X=_(" Name "),Y={class:"sm:col-span-6"},Z=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Country ",-1),ee={key:0,class:"text-sm text-red-600"},te={class:"sm:col-span-6"},se=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Timezone ",-1),oe={key:0,class:"text-sm text-red-600"},ae={class:"sm:col-span-6"},re=_(" Remarks "),le={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},ne=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Access Vending Machine(s) ")])],-1),de=[ne],ie={key:1,class:"sm:col-span-5"},ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine to Bind ",-1),me={key:0,class:"text-sm text-red-600"},ue={key:2,class:"sm:col-span-1"},pe=e("span",null," Add ",-1),_e={key:3,class:"sm:col-span-6 flex flex-col mt-3"},ve={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},fe={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},xe={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},ye={class:"min-w-full divide-y divide-gray-300"},he=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),ge={class:"bg-white"},be={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},we={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Ve={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ke={key:0},Ce=e("br",null,null,-1),Be={key:1},ze={class:"whitespace-nowrap py-4 text-sm text-center"},$e={key:0},Oe=e("td",{colspan:"4",class:"whitespace-nowrap py-4 text-sm font-medium text-red-600 text-center"}," No Binding = Access to All ",-1),Se=[Oe],je={class:"sm:col-span-6"},Ae={class:"flex space-x-1 mt-5 justify-end"},Me=e("span",null," Back ",-1),Ne=e("span",null," Save ",-1),Je={__name:"Form",props:{countries:[Array,Object],operator:Object,timezones:[Array,Object],type:String,showModal:Boolean,unbindedVends:[Array,Object]},emits:["modalClose","refreshData"],setup(p,{emit:y}){const l=p,b=v([]),t=v(h(V())),w=v([]),u=v([]);S(()=>{b.value=l.countries.data,w.value=l.timezones.map((a,s)=>({id:s,name:a})),u.value=l.unbindedVends.data,t.value=l.operator?h(l.operator):h(V())});function V(){return{id:"",code:"",name:"",country_id:"",timezone:"",remarks:"",vend_id:""}}function z(){l.operator.vends.indexOf(t.value.vend_id)<0&&(l.operator.vends.push(t.value.vend_id),l.operator.vends.sort((a,s)=>a.code-s.code),u.value.splice(u.value.indexOf(t.value.vend_id),1),u.value.sort((a,s)=>a.code-s.code))}function $(a){l.operator.vends.splice(l.operator.vends.indexOf(a),1),u.value.push(a),u.value.sort((s,o)=>s.code-o.code)}function O(){t.value.clearErrors(),l.type==="create"&&t.value.transform(a=>({...a,timezone:a.timezone.name,country_id:a.country_id.id})).post("/operators/create",{onSuccess:()=>{y("modalClose")},preserveState:!0,replace:!0}),l.type==="update"&&t.value.transform(a=>({...a,timezone:a.timezone.name,country_id:a.country_id.id,operator:l.operator})).post("/operators/"+t.value.id+"/update",{onSuccess:()=>{y("modalClose")},preserveState:!0,replace:!0})}return(a,s)=>(r(),j(A,{to:"body"},[d(D,{open:p.showModal,onModalClose:s[8]||(s[8]=o=>a.$emit("modalClose"))},{header:i(()=>[e("div",L,[l.operator?(r(),n("span",R," Editing ")):c("",!0),l.operator?(r(),n("span",G,m(l.operator.name),1)):(r(),n("span",H," Create New Operator "))])]),default:i(()=>[e("form",{onSubmit:U(O,["prevent"]),id:"submit"},[e("div",J,[e("div",K,[d(B,{modelValue:t.value.code,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.code=o),error:t.value.errors.code},{default:i(()=>[Q]),_:1},8,["modelValue","error"])]),e("div",W,[d(B,{modelValue:t.value.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.name=o),error:t.value.errors.name,required:"true"},{default:i(()=>[X]),_:1},8,["modelValue","error"])]),e("div",Y,[Z,d(g,{modelValue:t.value.country_id,"onUpdate:modelValue":s[2]||(s[2]=o=>t.value.country_id=o),options:b.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.country_id?(r(),n("div",ee,m(t.value.errors.country_id),1)):c("",!0)]),e("div",te,[se,d(g,{modelValue:t.value.timezone,"onUpdate:modelValue":s[3]||(s[3]=o=>t.value.timezone=o),options:w.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.timezone?(r(),n("div",oe,m(t.value.errors.timezone),1)):c("",!0)]),e("div",ae,[d(F,{modelValue:t.value.remarks,"onUpdate:modelValue":s[4]||(s[4]=o=>t.value.remarks=o),error:t.value.errors.remarks},{default:i(()=>[re]),_:1},8,["modelValue","error"])]),t.value.id?(r(),n("div",le,de)):c("",!0),t.value.id?(r(),n("div",ie,[ce,d(g,{modelValue:t.value.vend_id,"onUpdate:modelValue":s[5]||(s[5]=o=>t.value.vend_id=o),options:u.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",ref:"multiselect"},null,8,["modelValue","options"]),t.value.errors.vend_id?(r(),n("div",me,m(t.value.errors.vend_id),1)):c("",!0)])):c("",!0),t.value.id?(r(),n("div",ue,[d(x,{type:"button",onClick:s[6]||(s[6]=o=>z()),class:C(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[t.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!t.value.vend_id},{default:i(()=>[d(f(q),{class:"w-4 h-4"}),pe]),_:1},8,["class","disabled"])])):c("",!0),t.value.id?(r(),n("div",_e,[e("div",ve,[e("div",fe,[e("div",xe,[e("table",ye,[he,e("tbody",ge,[(r(!0),n(M,null,N(p.operator.vends,(o,k)=>(r(),n("tr",{key:o.id,class:C(k%2===0?void 0:"bg-gray-50")},[e("td",be,m(k+1),1),e("td",we,m(o.code),1),e("td",Ve,[o.latestVendBinding&&o.latestVendBinding.customer?(r(),n("span",ke,[_(m(o.latestVendBinding.customer.code)+" ",1),Ce,_(" "+m(o.latestVendBinding.customer.name),1)])):(r(),n("span",Be,m(o.name),1))]),e("td",ze,[d(x,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:Ue=>$(o)},{default:i(()=>[d(f(P),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),p.operator.vends.length?c("",!0):(r(),n("tr",$e,Se))])])])])])])):c("",!0)]),e("div",je,[e("div",Ae,[d(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:s[7]||(s[7]=o=>a.$emit("modalClose")),form:"submit"},{default:i(()=>[d(f(T),{class:"w-4 h-4"}),Me]),_:1}),d(x,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:i(()=>[d(f(E),{class:"w-4 h-4"}),Ne]),_:1})])])],40,I)]),_:1},8,["open"])]))}};export{Je as default};
