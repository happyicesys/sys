import{_ as G}from"./Authenticated.5914d038.js";import{_ as B}from"./Button.1651e07c.js";import{d as N}from"./main.161c1325.js";import{o as f,g as v,d as t,r as j,a,b as y,a2 as k,i as g,j as E,w as l,F as M,H as A,t as i,m as F,p as I,c as K,f as r,J as w}from"./app.278c15b3.js";import{_ as O,r as H,a as J,T as m,b as R,c as Y,d as c}from"./TableHeadSort.8d0fc293.js";import{_}from"./MultiSelect.855de355.js";import"./open-closed.ce85e457.js";import"./use-resolve-button-type.d09d7927.js";import"./RectangleStackIcon.6fcdc1d3.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.8a461f2f.js";const q={for:"text",class:"block text-sm font-medium text-gray-700"},z={class:"mt-1"},$={__name:"DatePicker",props:{modelValue:[Date,String],minDate:[Date,String],maxDate:[Date,String],enableTimePicker:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:p}){function x(h){p("update:modelValue",k(h).format("Y-M-D"))}return(h,o)=>(f(),v("div",null,[t("label",q,[j(h.$slots,"default")]),t("div",z,[a(y(N),{modelValue:n.modelValue,"onUpdate:modelValue":x,format:"yyyy-MM-dd",clearable:!1,monthChangeOnScroll:!1,autoApply:"",closeOnAutoApply:!0,minDate:n.minDate,maxDate:n.maxDate,enableTimePicker:n.enableTimePicker},null,8,["modelValue","minDate","maxDate","enableTimePicker"])])]))}},Q=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (Transactions) ",-1),W={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},X={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},Z={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ee={class:"col-span-5 md:col-span-1"},te=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Vend ID ",-1),ae={class:"col-span-5 md:col-span-1"},oe=r(" From "),le={class:"col-span-5 md:col-span-1"},se=r(" To "),ne={class:"col-span-5 md:col-span-1"},de=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Channel Errors ",-1),re={class:"col-span-5 md:col-span-1"},ie=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Payment Method ",-1),ue={class:"col-span-5 md:col-span-1"},ce=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),me={class:"col-span-5 md:col-span-1"},pe=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ge=r(" Cust ID "),he=r(" Cust Name "),_e={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},fe={class:"mt-3"},ve={class:"flex space-x-1"},xe=t("span",null," Search ",-1),ye=t("span",null," Reset ",-1),be={class:"flex flex-col space-y-2"},Ve={class:"text-sm text-gray-700 leading-5 flex space-x-1"},Ce=t("span",null,"Showing",-1),ke={class:"font-medium"},Pe=t("span",null,"to",-1),De={class:"font-medium"},Se=t("span",null,"of",-1),Le={class:"font-medium"},Be=t("span",null,"results",-1),Me={class:"mt-6 flex flex-col"},Ie={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},we={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Oe={class:"min-w-full border-separate",style:{"border-spacing":"0"}},$e={class:"bg-gray-100"},Ue={class:"divide-x divide-gray-200"},Te=r(" # "),Ge=r(" Order ID "),Ne=r(" Transaction DateTime "),je=r(" Vend ID "),Ee=r(" Customer Name "),Ae=r(" Channel "),Fe=r(" Amount "),Ke=r(" Payment Method "),He=r(" Channels Error "),Je=r(" Dispensing Status "),Re={class:"bg-white"},Ye=t("br",null,null,-1),qe={key:0},ze=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Qe=[ze],rt={__name:"Transaction",props:{categories:Object,categoryGroups:Object,paymentMethods:Object,vends:Object,vendTransactions:Object,vendChannelErrors:Object},setup(n){const p=n,x=g([]),h=g([]);E(()=>{P.value=p.vends.data.map(d=>({id:d.id,code:d.code})),D.value=p.vendChannelErrors.data.map(d=>({id:d.id,desc:d.desc})),b.value=[{id:"",name:"All"},...p.paymentMethods.data.map(d=>({id:d.id,name:d.name}))],V.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.numberPerPage=V.value[0],o.value.paymentMethod=b.value[0],x.value=p.categories.data.map(d=>({id:d.id,name:d.name})),h.value=p.categoryGroups.data.map(d=>({id:d.id,name:d.name}))});const o=g({codes:[],categories:[],categoryGroups:[],customer_code:"",customer_name:"",errors:[],paymentMethod:"",date_from:k().startOf("month").toDate(),date_to:k().toDate(),sortKey:"",sortBy:!1,numberPerPage:100}),P=g([]),D=g([]),b=g([]),V=g([]);function C(){w.Inertia.get("/vends/transactions",{...o.value,categories:o.value.categories.map(d=>d.id),categoryGroups:o.value.categoryGroups.map(d=>d.id),codes:o.value.codes.map(d=>d.id),errors:o.value.errors.map(d=>d.id),paymentMethod:o.value.paymentMethod.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function U(){w.Inertia.get("/vends/transactions")}function T(d){o.value.sortKey=d,o.value.sortBy=!o.value.sortBy,C()}return(d,s)=>(f(),v(M,null,[a(y(A),{title:"VM Transactions"}),a(G,null,{header:l(()=>[Q]),default:l(()=>{var S,L;return[t("div",W,[t("div",X,[t("div",Z,[t("div",ee,[te,a(_,{modelValue:o.value.codes,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.codes=e),options:P.value,valueProp:"id",label:"code",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",ae,[a($,{modelValue:o.value.date_from,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.date_from=e),class:"col-span-5 md:col-span-1"},{default:l(()=>[oe]),_:1},8,["modelValue"])]),t("div",le,[a($,{modelValue:o.value.date_to,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value.date_to=e),minDate:o.value.date_from,class:"col-span-5 md:col-span-1"},{default:l(()=>[se]),_:1},8,["modelValue","minDate"])]),t("div",ne,[de,a(_,{modelValue:o.value.errors,"onUpdate:modelValue":s[3]||(s[3]=e=>o.value.errors=e),options:D.value,valueProp:"id",label:"desc",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",re,[ie,a(_,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":s[4]||(s[4]=e=>o.value.paymentMethod=e),options:b.value,valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",ue,[ce,a(_,{modelValue:o.value.categories,"onUpdate:modelValue":s[5]||(s[5]=e=>o.value.categories=e),options:x.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",me,[pe,a(_,{modelValue:o.value.categoryGroups,"onUpdate:modelValue":s[6]||(s[6]=e=>o.value.categoryGroups=e),options:h.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),a(O,{placeholderStr:"Cust ID",modelValue:o.value.customer_code,"onUpdate:modelValue":s[7]||(s[7]=e=>o.value.customer_code=e)},{default:l(()=>[ge]),_:1},8,["modelValue"]),a(O,{placeholderStr:"Cust Name",modelValue:o.value.customer_name,"onUpdate:modelValue":s[8]||(s[8]=e=>o.value.customer_name=e)},{default:l(()=>[he]),_:1},8,["modelValue"])]),t("div",_e,[t("div",fe,[t("div",ve,[a(B,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[9]||(s[9]=e=>C())},{default:l(()=>[a(y(H),{class:"h-4 w-4","aria-hidden":"true"}),xe]),_:1}),a(B,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[10]||(s[10]=e=>U())},{default:l(()=>[a(y(J),{class:"h-4 w-4","aria-hidden":"true"}),ye]),_:1})])]),t("div",be,[t("p",Ve,[Ce,t("span",ke,i((S=n.vendTransactions.meta.from)!=null?S:0),1),Pe,t("span",De,i((L=n.vendTransactions.meta.to)!=null?L:0),1),Se,t("span",Le,i(n.vendTransactions.meta.total),1),Be]),a(_,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":s[11]||(s[11]=e=>o.value.numberPerPage=e),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:C},null,8,["modelValue","options"])])])]),t("div",Me,[t("div",Ie,[t("div",we,[t("table",Oe,[t("thead",$e,[t("tr",Ue,[a(m,null,{default:l(()=>[Te]),_:1}),a(m,null,{default:l(()=>[Ge]),_:1}),a(R,{modelName:"transaction_datetime",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[12]||(s[12]=e=>T("transaction_datetime"))},{default:l(()=>[Ne]),_:1},8,["sortKey","sortBy"]),a(m,null,{default:l(()=>[je]),_:1}),a(m,null,{default:l(()=>[Ee]),_:1}),a(m,null,{default:l(()=>[Ae]),_:1}),a(m,null,{default:l(()=>[Fe]),_:1}),a(m,null,{default:l(()=>[Ke]),_:1}),a(m,null,{default:l(()=>[He]),_:1}),a(m,null,{default:l(()=>[Je]),_:1})])]),t("tbody",Re,[(f(!0),v(M,null,F(n.vendTransactions.data,(e,u)=>(f(),v("tr",{key:e.id,class:"divide-x divide-gray-200"},[a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(n.vendTransactions.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(e.order_id),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(e.transaction_datetime),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(e.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-left"},{default:l(()=>[r(i(e.vend.latestVendBinding&&e.vend.latestVendBinding.customer?e.vend.latestVendBinding.customer.code:null)+" ",1),Ye,r(" "+i(e.vend.latestVendBinding&&e.vend.latestVendBinding.customer?e.vend.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(e.vendChannel.code),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-right"},{default:l(()=>[r(i(e.amount),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-left"},{default:l(()=>[r(i(e.paymentMethod?e.paymentMethod.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(e.vendChannelError?e.vendChannelError.desc:""),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:n.vendTransactions.length,inputClass:"text-center"},{default:l(()=>[r(i(e.vendTransactionJson&&e.vendTransactionJson.ISOK==1?"Success":"Failure"),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),n.vendTransactions.data.length?I("",!0):(f(),v("tr",qe,Qe))])]),n.vendTransactions.data.length?(f(),K(Y,{key:0,links:n.vendTransactions.links,meta:n.vendTransactions.meta},null,8,["links","meta"])):I("",!0)])])])])]}),_:1})],64))}};export{rt as default};
