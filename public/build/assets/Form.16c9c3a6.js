import{g as U,o as i,c as V,w as r,b as t,a as l,u as p,r as C,f as v,l as y,F as N,k as B,t as g,T as w,h as A,p as j,d,e as D}from"./app.9a1671af.js";import{_ as $}from"./Button.ce36953c.js";import{_ as u}from"./FormInput.28232379.js";import{_ as E}from"./Modal.8c9f4013.js";import{_ as S}from"./MultiSelect.3ab77758.js";import{e as L,o as P,t as T,r as q,l as I,a as O,Z as M}from"./MagnifyingGlassCircleIcon.ae016cd6.js";import{r as F}from"./ArrowUturnLeftIcon.bde51597.js";import{r as G}from"./CheckCircleIcon.74bfa35d.js";import"./keyboard.cb617b34.js";import"./disposables.2fb2334e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.794575d6.js";import"./use-resolve-button-type.2e329c8c.js";const R={class:"flex space-x-1"},Y={key:0,class:"text-red-500"},Z={class:"relative mt-1"},z=["onClick"],K={class:"block truncate"},H={__name:"SearchAddressInput",props:{modelValue:String,required:[Boolean,String]},emits:["update:modelValue","selected"],setup(b,{emit:k}){const n=k,f=U([]),e=_.debounce(async m=>{const x="https://developers.onemap.sg/commonapi/search?searchVal="+m.target.value+"&returnGeom=Y&getAddrDetails=Y";let a=await(await fetch(x)).json();a&&(f.value=await a.results)},300);function c(m){n("update:modelValue",m.target.value),e(m)}function h(m){n("selected",m)}return(m,x)=>(i(),V(p(M),{as:"div"},{default:r(()=>[t("div",R,[l(p(L),{class:"block text-sm font-medium text-gray-700"},{default:r(()=>[C(m.$slots,"default")]),_:3}),b.required?(i(),v("span",Y," * ")):y("",!0)]),t("div",Z,[l(p(P),{class:"w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",onInput:c,value:b.modelValue},null,8,["value"]),l(p(T),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:r(()=>[l(p(q),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),f.value.length>0?(i(),V(p(I),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:r(()=>[(i(!0),v(N,null,B(f.value,a=>(i(),V(p(O),{as:"template"},{default:r(()=>[t("li",{class:"relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-100",onClick:s=>h(a)},[t("span",K,g(a.ADDRESS),1)],8,z)]),_:2},1024))),256))]),_:1})):y("",!0)])]),_:3}))}},J={class:"flex flex-col md:flex-row space-x-2"},Q={key:0,class:"text-gray-600"},W={key:1},X={key:2,class:"text-gray-600"},ee={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},te={class:"sm:col-span-4"},se={class:"sm:col-span-2"},oe={class:"sm:col-span-3"},ae={class:"sm:col-span-3"},le=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Base Currency ",-1),re={key:0,class:"text-sm text-red-600"},de=t("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-4 bg-white text-lg font-medium text-gray-900"}," Contact ")])])],-1),ne={class:"sm:col-span-3"},ue={class:"sm:col-span-3"},ie={class:"sm:col-span-2"},ce=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Phone Code ",-1),me={key:0,class:"text-sm text-red-600"},pe={class:"sm:col-span-4"},_e=t("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Address ")])])],-1),ve={class:"sm:col-span-6"},fe={class:"sm:col-span-3"},ye={class:"sm:col-span-3"},be={class:"sm:col-span-3"},ge={class:"sm:col-span-3"},he={class:"sm:col-span-3"},xe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Country ",-1),Ve={key:0,class:"text-sm text-red-600"},ke={class:"sm:col-span-3 hidden"},we={class:"sm:col-span-3 hidden"},Se={class:"sm:col-span-6"},Ue={class:"flex space-x-1 mt-5 justify-end"},$e=t("span",null," Back ",-1),Ce=t("span",null," Save ",-1),Me={__name:"Form",props:{profile:Object,countries:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(b,{emit:k}){const n=b,f=k,e=U(w(h())),c=U([]);A(()=>{c.value=n.countries.data,e.value=n.profile?w(n.profile):w(h()),n.type==="create"&&(e.value.base_currency_id=e.value.base_currency_id?e.value.base_currency_id:c.value[0],e.value.address.country_id=e.value.address.country_id?e.value.address.country_id:c.value[0],e.value.contact.phone_country_id=e.value.contact.phone_country_id?e.value.contact.phone_country_id:c.value[0])});function h(){return{alias:"",name:"",uen:"",base_currency_id:"",address:{block_num:"",building:"",country_id:"",latitude:"",longitude:"",postcode:"",street_name:"",unit_num:""},contact:{name:"",email:"",phone_country_id:"",phone_num:""}}}function m(a){e.value.address={block_num:a.BLK_NO,building:a.BUILDING,country_id:c.value[0],latitude:a.LATITUDE,longitude:a.LONGTITUDE,postcode:a.POSTAL,street_name:a.ROAD_NAME,unit_num:""}}function x(){e.value.clearErrors(),n.type==="create"&&e.value.transform(a=>({...a,base_currency_id:a.base_currency_id.id,address:{...a.address,country_id:a.address.country_id.id},contact:{...a.contact,phone_country_id:a.contact.phone_country_id.id}})).post("/profiles/create",{onSuccess:()=>{f("modalClose")},preserveState:!0,replace:!0}),n.type==="update"&&e.value.transform(a=>({...a,base_currency_id:a.base_currency_id.id,address:{...a.address,country_id:a.address.country_id.id},contact:{...a.contact,phone_country_id:a.contact.phone_country_id.id}})).post("/profiles/"+e.value.id+"/update",{onSuccess:()=>{f("modalClose")},preserveState:!0,replace:!0})}return(a,s)=>(i(),V(j,{to:"body"},[l(E,{open:b.showModal,onModalClose:s[17]||(s[17]=o=>a.$emit("modalClose"))},{header:r(()=>[t("div",J,[n.profile?(i(),v("span",Q," Editing ")):y("",!0),n.profile?(i(),v("span",W,g(n.profile.name),1)):(i(),v("span",X," Create New Profile "))])]),default:r(()=>[t("form",{onSubmit:D(x,["prevent"]),id:"submit"},[t("div",ee,[t("div",te,[l(u,{modelValue:e.value.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.name=o),error:e.value.errors.name,required:"true"},{default:r(()=>[d(" Name ")]),_:1},8,["modelValue","error"])]),t("div",se,[l(u,{modelValue:e.value.alias,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.alias=o),error:e.value.errors.alias},{default:r(()=>[d(" Alias ")]),_:1},8,["modelValue","error"])]),t("div",oe,[l(u,{modelValue:e.value.uen,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.uen=o),error:e.value.errors.uen},{default:r(()=>[d(" UEN ")]),_:1},8,["modelValue","error"])]),t("div",ae,[le,l(S,{modelValue:e.value.base_currency_id,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.base_currency_id=o),options:c.value,trackBy:"id",valueProp:"id",label:"currency_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.base_currency_id?(i(),v("div",re,g(e.value.errors.base_currency_id),1)):y("",!0)]),de,t("div",ne,[l(u,{modelValue:e.value.contact.name,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.contact.name=o),error:e.value.errors["contact.name"]},{default:r(()=>[d(" Name ")]),_:1},8,["modelValue","error"])]),t("div",ue,[l(u,{modelValue:e.value.contact.email,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.contact.email=o),error:e.value.errors["contact.email"]},{default:r(()=>[d(" Email ")]),_:1},8,["modelValue","error"])]),t("div",ie,[ce,l(S,{modelValue:e.value.contact.phone_country_id,"onUpdate:modelValue":s[6]||(s[6]=o=>e.value.contact.phone_country_id=o),options:c.value,trackBy:"id",valueProp:"id",label:"phone_code",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors["contact.phone_country_id"]?(i(),v("div",me,g(e.value.errors["contact.phone_country_id"]),1)):y("",!0)]),t("div",pe,[l(u,{modelValue:e.value.contact.phone_num,"onUpdate:modelValue":s[7]||(s[7]=o=>e.value.contact.phone_num=o),required:"true",error:e.value.errors["contact.phone_num"]},{default:r(()=>[d(" Phone Number ")]),_:1},8,["modelValue","error"])]),_e,t("div",ve,[l(H,{modelValue:e.value.address.postcode,"onUpdate:modelValue":s[8]||(s[8]=o=>e.value.address.postcode=o),onSelected:m,required:"true",error:e.value.errors["address.postcode"]},{default:r(()=>[d(" Postcode ")]),_:1},8,["modelValue","error"])]),t("div",fe,[l(u,{modelValue:e.value.address.unit_num,"onUpdate:modelValue":s[9]||(s[9]=o=>e.value.address.unit_num=o),required:"true",error:e.value.errors["address.unit_num"]},{default:r(()=>[d(" Unit Num ")]),_:1},8,["modelValue","error"])]),t("div",ye,[l(u,{modelValue:e.value.address.block_num,"onUpdate:modelValue":s[10]||(s[10]=o=>e.value.address.block_num=o),error:e.value.errors["address.block_num"]},{default:r(()=>[d(" Block Num ")]),_:1},8,["modelValue","error"])]),t("div",be,[l(u,{modelValue:e.value.address.building,"onUpdate:modelValue":s[11]||(s[11]=o=>e.value.address.building=o),error:e.value.errors["address.building"]},{default:r(()=>[d(" Building Name ")]),_:1},8,["modelValue","error"])]),t("div",ge,[l(u,{modelValue:e.value.address.street_name,"onUpdate:modelValue":s[12]||(s[12]=o=>e.value.address.street_name=o),required:"true",error:e.value.errors["address.street_name"]},{default:r(()=>[d(" Street Name ")]),_:1},8,["modelValue","error"])]),t("div",he,[xe,l(S,{modelValue:e.value.address.country_id,"onUpdate:modelValue":s[13]||(s[13]=o=>e.value.address.country_id=o),options:c.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors["address.country_id"]?(i(),v("div",Ve,g(e.value.errors["address.country_id"]),1)):y("",!0)]),t("div",ke,[l(u,{modelValue:e.value.address.latitude,"onUpdate:modelValue":s[14]||(s[14]=o=>e.value.address.latitude=o)},{default:r(()=>[d(" Latitude ")]),_:1},8,["modelValue"])]),t("div",we,[l(u,{modelValue:e.value.address.longitude,"onUpdate:modelValue":s[15]||(s[15]=o=>e.value.address.longitude=o)},{default:r(()=>[d(" Longitude ")]),_:1},8,["modelValue"])])]),t("div",Se,[t("div",Ue,[l($,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:s[16]||(s[16]=o=>a.$emit("modalClose")),form:"submit"},{default:r(()=>[l(p(F),{class:"w-4 h-4"}),$e]),_:1}),l($,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:r(()=>[l(p(G),{class:"w-4 h-4"}),Ce]),_:1})])])],32)]),_:1},8,["open"])]))}};export{Me as default};
