import{_ as V}from"./Button.65d2358d.js";import{_ as B,r as S}from"./Modal.3e7210af.js";import{_ as $}from"./MultiSelect.78d1a5ea.js";import{h as x,j as D,K as M,c as g,a as u,w as y,s as j,o as s,b as e,f as d,m as n,t as a,d as h,u as l,l as E,F as N,n as f,O as P}from"./app.af2d89b1.js";import{r as F}from"./PencilSquareIcon.75981c81.js";import"./open-closed.142779fb.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.201c4cad.js";const q={class:"flex flex-col md:flex-row space-x-2"},I={key:0,class:"text-gray-600"},L={key:1},T={key:2},U={class:"flex flex-col"},Y={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},z={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},A={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},J={class:"table-fixed min-w-full divide-y divide-gray-300"},K={class:"bg-gray-50"},G=e("th",{scope:"col",class:"w-1/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"}," # ",-1),H={key:0,scope:"col",class:"w-2/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"},Q=e("th",{scope:"col",class:"w-1/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"}," Sold ",-1),R=e("th",{scope:"col",class:"w-1/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"}," Bal ",-1),W=e("th",{scope:"col",class:"w-1/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"}," Cap ",-1),X={scope:"col",class:"w-2/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"},Z={key:0},ee=e("th",{scope:"col",class:"w-1/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"}," Error ",-1),te={key:1,scope:"col",class:"w-3/12 px-3 py-3.5 text-center text-xs font-semibold text-gray-900"},se={class:"bg-white"},oe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},de={key:0,class:"whitespace-nowrap text-sm font-semibold text-gray-900 text-center"},re={class:"flex justify-center items-center"},ne=["src"],ae={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-blue-600 sm:pl-6 text-center"},ce={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},le={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ie={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},pe={class:"py-1 pl-1 pr-1 text-xs font-medium text-gray-900 sm:pl-1 text-center"},ue={key:0},_e={class:"font-bold"},me={key:1,class:"py-4 text-sm font-semibold text-gray-900 text-center"},xe={key:0},ye={key:0},fe={key:1,class:"break-normal text-xs"},ve=e("br",null,null,-1),ge={key:1,class:"font-normal text-xs text-gray-700"},he={class:"flex justify-between"},be={key:0,class:"flex space-x-1"},we=e("span",null," Edit Product ",-1),ke={key:1,class:"flex space-x-1"},Ce=e("span",null," Save ",-1),Oe={key:0,class:"flex flex-col text-blue-800 text-sm p-3"},Ve={key:0,class:""},Be={key:1},Pe={__name:"ChannelOverview",props:{productOptions:Object,vend:Object,showModal:Boolean},emits:["modalClose"],setup(r,{emit:b}){const i=r,v=x([]),_=x([]);D(()=>{v.value=i.productOptions.data.map(o=>({id:o.id,full_name:o.full_name+(o.desc?" "+o.desc:"")})),_.value=i.vend.vendChannelsJson.map(o=>({...o,product:o.product?{...o.product,option_data:{id:o.product.id,full_name:o.product.code+" - "+o.product.name+(o.product.desc?" "+o.product.desc:"")}}:null}))});const m=M().props.auth.profile,c=x(!1);function w(){c.value?P.post("/vends/"+i.vend.id+"/edit-products",{channels:_.value.map(o=>({id:o.id,product_id:o.product.id,edited_product_id:o.product.option_data.id}))},{preserveScroll:!0,onSuccess:()=>{c.value=!1,b("modalClose")}}):c.value=!0}function k(o){return moment(o).format("YYMMDD hh:mm A")}return(o,p)=>(s(),g(j,{to:"body"},[u(B,{open:r.showModal,onModalClose:p[1]||(p[1]=t=>o.$emit("modalClose"))},{header:y(()=>[e("div",q,[i.profile?(s(),d("span",I," Channel Overview ")):n("",!0),r.vend.code?(s(),d("span",L," ID# "+a(r.vend.code),1)):n("",!0),r.vend.customer_code?(s(),d("span",T," ("+a(r.vend.customer_code?r.vend.customer_code:null)+") "+a(r.vend.customer_name?r.vend.customer_name:null),1)):n("",!0)])]),default:y(()=>[e("div",U,[e("div",Y,[e("div",z,[e("div",A,[e("table",J,[e("thead",K,[e("tr",null,[G,r.vend.product_mapping_name?(s(),d("th",H," Image ")):n("",!0),Q,R,W,e("th",X,[h(" Price "),l(m)&&l(m).base_currency?(s(),d("span",Z," ("+a(l(m).base_currency.currency_symbol)+") ",1)):n("",!0)]),ee,r.vend.product_mapping_name?(s(),d("th",te," Product ")):n("",!0)])]),e("tbody",se,[(s(!0),d(N,null,E(_.value,(t,C)=>(s(),d("tr",{key:t.id,class:f(C%2===0?void 0:"bg-gray-50")},[e("td",oe,a(t.code),1),r.vend.product_mapping_name?(s(),d("td",de,[e("div",re,[t.product&&t.product.thumbnail?(s(),d("img",{key:0,class:"h-16 w-16 rounded-full",src:t.product.thumbnail.full_url,alt:""},null,8,ne)):n("",!0)])])):n("",!0),e("td",ae,a(t.capacity-t.qty),1),e("td",ce,a(t.qty),1),e("td",le,a(t.capacity),1),e("td",ie,a((t.amount/100).toLocaleString(void 0,{minimumFractionDigits:2})),1),e("td",pe,[t.vend_channel_error_logs&&t.vend_channel_error_logs[0]&&t.vend_channel_error_logs[0].is_error_cleared==0?(s(),d("span",ue,[e("div",{class:f([t.vend_channel_error_logs[0].vend_channel_error.code==4||t.vend_channel_error_logs[0].vend_channel_error.code==5||t.vend_channel_error_logs[0].vend_channel_error.code==7?" text-blue-800":" text-red-800"])},[e("span",_e," ("+a(t.vend_channel_error_logs[0].vend_channel_error.code)+") ",1),e("div",null,a(k(t.vend_channel_error_logs[0].created_at)),1)],2)])):n("",!0)]),r.vend.product_mapping_name?(s(),d("td",me,[c.value?(s(),d("span",ge,[u($,{modelValue:t.product.option_data,"onUpdate:modelValue":O=>t.product.option_data=O,options:v.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","options"])])):(s(),d("span",xe,[t.product&&t.product.code?(s(),d("span",ye,a(t.product.code),1)):n("",!0),t.product&&t.product.name?(s(),d("span",fe,[ve,h(" "+a(t.product.name),1)])):n("",!0)]))])):n("",!0)],2))),128))])])])])])]),e("div",he,[e("span",null,[r.vend.product_mapping_name?(s(),g(V,{key:0,type:"button",class:f(["px-2 py-1 mt-2 ml-1 text-xs flex space-x-1",[c.value?"bg-green-300 hover:bg-green-400 text-green-800":"bg-gray-300 hover:bg-gray-400 text-gray-800"]]),onClick:p[0]||(p[0]=t=>w())},{default:y(()=>[c.value?(s(),d("span",ke,[u(l(S),{class:"w-4 h-4"}),Ce])):(s(),d("span",be,[u(l(F),{class:"w-4 h-4"}),we]))]),_:1},8,["class"])):n("",!0)]),r.vend.product_mapping_name?(s(),d("span",Oe,[r.vend.product_mapping_name?(s(),d("span",Ve,a(r.vend.product_mapping_name),1)):n("",!0),r.vend.product_mapping_remarks?(s(),d("span",Be,a(r.vend.product_mapping_remarks),1)):n("",!0)])):n("",!0)])]),_:1},8,["open"])]))}};export{Pe as default};
