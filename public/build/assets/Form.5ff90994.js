import{o as a,g as r,d as e,i as x,u as v,j as N,c as A,a as l,w as c,T as B,p as i,t as p,n as k,b as m,F as P,m as j,e as O,f as g,J as F}from"./app.ac224117.js";import{_}from"./Button.c0c7b290.js";import{_ as C}from"./FormInput.3c036152.js";import{_ as D}from"./FormTextarea.35df9558.js";import{_ as T}from"./Modal.78b472e5.js";import{_ as U}from"./MultiSelect.5c97389b.js";import{r as z}from"./PlusCircleIcon.1e01227e.js";import{r as E}from"./ArrowUturnLeftIcon.5402f828.js";import{r as J}from"./CheckCircleIcon.a6871583.js";import{r as L}from"./BackspaceIcon.2b8e3b1b.js";import"./open-closed.db758d28.js";function R(f,h){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M7 3.5A1.5 1.5 0 018.5 2h3.879a1.5 1.5 0 011.06.44l3.122 3.12A1.5 1.5 0 0117 6.622V12.5a1.5 1.5 0 01-1.5 1.5h-1v-3.379a3 3 0 00-.879-2.121L10.5 5.379A3 3 0 008.379 4.5H7v-1z"}),e("path",{d:"M4.5 6A1.5 1.5 0 003 7.5v9A1.5 1.5 0 004.5 18h7a1.5 1.5 0 001.5-1.5v-5.879a1.5 1.5 0 00-.44-1.06L9.44 6.439A1.5 1.5 0 008.378 6H4.5z"})])}const H={class:"flex flex-col md:flex-row space-x-2"},q={key:0,class:"text-gray-600"},G={key:1},K={key:2,class:"text-gray-600"},Q=["onSubmit"],W={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},X={class:"sm:col-span-6"},Y=g(" Name "),Z={class:"sm:col-span-6"},I=g(" Remarks "),ee={key:0,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},te=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Vend Channels Product Mapping ")])],-1),se=[te],oe={key:1,class:"sm:col-span-2"},ae=g(" Channel ID "),le={key:2,class:"sm:col-span-3"},re=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),ne={key:0,class:"text-sm text-red-600"},de={key:3,class:"sm:col-span-1"},ce=e("span",null," Add ",-1),ie={key:4,class:"sm:col-span-6 flex flex-col mt-3"},ue={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},pe={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},me={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},_e={class:"min-w-full divide-y divide-gray-300"},he=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Code "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),ve={class:"bg-white"},fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},xe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},ge={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ye={class:"flex justify-center"},be=["src"],we={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left"},ke={key:0},Ce={class:"whitespace-nowrap py-4 text-sm text-center"},Ve={key:0},$e=e("td",{colspan:"5",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Se=[$e],Me={class:"sm:col-span-6"},Ne={class:"flex space-x-1 mt-5 justify-end"},Ae=e("span",null," Back ",-1),Be=e("span",null," Replicate ",-1),Pe=e("span",null," Save ",-1),qe={__name:"Form",props:{products:Object,productMapping:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(f,{emit:h}){const d=f,t=x(v(b())),y=x([]),u=x([]);N(()=>{t.value=d.productMapping?v(d.productMapping):v(b()),y.value=d.products.data,u.value=d.productMapping?JSON.parse(JSON.stringify(d.productMapping.productMappingItems)):v()});function b(){return{id:"",name:"",remarks:"",channel_code:"",product_id:""}}function V(){t.value.clearErrors(),d.type==="create"&&t.value.post("/product-mappings/create",{onSuccess:()=>{h("modalClose")},preserveState:!0,replace:!0}),d.type==="update"&&t.value.transform(n=>({...n,productMappingItems:u.value})).post("/product-mappings/"+t.value.id+"/update",{onSuccess:()=>{h("modalClose")},preserveState:!0,replace:!0})}function $(){u.value.map(function(n){return n.channel_code}).indexOf(t.value.channel_code)<0&&(u.value.push({product:t.value.product_id,channel_code:t.value.channel_code}),u.value.sort((n,o)=>n.channel_code-o.channel_code))}function S(n){u.value.splice(u.value.indexOf(n),1)}function M(){F.Inertia.post("/product-mappings/replicate",{id:t.value.id},{preserveState:!0,replace:!0,onSuccess:n=>{h("modalClose")}})}return(n,o)=>(a(),A(B,{to:"body"},[l(T,{open:f.showModal,onModalClose:o[7]||(o[7]=s=>n.$emit("modalClose"))},{header:c(()=>[e("div",H,[d.productMapping?(a(),r("span",q," Editing ")):i("",!0),d.productMapping?(a(),r("span",G,p(d.productMapping.name),1)):(a(),r("span",K," Create New Product Mapping "))])]),default:c(()=>[e("form",{onSubmit:O(V,["prevent"]),id:"submit"},[e("div",W,[e("div",X,[l(C,{modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value.name=s),error:t.value.errors.name,required:"true"},{default:c(()=>[Y]),_:1},8,["modelValue","error"])]),e("div",Z,[l(D,{modelValue:t.value.remarks,"onUpdate:modelValue":o[1]||(o[1]=s=>t.value.remarks=s),error:t.value.errors.remarks},{default:c(()=>[I]),_:1},8,["modelValue","error"])]),t.value.id?(a(),r("div",ee,se)):i("",!0),t.value.id?(a(),r("div",oe,[l(C,{modelValue:t.value.channel_code,"onUpdate:modelValue":o[2]||(o[2]=s=>t.value.channel_code=s),error:t.value.errors.channel_code,placeholderStr:"Channel ID"},{default:c(()=>[ae]),_:1},8,["modelValue","error"])])):i("",!0),t.value.id?(a(),r("div",le,[re,l(U,{modelValue:t.value.product_id,"onUpdate:modelValue":o[3]||(o[3]=s=>t.value.product_id=s),options:y.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(a(),r("div",ne,p(t.value.errors.product_id),1)):i("",!0)])):i("",!0),t.value.id?(a(),r("div",de,[l(_,{type:"button",onClick:o[4]||(o[4]=s=>$()),class:k(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.channel_code||!t.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.channel_code||!t.value.product_id},{default:c(()=>[l(m(z),{class:"w-4 h-4"}),ce]),_:1},8,["class","disabled"])])):i("",!0),t.value.id?(a(),r("div",ie,[e("div",ue,[e("div",pe,[e("div",me,[e("table",_e,[he,e("tbody",ve,[(a(!0),r(P,null,j(u.value,(s,w)=>(a(),r("tr",{key:s.id,class:k(w%2===0?void 0:"bg-gray-50")},[e("td",fe,p(w+1),1),e("td",xe,p(s.channel_code),1),e("td",ge,[e("div",ye,[s.product&&s.product.thumbnail?(a(),r("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:s.product.thumbnail.full_url,alt:""},null,8,be)):i("",!0)])]),e("td",we,[s.product.code?(a(),r("span",ke,p(s.product.code)+" - ",1)):i("",!0),e("span",null,p(s.product.name),1)]),e("td",Ce,[l(_,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:je=>S(s)},{default:c(()=>[l(m(L),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),u.value.length?i("",!0):(a(),r("tr",Ve,Se))])])])])])])):i("",!0)]),e("div",Me,[e("div",Ne,[l(_,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:o[5]||(o[5]=s=>n.$emit("modalClose")),form:"submit"},{default:c(()=>[l(m(E),{class:"w-4 h-4"}),Ae]),_:1}),l(_,{type:"button",class:"bg-blue-500 hover:bg-blue-600 text-white flex space-x-1",onClick:o[6]||(o[6]=s=>M())},{default:c(()=>[l(m(R),{class:"w-4 h-4"}),Be]),_:1}),l(_,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:c(()=>[l(m(J),{class:"w-4 h-4"}),Pe]),_:1})])])],40,Q)]),_:1},8,["open"])]))}};export{qe as default};
