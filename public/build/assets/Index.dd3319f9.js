import{h as m,K as C,j as H,f as u,a as l,u as p,w as n,F as I,o as d,Z as E,b as e,P as O,d as i,c as k,m as v,t as c,l as Y,O as U}from"./app.cc2a09ed.js";import{_ as Z}from"./Authenticated.c85ef608.js";import{_ as j}from"./Button.4c8777e0.js";import q from"./Form.0149f816.js";import{_ as S,a as z,b as x}from"./TableData.bb0c0538.js";import{_ as $,r as J}from"./SearchInput.abd3a8ee.js";import{_ as y}from"./MultiSelect.a959e7e4.js";import{_ as G}from"./TableHeadSort.cedcffce.js";import{r as Q}from"./BackspaceIcon.87b7ef95.js";import"./open-closed.02ed49fa.js";import"./use-resolve-button-type.1da0c04c.js";import"./RectangleStackIcon.f86a9d1d.js";import"./FormInput.3e18fd58.js";import"./Modal.99090ac9.js";import"./ArrowUturnLeftIcon.a5034727.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.59033d2e.js";const W=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," VM Management ",-1),X={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ee={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},te=e("div",{class:"flex justify-end"},null,-1),oe={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},se=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),le={key:2},ae=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ne={key:3},de=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),re={key:4},ie=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Customer Binded? ",-1),ue={key:5},me=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),ce=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),pe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ve={class:"mt-3"},fe={class:"flex space-x-1"},_e=e("span",null," Search ",-1),ge=e("span",null," Reset ",-1),ye={class:"flex flex-col space-y-2"},xe={class:"text-sm text-gray-700 leading-5 flex space-x-1"},he=e("span",null,"Showing",-1),be={class:"font-medium"},ke=e("span",null,"to",-1),Ve={class:"font-medium"},we=e("span",null,"of",-1),Pe={class:"font-medium"},Be=e("span",null,"results",-1),Ce={class:"mt-6 flex flex-col"},Oe={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Se={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},$e={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ke={class:"bg-gray-100"},Le={class:"divide-x divide-gray-200"},Me={class:"bg-white"},Te={key:0},Ne={key:0},Ie=["href"],Ue=e("br",null,null,-1),je={key:1},Ge=e("br",null,null,-1),Ae={key:1},De=e("div",{class:"flex justify-center space-x-1"},null,-1),Fe={key:0},Re=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),He=[Re],dt={__name:"Index",props:{categories:Object,categoryGroups:Object,locationTypeOptions:Object,operatorOptions:Object,vends:Object},setup(r){const h=r,o=m({codes:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],locationType:"",operator:"",is_binded_customer:"",sortKey:"",sortBy:!1,numberPerPage:"",visited:!0}),b=m([]),K=m([]),L=m([]);m(!1);const V=m([]),w=m([]),P=m([]),A=m(""),D=m();C().props.auth.operatorCountry;const B=C().props.auth.operatorRole,f=C().props.auth.permissions;m(moment().format("HH:mm:ss")),H(()=>{w.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.numberPerPage=w.value[0],K.value=h.categories.data.map(a=>({id:a.id,name:a.name})),L.value=h.categoryGroups.data.map(a=>({id:a.id,name:a.name})),b.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],V.value=[{id:"all",value:"All"},...h.locationTypeOptions.data.map(a=>({id:a.id,value:a.name}))],P.value=[{id:"all",full_name:"All"},...h.operatorOptions.data.map(a=>({id:a.id,full_name:a.full_name}))],o.value.locationType=V.value[0],o.value.operator=P.value[0],B.value=="admin"||B.value=="supervisor"||B.value=="driver"?o.value.is_binded_customer=b.value[1]:o.value.is_binded_customer=b.value[0]});function _(){U.get("/vends",{...o.value,telco_id:o.value.telco_id.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function F(){U.get("/vends")}function M(a){o.value.sortKey=a,o.value.sortBy=!o.value.sortBy,_()}function R(){showModal.value=!1}return(a,s)=>(d(),u(I,null,[l(p(E),{title:"VM Management"}),l(Z,null,{header:n(()=>[W]),default:n(()=>{var T,N;return[e("div",X,[e("div",ee,[te,e("div",oe,[l($,{placeholderStr:"Vend ID",modelValue:o.value.codes,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.codes=t),onKeyup:s[1]||(s[1]=O(t=>_(),["enter"]))},{default:n(()=>[i(" Vend ID "),se]),_:1},8,["modelValue"]),p(f).includes("admin-access vends")?(d(),k($,{key:0,placeholderStr:"Cust ID",modelValue:o.value.customer_code,"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.customer_code=t),onKeyup:s[3]||(s[3]=O(t=>_(),["enter"]))},{default:n(()=>[i(" Cust ID ")]),_:1},8,["modelValue"])):v("",!0),p(f).includes("admin-access vends")?(d(),k($,{key:1,placeholderStr:"Cust Name",modelValue:o.value.customer_name,"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.customer_name=t),onKeyup:s[5]||(s[5]=O(t=>_(),["enter"]))},{default:n(()=>[i(" Cust Name ")]),_:1},8,["modelValue"])):v("",!0),p(f).includes("admin-access vends")?(d(),u("div",le,[ae,l(y,{modelValue:o.value.categories,"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.categories=t),options:K.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):v("",!0),p(f).includes("admin-access vends")?(d(),u("div",ne,[de,l(y,{modelValue:o.value.categoryGroups,"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.categoryGroups=t),options:L.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):v("",!0),p(f).includes("admin-access vends")?(d(),u("div",re,[ie,l(y,{modelValue:o.value.is_binded_customer,"onUpdate:modelValue":s[8]||(s[8]=t=>o.value.is_binded_customer=t),options:b.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):v("",!0),p(f).includes("admin-access vends")?(d(),u("div",ue,[me,l(y,{modelValue:o.value.operator,"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.operator=t),options:P.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):v("",!0),e("div",null,[ce,l(y,{modelValue:o.value.locationType,"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.locationType=t),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",pe,[e("div",ve,[e("div",fe,[l(j,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[11]||(s[11]=t=>_())},{default:n(()=>[l(p(J),{class:"h-4 w-4","aria-hidden":"true"}),_e]),_:1}),l(j,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[12]||(s[12]=t=>F())},{default:n(()=>[l(p(Q),{class:"h-4 w-4","aria-hidden":"true"}),ge]),_:1})])]),e("div",ye,[e("p",xe,[he,e("span",be,c((T=r.vends.meta.from)!=null?T:0),1),ke,e("span",Ve,c((N=r.vends.meta.to)!=null?N:0),1),we,e("span",Pe,c(r.vends.meta.total),1),Be]),l(y,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":s[13]||(s[13]=t=>o.value.numberPerPage=t),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:_},null,8,["modelValue","options"])])])]),e("div",Ce,[e("div",Oe,[e("div",Se,[e("table",$e,[e("thead",Ke,[e("tr",Le,[l(S,null,{default:n(()=>[i(" # ")]),_:1}),l(G,{modelName:"code",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[14]||(s[14]=t=>M("code"))},{default:n(()=>[i(" Code ")]),_:1},8,["sortKey","sortBy"]),l(G,{modelName:"telco_id",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[15]||(s[15]=t=>M("telco_id"))},{default:n(()=>[i(" Name ")]),_:1},8,["sortKey","sortBy"]),l(S,null,{default:n(()=>[i(" Operator ")]),_:1}),l(S)])]),e("tbody",Me,[(d(!0),u(I,null,Y(r.vends.data,(t,g)=>(d(),u("tr",{key:t.id,class:"divide-x divide-gray-200"},[l(x,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:n(()=>[i(c(r.vends.meta.from+g),1)]),_:2},1032,["currentIndex","totalLength"]),l(x,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:n(()=>[i(c(t.code),1)]),_:2},1032,["currentIndex","totalLength"]),l(x,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:n(()=>[t.customer_code?(d(),u("span",Te,[p(f).includes("admin-access vends")?(d(),u("span",Ne,[e("a",{class:"text-blue-700",target:"_blank",href:"//admin.happyice.com.sg/person/vend-code/"+t.code},[i(c(t.customer_code)+" ",1),Ue,i(" "+c(t.customer_name),1)],8,Ie)])):(d(),u("span",je,[i(c(t.customer_code)+" ",1),Ge,i(" "+c(t.customer_name),1)]))])):(d(),u("span",Ae,c(t.name),1))]),_:2},1032,["currentIndex","totalLength"]),l(x,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-left"},{default:n(()=>[i(c(t.operator_name),1)]),_:2},1032,["currentIndex","totalLength"]),l(x,{currentIndex:g,totalLength:r.vends.length,inputClass:"text-center"},{default:n(()=>[De]),_:2},1032,["currentIndex","totalLength"])]))),128)),r.vends.data.length?v("",!0):(d(),u("tr",Fe,He))])]),r.vends.data.length?(d(),k(z,{key:0,links:r.vends.links,meta:r.vends.meta},null,8,["links","meta"])):v("",!0)])])])]),a.showModal?(d(),k(q,{key:0,vend:D.value,type:A.value,showModal:a.showModal,onModalClose:R},null,8,["vend","type","showModal"])):v("",!0)]}),_:1})],64))}};export{dt as default};
