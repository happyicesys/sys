import{_ as F}from"./Authenticated.5952b438.js";import{_ as D}from"./Button.b5caccec.js";import{r as E,a as G,T as x,_ as y,b as A,c as p}from"./TableHeadSort.1308bf0b.js";import{_ as S}from"./SearchInput.eb416e73.js";import{_ as b}from"./MultiSelect.5e5dceb0.js";import{i as v,j as H,o as u,g as c,a as n,b as P,w as l,F as k,H as q,d as t,t as a,m as w,p as f,c as M,f as r,J as L,n as g}from"./app.c0bfae35.js";import"./open-closed.497b52bd.js";import"./use-resolve-button-type.a8cdc431.js";import"./RectangleStackIcon.34b78331.js";import"./_plugin-vue_export-helper.cdc0426e.js";const R=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (List) ",-1),z={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Q={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},Y={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},W=r(" Vend ID "),X=r(" Serial Num "),Z=r(" Temp >> "),ee=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),te=r(" Cust ID "),se=r(" Cust Name "),ne=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),oe=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),le=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Online? ",-1),ae=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Customer Binded? ",-1),re={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},de={class:"mt-3"},ie={class:"flex space-x-1"},ue=t("span",null," Search ",-1),ce=t("span",null," Reset ",-1),me={class:"flex flex-col space-y-2"},_e={class:"text-sm text-gray-700 leading-5 flex space-x-1"},pe=t("span",null,"Showing",-1),ge={class:"font-medium"},fe=t("span",null,"to",-1),xe={class:"font-medium"},he=t("span",null,"of",-1),ye={class:"font-medium"},be=t("span",null,"results",-1),ve={class:"mt-6 flex flex-col"},Ce={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Se={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},ke={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Ve={class:"bg-gray-100"},Be={class:"divide-x divide-gray-200"},Je=r(" # "),Te=r(" ID "),Pe=r(" Name "),we=r(" Inventory Status "),Le=t("br",null,null,-1),Ne=r(" (#Channel, Sales, Balance/Capacity) "),Ie=r(" Balance Stock "),Ke=r(" Out of Stock SKU "),je=r(" Errors "),Oe=r(" Temp1 "),$e=r(" Temp2 "),De=r(" Status "),Ue=r(" Sales $(Qty) "),Fe=t("br",null,null,-1),Ee=r(" (Today/ 7 Days) "),Ge=r(" Postcode "),Ae=r(" Serial Num "),He=r(" Firmware Ver "),qe={class:"bg-white"},Me=t("br",null,null,-1),Re={key:0,class:"grid grid-cols-[105px_minmax(110px,_1fr)_100px]"},ze={class:"font-semibold"},Qe={class:"text-blue-600 text-sm"},Ye=t("br",null,null,-1),We=t("br",null,null,-1),Xe={class:"flex flex-col"},Ze={class:"font-bold"},et={class:"flex flex-col items-center"},tt=["onClick"],st={class:"mt-1"},nt={class:"flex flex-col items-center"},ot=["onClick"],lt={class:"flex flex-col space-y-1"},at={class:"flex flex-col"},rt={class:"font-bold"},dt={key:0},it={class:"flex flex-col"},ut=t("span",{class:"font-bold"}," Drop Sensor ",-1),ct={key:1,class:"inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full bg-green-200"},mt={class:"flex flex-col"},_t=t("span",{class:"font-bold"}," Fan Speed ",-1),pt={class:"flex flex-col"},gt=t("span",{class:"font-bold"}," Door ",-1),ft={class:"flex flex-col"},xt=t("span",{class:"font-bold"}," Coin ",-1),ht={key:0},yt=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),bt=[yt],Lt={__name:"Index",props:{categories:Object,categoryGroups:Object,constTempError:Number,vends:Object,vendChannelErrors:Object},setup(d){const V=d,s=v({code:"",serialNum:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],is_binded_customer:"",tempHigherThan:"",vend_channel_error_id:"",is_online:"",sortKey:"",sortBy:!0,numberPerPage:""}),B=v([]),J=v([]),N=v([]),I=v([]),C=v([]);H(()=>{B.value=[{id:"",desc:"All"},{id:"errors_only",desc:"Errors Only"},...V.vendChannelErrors.data],J.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.vend_channel_error_id=B.value[0],s.value.numberPerPage=J.value[0],N.value=V.categories.data.map(_=>({id:_.id,name:_.name})),I.value=V.categoryGroups.data.map(_=>({id:_.id,name:_.name})),C.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],s.value.is_online=C.value[0],s.value.is_binded_customer=C.value[0]});function T(){L.Inertia.get("/vends",{...s.value,vend_channel_error_id:s.value.vend_channel_error_id.id,categories:s.value.categories.map(_=>_.id),categoryGroups:s.value.categoryGroups.map(_=>_.id),is_binded_customer:s.value.is_binded_customer.id,is_online:s.value.is_online.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function K(_,o){L.Inertia.get("/vends/"+_+"/temp/"+o)}function U(){L.Inertia.get("/vends")}function h(_){s.value.sortKey=_,s.value.sortBy=!s.value.sortBy,T()}return(_,o)=>(u(),c(k,null,[n(P(q),{title:"Vending Machines"}),n(F,null,{header:l(()=>[R]),default:l(()=>{var j,O;return[t("div",z,[t("div",Q,[t("div",Y,[n(S,{placeholderStr:"Code",modelValue:s.value.code,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.code=e)},{default:l(()=>[W]),_:1},8,["modelValue"]),n(S,{placeholderStr:"Serial Num",modelValue:s.value.serialNum,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.serialNum=e)},{default:l(()=>[X]),_:1},8,["modelValue"]),n(S,{placeholderStr:"Number",modelValue:s.value.tempHigherThan,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value.tempHigherThan=e)},{default:l(()=>[Z]),_:1},8,["modelValue"]),t("div",null,[ee,n(b,{modelValue:s.value.vend_channel_error_id,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.vend_channel_error_id=e),options:B.value,trackBy:"id",valueProp:"id",label:"desc",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),n(S,{placeholderStr:"Cust ID",modelValue:s.value.customer_code,"onUpdate:modelValue":o[4]||(o[4]=e=>s.value.customer_code=e)},{default:l(()=>[te]),_:1},8,["modelValue"]),n(S,{placeholderStr:"Cust Name",modelValue:s.value.customer_name,"onUpdate:modelValue":o[5]||(o[5]=e=>s.value.customer_name=e)},{default:l(()=>[se]),_:1},8,["modelValue"]),t("div",null,[ne,n(b,{modelValue:s.value.categories,"onUpdate:modelValue":o[6]||(o[6]=e=>s.value.categories=e),options:N.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[oe,n(b,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":o[7]||(o[7]=e=>s.value.categoryGroups=e),options:I.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[le,n(b,{modelValue:s.value.is_online,"onUpdate:modelValue":o[8]||(o[8]=e=>s.value.is_online=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[ae,n(b,{modelValue:s.value.is_binded_customer,"onUpdate:modelValue":o[9]||(o[9]=e=>s.value.is_binded_customer=e),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),t("div",re,[t("div",de,[t("div",ie,[n(D,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[10]||(o[10]=e=>T())},{default:l(()=>[n(P(E),{class:"h-4 w-4","aria-hidden":"true"}),ue]),_:1}),n(D,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[11]||(o[11]=e=>U())},{default:l(()=>[n(P(G),{class:"h-4 w-4","aria-hidden":"true"}),ce]),_:1})])]),t("div",me,[t("p",_e,[pe,t("span",ge,a((j=d.vends.meta.from)!=null?j:0),1),fe,t("span",xe,a((O=d.vends.meta.to)!=null?O:0),1),he,t("span",ye,a(d.vends.meta.total),1),be]),n(b,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":o[12]||(o[12]=e=>s.value.numberPerPage=e),options:J.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:T},null,8,["modelValue","options"])])])]),t("div",ve,[t("div",Ce,[t("div",Se,[t("table",ke,[t("thead",Ve,[t("tr",Be,[n(x,null,{default:l(()=>[Je]),_:1}),n(y,{modelName:"vends.code",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[13]||(o[13]=e=>h("vends.code"))},{default:l(()=>[Te]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:l(()=>[Pe]),_:1}),n(x,null,{default:l(()=>[we,Le,Ne]),_:1}),n(y,{modelName:"vend_channel_totals_json->balancePercent",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[14]||(o[14]=e=>h("vend_channel_totals_json->balancePercent"))},{default:l(()=>[Ie]),_:1},8,["sortKey","sortBy"]),n(y,{modelName:"vend_channel_totals_json->outOfStockSkuPercent",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[15]||(o[15]=e=>h("vend_channel_totals_json->outOfStockSkuPercent"))},{default:l(()=>[Ke]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:l(()=>[je]),_:1}),n(y,{modelName:"temp",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[16]||(o[16]=e=>h("temp"))},{default:l(()=>[Oe]),_:1},8,["sortKey","sortBy"]),n(y,{modelName:"parameter_json->t2",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[17]||(o[17]=e=>h("parameter_json->t2"))},{default:l(()=>[$e]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:l(()=>[De]),_:1}),n(x,null,{default:l(()=>[Ue,Fe,Ee]),_:1}),n(y,{modelName:"postcode",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[18]||(o[18]=e=>h("postcode"))},{default:l(()=>[Ge]),_:1},8,["sortKey","sortBy"]),n(x,null,{default:l(()=>[Ae]),_:1}),n(x,null,{default:l(()=>[He]),_:1})])]),t("tbody",qe,[(u(!0),c(k,null,w(d.vends.data,(e,m)=>(u(),c("tr",{key:m,class:"divide-x divide-gray-200"},[n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(d.vends.meta.from+m),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.code),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-left"},{default:l(()=>[r(a(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.code:null)+" ",1),Me,r(" "+a(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[e.vendChannelsJson?(u(),c("div",Re,[(u(!0),c(k,null,w(e.vendChannelsJson.filter(i=>i.code>=10&&i.code<=69),(i,$)=>(u(),c("span",{class:g(["inline-flex justify-evenly items-center rounded px-1 py-0.5 text-xs font-medium border min-w-full",[$>0&&String(i.code)[0]!==String(e.vendChannelsJson[$-1].code)[0]?"col-start-1":""]])},[t("div",ze," #"+a(i.code)+", ",1),t("div",Qe,a(i.capacity-i.qty)+", ",1),t("div",{class:g([i.qty<=2?"text-red-700":"text-green-700"])},a(i.qty)+"/"+a(i.capacity),3)],2))),256))])):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[e.vendChannelTotalsJson?(u(),c("span",{key:0,class:g([e.vendChannelTotalsJson.balancePercent<=30?"text-red-700":e.vendChannelTotalsJson.balancePercent>60?"":"text-blue-700"])},[r(a(e.vendChannelTotalsJson.qty)+"/ "+a(e.vendChannelTotalsJson.capacity)+" ",1),Ye,r(" ("+a(e.vendChannelTotalsJson.balancePercent)+"%) ",1)],2)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[e.vendChannelTotalsJson?(u(),c("span",{key:0,class:g([e.vendChannelTotalsJson.outOfStockSkuPercent>40?"text-red-700":""])},[r(a(e.vendChannelTotalsJson.outOfStockSku)+"/ "+a(e.vendChannelTotalsJson.count)+" ",1),We,r(" ("+a(e.vendChannelTotalsJson.outOfStockSkuPercent)+"%) ",1)],2)):f("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[(u(!0),c(k,null,w(e.vendChannelErrorLogsJson,i=>(u(),c("span",{class:g(["inline-flex items-center rounded px-2.5 py-0.5 text-xs font-medium border",[i.is_error_cleared?"bg-green-100 text-green-800":"bg-red-100 text-red-800"]])},[t("div",Xe,[t("div",null,[r(" #"+a(i.vendChannel?i.vendChannel.code:i.vend_channel.code)+", ",1),t("span",Ze," ("+a(i.vendChannelError?i.vendChannelError.code:i.vend_channel_error.code)+") ",1)]),t("div",null,a(i.created_at),1)])],2))),256))]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",et,[t("button",{type:"button",class:g(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.temp>-15?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600"]]),onClick:i=>K(e.id,1)},a(e.is_temp_error?"Error":e.temp),11,tt),t("span",st,a(e.temp_updated_at),1)])]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",nt,[e.parameterJson&&e.parameterJson.t2?(u(),c("button",{key:0,type:"button",class:g(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.temp>-15||e.parameterJson.t2==d.constTempError?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600"]]),onClick:i=>K(e.id,2)},a(e.parameterJson.t2==d.constTempError?"Error":e.parameterJson.t2/10),11,ot)):f("",!0)])]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",lt,[t("div",{class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.is_online?"bg-green-200":"bg-red-200"]])},[t("div",at,[t("span",rt,a(e.is_online?"Online":"Offline"),1),e.last_updated_at?(u(),c("span",dt,a(e.last_updated_at),1)):f("",!0)])],2),e.parameterJson&&e.parameterJson.Sensor?(u(),c("div",{key:0,class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.Sensor==0?"bg-red-200":"bg-green-200"]])},[t("div",it,[ut,t("span",null,a(e.parameterJson.Sensor==0?"Disabled":"Enabled"),1)])],2)):f("",!0),e.parameterJson&&e.parameterJson.fan?(u(),c("div",ct,[t("div",mt,[_t,t("span",null,a(e.parameterJson.fan),1)])])):f("",!0),e.parameterJson&&e.parameterJson.door?(u(),c("div",{key:2,class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.door=="close"?"bg-green-200":"bg-red-200"]])},[t("div",pt,[gt,t("span",null,a(e.parameterJson.door=="open"?"Open":"Close"),1)])],2)):f("",!0),e.parameterJson&&e.parameterJson.CoinCnt?(u(),c("div",{key:3,class:g(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.CoinCnt>1600?"bg-green-200":"bg-red-200"]])},[t("div",ft,[xt,t("span",null,a((e.parameterJson.CoinCnt/100).toFixed(2)),1)])],2)):f("",!0)])]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("span",{class:g([e.sevenDaysSales>200?"text-green-700":"text-red-700"])},a(e.todaySales.toLocaleString(void 0,{minimumFractionDigits:2}))+"("+a(e.todayCount)+")/ "+a(e.sevenDaysSales.toLocaleString(void 0,{minimumFractionDigits:2}))+"("+a(e.sevenDaysCount)+") ",3)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.deliveryAddress?e.latestVendBinding.customer.deliveryAddress.postcode:null),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.serial_num),1)]),_:2},1032,["currentIndex","totalLength"]),n(p,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.firmware_ver),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.vends.data.length?f("",!0):(u(),c("tr",ht,bt))])])]),d.vends.data.length?(u(),M(A,{key:0,links:d.vends.links,meta:d.vends.meta},null,8,["links","meta"])):f("",!0)])])])]}),_:1})],64))}};export{Lt as default};
