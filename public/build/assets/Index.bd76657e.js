import{g as p,K as B,h as H,f as m,a as o,u,w as a,F as j,o as i,Z as Y,b as e,N as L,d as r,c as w,l as f,t as c,k as Z,O as S,i as q}from"./app.6c9d1e1c.js";import{_ as z}from"./Authenticated.e4ec828a.js";import{_ as b}from"./Button.5a9cb1af.js";import J from"./Form.135ec63a.js";import{_ as h,a as Q,b as _}from"./TableData.89a14b7f.js";import{_ as M,r as W}from"./SearchInput.28f1551e.js";import{_ as y}from"./MultiSelect.758d31d9.js";import{_ as X}from"./TableHeadSort.4042f733.js";import{r as ee}from"./PlusIcon.cba484c4.js";import{r as te}from"./BackspaceIcon.e5823ad6.js";import{r as oe}from"./PencilSquareIcon.c5c11526.js";import{r as se}from"./TrashIcon.5f0aff0c.js";import"./open-closed.e9da6731.js";import"./use-resolve-button-type.59f60570.js";import"./RectangleStackIcon.336663fa.js";import"./FormInput.a788decf.js";import"./Modal.b00b2b86.js";import"./ArrowUturnLeftIcon.5b9c45ff.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.35b5b52d.js";const le=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," VM Management ",-1),ae={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ne={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},re={class:"flex justify-end"},de=e("span",null," Create ",-1),ie={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ue=e("span",{class:"text-[9px]"},' ("," for multiple) ',-1),ce={key:2},me=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),pe={key:3},fe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ve={key:4},ge=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Customer Binded? ",-1),_e={key:5},xe=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Operator ",-1),he=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Location Type ",-1),ye={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},be={class:"mt-3"},ke={class:"flex space-x-1"},Ve=e("span",null," Search ",-1),we=e("span",null," Reset ",-1),Ce={class:"flex flex-col space-y-2"},$e={class:"text-sm text-gray-700 leading-5 flex space-x-1"},Pe=e("span",null,"Showing",-1),Oe={class:"font-medium"},Be=e("span",null,"to",-1),Le={class:"font-medium"},Se=e("span",null,"of",-1),Me={class:"font-medium"},Ie=e("span",null,"results",-1),Te={class:"mt-6 flex flex-col"},Ne={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Ke={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Ue={class:"min-w-full border-separate",style:{"border-spacing":"0"}},De={class:"bg-gray-100"},je={class:"divide-x divide-gray-200"},Ge={class:"bg-white"},Ae={key:0},Fe={key:0},Re=["href"],Ee=e("br",null,null,-1),He={key:1},Ye=e("br",null,null,-1),Ze={key:1},qe={class:"flex justify-center space-x-1"},ze=e("span",null," Edit ",-1),Je=e("span",null," Delete ",-1),Qe={key:0},We=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Xe=[We],yt={__name:"Index",props:{categories:Object,categoryGroups:Object,locationTypeOptions:Object,operatorOptions:Object,vends:Object},setup(d){const k=d,l=p({codes:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],locationType:"",operator:"",is_binded_customer:"",sortKey:"",sortBy:!1,numberPerPage:"",visited:!0}),V=p([]),I=p([]),T=p([]);p(!1);const C=p([]),$=p([]),P=p([]),N=p(""),K=p();B().props.auth.operatorCountry;const O=B().props.auth.operatorRole,g=B().props.auth.permissions;p(moment().format("HH:mm:ss")),H(()=>{$.value=[{id:50,value:50},{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],l.value.numberPerPage=$.value[0],I.value=k.categories.data.map(n=>({id:n.id,name:n.name})),T.value=k.categoryGroups.data.map(n=>({id:n.id,name:n.name})),V.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],C.value=[{id:"all",value:"All"},...k.locationTypeOptions.data.map(n=>({id:n.id,value:n.name}))],P.value=[{id:"all",full_name:"All"},...k.operatorOptions.data.map(n=>({id:n.id,full_name:n.full_name}))],l.value.locationType=C.value[0],l.value.operator=P.value[0],O.value=="admin"||O.value=="supervisor"||O.value=="driver"?l.value.is_binded_customer=V.value[1]:l.value.is_binded_customer=V.value[0]});function G(){N.value="create",K.value=null,showModal.value=!0}function A(n){!confirm("Are you sure to delete "+n.name+"?")||S.delete("/vends/"+n.id)}function x(){S.get("/vends",{...l.value,telco_id:l.value.telco_id.id,numberPerPage:l.value.numberPerPage.id},{preserveState:!0,replace:!0})}function F(){S.get("/vends")}function R(n){l.value.sortKey=n,l.value.sortBy=!l.value.sortBy,x()}function E(){showModal.value=!1}return(n,s)=>(i(),m(j,null,[o(u(Y),{title:"VM Management"}),o(z,null,{header:a(()=>[le]),default:a(()=>{var U,D;return[e("div",ae,[e("div",ne,[e("div",re,[o(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[0]||(s[0]=t=>G())},{default:a(()=>[o(u(ee),{class:"h-4 w-4","aria-hidden":"true"}),de]),_:1})]),e("div",ie,[o(M,{placeholderStr:"Vend ID",modelValue:l.value.codes,"onUpdate:modelValue":s[1]||(s[1]=t=>l.value.codes=t),onKeyup:s[2]||(s[2]=L(t=>x(),["enter"]))},{default:a(()=>[r(" Vend ID "),ue]),_:1},8,["modelValue"]),u(g).includes("admin-access vends")?(i(),w(M,{key:0,placeholderStr:"Cust ID",modelValue:l.value.customer_code,"onUpdate:modelValue":s[3]||(s[3]=t=>l.value.customer_code=t),onKeyup:s[4]||(s[4]=L(t=>x(),["enter"]))},{default:a(()=>[r(" Cust ID ")]),_:1},8,["modelValue"])):f("",!0),u(g).includes("admin-access vends")?(i(),w(M,{key:1,placeholderStr:"Cust Name",modelValue:l.value.customer_name,"onUpdate:modelValue":s[5]||(s[5]=t=>l.value.customer_name=t),onKeyup:s[6]||(s[6]=L(t=>x(),["enter"]))},{default:a(()=>[r(" Cust Name ")]),_:1},8,["modelValue"])):f("",!0),u(g).includes("admin-access vends")?(i(),m("div",ce,[me,o(y,{modelValue:l.value.categories,"onUpdate:modelValue":s[7]||(s[7]=t=>l.value.categories=t),options:I.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),u(g).includes("admin-access vends")?(i(),m("div",pe,[fe,o(y,{modelValue:l.value.categoryGroups,"onUpdate:modelValue":s[8]||(s[8]=t=>l.value.categoryGroups=t),options:T.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),u(g).includes("admin-access vends")?(i(),m("div",ve,[ge,o(y,{modelValue:l.value.is_binded_customer,"onUpdate:modelValue":s[9]||(s[9]=t=>l.value.is_binded_customer=t),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),u(g).includes("admin-access vends")?(i(),m("div",_e,[xe,o(y,{modelValue:l.value.operator,"onUpdate:modelValue":s[10]||(s[10]=t=>l.value.operator=t),options:P.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):f("",!0),e("div",null,[he,o(y,{modelValue:l.value.locationType,"onUpdate:modelValue":s[11]||(s[11]=t=>l.value.locationType=t),options:C.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",ye,[e("div",be,[e("div",ke,[o(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[12]||(s[12]=t=>x())},{default:a(()=>[o(u(W),{class:"h-4 w-4","aria-hidden":"true"}),Ve]),_:1}),o(b,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[13]||(s[13]=t=>F())},{default:a(()=>[o(u(te),{class:"h-4 w-4","aria-hidden":"true"}),we]),_:1})])]),e("div",Ce,[e("p",$e,[Pe,e("span",Oe,c((U=d.vends.meta.from)!=null?U:0),1),Be,e("span",Le,c((D=d.vends.meta.to)!=null?D:0),1),Se,e("span",Me,c(d.vends.meta.total),1),Ie]),o(y,{modelValue:l.value.numberPerPage,"onUpdate:modelValue":s[14]||(s[14]=t=>l.value.numberPerPage=t),options:$.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:x},null,8,["modelValue","options"])])])]),e("div",Te,[e("div",Ne,[e("div",Ke,[e("table",Ue,[e("thead",De,[e("tr",je,[o(h,null,{default:a(()=>[r(" # ")]),_:1}),o(X,{modelName:"code",sortKey:l.value.sortKey,sortBy:l.value.sortBy,onSortTable:s[15]||(s[15]=t=>R("code"))},{default:a(()=>[r(" Code ")]),_:1},8,["sortKey","sortBy"]),o(h,null,{default:a(()=>[r(" Name ")]),_:1}),o(h,null,{default:a(()=>[r(" Begin Date ")]),_:1}),o(h,null,{default:a(()=>[r(" Termination Date ")]),_:1}),o(h,null,{default:a(()=>[r(" Operator ")]),_:1}),o(h)])]),e("tbody",Ge,[(i(!0),m(j,null,Z(d.vends.data,(t,v)=>(i(),m("tr",{key:t.id,class:"divide-x divide-gray-200"},[o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-center"},{default:a(()=>[r(c(d.vends.meta.from+v),1)]),_:2},1032,["currentIndex","totalLength"]),o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-left"},{default:a(()=>[r(c(t.code),1)]),_:2},1032,["currentIndex","totalLength"]),o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-left"},{default:a(()=>[t.customer_code?(i(),m("span",Ae,[u(g).includes("admin-access vends")?(i(),m("span",Fe,[e("a",{class:"text-blue-700",target:"_blank",href:"//admin.happyice.com.sg/person/vend-code/"+t.code},[r(c(t.customer_code)+" ",1),Ee,r(" "+c(t.customer_name),1)],8,Re)])):(i(),m("span",He,[r(c(t.customer_code)+" ",1),Ye,r(" "+c(t.customer_name),1)]))])):(i(),m("span",Ze,c(t.name),1))]),_:2},1032,["currentIndex","totalLength"]),o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-center"},{default:a(()=>[r(c(t.begin_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-center"},{default:a(()=>[r(c(t.termination_date_short),1)]),_:2},1032,["currentIndex","totalLength"]),o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-center"},{default:a(()=>[r(c(t.operator_name),1)]),_:2},1032,["currentIndex","totalLength"]),o(_,{currentIndex:v,totalLength:d.vends.length,inputClass:"text-center"},{default:a(()=>[e("div",qe,[o(u(q),{href:"/settings/vend/"+t.id+"/edit"},{default:a(()=>[o(b,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-3 py-2 text-xs text-gray-800 flex space-x-1"},{default:a(()=>[o(u(oe),{class:"w-4 h-4"}),ze]),_:1})]),_:2},1032,["href"]),o(b,{type:"button",class:"bg-red-300 hover:bg-red-400 px-3 py-2 text-xs text-red-800 flex space-x-1",onClick:et=>A(t)},{default:a(()=>[o(u(se),{class:"w-4 h-4"}),Je]),_:2},1032,["onClick"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.vends.data.length?f("",!0):(i(),m("tr",Qe,Xe))])]),d.vends.data.length?(i(),w(Q,{key:0,links:d.vends.links,meta:d.vends.meta},null,8,["links","meta"])):f("",!0)])])])]),n.showModal?(i(),w(J,{key:0,vend:K.value,type:N.value,showModal:n.showModal,onModalClose:E},null,8,["vend","type","showModal"])):f("",!0)]}),_:1})],64))}};export{yt as default};
