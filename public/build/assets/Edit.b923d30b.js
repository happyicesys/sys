import{g as p,T as C,K as F,h as W,f as l,a as d,u,w as m,F as S,o as a,Z as X,b as e,d as _,t as c,l as n,e as g,n as h,k as U,i as Y,c as I,O as b}from"./app.3761f381.js";import{_ as ee}from"./Authenticated.8907666e.js";import{_ as v}from"./Button.266b761a.js";import"./main.eb2c7e86.js";import{_ as M}from"./FormInput.22e82a0f.js";import{_ as D}from"./MultiSelect.3b72d838.js";import{r as E}from"./PlusCircleIcon.d19f1b22.js";import{r as te}from"./ArrowUturnLeftIcon.3340b4d0.js";import{r as se}from"./CheckCircleIcon.0f91c168.js";import{r as R}from"./BackspaceIcon.c3c66d29.js";import"./open-closed.0213d3a5.js";import"./use-resolve-button-type.4cc7a6a6.js";import"./RectangleStackIcon.eccc4a38.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.e3cd6cab.js";const oe={class:"font-semibold text-xl text-gray-800 leading-tight"},ae={key:0},re={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},le={class:"mt-6 flex flex-col"},de={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},ne={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},ie=["onSubmit"],ce={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},pe={class:"sm:col-span-6"},ue={class:"sm:col-span-6"},me=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),_e={class:"mt-1"},ve=["value"],ye={class:"sm:col-span-6"},ge=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),fe={class:"mt-1"},xe=["value"],he={class:"sm:col-span-6"},be=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),we={class:"mt-1"},ke=["value"],Ve={class:"sm:col-span-6"},Oe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),Pe={class:"mt-1"},je=["value"],Ce=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Delivery Platform Product(s) ")])])],-1),Se={key:0},Me={key:1},De=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Be={key:0,class:"text-sm text-red-600"},Ae={key:2},$e={key:3},Ne=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),Fe={key:4,class:"sm:col-span-1"},Ue=e("span",null," Add ",-1),Ee={key:5,class:"sm:col-span-6 flex flex-col mt-3"},Re={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Te={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Le={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},ze={class:"table-fixed min-w-full divide-y divide-gray-300"},Ke=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Ze={class:"bg-white"},qe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ge={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},He={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Je={class:"flex justify-center"},Qe=["src"],We={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Xe={key:0},Ye={key:1,class:"break-words"},Ie={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},et={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},tt={class:"whitespace-nowrap py-4 text-sm text-center"},st={key:0},ot=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),at=[ot],rt={key:6,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},lt=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"}," Vending Machine Binding ")])],-1),dt=[lt],nt={key:7,class:"sm:col-span-5"},it=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),ct={key:0,class:"text-sm text-red-600"},pt={key:8,class:"sm:col-span-1"},ut=e("span",null," Add ",-1),mt={key:9,class:"sm:col-span-6 flex flex-col mt-3"},_t={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},vt={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},yt={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},gt={class:"min-w-full divide-y divide-gray-300"},ft=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),xt={class:"bg-white"},ht={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},bt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},wt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left"},kt={key:0},Vt=e("br",null,null,-1),Ot={key:1},Pt={class:"whitespace-nowrap py-4 text-sm text-center"},jt={key:0},Ct=e("td",{colspan:"5",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),St=[Ct],Mt={class:"sm:col-span-6"},Dt={class:"flex space-x-1 mt-5 justify-end"},Bt=e("span",null," Back ",-1),At=e("span",null," Save ",-1),Jt={__name:"Edit",props:{categoryApiOptions:[Array,Object],deliveryProductMapping:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String,unbindedVendOptions:[Array,Object]},setup(B){const r=B,T=p([]),w=p([]),L=p([]),f=p([]),t=p(C(N()));p(!1);const x=F().props.auth.operatorCountry,k=p([]),V=p([]),z=p([]),A=p([]),$=p([]),O=p(""),K=F().props.auth.permissions,P=p([]),j=p([]);W(()=>{r.type=="create"?O.value="Create New":O.value="Edit",T.value=r.categoryApiOptions[0].categories.map(s=>({id:s.id,name:s.name,subCategories:s.subCategories})),w.value=[...r.operatorOptions.data.find(s=>s.id===r.deliveryProductMapping.data.operator_id).deliveryPlatformOperators.map(s=>({id:s.id,name:s.deliveryPlatform.name}))],f.value=r.deliveryProductMapping?r.deliveryProductMapping.data.deliveryProductMappingItems:[],k.value=[...r.operatorOptions.data.map(s=>({id:s.id,full_name:s.full_name}))],V.value=[...r.productMappingOptions[0].data.map(s=>({id:s.id,name:s.name}))],A.value=r.productOptions.data,t.value=r.deliveryProductMapping?C({...r.deliveryProductMapping.data,operator_id:k.value.find(s=>s.id===r.deliveryProductMapping.data.operator_id),operator_field:k.value.find(s=>s.id===r.deliveryProductMapping.data.operator_id).full_name,product_mapping_id:V.value.find(s=>s.id===r.deliveryProductMapping.data.product_mapping_id),product_mapping_field:V.value.find(s=>s.id===r.deliveryProductMapping.data.product_mapping_id).name,delivery_platform_operator_id:w.value.find(s=>s.id===r.deliveryProductMapping.data.delivery_platform_operator_id),delivery_platform_operator_field:w.value.find(s=>s.id===r.deliveryProductMapping.data.delivery_platform_operator_id).name}):C(N()),$.value=r.deliveryProductMapping?r.deliveryProductMapping.data.category_json.subCategories:[],j.value=r.unbindedVendOptions?r.unbindedVendOptions.data:[],P.value=r.deliveryProductMapping?r.deliveryProductMapping.data.vends:[]});function N(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",sub_category_json:""}}function Z(){z.value.map(function(s){return s.channel_code}).indexOf(t.value.channel_code)<0&&b.post("/delivery-product-mapping-items/delivery-product-mapping/"+t.value.id+"/store",{...t.value,product_id:t.value.product_id?t.value.product_id.id:null},{preserveState:!1,preserveScroll:!0,replace:!0})}function q(s){b.post("/delivery-product-mappings/"+t.value.id+"/bind-vend/"+s,{},{preserveState:!1,preserveScroll:!0,replace:!0})}function G(s){t.value.delete("/delivery-product-mapping-items/"+s.id,{preserveState:!1,replace:!0})}function H(){t.value.clearErrors(),t.value.transform(s=>({name:s.name})).post("/delivery-product-mappings/"+t.value.id+"/update",{preserveState:!0,replace:!0})}function J(s){!confirm("Are you sure to delete this entry?")||b.delete("/delivery-product-mappings/"+t.value.id+"/unbind-vend/"+s,{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{b.reload({only:["unbindedVendOptions"]}),j.value=r.unbindedVendOptions?r.unbindedVendOptions.data:[]}})}return(s,i)=>(a(),l(S,null,[d(u(X),{title:"Delivery Product Mapping"}),d(ee,null,{header:m(()=>[e("h2",oe,[_(c(O.value)+" Delivery Product Mapping ",1),B.type=="update"?(a(),l("span",ae,c(L.value.name),1)):n("",!0)])]),default:m(()=>[e("div",re,[e("div",le,[e("div",de,[e("div",ne,[e("form",{onSubmit:g(H,["prevent"]),id:"submit"},[e("div",ce,[e("div",pe,[d(M,{modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=o=>t.value.name=o),error:t.value.errors.name},{default:m(()=>[_(" Name ")]),_:1},8,["modelValue","error"])]),e("div",ue,[me,e("div",_e,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.operator_field},null,8,ve)])]),e("div",ye,[ge,e("div",fe,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.delivery_platform_operator_field},null,8,xe)])]),e("div",he,[be,e("div",we,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.category_json.name},null,8,ke)])]),e("div",Ve,[Oe,e("div",Pe,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:t.value.product_mapping_field},null,8,je)])]),Ce,t.value.id?(a(),l("div",Se,[d(M,{modelValue:t.value.channel_code,"onUpdate:modelValue":i[1]||(i[1]=o=>t.value.channel_code=o),error:t.value.errors.channel_code,placeholderStr:"Channel ID"},{default:m(()=>[_(" Channel ID ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.id?(a(),l("div",Me,[De,d(D,{modelValue:t.value.product_id,"onUpdate:modelValue":i[2]||(i[2]=o=>t.value.product_id=o),options:A.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(a(),l("div",Be,c(t.value.errors.product_id),1)):n("",!0)])):n("",!0),t.value.id?(a(),l("div",Ae,[d(M,{modelValue:t.value.amount,"onUpdate:modelValue":i[3]||(i[3]=o=>t.value.amount=o),error:t.value.errors.amount,placeholderStr:"Platform Price"},{default:m(()=>[_(" Price ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.id?(a(),l("div",$e,[Ne,d(D,{modelValue:t.value.sub_category_json,"onUpdate:modelValue":i[4]||(i[4]=o=>t.value.sub_category_json=o),options:$.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):n("",!0),t.value.product_mapping_id?(a(),l("div",Fe,[d(v,{type:"button",onClick:i[5]||(i[5]=g(o=>Z(),["prevent"])),class:h(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.channel_code||!t.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.channel_code||!t.value.product_id},{default:m(()=>[d(u(E),{class:"w-4 h-4"}),Ue]),_:1},8,["class","disabled"])])):n("",!0),t.value.product_mapping_id?(a(),l("div",Ee,[e("div",Re,[e("div",Te,[e("div",Le,[e("table",ze,[Ke,e("tbody",Ze,[(a(!0),l(S,null,U(f.value,(o,y)=>(a(),l("tr",{key:o.id,class:h(y%2===0?void 0:"bg-gray-50")},[e("td",qe,c(y+1),1),e("td",Ge,c(o.channel_code),1),e("td",He,[e("div",Je,[o.product&&o.product.thumbnail?(a(),l("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:o.product.thumbnail.full_url,alt:""},null,8,Qe)):n("",!0)])]),e("td",We,[o.product.code?(a(),l("span",Xe,c(o.product.code),1)):n("",!0),o.product.name?(a(),l("span",Ye,c(o.product.name),1)):n("",!0)]),e("td",Ie,c(o.amount.toLocaleString(void 0,{minimumFractionDigits:u(x).is_currency_exponent_hidden?0:u(x).currency_exponent,maximumFractionDigits:u(x).is_currency_exponent_hidden?0:u(x).currency_exponent})),1),e("td",et,c(o.sub_category_json.name),1),e("td",tt,[d(v,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:g(Q=>G(o),["prevent"])},{default:m(()=>[d(u(R),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),!f.value||!f.value.length?(a(),l("tr",st,at)):n("",!0)])])])])])])):n("",!0),t.value.product_mapping_id?(a(),l("div",rt,dt)):n("",!0),t.value.product_mapping_id?(a(),l("div",nt,[it,d(D,{modelValue:t.value.vend_id,"onUpdate:modelValue":i[6]||(i[6]=o=>t.value.vend_id=o),options:j.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.vend_id?(a(),l("div",ct,c(t.value.errors.vend_id),1)):n("",!0)])):n("",!0),t.value.product_mapping_id?(a(),l("div",pt,[d(v,{type:"button",onClick:i[7]||(i[7]=g(o=>q(t.value.vend_id.id),["prevent"])),class:h(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[t.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!t.value.vend_id},{default:m(()=>[d(u(E),{class:"w-4 h-4"}),ut]),_:1},8,["class","disabled"])])):n("",!0),t.value.product_mapping_id?(a(),l("div",mt,[e("div",_t,[e("div",vt,[e("div",yt,[e("table",gt,[ft,e("tbody",xt,[(a(!0),l(S,null,U(P.value,(o,y)=>(a(),l("tr",{key:o.id,class:h(y%2===0?void 0:"bg-gray-50")},[e("td",ht,c(y+1),1),e("td",bt,c(o.code),1),e("td",wt,[o.latestVendBinding&&o.latestVendBinding.customer?(a(),l("span",kt,[_(c(o.latestVendBinding.customer.code)+" ",1),Vt,_(" "+c(o.latestVendBinding.customer.name),1)])):(a(),l("span",Ot,c(o.name),1))]),e("td",Pt,[d(v,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:g(Q=>J(o.id),["prevent"])},{default:m(()=>[d(u(R),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),P.value.length?n("",!0):(a(),l("tr",jt,St))])])])])])])):n("",!0)]),e("div",Mt,[e("div",Dt,[d(u(Y),{href:"/delivery-product-mappings"},{default:m(()=>[d(v,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:m(()=>[d(u(te),{class:"w-4 h-4"}),Bt]),_:1})]),_:1}),u(K).includes("update vends")?(a(),I(v,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:m(()=>[d(u(se),{class:"w-4 h-4"}),At]),_:1})):n("",!0)])])],40,ie)])])])])]),_:1})],64))}};export{Jt as default};
