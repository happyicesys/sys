import{g as u,T as y,K as h,U as k,h as D,f as p,a as r,u as a,w as n,F as M,o as l,Z as N,b as o,d as v,t as C,l as m,e as B,i as j,c as x,n as F}from"./app.024e39e5.js";import{_ as P}from"./Authenticated.9fe60fc0.js";import{_}from"./Button.33536ddb.js";import"./main.c0edd862.js";import{_ as U}from"./FormInput.a4bc002f.js";import{_ as Y}from"./MultiSelect.35807366.js";import{r as E}from"./ArrowUturnLeftIcon.00eea8ad.js";import{r as A}from"./ArrowUturnDownIcon.2b6517a5.js";import{r as H,a as T}from"./PlayIcon.cf546182.js";import{r as z}from"./CheckCircleIcon.71ce7f83.js";import"./open-closed.4c597dc4.js";import"./use-resolve-button-type.0e6f995d.js";import"./RectangleStackIcon.7a8167e6.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.18709a47.js";const K={class:"font-semibold text-xl text-gray-800 leading-tight"},R={key:0},Z={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},q={class:"mt-6 flex flex-col"},G={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},I={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll p-5"},J=["onSubmit"],L={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},Q={key:0,class:"sm:col-span-6"},W={class:"sm:col-span-6"},X=o("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),ee={class:"sm:col-span-6"},te={class:"flex space-x-1 mt-5 justify-end"},se=o("span",null," Back ",-1),oe=o("span",null," Unbind Customer ",-1),re={key:0,class:"flex"},ae={key:1,class:"flex"},ie=o("span",null," Save ",-1),be={__name:"Form",props:{adminCustomerOptions:Object,operatorOptions:Object,vend:Object,type:String},setup(d){const s=d,O=u([]);u([]);const e=u(y(w()));u(!1);const b=u([]),f=u("");h().props.auth.operatorCountry,h().props.auth.operatorRole;const g=h().props.auth.permissions;u(k().format("HH:mm:ss")),D(()=>{s.type=="create"?f.value="Create New":f.value="Edit",O.value=s.adminCustomerOptions.map(t=>({id:t.id,full_name:t.cust_id+" - "+t.company})),b.value=[...s.operatorOptions.data.map(t=>({id:t.id,full_name:t.full_name}))],e.value=s.vend&&s.vend.id?y(s.vend):y(w()),e.value.name=s.vend.name,s.vend.customer_id&&(e.value.is_customer=!0,e.value.customer_id={id:s.vend.person_id,full_name:s.vend.customer_code+" - "+s.vend.customer_name}),s.vend.operator_id&&(e.value.operator_id={id:s.vend.operator_id,full_name:s.vend.operator_name})});function w(){return{code:"",name:"",begin_date:k().format("YYYY-MM-DD"),customer_id:"",operator_id:"",serial_num:"",termination_date:"",private_key:""}}function S(){e.value.clearErrors(),s.type==="create"&&e.value.transform(t=>({...t,customer_id:t.customer_id?t.customer_id.id:null,operator_id:t.operator_id?t.operator_id.id:null})).post("/vends/create",{preserveState:!0,replace:!0}),s.type==="update"&&e.value.transform(t=>({...t,customer_id:t.customer_id?t.customer_id.id:null,operator_id:t.operator_id?t.operator_id.id:null})).post("/vends/"+e.value.id+"/update",{preserveState:!0,replace:!0})}function V(t){e.value.post("/vends/"+t+"/unbind",{onSuccess:()=>{e.value.is_customer=!1,e.value.customer_id="",e.value.begin_date=""},preserveState:!0,replace:!0})}function $(){e.value.post("/settings/"+e.value.id+"/toggle-activation",{})}return(t,i)=>(l(),p(M,null,[r(a(N),{title:"Delivery Product Mapping"}),r(P,null,{header:n(()=>[o("h2",K,[v(C(f.value)+" Delivery Product Mapping ",1),d.type=="update"?(l(),p("span",R,C(t.deliveryProductMapping.name),1)):m("",!0)])]),default:n(()=>[o("div",Z,[o("div",q,[o("div",G,[o("div",I,[o("form",{onSubmit:B(S,["prevent"]),id:"submit"},[o("div",L,[e.value.is_customer?m("",!0):(l(),p("div",Q,[r(U,{modelValue:e.value.name,"onUpdate:modelValue":i[0]||(i[0]=c=>e.value.name=c),error:e.value.errors.name},{default:n(()=>[v(" Name ")]),_:1},8,["modelValue","error"])])),o("div",W,[X,r(Y,{modelValue:e.value.operator_id,"onUpdate:modelValue":i[1]||(i[1]=c=>e.value.operator_id=c),options:b.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),o("div",ee,[o("div",te,[r(a(j),{href:"/settings"},{default:n(()=>[r(_,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:n(()=>[r(a(E),{class:"w-4 h-4"}),se]),_:1})]),_:1}),d.vend.customer_id&&a(g).includes("update vends")?(l(),x(_,{key:0,type:"button",class:"bg-yellow-500 hover:bg-yellow-600 text-white flex space-x-1",onClick:i[2]||(i[2]=c=>V(e.value.id))},{default:n(()=>[r(a(A),{class:"w-4 h-4"}),oe]),_:1})):m("",!0),a(g).includes("update vends")&&d.vend.is_active!=null?(l(),x(_,{key:1,type:"button",class:F(["text-white flex space-x-1",[d.vend.is_active?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"]]),onClick:i[3]||(i[3]=c=>$())},{default:n(()=>[d.vend.is_active?m("",!0):(l(),p("span",re,[r(a(H),{class:"w-4 h-4 pt-1"}),v("Activate ")])),d.vend.is_active?(l(),p("span",ae,[r(a(T),{class:"w-4 h-4 pt-1"}),v("Deactivate ")])):m("",!0)]),_:1},8,["class"])):m("",!0),a(g).includes("update vends")?(l(),x(_,{key:2,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:n(()=>[r(a(z),{class:"w-4 h-4"}),ie]),_:1})):m("",!0)])])],40,J)])])])])]),_:1})],64))}};export{be as default};
