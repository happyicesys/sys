import{i as p,u as i,j as S,o as u,c as V,a,w as n,T as w,d as t,g as v,p as y,t as C,b as f,e as k,f as g}from"./app.12a1e8bc.js";import{_ as b}from"./Button.07e98030.js";import{_ as h}from"./FormInput.40663347.js";import{_ as $}from"./Modal.13433183.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.f1d3a989.js";import{r as B}from"./ArrowUturnLeftIcon.ec498975.js";import{r as N}from"./CheckCircleIcon.abe7c60a.js";import"./open-closed.9414fbf8.js";const M={class:"flex flex-col md:flex-row space-x-2"},j={key:0,class:"text-gray-600"},E={key:1},F=["onSubmit"],O={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},T={class:"sm:col-span-4"},D=g(" Name "),U={class:"sm:col-span-4"},q=g(" Serial Number "),z={class:"sm:col-span-6"},A={class:"flex space-x-1 mt-5 justify-end"},G=t("span",null," Back ",-1),H=t("span",null," Save ",-1),X={__name:"Form",props:{vend:Object,countries:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(l,{emit:_}){const s=l,e=p(i(m())),c=p([]);S(()=>{c.value=s.countries.data,e.value=s.vend?i(s.vend):i(m()),s.type==="create"&&(e.value.base_currency_id=e.value.base_currency_id?e.value.base_currency_id:c.value[0],e.value.address.country_id=e.value.address.country_id?e.value.address.country_id:c.value[0],e.value.contact.phone_country_id=e.value.contact.phone_country_id?e.value.contact.phone_country_id:c.value[0])});function m(){return{alias:"",name:"",uen:"",base_currency_id:"",address:{block_num:"",building:"",country_id:"",latitude:"",longitude:"",postcode:"",street_name:"",unit_num:""},contact:{name:"",email:"",phone_country_id:"",phone_num:""}}}function x(){e.value.clearErrors(),s.type==="create"&&e.value.transform(o=>({...o,base_currency_id:o.base_currency_id.id,address:{...o.address,country_id:o.address.country_id.id},contact:{...o.contact,phone_country_id:o.contact.phone_country_id.id}})).post("/vends/create",{onSuccess:()=>{_("modalClose")},preserveState:!0,replace:!0}),s.type==="update"&&e.value.transform(o=>({...o,base_currency_id:o.base_currency_id.id,address:{...o.address,country_id:o.address.country_id.id},contact:{...o.contact,phone_country_id:o.contact.phone_country_id.id}})).post("/vends/"+e.value.id+"/update",{onSuccess:()=>{_("modalClose")},preserveState:!0,replace:!0})}return(o,r)=>(u(),V(w,{to:"body"},[a($,{open:l.showModal,onModalClose:r[3]||(r[3]=d=>o.$emit("modalClose"))},{header:n(()=>[t("div",M,[s.vend?(u(),v("span",j," Editing ")):y("",!0),s.vend?(u(),v("span",E,C(s.vend.code),1)):y("",!0)])]),default:n(()=>[t("form",{onSubmit:k(x,["prevent"]),id:"submit"},[t("div",O,[t("div",T,[a(h,{modelValue:e.value.name,"onUpdate:modelValue":r[0]||(r[0]=d=>e.value.name=d),error:e.value.errors.name,required:"true"},{default:n(()=>[D]),_:1},8,["modelValue","error"])]),t("div",U,[a(h,{modelValue:e.value.serial_num,"onUpdate:modelValue":r[1]||(r[1]=d=>e.value.serial_num=d),error:e.value.errors.serial_num},{default:n(()=>[q]),_:1},8,["modelValue","error"])])]),t("div",z,[t("div",A,[a(b,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:r[2]||(r[2]=d=>o.$emit("modalClose")),form:"submit"},{default:n(()=>[a(f(B),{class:"w-4 h-4"}),G]),_:1}),a(b,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:n(()=>[a(f(N),{class:"w-4 h-4"}),H]),_:1})])])],40,F)]),_:1},8,["open"])]))}};export{X as default};
