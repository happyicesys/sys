import{_ as U}from"./Authenticated.a1881973.js";import{_ as M}from"./Button.ac07a930.js";import{d as G}from"./main.7e9a98a9.js";import{o as _,g as v,d as e,r as j,a,b as y,a2 as P,i as g,j as A,w as n,F as S,H as E,t as i,m as F,p as w,c as N,f as r,J as O}from"./app.cb5a6de2.js";import{r as K,a as H,T as m,_ as R,b as J,c}from"./TableHeadSort.3b0a7f60.js";import{_ as f}from"./MultiSelect.1f3cf458.js";import"./open-closed.2dcff458.js";import"./use-resolve-button-type.ca423a0d.js";import"./RectangleStackIcon.986d7802.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Y={for:"text",class:"block text-sm font-medium text-gray-700"},q={class:"mt-1"},$={__name:"DatePicker",props:{modelValue:[Date,String],minDate:[Date,String],maxDate:[Date,String],enableTimePicker:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:p}){function x(h){p("update:modelValue",P(h).format("Y-M-D"))}return(h,o)=>(_(),v("div",null,[e("label",Y,[j(h.$slots,"default")]),e("div",q,[a(y(G),{modelValue:l.modelValue,"onUpdate:modelValue":x,format:"yyyy-MM-dd",clearable:!1,monthChangeOnScroll:!1,autoApply:"",closeOnAutoApply:!0,minDate:l.minDate,maxDate:l.maxDate,enableTimePicker:l.enableTimePicker},null,8,["modelValue","minDate","maxDate","enableTimePicker"])])]))}},z=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (Transactions) ",-1),Q={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},W={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},X={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},Z={class:"col-span-5 md:col-span-1"},ee=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Code ",-1),te={class:"col-span-5 md:col-span-1"},ae=r(" From "),oe={class:"col-span-5 md:col-span-1"},se=r(" To "),le={class:"col-span-5 md:col-span-1"},ne=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),de={class:"col-span-5 md:col-span-1"},re=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Pay Method ",-1),ie={class:"col-span-5 md:col-span-1"},ue=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),ce={class:"col-span-5 md:col-span-1"},me=e("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),pe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ge={class:"mt-3"},he={class:"flex space-x-1"},fe=e("span",null," Search ",-1),_e=e("span",null," Reset ",-1),ve={class:"flex flex-col space-y-2"},xe={class:"text-sm text-gray-700 leading-5 flex space-x-1"},ye=e("span",null,"Showing",-1),be={class:"font-medium"},Ve=e("span",null,"to",-1),ke={class:"font-medium"},Pe=e("span",null,"of",-1),Ce={class:"font-medium"},Be=e("span",null,"results",-1),De={class:"mt-6 flex flex-col"},Le={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Me={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},Se={class:"min-w-full border-separate",style:{"border-spacing":"0"}},we={class:"bg-gray-100"},Oe={class:"divide-x divide-gray-200"},$e=r(" # "),Ie=r(" DateTime "),Te=r(" Code "),Ue=r(" Customer "),Ge=r(" Channel "),je=r(" Amount "),Ae=r(" Pay Method "),Ee=r(" Channels Error "),Fe=r(" Order ID "),Ne={class:"bg-white"},Ke=e("br",null,null,-1),He={key:0},Re=e("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Je=[Re],ot={__name:"Transaction",props:{categories:Object,categoryGroups:Object,paymentMethods:Object,vends:Object,vendTransactions:Object,vendChannelErrors:Object},setup(l){const p=l,x=g([]),h=g([]);A(()=>{C.value=p.vends.data.map(s=>({id:s.id,code:s.code})),B.value=p.vendChannelErrors.data.map(s=>({id:s.id,desc:s.desc})),b.value=[{id:"",name:"All"},...p.paymentMethods.data.map(s=>({id:s.id,name:s.name}))],V.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.numberPerPage=V.value[0],o.value.paymentMethod=b.value[0],x.value=p.categories.data.map(s=>({id:s.id,name:s.name})),h.value=p.categoryGroups.data.map(s=>({id:s.id,name:s.name}))});const o=g({codes:[],categories:[],categoryGroups:[],errors:[],paymentMethod:"",date_from:P().startOf("month").toDate(),date_to:P().toDate(),sortKey:"",sortBy:!1,numberPerPage:100}),C=g([]),B=g([]),b=g([]),V=g([]);function k(){O.Inertia.get("/vends/transactions",{...o.value,categories:o.value.categories.map(s=>s.id),categoryGroups:o.value.categoryGroups.map(s=>s.id),codes:o.value.codes.map(s=>s.id),errors:o.value.errors.map(s=>s.id),paymentMethod:o.value.paymentMethod.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function I(){O.Inertia.get("/vends/transactions")}function T(s){o.value.sortKey=s,o.value.sortBy=!o.value.sortBy,k()}return(s,d)=>(_(),v(S,null,[a(y(E),{title:"VM Transactions"}),a(U,null,{header:n(()=>[z]),default:n(()=>{var D,L;return[e("div",Q,[e("div",W,[e("div",X,[e("div",Z,[ee,a(f,{modelValue:o.value.codes,"onUpdate:modelValue":d[0]||(d[0]=t=>o.value.codes=t),options:C.value,valueProp:"id",label:"code",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",te,[a($,{modelValue:o.value.date_from,"onUpdate:modelValue":d[1]||(d[1]=t=>o.value.date_from=t),class:"col-span-5 md:col-span-1"},{default:n(()=>[ae]),_:1},8,["modelValue"])]),e("div",oe,[a($,{modelValue:o.value.date_to,"onUpdate:modelValue":d[2]||(d[2]=t=>o.value.date_to=t),minDate:o.value.date_from,class:"col-span-5 md:col-span-1"},{default:n(()=>[se]),_:1},8,["modelValue","minDate"])]),e("div",le,[ne,a(f,{modelValue:o.value.errors,"onUpdate:modelValue":d[3]||(d[3]=t=>o.value.errors=t),options:B.value,valueProp:"id",label:"desc",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",de,[re,a(f,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":d[4]||(d[4]=t=>o.value.paymentMethod=t),options:b.value,valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",ie,[ue,a(f,{modelValue:o.value.categories,"onUpdate:modelValue":d[5]||(d[5]=t=>o.value.categories=t),options:x.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),e("div",ce,[me,a(f,{modelValue:o.value.categoryGroups,"onUpdate:modelValue":d[6]||(d[6]=t=>o.value.categoryGroups=t),options:h.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),e("div",pe,[e("div",ge,[e("div",he,[a(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:d[7]||(d[7]=t=>k())},{default:n(()=>[a(y(K),{class:"h-4 w-4","aria-hidden":"true"}),fe]),_:1}),a(M,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:d[8]||(d[8]=t=>I())},{default:n(()=>[a(y(H),{class:"h-4 w-4","aria-hidden":"true"}),_e]),_:1})])]),e("div",ve,[e("p",xe,[ye,e("span",be,i((D=l.vendTransactions.meta.from)!=null?D:0),1),Ve,e("span",ke,i((L=l.vendTransactions.meta.to)!=null?L:0),1),Pe,e("span",Ce,i(l.vendTransactions.meta.total),1),Be]),a(f,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":d[9]||(d[9]=t=>o.value.numberPerPage=t),options:V.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:k},null,8,["modelValue","options"])])])]),e("div",De,[e("div",Le,[e("div",Me,[e("table",Se,[e("thead",we,[e("tr",Oe,[a(m,null,{default:n(()=>[$e]),_:1}),a(R,{modelName:"transaction_datetime",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:d[10]||(d[10]=t=>T("transaction_datetime"))},{default:n(()=>[Ie]),_:1},8,["sortKey","sortBy"]),a(m,null,{default:n(()=>[Te]),_:1}),a(m,null,{default:n(()=>[Ue]),_:1}),a(m,null,{default:n(()=>[Ge]),_:1}),a(m,null,{default:n(()=>[je]),_:1}),a(m,null,{default:n(()=>[Ae]),_:1}),a(m,null,{default:n(()=>[Ee]),_:1}),a(m,null,{default:n(()=>[Fe]),_:1})])]),e("tbody",Ne,[(_(!0),v(S,null,F(l.vendTransactions.data,(t,u)=>(_(),v("tr",{key:t.id,class:"divide-x divide-gray-200"},[a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-center"},{default:n(()=>[r(i(l.vendTransactions.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-center"},{default:n(()=>[r(i(t.transaction_datetime),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-center"},{default:n(()=>[r(i(t.vend.code),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-left"},{default:n(()=>[r(i(t.vend.latestVendBinding&&t.vend.latestVendBinding.customer?t.vend.latestVendBinding.customer.code:null)+" ",1),Ke,r(" "+i(t.vend.latestVendBinding&&t.vend.latestVendBinding.customer?t.vend.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-center"},{default:n(()=>[r(i(t.vendChannel.code),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-right"},{default:n(()=>[r(i(t.amount),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-left"},{default:n(()=>[r(i(t.paymentMethod?t.paymentMethod.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-left"},{default:n(()=>[r(i(t.vend_channel_error_desc),1)]),_:2},1032,["currentIndex","totalLength"]),a(c,{currentIndex:u,totalLength:l.vendTransactions.length,inputClass:"text-center"},{default:n(()=>[r(i(t.order_id),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),l.vendTransactions.data.length?w("",!0):(_(),v("tr",He,Je))])]),l.vendTransactions.data.length?(_(),N(J,{key:0,links:l.vendTransactions.links,meta:l.vendTransactions.meta},null,8,["links","meta"])):w("",!0)])])])])]}),_:1})],64))}};export{ot as default};
