import{g as c,T as D,K as F,h as M,f as i,a,u as m,w as p,F as S,o as l,Z as E,b as e,d as V,t as u,l as n,e as T,k as R,i as z,c as K,O as P,n as L}from"./app.f3f8417a.js";import{_ as Z}from"./Authenticated.22cd31c1.js";import{_ as x}from"./Button.560137c1.js";import"./main.4331d0bc.js";import{_ as j}from"./FormInput.5e929297.js";import{_}from"./MultiSelect.b5db08de.js";import{r as q}from"./ArrowUturnLeftIcon.6bcecaaa.js";import{r as G}from"./CheckCircleIcon.383f8e2b.js";import{r as H}from"./BackspaceIcon.7ada22c8.js";import"./open-closed.aa6761c3.js";import"./use-resolve-button-type.d40e4e2b.js";import"./RectangleStackIcon.b78db151.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.1faf467b.js";const J={class:"font-semibold text-xl text-gray-800 leading-tight"},Q={key:0},W={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},X={class:"mt-6 flex flex-col"},Y={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},I={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},ee=["onSubmit"],te={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},oe={class:"sm:col-span-6"},se={class:"sm:col-span-6"},re=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),ae={key:0,class:"sm:col-span-6"},le=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),ie={key:1,class:"sm:col-span-6"},ne=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),de={key:2,class:"sm:col-span-6"},ce=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),pe={key:3,class:"sm:col-span-6 flex flex-col mt-3"},me={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},ue={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},_e={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},fe={class:"table-fixed min-w-full divide-y divide-gray-300"},ye=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Code "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),ve={class:"bg-white"},xe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},ge={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},he={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},be={class:"flex justify-center"},we=["src"],ke={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Oe={key:0},Se={key:1,class:"break-words"},Ve={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Pe={class:"whitespace-nowrap py-4 text-sm text-center"},je={key:0},Ce=e("td",{colspan:"5",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Be=[Ce],Ne={class:"sm:col-span-6"},Ae={class:"flex space-x-1 mt-5 justify-end"},Ue=e("span",null," Back ",-1),$e=e("span",null," Save ",-1),Je={__name:"Form",props:{categoryApiOptions:[Array,Object],deliveryProductMappings:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],type:String},setup(g){const d=g,h=c([]),f=c([]),t=c(D(B()));c(!1);const b=c([]),w=c([]),y=c([]),v=c(""),C=F().props.auth.permissions;M(()=>{d.type=="create"?v.value="Create New":v.value="Edit",b.value=[...d.operatorOptions.data.map(o=>({id:o.id,full_name:o.full_name}))]});function B(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:""}}function N(){P.reload({only:["categoryApiOptions","productMappingOptions"],data:{delivery_platform_operator_id:t.value.delivery_platform_operator_id.id,operator_id:t.value.operator_id.id},replace:!0,preserveState:!0,onSuccess:o=>{h.value=d.categoryApiOptions[0].categories.map(r=>({id:r.id,name:r.name,subCategories:r.subCategories})),w.value=[...d.productMappingOptions[0].data.map(r=>({id:r.id,name:r.name}))]}})}function A(){f.value=[...d.operatorOptions.data.find(o=>o.id===t.value.operator_id.id).deliveryPlatformOperators.map(o=>({id:o.id,name:o.deliveryPlatform.name}))]}function U(){P.reload({only:["productMappingItems"],data:{product_mapping_id:t.value.product_mapping_id},replace:!0,preserveState:!0,onSuccess:o=>{y.value=[...d.productMappingItems[0].data]}})}function $(){t.value.clearErrors(),d.type==="create"&&t.value.transform(o=>({...o,customer_id:o.customer_id?o.customer_id.id:null,operator_id:o.operator_id?o.operator_id.id:null})).post("/vends/create",{preserveState:!0,replace:!0,resetOnSuccess:!0}),d.type==="update"&&t.value.transform(o=>({...o,customer_id:o.customer_id?o.customer_id.id:null,operator_id:o.operator_id?o.operator_id.id:null})).post("/vends/"+t.value.id+"/update",{preserveState:!0,replace:!0})}return(o,r)=>(l(),i(S,null,[a(m(E),{title:"Delivery Product Mapping"}),a(Z,null,{header:p(()=>[e("h2",J,[V(u(v.value)+" Delivery Product Mapping ",1),g.type=="update"?(l(),i("span",Q,u(o.deliveryProductMapping.name),1)):n("",!0)])]),default:p(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",I,[e("form",{onSubmit:T($,["prevent"]),id:"submit"},[e("div",te,[e("div",oe,[a(j,{modelValue:t.value.name,"onUpdate:modelValue":r[0]||(r[0]=s=>t.value.name=s),error:t.value.errors.name},{default:p(()=>[V(" Name ")]),_:1},8,["modelValue","error"])]),e("div",se,[re,a(_,{modelValue:t.value.operator_id,"onUpdate:modelValue":r[1]||(r[1]=s=>t.value.operator_id=s),options:b.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:A},null,8,["modelValue","options"])]),t.value.operator_id&&f.value.length?(l(),i("div",ae,[le,a(_,{modelValue:t.value.delivery_platform_operator_id,"onUpdate:modelValue":r[2]||(r[2]=s=>t.value.delivery_platform_operator_id=s),options:f.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:N},null,8,["modelValue","options"])])):n("",!0),t.value.delivery_platform_operator_id?(l(),i("div",ie,[ne,a(_,{modelValue:t.value.category_json,"onUpdate:modelValue":r[3]||(r[3]=s=>t.value.category_json=s),options:h.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):n("",!0),t.value.delivery_platform_operator_id?(l(),i("div",de,[ce,a(_,{modelValue:t.value.product_mapping_id,"onUpdate:modelValue":r[4]||(r[4]=s=>t.value.product_mapping_id=s),options:w.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:U},null,8,["modelValue","options"])])):n("",!0),t.value.product_mapping_id?(l(),i("div",pe,[e("div",me,[e("div",ue,[e("div",_e,[e("table",fe,[ye,e("tbody",ve,[(l(!0),i(S,null,R(y.value,(s,k)=>(l(),i("tr",{key:s.id,class:L(k%2===0?void 0:"bg-gray-50")},[e("td",xe,u(k+1),1),e("td",ge,u(s.channel_code),1),e("td",he,[e("div",be,[s.product&&s.product.thumbnail?(l(),i("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:s.product.thumbnail.full_url,alt:""},null,8,we)):n("",!0)])]),e("td",ke,[s.product.code?(l(),i("span",Oe,u(s.product.code),1)):n("",!0),s.product.name?(l(),i("span",Se,u(s.product.name),1)):n("",!0)]),e("td",Ve,[a(j,{modelValue:s.delivery_platform_amount,"onUpdate:modelValue":O=>s.delivery_platform_amount=O,error:t.value.errors.delivery_platform_amount,placeholderStr:"Platform Price"},null,8,["modelValue","onUpdate:modelValue","error"])]),e("td",Pe,[a(x,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:O=>o.unbindProductMappingItem(s)},{default:p(()=>[a(m(H),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),y.value.length?n("",!0):(l(),i("tr",je,Be))])])])])])])):n("",!0)]),e("div",Ne,[e("div",Ae,[a(m(z),{href:"/settings"},{default:p(()=>[a(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:p(()=>[a(m(q),{class:"w-4 h-4"}),Ue]),_:1})]),_:1}),m(C).includes("update vends")?(l(),K(x,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:p(()=>[a(m(G),{class:"w-4 h-4"}),$e]),_:1})):n("",!0)])])],40,ee)])])])])]),_:1})],64))}};export{Je as default};
