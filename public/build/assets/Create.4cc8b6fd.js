import{g as p,T,K as Q,h as z,f as d,a as r,u as _,w as i,F as C,o as s,Z as J,b as t,d as y,t as m,l as n,e as K,n as U,k as L,i as Z,c as G,O as B}from"./app.59b044b8.js";import{_ as H}from"./Authenticated.69f7f963.js";import{_ as b}from"./Button.23f7c4aa.js";import"./main.3db5a014.js";import{_ as f}from"./FormInput.72a4e153.js";import{_ as v}from"./MultiSelect.b191c470.js";import{r as W}from"./PlusCircleIcon.157350a8.js";import{r as X}from"./ArrowUturnLeftIcon.a9baf856.js";import{r as Y}from"./CheckCircleIcon.cb50c0fc.js";import{r as I}from"./BackspaceIcon.2eb46dcd.js";import"./open-closed.5c100063.js";import"./use-resolve-button-type.0681d336.js";import"./RectangleStackIcon.5e6bda85.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.80550338.js";const ee={class:"font-semibold text-xl text-gray-800 leading-tight"},te={key:0},oe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},le={class:"mt-6 flex flex-col"},ae={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},re={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},se=["onSubmit"],de={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},ne={class:"sm:col-span-6"},ie={class:"sm:col-span-6"},ce=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),pe={key:0,class:"sm:col-span-6"},ue=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),me={key:1,class:"sm:col-span-6"},_e=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),ve={key:2,class:"sm:col-span-6"},ye=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),fe={class:"sm:col-span-3"},ge={class:"sm:col-span-3"},xe=t("div",{class:"sm:col-span-6"},[t("label",{for:"reserved",class:"italic text-blue-800"},' By setting "Reserved Percentage", the sellable qty equivalent to un-reserved percent, then that value if lower than "Reserved Quantity", channel becomes inactive, both default value are 0. ')],-1),he={key:3,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},be=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t border-gray-300"})]),t("div",{class:"relative flex justify-center"},[t("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Delivery Platform Product(s) ")])],-1),Ve=[be],we={key:4},ke={key:5},Pe=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Oe={key:0,class:"text-sm text-red-600"},Se={key:6},je={key:7},Ce=t("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),Ue={key:8,class:"sm:col-span-1"},Be=t("span",null," Add ",-1),De={key:9,class:"sm:col-span-6 flex flex-col mt-3"},$e={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Ae={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Ne={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},qe={class:"table-fixed min-w-full divide-y divide-gray-300"},Me=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Code "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),t("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Re={class:"bg-white"},Fe={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ee={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Te={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Qe={class:"flex justify-center"},ze=["src"],Je={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Ke={key:0},Le={key:1,class:"break-words"},Ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ge={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},He={key:0,class:"text-sm text-red-600"},We={class:"whitespace-nowrap py-4 text-sm text-center"},Xe={key:0},Ye=t("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Ie=[Ye],et={class:"sm:col-span-6"},tt={class:"flex space-x-1 mt-5 justify-end"},ot=t("span",null," Back ",-1),lt=t("span",null," Save ",-1),gt={__name:"Create",props:{categoryApiOptions:[Array,Object],deliveryProductMappings:Object,operatorOptions:Object,productMappingItems:Object,productMappingOptions:[Array,Object],productOptions:Object,type:String},setup(k){const u=k,P=p([]),V=p([]),e=p(T($()));p(!1);const O=p([]),S=p([]),c=p([]),j=p([]),g=p([]),w=p(""),D=Q().props.auth.permissions;z(()=>{u.type=="create"?w.value="Create New":w.value="Edit",O.value=[...u.operatorOptions.data.map(a=>({id:a.id,full_name:a.full_name}))],j.value=u.productOptions.data});function $(){return{id:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",product_mapping_id:"",reserved_percent:0,reserved_qty:0,sub_category_json:""}}function A(){c.value.map(function(a){return a.channel_code}).indexOf(e.value.channel_code)<0&&(c.value.push({product:e.value.product_id,channel_code:e.value.channel_code,delivery_platform_sub_category_json:e.value.sub_category_json,delivery_platform_amount:e.value.amount}),c.value.sort((a,l)=>a.channel_code-l.channel_code)),c.value.splice(c.value.indexOf(productMappingItem),1)}function N(){g.value=[],g.value=e.value.category_json.subCategories}function q(){B.reload({only:["categoryApiOptions","productMappingOptions"],data:{delivery_platform_operator_id:e.value.delivery_platform_operator_id.id,operator_id:e.value.operator_id.id},replace:!0,preserveState:!0,onSuccess:a=>{P.value=u.categoryApiOptions[0].categories.map(l=>({id:l.id,name:l.name,subCategories:l.subCategories})),S.value=[...u.productMappingOptions[0].data.map(l=>({id:l.id,name:l.name}))],g.value=[]}})}function M(){V.value=[...u.operatorOptions.data.find(a=>a.id===e.value.operator_id.id).deliveryPlatformOperators.map(a=>({id:a.id,name:a.deliveryPlatform.name+" ("+a.type+")"}))]}function R(){B.reload({only:["productMappingItems"],data:{product_mapping_id:e.value.product_mapping_id},replace:!0,preserveState:!0,onSuccess:a=>{c.value=[...u.productMappingItems[0].data]}})}function F(a){c.value.splice(c.value.indexOf(a),1)}function E(){e.value.clearErrors(),u.type==="create"&&e.value.transform(a=>({...a,delivery_platform_operator_id:a.delivery_platform_operator_id?a.delivery_platform_operator_id.id:null,operator_id:a.operator_id?a.operator_id.id:null,product_mapping_id:a.product_mapping_id?a.product_mapping_id.id:null,productMappingItems:c.value})).post("/delivery-product-mappings/store",{preserveState:!0,replace:!0})}return(a,l)=>(s(),d(C,null,[r(_(J),{title:"Delivery Product Mapping"}),r(H,null,{header:i(()=>[t("h2",ee,[y(m(w.value)+" Delivery Product Mapping ",1),k.type=="update"?(s(),d("span",te,m(a.deliveryProductMapping.name),1)):n("",!0)])]),default:i(()=>[t("div",oe,[t("div",le,[t("div",ae,[t("div",re,[t("form",{onSubmit:K(E,["prevent"]),id:"submit"},[t("div",de,[t("div",ne,[r(f,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.name=o),error:e.value.errors.name},{default:i(()=>[y(" Name ")]),_:1},8,["modelValue","error"])]),t("div",ie,[ce,r(v,{modelValue:e.value.operator_id,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.operator_id=o),options:O.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:M},null,8,["modelValue","options"])]),e.value.operator_id&&V.value.length?(s(),d("div",pe,[ue,r(v,{modelValue:e.value.delivery_platform_operator_id,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.delivery_platform_operator_id=o),options:V.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:q},null,8,["modelValue","options"])])):n("",!0),e.value.delivery_platform_operator_id?(s(),d("div",me,[_e,r(v,{modelValue:e.value.category_json,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.category_json=o),options:P.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:N},null,8,["modelValue","options"])])):n("",!0),e.value.delivery_platform_operator_id?(s(),d("div",ve,[ye,r(v,{modelValue:e.value.product_mapping_id,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.product_mapping_id=o),options:S.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:R},null,8,["modelValue","options"])])):n("",!0),t("div",fe,[r(f,{modelValue:e.value.reserved_percent,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.reserved_percent=o),error:e.value.errors.reserved_percent},{default:i(()=>[y(" Reserved Percentage (%) ")]),_:1},8,["modelValue","error"])]),t("div",ge,[r(f,{modelValue:e.value.reserved_qty,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.reserved_qty=o),error:e.value.errors.reserved_qty},{default:i(()=>[y(" Reserved Quantity ")]),_:1},8,["modelValue","error"])]),xe,e.value.product_mapping_id?(s(),d("div",he,Ve)):n("",!0),e.value.product_mapping_id?(s(),d("div",we,[r(f,{modelValue:e.value.channel_code,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.channel_code=o),error:e.value.errors.channel_code,placeholderStr:"Channel ID"},{default:i(()=>[y(" Channel ID ")]),_:1},8,["modelValue","error"])])):n("",!0),e.value.product_mapping_id?(s(),d("div",ke,[Pe,r(v,{modelValue:e.value.product_id,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.product_id=o),options:j.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.product_id?(s(),d("div",Oe,m(e.value.errors.product_id),1)):n("",!0)])):n("",!0),e.value.product_mapping_id?(s(),d("div",Se,[r(f,{modelValue:e.value.amount,"onUpdate:modelValue":l[9]||(l[9]=o=>e.value.amount=o),error:e.value.errors.amount,placeholderStr:"Platform Price"},{default:i(()=>[y(" Price ")]),_:1},8,["modelValue","error"])])):n("",!0),e.value.product_mapping_id?(s(),d("div",je,[Ce,r(v,{modelValue:e.value.sub_category_json,"onUpdate:modelValue":l[10]||(l[10]=o=>e.value.sub_category_json=o),options:g.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):n("",!0),e.value.product_mapping_id?(s(),d("div",Ue,[r(b,{type:"button",onClick:l[11]||(l[11]=o=>A()),class:U(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!e.value.channel_code||!e.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!e.value.channel_code||!e.value.product_id},{default:i(()=>[r(_(W),{class:"w-4 h-4"}),Be]),_:1},8,["class","disabled"])])):n("",!0),e.value.product_mapping_id?(s(),d("div",De,[t("div",$e,[t("div",Ae,[t("div",Ne,[t("table",qe,[Me,t("tbody",Re,[(s(!0),d(C,null,L(c.value,(o,x)=>(s(),d("tr",{key:o.id,class:U(x%2===0?void 0:"bg-gray-50")},[t("td",Fe,m(x+1),1),t("td",Ee,m(o.channel_code),1),t("td",Te,[t("div",Qe,[o.product&&o.product.thumbnail?(s(),d("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:o.product.thumbnail.full_url,alt:""},null,8,ze)):n("",!0)])]),t("td",Je,[o.product.code?(s(),d("span",Ke,m(o.product.code),1)):n("",!0),o.product.name?(s(),d("span",Le,m(o.product.name),1)):n("",!0)]),t("td",Ze,[r(f,{modelValue:o.delivery_platform_amount,"onUpdate:modelValue":h=>o.delivery_platform_amount=h,error:e.value.errors["productMappingItems."+x+".delivery_platform_amount"],placeholderStr:"Platform Price"},null,8,["modelValue","onUpdate:modelValue","error"])]),t("td",Ge,[r(v,{modelValue:o.delivery_platform_sub_category_json,"onUpdate:modelValue":h=>o.delivery_platform_sub_category_json=h,options:g.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue","options"]),e.value.errors["productMappingItems."+x+".delivery_platform_sub_category_json"]?(s(),d("div",He,m(e.value.errors["productMappingItems."+x+".delivery_platform_sub_category_json"]),1)):n("",!0)]),t("td",We,[r(b,{class:"bg-red-400 hover:bg-red-500 text-white",onClick:h=>F(o)},{default:i(()=>[r(_(I),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])],2))),128)),c.value.length?n("",!0):(s(),d("tr",Xe,Ie))])])])])])])):n("",!0)]),t("div",et,[t("div",tt,[r(_(Z),{href:"/delivery-product-mappings"},{default:i(()=>[r(b,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:i(()=>[r(_(X),{class:"w-4 h-4"}),ot]),_:1})]),_:1}),_(D).includes("update vends")?(s(),G(b,{key:0,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:i(()=>[r(_(Y),{class:"w-4 h-4"}),lt]),_:1})):n("",!0)])])],40,se)])])])])]),_:1})],64))}};export{gt as default};
