import{_ as Y}from"./Authenticated.17d315a8.js";import{_ as k}from"./Button.8b8f6598.js";import q from"./Form.1e0f46f5.js";import{_ as H}from"./Paginator.d9d0c574.js";import{_ as J}from"./SearchInput.ea2ae143.js";import{_ as v}from"./MultiSelect.44c659be.js";import{_ as f,a as c}from"./TableData.26473768.js";import{_ as C}from"./TableHeadSort.b8f99802.js";import{g as m,h as Q,f as x,a as t,u as y,w as a,F as P,o as g,Z as W,b as l,i as A,d as r,t as i,k as N,l as _,c as U,O as G,n as X}from"./app.89589599.js";import{r as ee}from"./PlusIcon.84ef8a46.js";import{r as te}from"./MagnifyingGlassIcon.4ffd898a.js";import{r as le}from"./BackspaceIcon.95000b32.js";import{r as se}from"./PencilSquareIcon.ea2751e8.js";import"./keyboard.4357f74d.js";import"./use-resolve-button-type.8605431f.js";import"./RectangleStackIcon.7d7813c2.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.e9b94066.js";const ae=l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Customers ",-1),oe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},ne={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-3 px-3 md:px-3 py-3"},re={class:"flex justify-end"},de=l("span",null," Create ",-1),ie={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},ue=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),me=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category Group ",-1),ce=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Active? ",-1),ge=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Zone ",-1),pe=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Price Template ",-1),fe=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Tags ",-1),ve=l("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is From CMS ",-1),xe={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ye={class:"mt-3"},_e={class:"flex space-x-1"},he=l("span",null," Search ",-1),be=l("span",null," Reset ",-1),ke={class:"flex flex-col space-y-2"},Ce={class:"text-sm text-gray-700 leading-5 flex space-x-1"},Ve=l("span",null,"Showing",-1),Le={class:"font-medium"},Be=l("span",null,"to",-1),we={class:"font-medium"},Pe=l("span",null,"of",-1),Se={class:"font-medium"},Oe=l("span",null,"results",-1),Ie={class:"mt-6 flex flex-col"},$e={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Ke={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},je={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Te={class:"bg-gray-100"},Ae={class:"divide-x divide-gray-200"},Ne={class:"bg-white"},Ue=["href"],Ge={key:0},ze=l("br",null,null,-1),Fe={key:0,class:"inline-flex justify-center items-center rounded px-1 py-0.5 text-[10px] font-small border min-w-full bg-green-200"},Me={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800"},De={class:"flex justify-center space-x-1"},Ze=l("span",null," Edit ",-1),Ee={key:0},Re=l("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),Ye=[Re],ct={__name:"Index",props:{customers:Object,categories:Object,categoryGroups:Object,priceTemplates:Object,profiles:Object,statuses:Object,tags:Object,users:Object,zones:Object},setup(d){const p=d,s=m({customer:"",name:"",status:"",sortKey:"",sortBy:!0,numberPerPage:100}),V=m(!1),h=m([]),z=m(),S=m([]),O=m([]),L=m([]),F=m([]),I=m([]),$=m([]),M=m([]),K=m([]),D=m(""),B=m([]);Q(()=>{h.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],B.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],s.value.numberPerPage=B.value[0],S.value=p.categories.data.map(n=>({id:n.id,name:n.name})),O.value=p.categoryGroups.data.map(n=>({id:n.id,name:n.name})),L.value=p.priceTemplates.data.map(n=>({id:n.id,name:n.name})),F.value=p.profiles.data.map(n=>({id:n.id,name:n.name})),I.value=p.statuses.map(n=>({id:n.id,name:n.name})),M.value=p.users.data.map(n=>({id:n.id,name:n.name})),K.value=p.zones.data.map(n=>({id:n.id,name:n.name})),L.value=p.priceTemplates.data.map(n=>({id:n.id,name:n.name})),$.value=p.tags.data.map(n=>({id:n.id,name:n.name})),s.value.status=I.value[3],s.value.is_cms=h.value[0]});function w(){G.get("/customers",{...s.value,is_cms:s.value.is_cms.id,status:s.value.status.id,numberPerPage:s.value.numberPerPage.id},{preserveState:!0,replace:!0})}function Z(){G.get("/customers")}function b(n){s.value.sortKey=n,s.value.sortBy=!s.value.sortBy,w()}function E(){V.value=!1}return(n,o)=>(g(),x(P,null,[t(y(W),{title:"Customers"}),t(Y,null,{header:a(()=>[ae]),default:a(()=>{var j,T;return[l("div",oe,[l("div",ne,[l("div",re,[t(y(A),{href:"/customers/create"},{default:a(()=>[t(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-5 py-3 md:px-4 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:a(()=>[t(y(ee),{class:"h-4 w-4","aria-hidden":"true"}),de]),_:1})]),_:1})]),l("div",ie,[t(J,{placeholderStr:"Customer",modelValue:s.value.customer,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.customer=e)},{default:a(()=>[r(" Customer ")]),_:1},8,["modelValue"]),l("div",null,[ue,t(v,{modelValue:s.value.categories,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.categories=e),options:S.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[me,t(v,{modelValue:s.value.categoryGroups,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value.categoryGroups=e),options:O.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ce,t(v,{modelValue:s.value.is_active,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.is_active=e),options:h.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ge,t(v,{modelValue:s.value.zone_id,"onUpdate:modelValue":o[4]||(o[4]=e=>s.value.zone_id=e),options:K.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[pe,t(v,{modelValue:s.value.price_template_id,"onUpdate:modelValue":o[5]||(o[5]=e=>s.value.price_template_id=e),options:L.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[fe,t(v,{modelValue:s.value.tags,"onUpdate:modelValue":o[6]||(o[6]=e=>s.value.tags=e),options:$.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),l("div",null,[ve,t(v,{modelValue:s.value.is_cms,"onUpdate:modelValue":o[7]||(o[7]=e=>s.value.is_cms=e),options:h.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),l("div",xe,[l("div",ye,[l("div",_e,[t(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[8]||(o[8]=e=>w())},{default:a(()=>[t(y(te),{class:"h-4 w-4","aria-hidden":"true"}),he]),_:1}),t(k,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:o[9]||(o[9]=e=>Z())},{default:a(()=>[t(y(le),{class:"h-4 w-4","aria-hidden":"true"}),be]),_:1})])]),l("div",ke,[l("p",Ce,[Ve,l("span",Le,i((j=d.customers.meta.from)!=null?j:0),1),Be,l("span",we,i((T=d.customers.meta.to)!=null?T:0),1),Pe,l("span",Se,i(d.customers.meta.total),1),Oe]),t(v,{modelValue:s.value.numberPerPage,"onUpdate:modelValue":o[10]||(o[10]=e=>s.value.numberPerPage=e),options:B.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:w},null,8,["modelValue","options"])])])]),l("div",Ie,[l("div",$e,[l("div",Ke,[l("table",je,[l("thead",Te,[l("tr",Ae,[t(f,null,{default:a(()=>[r(" # ")]),_:1}),t(f,null,{default:a(()=>[r(" Vend ID ")]),_:1}),t(C,{modelName:"name",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[11]||(o[11]=e=>b("name"))},{default:a(()=>[r(" Customer ")]),_:1},8,["sortKey","sortBy"]),t(f,null,{default:a(()=>[r(" Label ")]),_:1}),t(C,{modelName:"category_id",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[12]||(o[12]=e=>b("category_id"))},{default:a(()=>[r(" Category ")]),_:1},8,["sortKey","sortBy"]),t(C,{modelName:"category_group",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[13]||(o[13]=e=>b("category_group"))},{default:a(()=>[r(" Group ")]),_:1},8,["sortKey","sortBy"]),t(f,null,{default:a(()=>[r(" Del Address ")]),_:1}),t(f,null,{default:a(()=>[r(" Del Postcode ")]),_:1}),t(f,null,{default:a(()=>[r(" Tags ")]),_:1}),t(f,null,{default:a(()=>[r(" Zone ")]),_:1}),t(f,null,{default:a(()=>[r(" Status ")]),_:1}),t(C,{modelName:"created_at",sortKey:s.value.sortKey,sortBy:s.value.sortBy,onSortTable:o[14]||(o[14]=e=>b("created_at"))},{default:a(()=>[r(" Created At ")]),_:1},8,["sortKey","sortBy"]),t(f,null,{default:a(()=>[r(" Action ")]),_:1})])]),l("tbody",Ne,[(g(!0),x(P,null,N(d.customers.data,(e,u)=>(g(),x("tr",{key:e.id,class:"divide-x divide-gray-200"},[t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(d.customers.meta.from+u),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.vend?e.vend.code:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-left"},{default:a(()=>[l("a",{class:X([e.person_id?"text-blue-700":"text-gray-800"]),target:"_blank",href:"//admin.happyice.com.sg/person/"+e.person_id+"/edit"},[e.person_id?(g(),x("span",Ge,[r(i(e.virtual_customer_code)+" ("+i(e.virtual_customer_prefix)+") ",1),ze])):_("",!0),r(" "+i(e.name),1)],10,Ue)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[e.person_id?(g(),x("div",Fe," From CMS ")):_("",!0)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.category?e.category.name:""),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.category&&e.category.categoryGroup?e.category.categoryGroup.name:""),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-left"},{default:a(()=>[r(i(e.deliveryAddress?e.deliveryAddress.full_address:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.deliveryAddress?e.deliveryAddress.postcode:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-left"},{default:a(()=>[(g(!0),x(P,null,N(e.tags,R=>(g(),x("span",Me,i(R.name),1))),256))]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.zone?e.zone.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.status?e.status.name:""),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[r(i(e.created_at),1)]),_:2},1032,["currentIndex","totalLength"]),t(c,{currentIndex:u,totalLength:d.customers.length,inputClass:"text-center"},{default:a(()=>[l("div",De,[t(y(A),{href:"/customers/"+e.id+"/edit"},{default:a(()=>[t(k,{type:"button",class:"bg-gray-300 hover:bg-gray-400 px-2 py-1 text-xs text-gray-800 flex space-x-1"},{default:a(()=>[t(y(se),{class:"w-4 h-4"}),Ze]),_:1})]),_:2},1032,["href"])])]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.customers.data.length?_("",!0):(g(),x("tr",Ee,Ye))])]),d.customers.data.length?(g(),U(H,{key:0,links:d.customers.links,meta:d.customers.meta},null,8,["links","meta"])):_("",!0)])])])]),V.value?(g(),U(q,{key:0,customer:z.value,type:D.value,showModal:V.value,onModalClose:E},null,8,["customer","type","showModal"])):_("",!0)]}),_:1})],64))}};export{ct as default};
