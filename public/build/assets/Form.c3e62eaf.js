import{g as x,T as v,h as S,c as w,a as l,w as r,p as B,o as c,b as o,f as m,l as _,t as p,d,u as g,e as C}from"./app.3ad8791f.js";import{_ as h}from"./Button.6c45cad2.js";import{_ as n}from"./FormInput.7ea31a7c.js";import{_ as $}from"./Modal.c477c58f.js";import{_ as f}from"./MultiSelect.bd9a00b6.js";import{_ as j}from"./SearchAddressInput.7e43e0b2.js";import{r as E}from"./ArrowUturnLeftIcon.87448ea6.js";import{r as P}from"./CheckCircleIcon.76cf9c17.js";import"./keyboard.1a0e7cef.js";import"./disposables.ebd3a39b.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.d6279820.js";import"./combobox.e200261a.js";import"./use-resolve-button-type.8d2e07aa.js";import"./MagnifyingGlassCircleIcon.826eac7b.js";const T={class:"flex flex-col md:flex-row space-x-2"},A={key:0,class:"text-gray-600"},L={key:1},O={key:2,class:"text-gray-600"},D={class:"grid grid-cols-1 gap-y-3 gap-x-3 sm:grid-cols-6"},M={class:"sm:col-span-4"},q={class:"sm:col-span-2"},I={class:"sm:col-span-3"},F={class:"sm:col-span-3"},G=o("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Base Currency ",-1),K={key:0,class:"text-sm text-red-600"},R=o("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[o("div",{class:"relative"},[o("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[o("div",{class:"w-full border-t border-gray-300"})]),o("div",{class:"relative flex justify-center"},[o("span",{class:"px-4 bg-white text-lg font-medium text-gray-900"}," Contact ")])])],-1),z={class:"sm:col-span-3"},H={class:"sm:col-span-3"},J={class:"sm:col-span-2"},Q=o("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Phone Code ",-1),W={key:0,class:"text-sm text-red-600"},X={class:"sm:col-span-4"},Y=o("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[o("div",{class:"relative"},[o("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[o("div",{class:"w-full border-t border-gray-300"})]),o("div",{class:"relative flex justify-center"},[o("span",{class:"px-3 bg-white text-lg font-medium text-gray-900"}," Address ")])])],-1),Z={class:"sm:col-span-6"},ee={class:"sm:col-span-3"},oe={class:"sm:col-span-3"},te={class:"sm:col-span-3"},se={class:"sm:col-span-3"},ae={class:"sm:col-span-3"},le=o("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Country ",-1),re={key:0,class:"text-sm text-red-600"},de={class:"sm:col-span-3 hidden"},ne={class:"sm:col-span-3 hidden"},ue={class:"sm:col-span-6"},ie={class:"flex space-x-1 mt-5 justify-end"},ce=o("span",null," Back ",-1),me=o("span",null," Save ",-1),we={__name:"Form",props:{profile:Object,countries:Object,type:String,showModal:Boolean},emits:["modalClose"],setup(y,{emit:U}){const u=y,b=U,e=x(v(V())),i=x([]);S(()=>{i.value=u.countries.data,e.value=u.profile?v(u.profile):v(V()),u.type==="create"&&(e.value.base_currency_id=e.value.base_currency_id?e.value.base_currency_id:i.value[0],e.value.address.country_id=e.value.address.country_id?e.value.address.country_id:i.value[0],e.value.contact.phone_country_id=e.value.contact.phone_country_id?e.value.contact.phone_country_id:i.value[0])});function V(){return{alias:"",name:"",uen:"",base_currency_id:"",address:{block_num:"",building:"",country_id:"",latitude:"",longitude:"",postcode:"",street_name:"",unit_num:""},contact:{name:"",email:"",phone_country_id:"",phone_num:""}}}function k(a){e.value.address={block_num:a.BLK_NO,building:a.BUILDING,country_id:i.value[0],latitude:a.LATITUDE,longitude:a.LONGTITUDE,postcode:a.POSTAL,street_name:a.ROAD_NAME,unit_num:""}}function N(){e.value.clearErrors(),u.type==="create"&&e.value.transform(a=>({...a,base_currency_id:a.base_currency_id.id,address:{...a.address,country_id:a.address.country_id.id},contact:{...a.contact,phone_country_id:a.contact.phone_country_id.id}})).post("/profiles/create",{onSuccess:()=>{b("modalClose")},preserveState:!0,replace:!0}),u.type==="update"&&e.value.transform(a=>({...a,base_currency_id:a.base_currency_id.id,address:{...a.address,country_id:a.address.country_id.id},contact:{...a.contact,phone_country_id:a.contact.phone_country_id.id}})).post("/profiles/"+e.value.id+"/update",{onSuccess:()=>{b("modalClose")},preserveState:!0,replace:!0})}return(a,t)=>(c(),w(B,{to:"body"},[l($,{open:y.showModal,onModalClose:t[17]||(t[17]=s=>a.$emit("modalClose"))},{header:r(()=>[o("div",T,[u.profile?(c(),m("span",A," Editing ")):_("",!0),u.profile?(c(),m("span",L,p(u.profile.name),1)):(c(),m("span",O," Create New Profile "))])]),default:r(()=>[o("form",{onSubmit:C(N,["prevent"]),id:"submit"},[o("div",D,[o("div",M,[l(n,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.value.name=s),error:e.value.errors.name,required:"true"},{default:r(()=>[d(" Name ")]),_:1},8,["modelValue","error"])]),o("div",q,[l(n,{modelValue:e.value.alias,"onUpdate:modelValue":t[1]||(t[1]=s=>e.value.alias=s),error:e.value.errors.alias},{default:r(()=>[d(" Alias ")]),_:1},8,["modelValue","error"])]),o("div",I,[l(n,{modelValue:e.value.uen,"onUpdate:modelValue":t[2]||(t[2]=s=>e.value.uen=s),error:e.value.errors.uen},{default:r(()=>[d(" UEN ")]),_:1},8,["modelValue","error"])]),o("div",F,[G,l(f,{modelValue:e.value.base_currency_id,"onUpdate:modelValue":t[3]||(t[3]=s=>e.value.base_currency_id=s),options:i.value,trackBy:"id",valueProp:"id",label:"currency_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors.base_currency_id?(c(),m("div",K,p(e.value.errors.base_currency_id),1)):_("",!0)]),R,o("div",z,[l(n,{modelValue:e.value.contact.name,"onUpdate:modelValue":t[4]||(t[4]=s=>e.value.contact.name=s),error:e.value.errors["contact.name"]},{default:r(()=>[d(" Name ")]),_:1},8,["modelValue","error"])]),o("div",H,[l(n,{modelValue:e.value.contact.email,"onUpdate:modelValue":t[5]||(t[5]=s=>e.value.contact.email=s),error:e.value.errors["contact.email"]},{default:r(()=>[d(" Email ")]),_:1},8,["modelValue","error"])]),o("div",J,[Q,l(f,{modelValue:e.value.contact.phone_country_id,"onUpdate:modelValue":t[6]||(t[6]=s=>e.value.contact.phone_country_id=s),options:i.value,trackBy:"id",valueProp:"id",label:"phone_code",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors["contact.phone_country_id"]?(c(),m("div",W,p(e.value.errors["contact.phone_country_id"]),1)):_("",!0)]),o("div",X,[l(n,{modelValue:e.value.contact.phone_num,"onUpdate:modelValue":t[7]||(t[7]=s=>e.value.contact.phone_num=s),required:"true",error:e.value.errors["contact.phone_num"]},{default:r(()=>[d(" Phone Number ")]),_:1},8,["modelValue","error"])]),Y,o("div",Z,[l(j,{modelValue:e.value.address.postcode,"onUpdate:modelValue":t[8]||(t[8]=s=>e.value.address.postcode=s),onSelected:k,required:"true",error:e.value.errors["address.postcode"]},{default:r(()=>[d(" Postcode ")]),_:1},8,["modelValue","error"])]),o("div",ee,[l(n,{modelValue:e.value.address.unit_num,"onUpdate:modelValue":t[9]||(t[9]=s=>e.value.address.unit_num=s),required:"true",error:e.value.errors["address.unit_num"]},{default:r(()=>[d(" Unit Num ")]),_:1},8,["modelValue","error"])]),o("div",oe,[l(n,{modelValue:e.value.address.block_num,"onUpdate:modelValue":t[10]||(t[10]=s=>e.value.address.block_num=s),error:e.value.errors["address.block_num"]},{default:r(()=>[d(" Block Num ")]),_:1},8,["modelValue","error"])]),o("div",te,[l(n,{modelValue:e.value.address.building,"onUpdate:modelValue":t[11]||(t[11]=s=>e.value.address.building=s),error:e.value.errors["address.building"]},{default:r(()=>[d(" Building Name ")]),_:1},8,["modelValue","error"])]),o("div",se,[l(n,{modelValue:e.value.address.street_name,"onUpdate:modelValue":t[12]||(t[12]=s=>e.value.address.street_name=s),required:"true",error:e.value.errors["address.street_name"]},{default:r(()=>[d(" Street Name ")]),_:1},8,["modelValue","error"])]),o("div",ae,[le,l(f,{modelValue:e.value.address.country_id,"onUpdate:modelValue":t[13]||(t[13]=s=>e.value.address.country_id=s),options:i.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),e.value.errors["address.country_id"]?(c(),m("div",re,p(e.value.errors["address.country_id"]),1)):_("",!0)]),o("div",de,[l(n,{modelValue:e.value.address.latitude,"onUpdate:modelValue":t[14]||(t[14]=s=>e.value.address.latitude=s)},{default:r(()=>[d(" Latitude ")]),_:1},8,["modelValue"])]),o("div",ne,[l(n,{modelValue:e.value.address.longitude,"onUpdate:modelValue":t[15]||(t[15]=s=>e.value.address.longitude=s)},{default:r(()=>[d(" Longitude ")]),_:1},8,["modelValue"])])]),o("div",ue,[o("div",ie,[l(h,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1",onClick:t[16]||(t[16]=s=>a.$emit("modalClose")),form:"submit"},{default:r(()=>[l(g(E),{class:"w-4 h-4"}),ce]),_:1}),l(h,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:r(()=>[l(g(P),{class:"w-4 h-4"}),me]),_:1})])])],32)]),_:1},8,["open"])]))}};export{we as default};
