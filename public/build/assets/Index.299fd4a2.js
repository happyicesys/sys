import{_ as D}from"./Authenticated.5e9f61a5.js";import{_ as E}from"./Button.a88aceb0.js";import{r as G,a as F,T as f,_ as b,b as H,c as _}from"./TableHeadSort.06011e7c.js";import{_ as V}from"./SearchInput.5a36827f.js";import{_ as v}from"./MultiSelect.5dae3a95.js";import{i as x,j as q,o as i,g as c,a as n,b as T,w as l,F as C,H as M,d as t,t as a,m as P,p,c as R,f as r,J as I,n as h}from"./app.9f63bf09.js";import"./open-closed.2a9f5a18.js";import"./use-resolve-button-type.526c8dce.js";import"./RectangleStackIcon.7b4ba4db.js";import"./_plugin-vue_export-helper.cdc0426e.js";const z=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Vending Machines (List) ",-1),Y={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Q={class:"-mx-4 sm:-mx-6 lg:-mx-8 bg-white rounded-md border my-5 px-3 md:px-6 py-6"},W={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},X=r(" Vend ID "),Z=r(" Serial Num "),ee=r(" Temp >> "),te=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Errors? ",-1),oe=r(" Cust ID "),ne=r(" Cust ID Name "),se=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Category ",-1),le=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Group ",-1),ae=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Is Online? ",-1),re=t("label",{for:"text",class:"block text-sm font-medium text-gray-700"}," Country ",-1),de={class:"flex flex-col space-y-3 md:flex-row md:space-y-0 justify-between mt-5"},ie={class:"mt-3"},ue={class:"flex space-x-1"},ce=t("span",null," Search ",-1),me=t("span",null," Reset ",-1),_e={class:"flex flex-col space-y-2"},ge={class:"text-sm text-gray-700 leading-5 flex space-x-1"},pe=t("span",null,"Showing",-1),fe={class:"font-medium"},he=t("span",null,"to",-1),xe={class:"font-medium"},ye=t("span",null,"of",-1),be={class:"font-medium"},ve=t("span",null,"results",-1),Ve={class:"mt-6 flex flex-col"},Be={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Ce={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},ke={class:"min-w-full border-separate",style:{"border-spacing":"0"}},Se={class:"bg-gray-100"},Je={class:"divide-x divide-gray-200"},we=r(" # "),Le=r(" ID "),Te=r(" Name "),Pe=r(" Category "),Ie=r(" Errors "),Ne=r(" Inventory Status "),je=r(" Temp "),Ke=t("br",null,null,-1),Oe=r(" (Chamber) "),$e=r(" Temp "),Ue=t("br",null,null,-1),Ee=r(" (Evaporator) "),Ae=r(" Balance Stock "),De=r(" Out of Stock SKU "),Ge=r(" Status "),Fe=r(" Serial Num "),He=r(" Postcode "),qe=r(" Firmware Ver "),Me={class:"bg-white"},Re=t("br",null,null,-1),ze=t("br",null,null,-1),Ye={class:"flex flex-col"},Qe={class:"font-bold"},We={class:"grid grid-cols-[120px_minmax(120px,_1fr)_120px]"},Xe={class:"font-semibold"},Ze={class:"text-blue-600 text-sm pl-1"},et={class:"pl-1"},tt={class:"flex flex-col items-center"},ot=["onClick"],nt={class:"mt-1"},st={class:"flex flex-col items-center"},lt=["onClick"],at={key:0},rt=t("br",null,null,-1),dt={key:0},it=t("br",null,null,-1),ut={class:"grid grid-cols-[90px_minmax(90px,_1fr)_90px] gap-1"},ct={class:"flex flex-col"},mt={class:"font-bold"},_t={key:0},gt={class:"flex flex-col"},pt=t("span",{class:"font-bold"}," Drop Sensor ",-1),ft={key:1,class:"inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full bg-green-200"},ht={class:"flex flex-col"},xt=t("span",{class:"font-bold"}," Fan Speed ",-1),yt={class:"flex flex-col"},bt=t("span",{class:"font-bold"}," Door ",-1),vt={class:"flex flex-col"},Vt=t("span",{class:"font-bold"}," Coin ",-1),Bt={key:0},Ct={key:0},kt=t("td",{colspan:"24",class:"relative whitespace-nowrap py-4 pr-4 pl-3 text-sm font-medium sm:pr-6 lg:pr-8 text-center"}," No Results Found ",-1),St=[kt],$t={__name:"Index",props:{categories:Object,categoryGroups:Object,constTempError:Number,countries:Object,vends:Object,vendChannelErrors:Object},setup(d){const B=d,o=x({code:"",serialNum:"",customer_code:"",customer_name:"",categories:[],categoryGroups:[],country_id:"",tempHigherThan:"",vend_channel_error_id:"",is_online:"",sortKey:"",sortBy:!0,numberPerPage:""}),k=x([]),S=x([]),N=x([]),j=x([]),J=x([]),w=x([]);q(()=>{k.value=[{id:"",desc:"All"},{id:"errors_only",desc:"Errors Only"},...B.vendChannelErrors.data],S.value=[{id:100,value:100},{id:200,value:200},{id:500,value:500},{id:"All",value:"All"}],o.value.vend_channel_error_id=k.value[0],o.value.numberPerPage=S.value[0],N.value=B.categories.data.map(u=>({id:u.id,name:u.name})),j.value=B.categoryGroups.data.map(u=>({id:u.id,name:u.name})),w.value=[{id:"all",value:"All"},{id:"true",value:"Yes"},{id:"false",value:"No"}],o.value.is_online=w.value[1],J.value=[{id:"0",name:"All"},...B.countries.data.map(u=>({id:u.id,name:u.name}))],o.value.country_id=J.value[1]});function L(){I.Inertia.get("/vends",{...o.value,vend_channel_error_id:o.value.vend_channel_error_id.id,categories:o.value.categories.map(u=>u.id),categoryGroups:o.value.categoryGroups.map(u=>u.id),country_id:o.value.country_id.id,is_online:o.value.is_online.id,numberPerPage:o.value.numberPerPage.id},{preserveState:!0,replace:!0})}function K(u,s){I.Inertia.get("/vends/"+u+"/temp/"+s)}function A(){I.Inertia.get("/vends")}function y(u){o.value.sortKey=u,o.value.sortBy=!o.value.sortBy,L()}return(u,s)=>(i(),c(C,null,[n(T(M),{title:"Vending Machines"}),n(D,null,{header:l(()=>[z]),default:l(()=>{var O,$;return[t("div",Y,[t("div",Q,[t("div",W,[n(V,{placeholderStr:"Code",modelValue:o.value.code,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.code=e)},{default:l(()=>[X]),_:1},8,["modelValue"]),n(V,{placeholderStr:"Serial Num",modelValue:o.value.serialNum,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.serialNum=e)},{default:l(()=>[Z]),_:1},8,["modelValue"]),n(V,{placeholderStr:"Number",modelValue:o.value.tempHigherThan,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value.tempHigherThan=e)},{default:l(()=>[ee]),_:1},8,["modelValue"]),t("div",null,[te,n(v,{modelValue:o.value.vend_channel_error_id,"onUpdate:modelValue":s[3]||(s[3]=e=>o.value.vend_channel_error_id=e),options:k.value,trackBy:"id",valueProp:"id",label:"desc",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),n(V,{placeholderStr:"Cust ID",modelValue:o.value.customer_code,"onUpdate:modelValue":s[4]||(s[4]=e=>o.value.customer_code=e)},{default:l(()=>[oe]),_:1},8,["modelValue"]),n(V,{placeholderStr:"Cust ID Name",modelValue:o.value.customer_name,"onUpdate:modelValue":s[5]||(s[5]=e=>o.value.customer_name=e)},{default:l(()=>[ne]),_:1},8,["modelValue"]),t("div",null,[se,n(v,{modelValue:o.value.categories,"onUpdate:modelValue":s[6]||(s[6]=e=>o.value.categories=e),options:N.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[le,n(v,{modelValue:o.value.categoryGroups,"onUpdate:modelValue":s[7]||(s[7]=e=>o.value.categoryGroups=e),options:j.value,trackBy:"id",valueProp:"id",label:"name",mode:"tags",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[ae,n(v,{modelValue:o.value.is_online,"onUpdate:modelValue":s[8]||(s[8]=e=>o.value.is_online=e),options:w.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])]),t("div",null,[re,n(v,{modelValue:o.value.country_id,"onUpdate:modelValue":s[9]||(s[9]=e=>o.value.country_id=e),options:J.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])]),t("div",de,[t("div",ie,[t("div",ue,[n(E,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-green-500 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-white shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[10]||(s[10]=e=>L())},{default:l(()=>[n(T(G),{class:"h-4 w-4","aria-hidden":"true"}),ce]),_:1}),n(E,{class:"inline-flex space-x-1 items-center rounded-md border border-green bg-gray-300 px-8 py-3 md:px-5 text-sm font-medium leading-4 text-gray-800 shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s[11]||(s[11]=e=>A())},{default:l(()=>[n(T(F),{class:"h-4 w-4","aria-hidden":"true"}),me]),_:1})])]),t("div",_e,[t("p",ge,[pe,t("span",fe,a((O=d.vends.meta.from)!=null?O:0),1),he,t("span",xe,a(($=d.vends.meta.to)!=null?$:0),1),ye,t("span",be,a(d.vends.meta.total),1),ve]),n(v,{modelValue:o.value.numberPerPage,"onUpdate:modelValue":s[12]||(s[12]=e=>o.value.numberPerPage=e),options:S.value,trackBy:"id",valueProp:"id",label:"value",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:L},null,8,["modelValue","options"])])])]),t("div",Ve,[t("div",Be,[t("div",Ce,[t("table",ke,[t("thead",Se,[t("tr",Je,[n(f,null,{default:l(()=>[we]),_:1}),n(b,{modelName:"code",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[13]||(s[13]=e=>y("code"))},{default:l(()=>[Le]),_:1},8,["sortKey","sortBy"]),n(f,null,{default:l(()=>[Te]),_:1}),n(f,null,{default:l(()=>[Pe]),_:1}),n(f,null,{default:l(()=>[Ie]),_:1}),n(f,null,{default:l(()=>[Ne]),_:1}),n(b,{modelName:"temp",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[14]||(s[14]=e=>y("temp"))},{default:l(()=>[je,Ke,Oe]),_:1},8,["sortKey","sortBy"]),n(b,{modelName:"parameter_json->t2",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[15]||(s[15]=e=>y("parameter_json->t2"))},{default:l(()=>[$e,Ue,Ee]),_:1},8,["sortKey","sortBy"]),n(b,{modelName:"vend_channel_totals_json->balancePercent",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[16]||(s[16]=e=>y("vend_channel_totals_json->balancePercent"))},{default:l(()=>[Ae]),_:1},8,["sortKey","sortBy"]),n(b,{modelName:"vend_channel_totals_json->outOfStockSkuPercent",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[17]||(s[17]=e=>y("vend_channel_totals_json->outOfStockSkuPercent"))},{default:l(()=>[De]),_:1},8,["sortKey","sortBy"]),n(f,null,{default:l(()=>[Ge]),_:1}),n(f,null,{default:l(()=>[Fe]),_:1}),n(b,{modelName:"latestVendBinding.customer.deliveryAddress.postcode",sortKey:o.value.sortKey,sortBy:o.value.sortBy,onSortTable:s[18]||(s[18]=e=>y("latestVendBinding.customer.deliveryAddress.postcode"))},{default:l(()=>[He]),_:1},8,["sortKey","sortBy"]),n(f,null,{default:l(()=>[qe]),_:1})])]),t("tbody",Me,[(i(!0),c(C,null,P(d.vends.data,(e,m)=>(i(),c("tr",{key:e.id,class:"divide-x divide-gray-200"},[n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(d.vends.meta.from+m),1)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.code),1)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-left"},{default:l(()=>[r(a(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.code:null)+" ",1),Re,r(" "+a(e.latestVendBinding&&e.latestVendBinding.customer?e.latestVendBinding.customer.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-left"},{default:l(()=>[r(a(e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.category?e.latestVendBinding.customer.category.name:null)+" ",1),ze,r(" "+a(e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.category&&e.latestVendBinding.customer.category.category_group?e.latestVendBinding.customer.category.category_group.name:null),1)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[(i(!0),c(C,null,P(e.vendChannelErrorLogsJson,g=>(i(),c("span",{class:h(["inline-flex items-center rounded px-2.5 py-0.5 text-xs font-medium border",[g.is_error_cleared?"bg-green-100 text-green-800":"bg-red-100 text-red-800"]])},[t("div",Ye,[t("div",null,[r(" #"+a(g.vend_channel.code)+", ",1),t("span",Qe," ("+a(g.vend_channel_error.code)+") ",1)]),t("div",null,a(g.created_at),1)])],2))),256))]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",We,[(i(!0),c(C,null,P(e.vendChannelsJson,(g,U)=>(i(),c("span",{class:h(["flex border p-0.5 justify-around",[U>0&&String(g.code)[0]!==String(e.vendChannelsJson[U-1].code)[0]?"col-start-1":""]])},[t("div",Xe," #"+a(g.code)+", ",1),t("div",Ze,a(g.capacity-g.qty)+", ",1),t("div",et,a(g.qty)+"/"+a(g.capacity),1)],2))),256))])]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",tt,[t("button",{type:"button",class:h(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.temp>-15?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600"]]),onClick:g=>K(e.id,1)},a(e.is_temp_error?"Error":e.temp),11,ot),t("span",nt,a(e.temp_updated_at),1)])]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",st,[e.parameterJson&&e.parameterJson.t2?(i(),c("button",{key:0,type:"button",class:h(["inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs tracking-wide focus:outline-none disabled:opacity-25 transition ease-in-out duration-150 text-black w-4/5 text-right justify-center",[e.temp>-15||e.parameterJson.t2==d.constTempError?"bg-red-400 active:bg-red-500 hover:bg-red-600":"bg-green-400 active:bg-green-500 hover:bg-green-600"]]),onClick:g=>K(e.id,2)},a(e.parameterJson.t2==d.constTempError?"Error":e.parameterJson.t2/10),11,lt)):p("",!0)])]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[e.vendChannelTotalsJson?(i(),c("span",at,[r(a(e.vendChannelTotalsJson.qty)+"/ "+a(e.vendChannelTotalsJson.capacity)+" ",1),rt,r(" ("+a(e.vendChannelTotalsJson.balancePercent)+"%) ",1)])):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[e.vendChannelTotalsJson?(i(),c("span",dt,[r(a(e.vendChannelTotalsJson.outOfStockSku)+"/ "+a(e.vendChannelTotalsJson.count)+" ",1),it,r(" ("+a(e.vendChannelTotalsJson.outOfStockSkuPercent)+"%) ",1)])):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[t("div",ut,[t("div",{class:h(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.is_online?"bg-green-200":"bg-red-200"]])},[t("div",ct,[t("span",mt,a(e.is_online?"Online":"Offline"),1),e.last_updated_at?(i(),c("span",_t,a(e.last_updated_at),1)):p("",!0)])],2),e.parameterJson&&e.parameterJson.Sensor?(i(),c("div",{key:0,class:h(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.Sensor==1?"bg-green-200":"bg-red-200"]])},[t("div",gt,[pt,t("span",null,a(e.parameterJson.Sensor==1?"Active":"Inactive"),1)])],2)):p("",!0),e.parameterJson&&e.parameterJson.fan?(i(),c("div",ft,[t("div",ht,[xt,t("span",null,a(e.parameterJson.fan),1)])])):p("",!0),e.parameterJson&&e.parameterJson.door?(i(),c("div",{key:2,class:h(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.door=="close"?"bg-green-200":"bg-red-200"]])},[t("div",yt,[bt,t("span",null,a(e.parameterJson.door=="open"?"Open":"Close"),1)])],2)):p("",!0),e.parameterJson&&e.parameterJson.CoinCnt?(i(),c("div",{key:3,class:h(["inline-flex justify-center items-center rounded px-1.5 py-0.5 text-xs font-medium border min-w-full",[e.parameterJson.CoinCnt>1600?"bg-green-200":"bg-red-200"]])},[t("div",vt,[Vt,t("span",null,a((e.parameterJson.CoinCnt/100).toFixed(2)),1)])],2)):p("",!0)])]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.serial_num),1)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[e.latestVendBinding&&e.latestVendBinding.customer&&e.latestVendBinding.customer.deliveryAddress?(i(),c("span",Bt,a(e.postcode),1)):p("",!0)]),_:2},1032,["currentIndex","totalLength"]),n(_,{currentIndex:m,totalLength:d.vends.length,inputClass:"text-center"},{default:l(()=>[r(a(e.firmware_ver),1)]),_:2},1032,["currentIndex","totalLength"])]))),128)),d.vends.data.length?p("",!0):(i(),c("tr",Ct,St))])])]),d.vends.data.length?(i(),R(H,{key:0,links:d.vends.links,meta:d.vends.meta},null,8,["links","meta"])):p("",!0)])])])]}),_:1})],64))}};export{$t as default};
