import{g as _,T as U,K as ye,h as fe,j as B,f as r,a as d,u as v,w as u,F as P,o,Z as xe,b as e,d as p,t as c,l as n,e as b,i as ge,n as y,k as $,c as f,O as S}from"./app.9ec8e019.js";import{_ as he}from"./Authenticated.be6ecea7.js";import{_ as x}from"./Button.9e452f3b.js";import be from"./ChannelOverview.c0313da1.js";import we from"./EditItem.59e1615b.js";import{_ as g}from"./FormInput.3c62a084.js";import{_ as C}from"./MultiSelect.3d80a316.js";import{_ as q}from"./TableHead.df510299.js";import{r as ke}from"./ArrowUturnLeftIcon.483cbcc0.js";import{r as T}from"./CheckCircleIcon.ff621870.js";import{r as Q}from"./PlusCircleIcon.5917a645.js";import{r as Ve}from"./PencilSquareIcon.5b81c55c.js";import{r as J}from"./XCircleIcon.5bfc4d45.js";import{r as W}from"./PauseCircleIcon.da13ff12.js";import{r as Se}from"./PlayCircleIcon.af842343.js";import"./open-closed.7d682849.js";import"./use-resolve-button-type.126faf88.js";import"./RectangleStackIcon.4c18c919.js";import"./Modal.0df6d0fb.js";import"./disposables.a4a93989.js";import"./BackspaceIcon.e1cb6149.js";import"./MultiSelect.vue_vue_type_style_index_1_lang.8b139955.js";const Pe={class:"font-semibold text-xl text-gray-800 leading-tight"},Ce={key:0},qe={class:"m-2 sm:mx-5 sm:my-3 px-1 sm:px-2 lg:px-3"},Oe={class:"mt-6 flex flex-col"},je={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8"},Me={class:"shadow-sm ring-1 ring-black ring-opacity-5 p-5"},Ne=["onSubmit"],Be={class:"grid grid-cols-1 gap-3 sm:grid-cols-6 pb-2"},$e={class:"sm:col-span-6"},De={class:"sm:col-span-6"},Ae=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Operator ",-1),Fe={class:"mt-1"},Ue=["value"],Te={class:"sm:col-span-6"},Qe=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Delivery Platform ",-1),Re={class:"mt-1"},Ee=["value"],Ie={class:"sm:col-span-6"},Le=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform Category ",-1),Ke={class:"mt-1"},ze=["value"],Ze={class:"sm:col-span-6"},Ge=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Refer to Product Mapping ",-1),He={class:"mt-1"},Je=["value"],We={class:"sm:col-span-3"},Xe={class:"sm:col-span-3"},Ye=e("div",{class:"sm:col-span-6"},[e("label",{for:"reserved",class:"italic text-blue-800"},' By setting "Reserved Percentage" and "Reserved Quantity", the sellable qty equivalent to whichever higher. If lower than reserved, channel becomes inactive, both default value are 0. ')],-1),et={class:"sm:col-span-6"},tt={class:"flex space-x-1 mt-5 justify-end"},lt=e("span",null," Back ",-1),st=e("span",null," Save ",-1),ot=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Delivery Platform Product(s) ")])])],-1),at={key:0},rt={key:1},nt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),dt={key:0,class:"text-sm text-red-600"},it={key:2},ut={key:3},ct=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Platform SubCategory ",-1),pt={key:4,class:"sm:col-span-1"},mt=e("span",null," Add ",-1),_t={key:5,class:"sm:col-span-6 flex flex-col mt-3"},vt={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},yt={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},ft={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},xt={class:"table-fixed min-w-full divide-y divide-gray-300"},gt=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel ID "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Thumbnail "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Product "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Status "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Platform SubCategory "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),ht={class:"bg-white"},bt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},wt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},kt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Vt={class:"flex justify-center"},St=["src"],Pt={class:"whitespace-normal py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left flex flex-col"},Ct={key:0},qt={key:1,class:"break-words"},Ot={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},jt={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},Mt={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},Nt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Bt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},$t={class:"whitespace-nowrap py-4 pr-2 text-sm text-center"},Dt=e("span",{class:"text-xs"}," Edit ",-1),At={key:0},Ft=e("td",{colspan:"7",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),Ut=[Ft],Tt=e("div",{class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"},"Bundle Sales")])])],-1),Qt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," (Create New) Type ",-1),Rt={key:7,class:"sm:col-span-6"},Et={key:8,class:"sm:col-span-3"},It={key:9,class:"sm:col-span-3"},Lt={class:"sm:col-span-6 text-blue-700 text-semibold"},Kt={key:10,class:"sm:col-span-4"},zt=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Product ",-1),Zt={key:11,class:"sm:col-span-1"},Gt={key:12,class:"sm:col-span-1"},Ht=e("span",null," Add ",-1),Jt={key:13,class:"sm:col-span-6 text-red-400 text-sm font-bold"},Wt={key:14,class:"sm:col-span-6 flex flex-col mt-3"},Xt={role:"list",class:"divide-y divide-gray-100 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl"},Yt={class:"flex justify-between gap-x-6 px-4 py-5 hover:bg-gray-50 sm:px-6"},el={class:"flex min-w-0 gap-x-4"},tl={class:"text-sm pt-3"},ll=["src"],sl={class:"min-w-0 flex-auto"},ol={class:"text-sm font-semibold leading-6 text-gray-900"},al=e("span",{class:"absolute inset-x-0 -top-px bottom-0"},null,-1),rl={class:"mt-1 flex text-sm leading-5 text-gray-500"},nl={class:"flex items-center gap-x-3"},dl={key:0,class:"flex justify-between gap-x-6 px-4 py-5 hover:bg-gray-50 sm:px-6"},il={class:"flex min-w-0 gap-x-4"},ul={class:"text-sm pt-3 font-bold"},cl={key:15,class:"sm:col-span-1"},pl=e("span",null," Save Bundle ",-1),ml={key:16,class:"sm:col-span-6 flex flex-col mt-2 mx-5 mb-3"},_l={class:"mt-6 flex flex-col"},vl={class:"-my-2 -mx-4 sm:-mx-6 lg:-mx-8 px-3"},yl={class:"shadow-sm ring-1 ring-black ring-opacity-5 overflow-scroll"},fl={class:"min-w-full border-separate",style:{"border-spacing":"0"}},xl={class:"bg-gray-100"},gl={class:"divide-x divide-gray-200"},hl=e("tbody",{class:"bg-white"},null,-1),bl={key:17,class:"sm:col-span-6 pt-2 pb-1 md:pt-5 md:pb-3"},wl=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-3 bg-white text-lg font-medium text-gray-900 rounded"}," Vending Machine Binding ")])],-1),kl=[wl],Vl={key:18,class:"sm:col-span-3"},Sl=e("label",{for:"text",class:"flex justify-start text-sm font-medium text-gray-700"}," Vending Machine ",-1),Pl={key:0,class:"text-sm text-red-600"},Cl={key:19,class:"sm:col-span-2"},ql={key:20,class:"sm:col-span-1"},Ol=e("span",null," Add ",-1),jl={key:21,class:"sm:col-span-6 flex flex-col mt-3"},Ml={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-3 lg:-mx-5"},Nl={class:"inline-block min-w-full py-2 align-middle md:px-4 lg:px-6"},Bl={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},$l={class:"min-w-full divide-y divide-gray-300"},Dl=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," # "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"},[p(" Vend ID "),e("br"),p(" (Platform Ref ID) ")]),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Vend Name "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Channel Status "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," VM Status "),e("th",{scope:"col",class:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900"}," Action ")])],-1),Al={class:"bg-white"},Fl={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 text-center"},Ul={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Tl=e("br",null,null,-1),Ql={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-left"},Rl={key:0},El=e("br",null,null,-1),Il={key:1},Ll={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Kl=["onClick"],zl={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-semibold text-gray-900 sm:pl-6 text-center"},Zl={key:0,class:"inline-flex items-center rounded-md bg-green-300 px-1.5 py-0.5 text-xs font-medium text-green-800 ring-1 ring-inset ring-indigo-700/10"},Gl={key:1,class:"inline-flex items-center rounded-md bg-red-200 px-1.5 py-0.5 text-xs font-medium text-red-700 ring-1 ring-inset ring-indigo-700/10"},Hl={class:"whitespace-nowrap py-2 text-xs text-center p-3"},Jl={class:"flex flex-col space-y-1"},Wl={key:2,class:"text-xs"},Xl={key:3,class:"text-xs"},Yl=e("span",null,"Unbind VM",-1),es={key:0},ts=e("td",{colspan:"6",class:"whitespace-nowrap py-4 text-sm font-medium text-gray-600 text-center"}," No Records Found ",-1),ls=[ts],Ss={__name:"Edit",props:{bundleSalesOptions:[Array,Object],deliveryProductMapping:Object,productMappingItems:Object,productOptions:Object,type:String,unbindedVendOptions:[Array,Object]},setup(R){const i=R,V=_(""),m=_([]),E=_([]),O=_([]),I=_([]),D=_([]),t=_(U(H()));_(!1);const k=_(!0),X=_([]),Y=_([]),j=_(!1),M=_(!1),ee=_([]),A=_(""),te=ye().props.auth.roles,L=_(),F=_([]);fe(()=>{i.type=="create"?A.value="Create New":A.value="Edit",E.value=[...i.bundleSalesOptions.map(s=>({id:s.id,name:s.name,is_same:s.is_same,type:s.type,phrase_1:s.phrase_1,phrase_2:s.phrase_2,phrase_3:s.phrase_3}))],O.value=i.deliveryProductMapping.data,D.value=i.deliveryProductMapping.data.deliveryProductMappingItems,D.value=i.deliveryProductMapping.data.deliveryProductMappingItems.map(s=>({id:s.id,full_name:"(#"+s.channel_code+") "+s.product.code+" "+s.product.name,img_url:s.product.thumbnail.full_url,amount:s.amount})),t.value=O.value?U(O.value):U(H()),F.value=[...i.unbindedVendOptions.data.map(s=>({id:s.id,full_name:s.full_name}))]});const K=B(function(){return t.value.promo_label&&t.value.promo_value&&t.value.total_qty?t.value.promo_label.phrase_1+t.value.total_qty+t.value.promo_label.phrase_2+t.value.promo_value+t.value.promo_label.phrase_3:""}),z=B(function(){if(!m.value&&t.value.promo_label&&t.value.promo_value)return 0;let s=0;switch(s=Number(parseFloat(Object.values(m.value).reduce((a,l)=>Number(a)+Number(l.delivery_product_mapping_item_id.amount)*Number(l.qty),0))),t.value.promo_label.type){case"absolute":s=Number(t.value.promo_value);break;case"value_off":s=Number(parseFloat(s-t.value.promo_value));break;case"percentage":s=Number(parseFloat(s-s*(t.value.promo_value/100)));break}return s}),Z=B(function(){let s=!0;return V.value="",(!t.value.promo_label||!t.value.qty||!t.value.promo_value||!t.value.delivery_product_mapping_item_id)&&(s=!1),(t.value.qty==0||t.value.total_qty==0)&&(s=!1),k.value&&m.value.length>0&&(s=!1),!k.value&&m.value.length>0&&m.value.filter(a=>t.value.delivery_product_mapping_item_id.id==a.delivery_product_mapping_item_id.id).length>0&&t.value.qty&&(s=!1,V.value="Product already added"),Number(parseFloat(Object.values(m.value).reduce((a,l)=>Number(a)+Number(l.qty),0))+Number(parseFloat(t.value.qty)))>Number(parseFloat(t.value.total_qty))&&(s=!1,V.value="Product Qty cannot more than Total Qty"),m.value.length==0&&t.value.qty>t.value.total_qty&&(s=!1,V.value="Product Qty cannot more than Total Qty"),s}),G=B(function(){let s=!1;return Number(parseFloat(Object.values(m.value).reduce((a,l)=>Number(a)+Number(l.qty),0)))==Number(parseFloat(t.value.total_qty))&&m.value.length>0&&(s=!0),s});function H(){return{id:"",bundle_name:"",category_json:"",delivery_platform_operator_id:"",name:"",operator_id:"",platform_ref_id:"",product_mapping_id:"",promo_label:"",promo_type:"",promo_value:"",qty:"",reserved_percent:0,reserved_qty:0,sub_category_json:"",total_amount:"",total_qty:""}}function le(){t.value.delivery_product_mapping_item_id&&(m.value.push({delivery_product_mapping_item_id:t.value.delivery_product_mapping_item_id,qty:k.value?t.value.total_qty:t.value.qty}),t.value.qty="")}function se(){X.value.map(function(s){return s.channel_code}).indexOf(t.value.channel_code)<0&&S.post("/delivery-product-mapping-items/delivery-product-mapping/"+t.value.id+"/store",{...t.value,product_id:t.value.product_id?t.value.product_id.id:null},{preserveState:!1,preserveScroll:!0,replace:!0})}function oe(s){S.post("/delivery-product-mappings/"+t.value.id+"/bind-vend",{vend_id:s,platform_ref_id:t.value.platform_ref_id},{preserveState:!1,preserveScroll:!0,replace:!0})}function ae(){t.value.promo_label.is_same==!0?k.value=!0:k.value=!1}function re(s){L.value=s,j.value=!0}function ne(){j.value=!1}function de(){k.value&&m.value.length==0&&(t.value.qty=t.value.total_qty)}function ie(s){I.value=s,M.value=!0}function ue(){M.value=!1}function ce(s){m.value.splice(s,1)}function pe(){S.post("/delivery-product-mappings/"+t.value.id+"/save-bundle-sales",{bundle_label:t.value.promo_label.id,bundle_name:t.value.bundle_name,bundle_amount:z.value,bundle_type:t.value.promo_label.type,bundle_value:t.value.promo_value,bundle_desc:K.value,bundleSalesItems:m.value&&m.value.length>0?m.value.map(s=>({id:s.delivery_product_mapping_item_id.id,qty:s.qty})):[],total_qty:t.value.total_qty},{preserveState:!1,preserveScroll:!0,replace:!0})}function me(){t.value.clearErrors(),t.value.transform(s=>({name:s.name,reserved_percent:s.reserved_percent,reserved_qty:s.reserved_qty})).post("/delivery-product-mappings/"+t.value.id+"/update",{preserveState:!0,replace:!0})}function _e(s){let a=s.is_active?"Are you sure to pause this vending machine?":"Are you sure to resume this vending machine?";!confirm(a)||S.post("/delivery-product-mappings/vends/"+s.id+"/toggle-pause-vend",{},{preserveState:!1,preserveScroll:!0,replace:!0})}function ve(s){!confirm("Are you sure to delete this entry?")||S.delete("/delivery-product-mappings/unbind/"+s,{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{S.reload({only:["unbindedVendOptions"]}),F.value=i.unbindedVendOptions?i.unbindedVendOptions.data:[]}})}return(s,a)=>(o(),r(P,null,[d(v(xe),{title:"Delivery Product Mapping"}),d(he,null,{header:u(()=>[e("h2",Pe,[p(c(A.value)+" Delivery Product Mapping ",1),R.type=="update"?(o(),r("span",Ce,c(O.value.name),1)):n("",!0)])]),default:u(()=>[e("div",qe,[e("div",Oe,[e("div",je,[e("div",Me,[e("form",{onSubmit:b(me,["prevent"]),id:"submit"},[e("div",Be,[e("div",$e,[d(g,{modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value.name=l),error:t.value.errors.name},{default:u(()=>[p(" Name ")]),_:1},8,["modelValue","error"])]),e("div",De,[Ae,e("div",Fe,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:i.deliveryProductMapping.data.operator.full_name,disabled:""},null,8,Ue)])]),e("div",Te,[Qe,e("div",Re,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:i.deliveryProductMapping.data.deliveryPlatformOperator.deliveryPlatform.name+" ("+i.deliveryProductMapping.data.deliveryPlatformOperator.type+")",disabled:""},null,8,Ee)])]),e("div",Ie,[Le,e("div",Ke,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:i.deliveryProductMapping.data.category_json.id+" - "+i.deliveryProductMapping.data.category_json.name,disabled:""},null,8,ze)])]),e("div",Ze,[Ge,e("div",He,[e("input",{type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full text-sm border-gray-300 rounded-md bg-gray-200 hover:cursor-not-allowed",value:i.deliveryProductMapping.data.productMapping.name,disabled:""},null,8,Je)])]),e("div",We,[d(g,{modelValue:t.value.reserved_percent,"onUpdate:modelValue":a[1]||(a[1]=l=>t.value.reserved_percent=l),error:t.value.errors.reserved_percent},{default:u(()=>[p(" Reserved Percentage (%) ")]),_:1},8,["modelValue","error"])]),e("div",Xe,[d(g,{modelValue:t.value.reserved_qty,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.reserved_qty=l),error:t.value.errors.reserved_qty},{default:u(()=>[p(" Reserved Quantity ")]),_:1},8,["modelValue","error"])]),Ye,e("div",et,[e("div",tt,[d(v(ge),{href:"/delivery-product-mappings"},{default:u(()=>[d(x,{class:"bg-gray-300 hover:bg-gray-400 text-gray-700 flex space-x-1"},{default:u(()=>[d(v(ke),{class:"w-4 h-4"}),lt]),_:1})]),_:1}),d(x,{type:"submit",class:"bg-green-500 hover:bg-green-600 text-white flex space-x-1"},{default:u(()=>[d(v(T),{class:"w-4 h-4"}),st]),_:1})])]),ot,t.value.id?(o(),r("div",at,[d(g,{modelValue:t.value.channel_code,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.channel_code=l),error:t.value.errors.channel_code,placeholderStr:"Channel ID"},{default:u(()=>[p(" Channel ID ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.id?(o(),r("div",rt,[nt,d(C,{modelValue:t.value.product_id,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.product_id=l),options:Y.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.product_id?(o(),r("div",dt,c(t.value.errors.product_id),1)):n("",!0)])):n("",!0),t.value.id?(o(),r("div",it,[d(g,{modelValue:t.value.amount,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.amount=l),error:t.value.errors.amount,placeholderStr:"Platform Price"},{default:u(()=>[p(" Price ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.id?(o(),r("div",ut,[ct,d(C,{modelValue:t.value.sub_category_json,"onUpdate:modelValue":a[6]||(a[6]=l=>t.value.sub_category_json=l),options:ee.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"])])):n("",!0),t.value.product_mapping_id?(o(),r("div",pt,[d(x,{type:"button",onClick:a[7]||(a[7]=b(l=>se(),["prevent"])),class:y(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[!t.value.channel_code||!t.value.product_id?"opacity-50 cursor-not-allowed":""]]),disabled:!t.value.channel_code||!t.value.product_id},{default:u(()=>[d(v(Q),{class:"w-4 h-4"}),mt]),_:1},8,["class","disabled"])])):n("",!0),t.value.product_mapping_id?(o(),r("div",_t,[e("div",vt,[e("div",yt,[e("div",ft,[e("table",xt,[gt,e("tbody",ht,[(o(!0),r(P,null,$(i.deliveryProductMapping.data.deliveryProductMappingItems,(l,w)=>(o(),r("tr",{key:l.id,class:y(w%2===0?void 0:"bg-gray-50")},[e("td",bt,c(w+1),1),e("td",wt,c(l.channel_code),1),e("td",kt,[e("div",Vt,[l.product&&l.product.thumbnail?(o(),r("img",{key:0,class:"h-24 w-24 md:h-20 md:w-20 rounded-full",src:l.product.thumbnail.full_url,alt:""},null,8,St)):n("",!0)])]),e("td",Pt,[l.product.code?(o(),r("span",Ct,c(l.product.code),1)):n("",!0),l.product.name?(o(),r("span",qt,c(l.product.name),1)):n("",!0)]),e("td",Ot,[l.is_active==1?(o(),r("span",jt," Active ")):n("",!0),l.is_active==0?(o(),r("span",Mt," Paused ")):n("",!0)]),e("td",Nt,c(l.amount.toLocaleString(void 0,{minimumFractionDigits:i.deliveryProductMapping.data.operator.country.is_currency_exponent_hidden?0:i.deliveryProductMapping.data.operator.country.currency_exponent,maximumFractionDigits:i.deliveryProductMapping.data.operator.country.is_currency_exponent_hidden?0:i.deliveryProductMapping.data.operator.country.currency_exponent})),1),e("td",Bt,c(l.sub_category_json.name),1),e("td",$t,[d(x,{class:"bg-gray-300 hover:bg-gray-400 text-black flex space-x-1",onClick:b(h=>ie(l),["prevent"])},{default:u(()=>[d(v(Ve),{class:"w-3 h-3"}),Dt]),_:2},1032,["onClick"])])],2))),128)),!i.deliveryProductMapping.data.deliveryProductMappingItems||!i.deliveryProductMapping.data.deliveryProductMappingItems.length?(o(),r("tr",At,Ut)):n("",!0)])])])])])])):n("",!0),Tt,t.value.id?(o(),r("div",{key:6,class:y([t.value.promo_label?"sm:col-span-6":"sm:col-span-5"])},[Qt,d(C,{modelValue:t.value.promo_label,"onUpdate:modelValue":a[8]||(a[8]=l=>t.value.promo_label=l),options:E.value,trackBy:"id",valueProp:"id",label:"name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:ae},null,8,["modelValue","options"])],2)):n("",!0),t.value.promo_label?(o(),r("div",Rt,[d(g,{modelValue:t.value.bundle_name,"onUpdate:modelValue":a[9]||(a[9]=l=>t.value.bundle_name=l),error:t.value.errors.bundle_name,placeholderStr:"Name"},{default:u(()=>[p(" Template Name ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.promo_label?(o(),r("div",Et,[d(g,{modelValue:t.value.total_qty,"onUpdate:modelValue":a[10]||(a[10]=l=>t.value.total_qty=l),error:t.value.errors.total_qty,placeholderStr:"Total Qty"},{default:u(()=>[p(" Total Qty ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.promo_label?(o(),r("div",It,[d(g,{modelValue:t.value.promo_value,"onUpdate:modelValue":a[11]||(a[11]=l=>t.value.promo_value=l),error:t.value.errors.promo_value,placeholderStr:"Value"},{default:u(()=>[p(" Value (final price OR value off OR percentage) ")]),_:1},8,["modelValue","error"])])):n("",!0),e("span",Lt,c(K.value),1),t.value.promo_label?(o(),r("span",Kt,[zt,d(C,{modelValue:t.value.delivery_product_mapping_item_id,"onUpdate:modelValue":a[12]||(a[12]=l=>t.value.delivery_product_mapping_item_id=l),options:D.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1",onSelected:de},null,8,["modelValue","options"])])):n("",!0),t.value.promo_label&&!k.value?(o(),r("div",Zt,[d(g,{modelValue:t.value.qty,"onUpdate:modelValue":a[13]||(a[13]=l=>t.value.qty=l),error:t.value.errors.qty,placeholderStr:"Qty"},{default:u(()=>[p(" Qty ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.product_mapping_id?(o(),r("div",Gt,[t.value.promo_label?(o(),f(x,{key:0,type:"button",onClick:a[14]||(a[14]=b(l=>le(),["prevent"])),class:y(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[Z.value?"":"opacity-50 cursor-not-allowed"]]),disabled:!Z.value},{default:u(()=>[d(v(Q),{class:"w-4 h-4"}),Ht]),_:1},8,["class","disabled"])):n("",!0)])):n("",!0),V.value?(o(),r("span",Jt,c(V.value),1)):n("",!0),t.value.product_mapping_id?(o(),r("div",Wt,[e("ul",Xt,[(o(!0),r(P,null,$(m.value,(l,w)=>(o(),r("li",Yt,[e("div",el,[e("span",tl,c(w+1),1),e("img",{class:"h-12 w-12 flex-none rounded-full bg-gray-50",src:l.delivery_product_mapping_item_id.img_url,alt:""},null,8,ll),e("div",sl,[e("p",ol,[al,p(" "+c(l.delivery_product_mapping_item_id.full_name),1)]),e("p",rl," Quantity: "+c(l.qty),1)])]),e("div",nl,[d(x,{onClick:b(h=>ce(w),["prevent"]),class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white"},{default:u(()=>[d(v(J),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])]))),256)),m.value&&m.value.length>0?(o(),r("li",dl,[e("div",il,[e("span",ul," Total Amount: "+c(z.value.toLocaleString(void 0,{minimumFractionDigits:i.deliveryProductMapping.data.operator.country.is_currency_exponent_hidden?0:i.deliveryProductMapping.data.operator.country.currency_exponent,maximumFractionDigits:i.deliveryProductMapping.data.operator.country.is_currency_exponent_hidden?0:i.deliveryProductMapping.data.operator.country.currency_exponent})),1)])])):n("",!0)])])):n("",!0),t.value.product_mapping_id?(o(),r("div",cl,[t.value.promo_label?(o(),f(x,{key:0,type:"button",onClick:a[15]||(a[15]=b(l=>pe(),["prevent"])),class:y(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-1",[G.value?"":"opacity-50 cursor-not-allowed"]]),disabled:!G.value},{default:u(()=>[d(v(T),{class:"w-4 h-4"}),pl]),_:1},8,["class","disabled"])):n("",!0)])):n("",!0),t.value.product_mapping_id?(o(),r("div",ml,[e("div",_l,[e("div",vl,[e("div",yl,[e("table",fl,[e("thead",xl,[e("tr",gl,[d(q,null,{default:u(()=>[p(" # ")]),_:1}),d(q,null,{default:u(()=>[p(" Bundle Name ")]),_:1}),d(q,null,{default:u(()=>[p(" Type ")]),_:1}),d(q,null,{default:u(()=>[p(" (Channel) Item x Qty ")]),_:1}),d(q,null,{default:u(()=>[p(" Amount ")]),_:1})])]),hl])])])])])):n("",!0),t.value.product_mapping_id?(o(),r("div",bl,kl)):n("",!0),t.value.product_mapping_id?(o(),r("div",Vl,[Sl,d(C,{modelValue:t.value.vend_id,"onUpdate:modelValue":a[16]||(a[16]=l=>t.value.vend_id=l),options:F.value,trackBy:"id",valueProp:"id",label:"full_name",placeholder:"Select","open-direction":"bottom",class:"mt-1"},null,8,["modelValue","options"]),t.value.errors.vend_id?(o(),r("div",Pl,c(t.value.errors.vend_id),1)):n("",!0)])):n("",!0),t.value.product_mapping_id?(o(),r("div",Cl,[d(g,{modelValue:t.value.platform_ref_id,"onUpdate:modelValue":a[17]||(a[17]=l=>t.value.platform_ref_id=l),error:t.value.errors.platform_ref_id,placeholderStr:"Platform ID"},{default:u(()=>[p(" Platform ID (Store ID) ")]),_:1},8,["modelValue","error"])])):n("",!0),t.value.product_mapping_id?(o(),r("div",ql,[d(x,{type:"button",onClick:a[18]||(a[18]=b(l=>oe(t.value.vend_id.id),["prevent"])),class:y(["bg-green-500 hover:bg-green-600 text-white flex space-x-1 sm:mt-6",[t.value.vend_id?"":"opacity-50 cursor-not-allowed"]]),disabled:!t.value.vend_id},{default:u(()=>[d(v(Q),{class:"w-4 h-4"}),Ol]),_:1},8,["class","disabled"])])):n("",!0),t.value.product_mapping_id?(o(),r("div",jl,[e("div",Ml,[e("div",Nl,[e("div",Bl,[e("table",$l,[Dl,e("tbody",Al,[(o(!0),r(P,null,$(i.deliveryProductMapping.data.deliveryProductMappingVends,(l,w)=>(o(),r("tr",{key:l.id,class:y(w%2===0?void 0:"bg-gray-50")},[e("td",Fl,c(w+1),1),e("td",Ul,[p(c(l.vend.code)+" ",1),Tl,p(" ("+c(l.platform_ref_id)+") ",1)]),e("td",Ql,[l.vend.latestVendBinding&&l.vend.latestVendBinding.customer?(o(),r("span",Rl,[p(c(l.vend.latestVendBinding.customer.code)+" ",1),El,p(" "+c(l.vend.latestVendBinding.customer.name),1)])):(o(),r("span",Il,c(l.vend.name),1))]),e("td",Ll,[l.deliveryProductMappingVendChannels?(o(),r("ul",{key:0,class:"sm:grid sm:grid-cols-[105px_minmax(110px,_1fr)_100px] hover:cursor-pointer",onClick:h=>re(l)},[(o(!0),r(P,null,$(l.deliveryProductMappingVendChannels,(h,N)=>(o(),r("li",{class:y(["quick-look",[N>0&&String(h.vend_channel_code)[0]!==String(l.deliveryProductMappingVendChannels[N-1].vend_channel_code)[0]?"col-start-1":""]])},[e("span",{class:y([[N>0&&String(h.vend_channel_code)[0]!==String(l.deliveryProductMappingVendChannels[N-1].vend_channel_code)[0]?"border-t-4 pt-1":""],"flex space-x-2"])},[e("span",null," #"+c(h.vend_channel_code),1),h.is_active==1?(o(),f(v(T),{key:0,class:"w-4 h-4 fill-green-500"})):(o(),f(v(W),{key:1,class:"w-4 h-4 fill-red-500"}))],2)],2))),256))],8,Kl)):n("",!0)]),e("td",zl,[l.is_active==1?(o(),r("span",Zl," Operating ")):n("",!0),l.is_active==0?(o(),r("span",Gl," Paused ")):n("",!0)]),e("td",Hl,[e("div",Jl,[d(x,{class:y(["flex space-x-1",[l.is_active?"bg-yellow-300 hover:bg-yellow-400 text-black":"bg-green-500 hover:bg-green-600 text-white"]]),onClick:b(h=>_e(l),["prevent"])},{default:u(()=>[l.is_active?(o(),f(v(W),{key:0,class:"w-3 h-3"})):(o(),f(v(Se),{key:1,class:"w-3 h-3"})),l.is_active?(o(),r("span",Wl," Pause VM ")):(o(),r("span",Xl," Resume VM "))]),_:2},1032,["class","onClick"]),v(te).includes("superadmin")?(o(),f(x,{key:0,class:"flex space-x-1 bg-red-500 hover:bg-red-600 text-white",onClick:b(h=>ve(l.id),["prevent"])},{default:u(()=>[l.is_active?(o(),f(v(J),{key:0,class:"w-3 h-3"})):n("",!0),Yl]),_:2},1032,["onClick"])):n("",!0)])])],2))),128)),i.deliveryProductMapping.data.deliveryProductMappingVends.length?n("",!0):(o(),r("tr",es,ls))])])])])])])):n("",!0)])],40,Ne)])])])]),j.value?(o(),f(be,{key:0,vend:L.value,deliveryProductMapping:i.deliveryProductMapping.data,showModal:j.value,onModalClose:ne},null,8,["vend","deliveryProductMapping","showModal"])):n("",!0),M.value?(o(),f(we,{key:1,deliveryProductMapping:i.deliveryProductMapping.data,deliveryProductMappingItemObj:I.value,showModal:M.value,onModalClose:ue},null,8,["deliveryProductMapping","deliveryProductMappingItemObj","showModal"])):n("",!0)]),_:1})],64))}};export{Ss as default};
